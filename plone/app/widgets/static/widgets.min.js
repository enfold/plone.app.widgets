/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.16 Copyright (c) 2010-2015, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */

/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */

// Patterns
//
// Author: Rok Garbas
// Contact: rok@garbas.si
// Version: 1.0
// Depends: jquery.js
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/*
Copyright 2012 Igor Vaynberg

Version: 3.4.5 Timestamp: Mon Nov  4 08:22:42 PST 2013

This software is licensed under the Apache License, Version 2.0 (the "Apache License") or the GNU
General Public License version 2 (the "GPL License"). You may choose either license to govern your
use of this software only upon the condition that you accept all of the terms of either the Apache
License or the GPL License.

You may obtain a copy of the Apache License and the GPL License at:

    http://www.apache.org/licenses/LICENSE-2.0
    http://www.gnu.org/licenses/gpl-2.0.html

Unless required by applicable law or agreed to in writing, software distributed under the
Apache License or the GPL Licesnse is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the Apache License and the GPL License for
the specific language governing permissions and limitations under the Apache License and the GPL License.
*/

/*! 
 * jquery.event.drag - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */

/*! 
 * jquery.event.drop - v 2.2
 * Copyright (c) 2010 Three Dub Media - http://threedubmedia.com
 * Open Source MIT License - http://threedubmedia.com/code/license
 */

/* Select2 pattern.
 *
 * Options:
 *    separator(string): Analagous to the separator constructor parameter from Select2. Defines a custom separator used to distinguish the tag values. Ex: a value of ";" will allow tags and initialValues to have values separated by ";" instead of the default ",". (',')
 *    initialValues(string): This can be a json encoded string, or a list of id:text values. Ex: Red:The Color Red,Orange:The Color Orange  This is used inside the initSelection method, if AJAX options are NOT set. (null)
 *    vocabularyUrl(string): This is a URL to a JSON-formatted file used to populate the list (null)
 *    OTHER OPTIONS(): For more options on select2 go to http://ivaynberg.github.io/select2/#documentation ()
 *
 * Documentation:
 *    # Autocomplete with search (single select)
 *
 *    {{ example-1 }}
 *
 *    # Tagging
 *
 *    {{ example-2 }}
 *
 *    # Orderable tags
 *
 *    {{ example-3 }}
 *
 *    # AJAX tags
 *
 *    {{ example-4 }}
 *
 * Example: example-1
 *    <select class="pat-select2" data-pat-select2="width:20em">
 *      <option value="Acholi">Acholi</option>
 *      <option value="Afrikaans">Afrikaans</option>
 *      <option value="Akan">Akan</option>
 *      <option value="Albanian">Albanian</option>
 *      <option value="Amharic">Amharic</option>
 *      <option value="Arabic">Arabic</option>
 *      <option value="Ashante">Ashante</option>
 *      <option value="Asl">Asl</option>
 *      <option value="Assyrian">Assyrian</option>
 *      <option value="Azerbaijani">Azerbaijani</option>
 *      <option value="Azeri">Azeri</option>
 *    </select>
 *
 * Example: example-2
 *    <input type="text" class="pat-select2"
 *           data-pat-select2="separator:,;
 *                             tags:Red,Yellow,Green,Orange,Purple;
 *                             width:20em;
 *                             initialValues:Red:The Color Red,Orange:The Color Orange"
 *           value="Red,Orange"/>
 *
 * Example: example-3
 *    <input type="text" class="pat-select2"
 *           data-pat-select2="orderable:true;
 *                             tags:Red,Yellow,Green;
 *                             width:20em" />
 * Example: example-4
 *    <input type="hidden" class="pat-select2"
 *           data-pat-select2="placeholder:Search for a Value;
 *                             vocabularyUrl:select2-test.json;
 *                             width:20em" />
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/*!
 * pickadate.js v3.4.0, 2014/02/15
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */

/*!
 * Date picker for pickadate.js v3.4.0
 * http://amsul.github.io/pickadate.js/date.htm
 */

/*!
 * Time picker for pickadate.js v3.4.0
 * http://amsul.github.io/pickadate.js/time.htm
 */

/* PickADate pattern.
 *
 * Options:
 *    date(object): Date widget options described here. If false is selected date picker wont be shown. ({{selectYears: true, selectMonths: true })
 *    time(object): Time widget options described here. If false is selected time picker wont be shown. ({})
 *    separator(string): Separator between date and time if both are enabled.
 *    (' ')
 *    classClearName(string): Class name of element that is generated by pattern. ('pattern-pickadate-clear')
 *    classDateName(string): Class applied to date input. ('pattern-pickadate-date')
 *    classDateWrapperName(string): Class applied to extra wrapper div around date input. ('pattern-pickadate-date-wrapper')
 *    classSeparatorName(string): Class applied to separator. ('pattern-pickadate-separator')
 *    classTimeName(string): Class applied to time input. ('pattern-pickadate-time')
 *    classTimeWrapperName(string): Class applied to wrapper div around time input. ('pattern-pickadate-time-wrapper')
 *    classTimezoneName(string): Class applied to timezone input. ('pattern-pickadate-timezone')
 *    classTimezoneWrapperName(string): Class applied to wrapper div around timezone input. ('pattern-pickadate-timezone-wrapper')
 *    classWrapperName(string): Class name of element that is generated by pattern. ('pattern-pickadate-wrapper')
 *
 * Documentation:
 *    # Date and Time
 *
 *    {{ example-1 }}
 *
 *    # Date and Time with initial data
 *
 *    {{ example-2 }}
 *
 *    # Date
 *
 *    {{ example-3 }}
 *
 *    # Date with initial date
 *
 *    {{ example-4 }}
 *
 *    # Time
 *
 *    {{ example-5 }}
 *
 *    # Time with initial time
 *
 *    {{ example-6 }}
 *
 *    # Date and time with timezone
 *
 *    {{ example-7 }}
 *
 *    # Date and time with timezone and default value
 *
 *    {{ example-8 }}
 *
 *    # Date and time with one timezone
 *
 *    {{ example-9 }}
 *
 * Example: example-1
 *    <input class="pat-pickadate"/>
 *
 * Example: example-2
 *    <input class="pat-pickadate" value="2010-12-31 00:45" />
 *
 * Example: example-3
 *    <input class="pat-pickadate" data-pat-pickadate="time:false"/>
 *
 * Example: example-4
 *    <input class="pat-pickadate" value="2010-12-31" data-pat-pickadate="time:false"/>
 *
 * Example: example-5
 *    <input class="pat-pickadate" data-pat-pickadate="date:false"/>
 *
 * Example: example-6
 *    <input class="pat-pickadate" value="00:00" data-pat-pickadate="date:false"/>
 *
 * Example: example-7
 *    <input class="pat-pickadate" data-pat-pickadate='{"timezone": {"data": [{"id":"Europe/Berlin","text":"Europe/Berlin"},{"id":"Europe/Vienna","text":"Europe/Vienna"}]}}'/>
 *
 * Example: example-8
 *    <input class="pat-pickadate" data-pat-pickadate='{"timezone": {"default": "Europe/Vienna", "data": [{"id":"Europe/Berlin","text":"Europe/Berlin"},{"id":"Europe/Vienna","text":"Europe/Vienna"}]}}'/>
 *
 * Example: example-9
 *    <input class="pat-pickadate" data-pat-pickadate='{"timezone": {"data": [{"id":"Europe/Berlin","text":"Europe/Berlin"}]}}'/>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash underscore exports="amd,commonjs,global,node" -o ./dist/lodash.underscore.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

// utils.
//
// Author: Nathan Van Gheem
// Contact: nathan@vangheem.us
// Version: 1.0
// Depends: jquery.js
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/*
Copyright 2013 Marco Braak

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
 */

/*
  Copyright 2013 Marco Braak
  
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
  
      http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
   */

/* Tree pattern.
 *
 * Options: data(jSON): load data structure directly into tree (undefined)
 * dataUrl(jSON): Load data from remote url (undefined) autoOpen(boolean): auto
 * open tree contents (false) dragAndDrop(boolean): node drag and drop support
 * (false) selectable(boolean): if nodes can be selectable (true)
 * keyboardSupport(boolean): if keyboard naviation is allowed (true)
 *
 * Documentation: # JSON node data
 *
 *    {{ example-1 }}
 *
 *    # Remote data URL
 *
 *    {{ example-2 }}
 *
 *    # Drag and drop
 *
 *    {{ example-3 }}
 *
 * Example: example-1
 *    <div class="pat-tree"
 *         data-pat-tree='data:[
 *          { "label": "node1",
 *            "children": [
 *              { "label": "child1" },
 *              { "label": "child2" }
 *            ]
 *          },
 *          { "label": "node2",
 *            "children": [
 *              { "label": "child3" }
 *            ]
 *          }
 *        ];'> </div>
 *
 * Example: example-2
 *    <div class="pat-tree"
 *         data-pat-tree="dataUrl:/tests/json/fileTree.json;
 *                        autoOpen:true"></div>
 *
 * Example: example-3
 *    <div class="pat-tree"
 *         data-pat-tree="dataUrl:/tests/json/fileTree.json;
 *                        dragAndDrop: true;
 *                        autoOpen: true"></div>
 *
 * License: Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Related items pattern.
 *
 * Options:
 *    vocabularyUrl(string): This is a URL to a JSON-formatted file used to populate the list (null)
 *    attributes(array): This list is passed to the server during an AJAX request to specify the attributes which should be included on each item. (['UID', 'Title', 'Type', 'path'])
 *    basePath(string): If this is set the widget will start in "Browse" mode and will pass the path to the server to filter the results. ('/')
 *    breadCrumbTemplate(string): Template to use for a single item in the breadcrumbs. ('/<a href="<%= path %>"><%= text %></a>')
 *    breadCrumbTemplateSelector(string): Select an element from the DOM from which to grab the breadCrumbTemplate. (null)
 *    breadCrumbsTemplate(string): Template for element to which breadCrumbs will be appended. ('<span><span class="pattern-relateditems-path-label"><%= searchText %></span><a class="icon-home" href="/"></a><%= items %></span>')
 *    breadCrumbsTemplateSelector(string): Select an element from the DOM from which to grab the breadCrumbsTemplate. (null)
 *    cache(boolean): Whether or not results from the server should be
 *    cached. (true)
 *    closeOnSelect(boolean): Select2 option. Whether or not the drop down should be closed when an item is selected. (false)
 *    dropdownCssClass(string): Select2 option. CSS class to add to the drop down element. ('pattern-relateditems-dropdown')
 *    folderTypes(array): Types which should be considered browsable. (["Folder"])
 *    homeText(string): Text to display in the initial breadcrumb item. (home)
 *    maximumSelectionSize(integer): The maximum number of items that can be selected in a multi-select control. If this number is less than 1 selection is not limited. (-1)
 *    multiple(boolean): Do not change this option. (true)
 *    orderable(boolean): Whether or not items should be drag-and-drop sortable. (true)
 *    resultTemplate(string): Template for an item in the in the list of results. Refer to source for default. (Refer to source)
 *    resultTemplateSelector(string): Select an element from the DOM from which to grab the resultTemplate. (null)
 *    searchText(string): Text which will be inserted to the left of the
 *    path. (Search)
 *    searchAllText(string): Displays next to the path when the path is set to the root. (All)
 *    selectableTypes(array): If the value is null all types are selectable. Otherwise, provide a list of strings to match item types that are selectable. (null)
 *    selectionTemplate(string): Template for element that will be used to construct a selected item. (Refer to source)
 *    selectionTemplateSelector(string): Select an element from the DOM from which to grab the selectionTemplate. (null)
 *    separator(string): Select2 option. String which separates multiple items. (',')
 *    tokenSeparators(array): Select2 option, refer to select2 documentation.
 *    ([",", " "])
 *    width(string): Specify a width for the widget. ('300px')
 *
 * Documentation:
 *    The Related Items pattern is based on Select2 so many of the same options will work here as well.
 *
 *    # Default
 *
 *    {{ example-1 }}
 *
 *    # Existing values, some bad
 *
 *    {{ example-2 }}
 *
 *    # Selectable Types
 *
 *    {{ example-3 }}
 *
 *    # Select a single item
 *
 *    {{ example-4 }}
 *
 * Example: example-1
 *    <input type="text" class="pat-relateditems"
 *           data-pat-relateditems="width:30em;
 *                                  vocabularyUrl:/relateditems-test.json" />
 *
 * Example: example-2
 *    <input type="text" class="pat-relateditems"
 *           value="asdf1234gsad,sdfbsfdh345,asdlfkjasdlfkjasdf,kokpoius98"
 *           data-pat-relateditems="width:30em; vocabularyUrl:/relateditems-test.json" />
 *
 * Example: example-3
 *    <input type="text" class="pat-relateditems"
             data-pat-relateditems='{"selectableTypes": ["Document"], "vocabularyUrl": "/relateditems-test.json"}' />
 *
 * Example: example-4
 *    <input type="text" class="pat-relateditems"
             data-pat-relateditems='{"selectableTypes": ["Document"], "vocabularyUrl": "/relateditems-test.json", "maximumSelectionSize": 1}' />
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Querystring pattern.
 *
 * Options:
 *    criteria(object): options to pass into criteria ({})
 *    indexOptionsUrl(string): URL to grab index option data from. Must contain "sortable_indexes" and "indexes" data in JSON object. (null)
 *    previewURL(string): URL used to pass in a plone.app.querystring-formatted HTTP querystring and get an HTML list of results ('portal_factory/@@querybuilder_html_results')
 *    previewCountURL(string): URL used to pass in a plone.app.querystring-formatted HTTP querystring and get an HTML string of the total number of records found with the query ('portal_factory/@@querybuildernumberofresults')
 *    sorttxt(string): Text to use to label the sort dropdown ('Sort On')
 *    reversetxt(string): Text to use to label the sort order checkbox ('Reversed Order')
 *    previewTitle(string): Title for the preview area ('Preview')
 *    previewDescription(string): Description for the preview area ('Preview of at most 10 items')
 *    classWrapperName(string): CSS class to apply to the wrapper element ('querystring-wrapper')
 *    classSortLabelName(string): CSS class to apply to the sort on label ('querystring-sort-label')
 *    classSortReverseName(string): CSS class to apply to the sort order label and checkbox container ('querystring-sortreverse')
 *    classSortReverseLabelName(string): CSS class to apply to the sort order label ('querystring-sortreverse-label')
 *    classPreviewCountWrapperName(string): TODO ('querystring-previewcount-wrapper')
 *    classPreviewResultsWrapperName(string): CSS class to apply to the results wrapper ('querystring-previewresults-wrapper')
 *    classPreviewWrapperName(string): CSS class to apply to the preview wrapper ('querystring-preview-wrapper')
 *    classPreviewName(string): CSS class to apply to the preview pane ('querystring-preview')
 *    classPreviewTitleName(string): CSS class to apply to the preview title ('querystring-preview-title')
 *    classPreviewDescriptionName(string): CSS class to apply to the preview description ('querystring-preview-description')
 *    classSortWrapperName(string): CSS class to apply to the sort order and sort on wrapper ('querystring-sort-wrapper')
 *    showPreviews(boolean): Should previews be shown? (true)
 *
 * Documentation:
 *    # Default
 *
 *    {{ example-1 }}
 *
 *    # Without Previews
 *
 *    {{ example-2 }}
 *
 * Example: example-1
 *    <input class="pat-querystring"
 *           data-pat-querystring="indexOptionsUrl: /tests/json/queryStringCriteria.json" />
 *
 * Example: example-2
 *    <input class="pat-querystring"
 *           data-pat-querystring="indexOptionsUrl: /tests/json/queryStringCriteria.json;
 *                                 showPreviews: false;" />
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/* Backdrop pattern.
 *
 * Options:
 *    zIndex(integer): z-index of backdrop element. (null)
 *    opacity(float): opacity level of backdrop element. (0.8)
 *    className(string): class name of backdrop element. ('backdrop')
 *    classActiveName(string): class name when backdrop is active. ('backdrop-active')
 *    closeOnEsc(boolean): should backdrop close when ESC key is pressed. (true)
 *    closeOnClick(boolean): should backdrop close when clicked on it. (true)
 *
 * Documentation:
 *    # TODO: we need example or this is not pattern :)
 *
 * Example: example-1
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

// pattern router.
//
// Author: Ryan Foster
// Contact: ryan@rynamic.com
// Version: 1.0
// Depends: jquery.js
//
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/*!
 * jQuery Form Plugin
 * version: 3.46.0-2013.11.21
 * Requires jQuery v1.5 or later
 * Copyright (c) 2013 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */

/* Modal pattern.
 *
 * Options:
 *    height(string): Set the height of the modal, for example: 250px ('')
 *    width(string): Set the width of the modal, for example: 80% or 500px. ('')
 *    margin(function or integer): A function, Integer or String which will be used to set the margin of the modal in pixels. If a function is passed it must return an Integer. (20)
 *    position(string): Position the modal relative to the window with the format: "<horizontal> <vertical>" -- allowed values: top, bottom, left, right, center, middle. ('center middle')
 *    triggers(array): Add event listeners to elements on the page which will open the modal when triggered. Pass an Array of strings with the format ["&lt;event&gt; &lt;selector&gt;"] or ["&lt;event&gt;"]. For example, ["click .someButton"]. If you pass in only an event such as, ["change"], the event listener will be added to the element on which the modal was initiated, usually a link or button. ([])
 *    title(string): A string to place in the modal header. If title is provided, titleSelector is not used. (null)
 *    titleSelector(string): Selector for an element to extract from the content provided to the modal and place in the modal header. ('h1:first')
 *    content(string): Selector for an element within the content provided to the modal to use as the modal body. ('#content')
 *    prependContent(string): Selector for elements within the content provided to the modal which will be collected and inserted, by default above, the modal content. This is useful for extracting things like alerts or status messages on forms and displaying them to the user after an AJAX response. ('.portalMessage')
 *    backdrop(string): Selector for the element upon which the Backdrop pattern should be initiated. The Backdrop is a full width mask that will be apply above the content behind the modal which is useful for highlighting the modal dialog to the user. ('body')
 *    backdropOptions(object): Look at options at backdrop pattern. ({ zIndex: "1040", opacity: "0.8", className: "backdrop", classActiveName: "backdrop-active", closeOnEsc: true, closeOnClick: true })
 *    buttons(string): Selector for matching elements, usually buttons, inputs or links, from the modal content to place in the modal footer. The original elements in the content will be hidden. ('.formControls > input[type="submit"]')
 *    automaticallyAddButtonActions(boolean): Automatically create actions for elements matched with the buttons selector. They will use the options provided in actionOptions. (true)
 *    loadLinksWithinModal(boolean): Automatically load links inside of the modal using AJAX. (true)
 *    actions(object): A hash of selector to options. Where options can include any of the defaults from actionOptions. Allows for the binding of events to elements in the content and provides options for handling ajax requests and displaying them in the modal. ({})
 *
 *
 * Documentation:
 *    # Example
 *
 *    {{ example-basic }}
 *
 *    {{ example-long }}
 *
 *    {{ example-tinymce }}
 *
 *
 * Example: example-basic
 *    <a href="#modal1" class="btn btn-large btn-primary pat-modal"
 *                      data-pat-modal="width: 400">Modal basic</a>
 *    <div id="modal1" style="display: none">
 *      <h1>Basic modal!</h1>
 *      <p>Indeed. Whoa whoa whoa whoa. Wait.</p>
 *    </div>
 *
 * Example: example-long
 *    <a href="#modal2" class="btn btn-large btn-primary pat-modal"
 *                      data-pat-modal="width: 500">Modal long scrolling</a>
 *    <div id="modal2" style="display: none">
 *      <h1>Basic with scrolling</h1>
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *      <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
 *      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</p>
 *    </div>
 *
 *
 * Example: example-tinymce
 *    <a href="#modaltinymce" class="btn btn-large btn-primary pat-modal"
 *       data-pat-modal="height: 600px;
 *                       width: 80%">
 *       Modal with TinyMCE</a>
 *    <div id="modaltinymce" style="display:none">
 *      <textarea class="pat-tinymce"></textarea>
 *    </div>
 *
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/**
 * EventUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

// If IE is used, use the trick by Diego Perini licensed under MIT by request to the author.

/**
 * Sizzle.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */

/**
 * Sizzle CSS Selector Engine v@VERSION
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: @DATE
 */

/**
 * Tools.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Env.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * DomQuery.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Styles.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * TreeWalker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Range.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Entities.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * StyleSheetLoader.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * DOMUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ScriptLoader.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * AddOnManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * RangeUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * NodeChange.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Node.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Schema.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * SaxParser.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * DomParser.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Writer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Serializer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * TridentSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * VK.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ControlSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * BookmarkManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Selection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ElementUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Preview.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Formatter.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * UndoManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * EnterKey.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ForceBlocks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * EditorCommands.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * URI.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Class.js
 *
 * Copyright 2003-2012, Moxiecode Systems AB, All rights reserved.
 */

/**
 * EventDispatcher.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Selector.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Collection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Control.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Factory.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * KeyboardNavigation.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Container.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * DragHelper.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Scrollable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Panel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Movable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Resizable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * FloatPanel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Window.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * MessageBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * WindowManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Quirks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */

/**
 * Observable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * EditorObservable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Shortcuts.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Editor.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * I18n.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * FocusManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * EditorManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * LegacyInput.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * XHR.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * JSON.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * JSONRequest.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * JSONP.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * LocalStorage.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Compat.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Layout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * AbsoluteLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Tooltip.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Widget.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Button.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ButtonGroup.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Checkbox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ComboBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ColorBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * PanelButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ColorButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Color.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ColorPicker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Path.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ElementPath.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * FormItem.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Form.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * FieldSet.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * FilePicker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * FitLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * FlexLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * FlowLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * FormatControls.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * GridLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Iframe.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Label.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Toolbar.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * MenuBar.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * MenuButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ListBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * MenuItem.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Menu.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Radio.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * ResizeHandle.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Spacer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * SplitButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * StackLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * TabPanel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * TextBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Throbber.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/* Autotoc pattern.
 *
 * Options:
 *    IDPrefix(string): Prefix used to generate ID. ('autotoc-item-')
 *    classActiveName(string): Class used for active level. ('active')
 *    classLevelPrefixName(string): Class prefix used for the TOC levels. ('autotoc-level-')
 *    classSectionName(string): Class used for section in TOC. ('autotoc-section')
 *    classTOCName(string): Class used for the TOC. ('autotoc-nav')
 *    levels(string): Selectors used to find levels. ('h1,h2,h3')
 *    scrollDuration(string): Speed of scrolling. ('slow')
 *    scrollEasing(string): Easing to use while scrolling. ('swing')
 *    section(string): Tag type to use for TOC. ('section')
 *
 * Documentation:
 *    # TOC
 *    {{ example-1 }}
 *
 *    # Tabs
 *    {{ example-2-tabs }}
 *
 * Example: example-1
 *    <div class="pat-autotoc"
 *          data-pat-autotoc="scrollDuration:slow;levels:h4,h5,h6;">
 *      <h4>Title 1</h4>
 *      <p>Mr. Zuckerkorn, you've been warned about touching. You said
 *         spanking. It walked on my pillow! How about a turtle? I've always
 *         loved those leathery little snappy faces.</p>
 *      <h5>Title 1.1</h5>
 *      <p>Ah coodle doodle do Caw ca caw, caw ca caw. Butterscotch!</p>
 *      <h6>Title 1.1.1</h6>
 *      <p>Want a lick? Okay, Lindsay, are you forgetting that I was
 *         a professional twice over - an analyst and a therapist.</p>
 *      <h4>Title 2</h4>
 *      <p>You boys know how to shovel coal? Don't worry, these young
 *      beauties have been nowhere near the bananas. I thought the two of
 *      us could talk man-on-man.</p>
 *    </div>
 *
 * Example: example-2-tabs
 *    <div class="pat-autotoc autotabs"
 *          data-pat-autotoc="section:fieldset;levels:legend;">
 *        <fieldset>
 *          <legend>Tab 1</legend>
 *          <div>
 *            Lorem ipsum dolor sit amet, ex nam odio ceteros fastidii,
 *            id porro lorem pro, homero facilisis in cum.
 *            At doming voluptua indoctum mel, natum noster similique ne mel.
 *          </div>
 *        </fieldset>
 *        <fieldset>
 *          <legend>Tab 2</legend>
 *          <div>
 *            Reque repudiare eum et. Prompta expetendis percipitur eu eam,
 *            et graece mandamus pro, eu vim harum audire tractatos.
 *            Ad perpetua salutandi mea, soluta delicata aliquando eam ne.
 *            Qui nostrum lucilius perpetua ut, eum suas stet oblique ut.
 *          </div>
 *        </fieldset>
 *        <fieldset>
 *          <legend>Tab 3</legend>
 *          <div>
 *            Vis mazim harum deterruisset ex, duo nemore nostro civibus ad,
 *            eros vituperata id cum. Vim at erat solet soleat,
 *            eum et iuvaret luptatum, pro an esse dolorum maiestatis.
 *          </div>
 *        </fieldset>
 *    </div>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*
#
# More info at [www.dropzonejs.com](http://www.dropzonejs.com)
# 
# Copyright (c) 2012, Matias Meno  
# 
# Permission is hereby granted, free of charge, to any person obtaining a copy
# of this software and associated documentation files (the "Software"), to deal
# in the Software without restriction, including without limitation the rights
# to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
# copies of the Software, and to permit persons to whom the Software is
# furnished to do so, subject to the following conditions:
# 
# The above copyright notice and this permission notice shall be included in
# all copies or substantial portions of the Software.
# 
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
# IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
# AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
# THE SOFTWARE.
#
*/

/* Upload pattern.
 *
 * Options:
 *    showTitle(boolean): show/hide the h1 title (true)
 *    url(string): If not used with a form, this option must provide the URL to submit to or baseUrl with relativePath needs to be used (null)
 *    baseUrl(string): to be used in conjunction with relativePath to generate submission urls based on related items (null)
 *    relativePath(string): again, to be used with baseUrl to create upload url (null)
 *    initialFolder(string): UID of initial folder related items widget should have selected (null)
 *    currentPath(string): Current path related items is starting with (null)
 *    clickable(boolean): If you can click on container to also upload (false)
 *    className(string): value for class attribute in the form element ('upload')
 *    paramName(string): value for name attribute in the file input element ('file')
 *    ajaxUpload(boolean): true or false for letting the widget upload the files via ajax. If false the form will act like a normal form. (true)
 *    wrap(boolean): true or false for wrapping this element using the value of wrapperTemplate. (false)
 *    wrapperTemplate(string): HTML template for wrapping around with this element. ('<div class="upload-container"/>')
 *    resultTemplate(string): HTML template for the element that will contain file information. ('<div class="dz-notice"><p>Drop files here...</p></div><div class="upload-previews"/>')
 *    autoCleanResults(boolean): condition value for the file preview in div element to fadeout after file upload is completed. (true)
 *    previewsContainer(selector): JavaScript selector for file preview in div element. (.upload-previews)
 *    container(selector): JavaScript selector for where to put upload stuff into in case of form. If not provided it will be place before the first submit button. ('')
 *    relatedItems(object): Related items pattern options. Will only use only if relativePath is used to use correct upload destination ({ attributes: ["UID", "Title", "Description", "getURL", "Type", "path", "ModificationDate"], batchSize: 20, basePath: "/", vocabularyUrl: null, width: 500, maximumSelectionSize: 1, placeholder: "Search for item on site..." })
 *
 * Documentation:
 *
 *    # On a div element
 *
 *    {{ example-1 }}
 *
 * Example: example-1
 *    <div class="pat-upload" data-pat-upload='{"url": "/upload",
 *                                              "relatedItems": {
 *                                                  "vocabularyUrl": "/relateditems-test.json"
 *                                              }}'>
 *      <div>
 *        <p>Something here that is useful</p>
 *        <p>Something else here that is useful</p>
 *        <p>Another thing here that is useful</p>
 *      </div>
 *    </div>
 *
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

// Author: Nathan Van Gheem
// Contact: nathan@vangheem.us
// Version: 1.0
//
// Description:
//    TinyMCE pattern (for now its depening on Plone's integration)
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

/**
 * theme.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * plugin.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * plugin.js
 *
 * Copyright 2011, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * plugin.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * This plugin will force TinyMCE to produce deprecated legacy output such as font elements, u elements, align
 * attributes and so forth. There are a few cases where these old items might be needed for example in email applications or with Flash
 *
 * However you should NOT use this plugin if you are building some system that produces web contents such as a CMS. All these elements are
 * not apart of the newer specifications for HTML and XHTML.
 */

/**
 * Utils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Clipboard.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * WordFilter.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Quirks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Plugin.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * DomTextMatcher.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * TableGrid.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * CellSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * Dialogs.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/**
 * plugin.js
 *
 * Copyright 2012, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */

/* TinyMCE pattern.
 *
 * Options:
 *    relatedItems(object): Related items pattern options. ({ attributes: ["UID", "Title", "Description", "getURL", "Type", "path", "ModificationDate"], batchSize: 20, basePath: "/", vocabularyUrl: null, width: 500, maximumSelectionSize: 1, placeholder: "Search for item on site..." })
 *    upload(object): Upload pattern options. ({ attributes: look at upload pattern for getting the options list })
 *    text(object): Translation strings ({ insertBtn: "Insert", cancelBtn: "Cancel", insertHeading: "Insert link", title: "Title", internal: "Internal", external: "External", email: "Email", anchor: "Anchor", subject: "Subject" image: "Image", imageAlign: "Align", scale: "Size", alt: "Alternative Text", externalImage: "External Image URI"})
 *    scales(string): TODO: is this even used ('Listing (16x16):listing,Icon (32x32):icon,Tile (64x64):tile,Thumb (128x128):thumb,Mini (200x200):mini,Preview (400x400):preview,Large (768x768):large')
 *    targetList(array): TODO ([ {text: "Open in this window / frame", value: ""}, {text: "Open in new window", value: "_blank"}, {text: "Open in parent window / frame", value: "_parent"}, {text: "Open in top frame (replaces all frames)", value: "_top"}])
 * imageTypes(string): TODO ('Image')
 *    folderTypes(string): TODO ('Folder,Plone Site')
 *    linkableTypes(string): TODO ('Document,Event,File,Folder,Image,News Item,Topic')
 *    tiny(object): TODO ({ plugins: [ "advlist autolink lists charmap print preview anchor", "usearchreplace visualblocks code fullscreen autoresize", "insertdatetime media table contextmenu paste plonelink ploneimage" ], menubar: "edit table format tools view insert",
toolbar: "undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | unlink plonelink ploneimage", autoresize_max_height: 1500 })
 *    prependToUrl(string): Text to prepend to generated internal urls. ('')
 *    appendToUrl(string): Text to append to generated internal urls. ('')
 *    prependToScalePart(string): Text to prepend to generated image scale url part. ('/imagescale/')
 *    appendToScalePart(string): Text to append to generated image scale url part. ('')
 *    linkAttribute(string): Ajax response data attribute to use for url. ('path')
 *
 * Documentation:
 *    # Default
 *
 *    {{ example-1 }}
 *
 *    # With dropzone
 *
 *    {{ example-2 }}
 *
 * Example: example-1
 *    <form>
 *      <textarea class="pat-tinymce"
 *          data-pat-tinymce='{"relatedItems": {
 *                                "vocabularyUrl": "/relateditems-test.json"
 *                                }}'></textarea>
 *    </form>
 *
 * Example: example-2
 *    <form>
 *      <textarea class="pat-tinymce"
 *          data-pat-tinymce='{"relatedItems": {"vocabularyUrl": "/relateditems-test.json" },
 *                            {"upload": {"baseUrl": "/", relativePath: "upload"} } }'></textarea>
 *    </form>
 *
 * License:
 *    Copyright (C) 2010 Plone Foundation
 *
 *    This program is free software; you can redistribute it and/or modify it
 *    under the terms of the GNU General Public License as published by the
 *    Free Software Foundation; either version 2 of the License.
 *
 *    This program is distributed in the hope that it will be useful, but
 *    WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 *    Public License for more details.
 *
 *    You should have received a copy of the GNU General Public License along
 *    with this program; if not, write to the Free Software Foundation, Inc.,
 *    51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

// Author: Rok Garbas
// Contact: rok@garbas.si
// Version: 1.0
// Description:
//
// License:
//
// Copyright (C) 2010 Plone Foundation
//
// This program is free software; you can redistribute it and/or modify it
// under the terms of the GNU General Public License as published by the Free
// Software Foundation; either version 2 of the License.
//
// This program is distributed in the hope that it will be useful, but WITHOUT
// ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
// FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
// more details.
//
// You should have received a copy of the GNU General Public License along with
// this program; if not, write to the Free Software Foundation, Inc., 51
// Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
//

var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t=="object"&&t&&!isArray(t)&&!isFunction(t)&&!(t instanceof RegExp)?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function m(e){var t,n;for(t=0;t<e.length;t++){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===0||t==1&&e[2]===".."||e[t-1]==="..")continue;t>0&&(e.splice(t-1,2),t-=2)}}}function g(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,v,g=t&&t.split("/"),y=o.map,b=y&&y["*"];e&&(e=e.split("/"),l=e.length-1,o.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),e[0].charAt(0)==="."&&g&&(v=g.slice(0,g.length-1),e=v.concat(e)),m(e),e=e.join("/"));if(n&&y&&(g||b)){s=e.split("/");e:for(u=s.length;u>0;u-=1){f=s.slice(0,u).join("/");if(g)for(a=g.length;a>0;a-=1){i=getOwn(y,g.slice(0,a).join("/"));if(i){i=getOwn(i,f);if(i){c=i,h=u;break e}}}!p&&b&&getOwn(b,f)&&(p=getOwn(b,f),d=u)}!c&&p&&(c=p,h=d),c&&(s.splice(0,h,c),e=s.join("/"))}return r=getOwn(o.pkgs,e),r?r:e}function y(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),r.require.undef(e),r.makeRequire(null,{skipMap:!0})([e]),!0}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,p=!0,m="";return e||(p=!1,e="_@r"+(d+=1)),a=w(e),f=a[0],e=a[1],f&&(f=g(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?m=o.normalize(e,function(e){return g(e,l,i)}):m=e.indexOf("!")===-1?g(e,l,i):e:(m=g(e,l,i),a=w(m),f=a[0],m=a[1],n=!0,s=r.nameToUrl(m))),u=f&&!o&&!n?"_unnormalized"+(v+=1):"",{prefix:f,name:m,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:p,id:(f?f+"!"+m:m)+u}}function S(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function x(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=S(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function T(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function N(){globalDefQueue.length&&(apsp.apply(l,[l.length,0].concat(globalDefQueue)),globalDefQueue=[])}function C(e){delete u[e],delete a[e]}function k(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):k(o,t,n))}),n[r]=!0)}function L(){var e,n,i=o.waitSeconds*1e3,u=i&&r.startTime+i<(new Date).getTime(),f=[],l=[],c=!1,h=!0;if(t)return;t=!0,eachProp(a,function(e){var t=e.map,r=t.id;if(!e.enabled)return;t.isDefine||l.push(e);if(!e.error)if(!e.inited&&u)b(r)?(n=!0,c=!0):(f.push(r),y(r));else if(!e.inited&&e.fetched&&t.isDefine){c=!0;if(!t.prefix)return h=!1}});if(u&&f.length)return e=makeError("timeout","Load timeout for modules: "+f,null,f),e.contextName=r.contextName,T(e);h&&each(l,function(e){k(e,{},{})}),(!u||n)&&c&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,L()},50)),t=!1}function A(e){hasProp(c,e[0])||S(E(e[0],null,!0)).init(e[1],e[2])}function O(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function M(e){var t=e.currentTarget||e.srcElement;return O(t,r.onScriptLoad,"load","onreadystatechange"),O(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;N();while(l.length){e=l.shift();if(e[0]===null)return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));A(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p={},d=1,v=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?c[e.map.id]=e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(o.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&s===undefined&&(t=this.module,t?s=t.exports:this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",T(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),C(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=E(e.prefix);this.depMaps.push(n),x(n,"defined",bind(this,function(n){var i,s,a,f=getOwn(p,this.map.id),l=this.map.name,c=this.map.parentMap?this.map.parentMap.name:null,h=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(l=n.normalize(l,function(e){return g(e,c,!0)})||""),s=E(e.prefix+"!"+l,this.map.parentMap),x(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}if(f){this.map.url=r.nameToUrl(f),this.load();return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&C(e.map.id)}),T(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=E(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),S(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return T(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),h([u],i)}),n.load(e.name,h,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=E(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,x(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback?x(e,"error",bind(this,this.errback)):this.events.error&&x(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:E,nextTick:req.nextTick,onError:T,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(o[t]||(o[t]={}),mixin(o[t],e,!0,!0)):o[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),t[n]=e}),o.shim=t),e.packages&&each(e.packages,function(e){var t,n;e=typeof e=="string"?{name:e}:e,n=e.name,t=e.location,t&&(o.paths[n]=e.location),o.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=E(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?T(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=E(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:T(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),r.nextTick(function(){_(),p=S(E(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),L()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,E(e,t,!1,!0).id)},specified:function(e){return e=E(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){N();var n=E(e,t,!0),r=getOwn(u,e);y(e),delete c[e],delete h[n.url],delete f[e],eachReverse(l,function(t,n){t[0]===e&&l.splice(n,1)}),r&&(r.events.defined&&(f[e]=r.events),C(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&S(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;N();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);A(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(b(e))return;return T(makeError("nodefine","No define call for "+e,null,[e]))}A([e,i.deps||[],i.exportsFn])}L()},nameToUrl:function(e,t,n){var i,s,u,a,f,l,c,h=getOwn(o.pkgs,e);h&&(e=h),c=getOwn(p,e);if(c)return r.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))f=e+(t||"");else{i=o.paths,s=e.split("/");for(u=s.length;u>0;u-=1){a=s.slice(0,u).join("/"),l=getOwn(i,a);if(l){isArray(l)&&(l=l[0]),s.splice(0,u,l);break}}f=s.join("/"),f+=t||(/^data\:|\?/.test(f)||n?"":".js"),f=(f.charAt(0)==="/"||f.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+f}return o.urlArgs?f+((f.indexOf("?")===-1?"?":"&")+o.urlArgs):f},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=M(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=M(e);if(!b(t.id))return T(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.16",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&typeof navigator!="undefined"&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("node_modules/requirejs/require.js",function(){}),function(e,t){function _(e){var t=M[e]={};return v.each(e.split(y),function(e,n){t[n]=!0}),t}function H(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(P,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:D.test(r)?v.parseJSON(r):r}catch(s){}v.data(e,n,r)}else r=t}return r}function B(e){var t;for(t in e){if(t==="data"&&v.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function et(){return!1}function tt(){return!0}function ut(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function at(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ft(e,t,n){t=t||0;if(v.isFunction(t))return v.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return v.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=v.grep(e,function(e){return e.nodeType===1});if(it.test(t))return v.filter(t,r,!n);t=v.filter(t,r)}return v.grep(e,function(e,r){return v.inArray(e,t)>=0===n})}function lt(e){var t=ct.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function At(e,t){if(t.nodeType!==1||!v.hasData(e))return;var n,r,i,s=v._data(e),o=v._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)v.event.add(t,n,u[n][r])}o.data&&(o.data=v.extend({},o.data))}function Ot(e,t){var n;if(t.nodeType!==1)return;t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),n==="object"?(t.parentNode&&(t.outerHTML=e.outerHTML),v.support.html5Clone&&e.innerHTML&&!v.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):n==="input"&&Et.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):n==="option"?t.selected=e.defaultSelected:n==="input"||n==="textarea"?t.defaultValue=e.defaultValue:n==="script"&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(v.expando)}function Mt(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function _t(e){Et.test(e.type)&&(e.defaultChecked=e.checked)}function Qt(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Jt.length;while(i--){t=Jt[i]+n;if(t in e)return t}return r}function Gt(e,t){return e=t||e,v.css(e,"display")==="none"||!v.contains(e.ownerDocument,e)}function Yt(e,t){var n,r,i=[],s=0,o=e.length;for(;s<o;s++){n=e[s];if(!n.style)continue;i[s]=v._data(n,"olddisplay"),t?(!i[s]&&n.style.display==="none"&&(n.style.display=""),n.style.display===""&&Gt(n)&&(i[s]=v._data(n,"olddisplay",nn(n.nodeName)))):(r=Dt(n,"display"),!i[s]&&r!=="none"&&v._data(n,"olddisplay",r))}for(s=0;s<o;s++){n=e[s];if(!n.style)continue;if(!t||n.style.display==="none"||n.style.display==="")n.style.display=t?i[s]||"":"none"}return e}function Zt(e,t,n){var r=Rt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function en(e,t,n,r){var i=n===(r?"border":"content")?4:t==="width"?1:0,s=0;for(;i<4;i+=2)n==="margin"&&(s+=v.css(e,n+$t[i],!0)),r?(n==="content"&&(s-=parseFloat(Dt(e,"padding"+$t[i]))||0),n!=="margin"&&(s-=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0)):(s+=parseFloat(Dt(e,"padding"+$t[i]))||0,n!=="padding"&&(s+=parseFloat(Dt(e,"border"+$t[i]+"Width"))||0));return s}function tn(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=!0,s=v.support.boxSizing&&v.css(e,"boxSizing")==="border-box";if(r<=0||r==null){r=Dt(e,t);if(r<0||r==null)r=e.style[t];if(Ut.test(r))return r;i=s&&(v.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+en(e,t,n||(s?"border":"content"),i)+"px"}function nn(e){if(Wt[e])return Wt[e];var t=v("<"+e+">").appendTo(i.body),n=t.css("display");t.remove();if(n==="none"||n===""){Pt=i.body.appendChild(Pt||v.extend(i.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!Ht||!Pt.createElement)Ht=(Pt.contentWindow||Pt.contentDocument).document,Ht.write("<!doctype html><html><body>"),Ht.close();t=Ht.body.appendChild(Ht.createElement(e)),n=Dt(t,"display"),i.body.removeChild(Pt)}return Wt[e]=n,n}function fn(e,t,n,r){var i;if(v.isArray(t))v.each(t,function(t,i){n||sn.test(e)?r(e,i):fn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&v.type(t)==="object")for(i in t)fn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Cn(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i,s,o=t.toLowerCase().split(y),u=0,a=o.length;if(v.isFunction(n))for(;u<a;u++)r=o[u],s=/^\+/.test(r),s&&(r=r.substr(1)||"*"),i=e[r]=e[r]||[],i[s?"unshift":"push"](n)}}function kn(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u,a=e[s],f=0,l=a?a.length:0,c=e===Sn;for(;f<l&&(c||!u);f++)u=a[f](n,r,i),typeof u=="string"&&(!c||o[u]?u=t:(n.dataTypes.unshift(u),u=kn(e,n,r,i,u,o)));return(c||!u)&&!o["*"]&&(u=kn(e,n,r,i,"*",o)),u}function Ln(e,n){var r,i,s=v.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&v.extend(!0,e,i)}function An(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(s in l)s in r&&(n[l[s]]=r[s]);while(f[0]==="*")f.shift(),i===t&&(i=e.mimeType||n.getResponseHeader("content-type"));if(i)for(s in a)if(a[s]&&a[s].test(i)){f.unshift(s);break}if(f[0]in r)o=f[0];else{for(s in r){if(!f[0]||e.converters[s+" "+f[0]]){o=s;break}u||(u=s)}o=o||u}if(o)return o!==f[0]&&f.unshift(o),r[o]}function On(e,t){var n,r,i,s,o=e.dataTypes.slice(),u=o[0],a={},f=0;e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(o[1])for(n in e.converters)a[n.toLowerCase()]=e.converters[n];for(;i=o[++f];)if(i!=="*"){if(u!=="*"&&u!==i){n=a[u+" "+i]||a["* "+i];if(!n)for(r in a){s=r.split(" ");if(s[1]===i){n=a[u+" "+s[0]]||a["* "+s[0]];if(n){n===!0?n=a[r]:a[r]!==!0&&(i=s[0],o.splice(f--,0,i));break}}}if(n!==!0)if(n&&e["throws"])t=n(t);else try{t=n(t)}catch(l){return{state:"parsererror",error:n?l:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:t}}function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function In(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $n(){return setTimeout(function(){qn=t},0),qn=v.now()}function Jn(e,t){v.each(t,function(t,n){var r=(Vn[t]||[]).concat(Vn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function Kn(e,t,n){var r,i=0,s=0,o=Xn.length,u=v.Deferred().always(function(){delete a.elem}),a=function(){var t=qn||$n(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,i=1-r,s=0,o=f.tweens.length;for(;s<o;s++)f.tweens[s].run(i);return u.notifyWith(e,[f,i,n]),i<1&&o?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:qn||$n(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=v.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var n=0,r=t?f.tweens.length:0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;Qn(l,f.opts.specialEasing);for(;i<o;i++){r=Xn[i].call(f,e,l,f.opts);if(r)return r}return Jn(f,l),v.isFunction(f.opts.start)&&f.opts.start.call(e,f),v.fx.timer(v.extend(a,{anim:f,queue:f.opts.queue,elem:e})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function Qn(e,t){var n,r,i,s,o;for(n in e){r=v.camelCase(n),i=t[r],s=e[n],v.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=v.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function Gn(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},m=[],g=e.nodeType&&Gt(e);n.queue||(l=v._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,v.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],v.css(e,"display")==="inline"&&v.css(e,"float")==="none"&&(!v.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||h.done(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t){s=t[r];if(Un.exec(s)){delete t[r],a=a||s==="toggle";if(s===(g?"hide":"show"))continue;m.push(r)}}o=m.length;if(o){u=v._data(e,"fxshow")||v._data(e,"fxshow",{}),"hidden"in u&&(g=u.hidden),a&&(u.hidden=!g),g?v(e).show():h.done(function(){v(e).hide()}),h.done(function(){var t;v.removeData(e,"fxshow",!0);for(t in d)v.style(e,t,d[t])});for(r=0;r<o;r++)i=m[r],f=h.createTween(i,g?u[i]:0),d[i]=u[i]||v.style(e,i),i in u||(u[i]=f.start,g&&(f.end=f.start,f.start=i==="width"||i==="height"?1:0))}}function Yn(e,t,n,r,i){return new Yn.prototype.init(e,t,n,r,i)}function Zn(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=$t[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function tr(e){return v.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=e.document,s=e.location,o=e.navigator,u=e.jQuery,a=e.$,f=Array.prototype.push,l=Array.prototype.slice,c=Array.prototype.indexOf,h=Object.prototype.toString,p=Object.prototype.hasOwnProperty,d=String.prototype.trim,v=function(e,t){return new v.fn.init(e,t,n)},m=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,g=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,w=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,T=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,N=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,C=/^-ms-/,k=/-([\da-z])/gi,L=function(e,t){return(t+"").toUpperCase()},A=function(){i.addEventListener?(i.removeEventListener("DOMContentLoaded",A,!1),v.ready()):i.readyState==="complete"&&(i.detachEvent("onreadystatechange",A),v.ready())},O={};v.fn=v.prototype={constructor:v,init:function(e,n,r){var s,o,u,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?s=[null,e,null]:s=w.exec(e);if(s&&(s[1]||!n)){if(s[1])return n=n instanceof v?n[0]:n,a=n&&n.nodeType?n.ownerDocument||n:i,e=v.parseHTML(s[1],a,!0),E.test(s[1])&&v.isPlainObject(n)&&this.attr.call(e,n,!0),v.merge(this,e);o=i.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return r.find(e);this.length=1,this[0]=o}return this.context=i,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return v.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),v.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return l.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=v.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,t==="find"?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return v.each(this,e,t)},ready:function(e){return v.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(l.apply(this,arguments),"slice",l.call(arguments).join(","))},map:function(e){return this.pushStack(v.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:[].sort,splice:[].splice},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!v.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;l&&i&&(v.isPlainObject(i)||(s=v.isArray(i)))?(s?(s=!1,o=r&&v.isArray(r)?r:[]):o=r&&v.isPlainObject(r)?r:{},u[n]=v.extend(l,o,i)):i!==t&&(u[n]=i)}return u},v.extend({noConflict:function(t){return e.$===v&&(e.$=a),t&&e.jQuery===v&&(e.jQuery=u),v},isReady:!1,readyWait:1,holdReady:function(e){e?v.readyWait++:v.ready(!0)},ready:function(e){if(e===!0?--v.readyWait:v.isReady)return;if(!i.body)return setTimeout(v.ready,1);v.isReady=!0;if(e!==!0&&--v.readyWait>0)return;r.resolveWith(i,[v]),v.fn.trigger&&v(i).trigger("ready").off("ready")},isFunction:function(e){return v.type(e)==="function"},isArray:Array.isArray||function(e){return v.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[h.call(e)]||"object"},isPlainObject:function(e){if(!e||v.type(e)!=="object"||e.nodeType||v.isWindow(e))return!1;try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||p.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return!e||typeof e!="string"?null:(typeof t=="boolean"&&(n=t,t=0),t=t||i,(r=E.exec(e))?[t.createElement(r[1])]:(r=v.buildFragment([e],t,n?null:[]),v.merge([],(r.cacheable?v.clone(r.fragment):r.fragment).childNodes)))},parseJSON:function(t){if(!t||typeof t!="string")return null;t=v.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(S.test(t.replace(T,"@").replace(N,"]").replace(x,"")))return(new Function("return "+t))();v.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&v.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&g.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(C,"ms-").replace(k,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,r){var i,s=0,o=e.length,u=o===t||v.isFunction(e);if(r){if(u){for(i in e)if(n.apply(e[i],r)===!1)break}else for(;s<o;)if(n.apply(e[s++],r)===!1)break}else if(u){for(i in e)if(n.call(e[i],i,e[i])===!1)break}else for(;s<o;)if(n.call(e[s],s,e[s++])===!1)break;return e},trim:d&&!d.call("﻿ ")?function(e){return e==null?"":d.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,r=t||[];return e!=null&&(n=v.type(e),e.length==null||n==="string"||n==="function"||n==="regexp"||v.isWindow(e)?f.call(r,e):v.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(c)return c.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,n,r){var i,s,o=[],u=0,a=e.length,f=e instanceof v||a!==t&&typeof a=="number"&&(a>0&&e[0]&&e[a-1]||a===0||v.isArray(e));if(f)for(;u<a;u++)i=n(e[u],u,r),i!=null&&(o[o.length]=i);else for(s in e)i=n(e[s],s,r),i!=null&&(o[o.length]=i);return o.concat.apply([],o)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(r=e[n],n=e,e=r),v.isFunction(e)?(i=l.call(arguments,2),s=function(){return e.apply(n,i.concat(l.call(arguments)))},s.guid=e.guid=e.guid||v.guid++,s):t},access:function(e,n,r,i,s,o,u){var a,f=r==null,l=0,c=e.length;if(r&&typeof r=="object"){for(l in r)v.access(e,n,l,r[l],1,o,i);s=1}else if(i!==t){a=u===t&&v.isFunction(i),f&&(a?(a=n,n=function(e,t,n){return a.call(v(e),n)}):(n.call(e,i),n=null));if(n)for(;l<c;l++)n(e[l],r,a?i.call(e[l],l,n(e[l],r)):i,u);s=1}return s?e:f?n.call(e):c?n(e[0],r):o},now:function(){return(new Date).getTime()}}),v.ready.promise=function(t){if(!r){r=v.Deferred();if(i.readyState==="complete")setTimeout(v.ready,1);else if(i.addEventListener)i.addEventListener("DOMContentLoaded",A,!1),e.addEventListener("load",v.ready,!1);else{i.attachEvent("onreadystatechange",A),e.attachEvent("onload",v.ready);var n=!1;try{n=e.frameElement==null&&i.documentElement}catch(s){}n&&n.doScroll&&function o(){if(!v.isReady){try{n.doScroll("left")}catch(e){return setTimeout(o,50)}v.ready()}}()}}return r.promise(t)},v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),n=v(i);var M={};v.Callbacks=function(e){e=typeof e=="string"?M[e]||_(e):v.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){n=e.memory&&t,r=!0,u=s||0,s=0,o=a.length,i=!0;for(;a&&u<o;u++)if(a[u].apply(t[0],t[1])===!1&&e.stopOnFalse){n=!1;break}i=!1,a&&(f?f.length&&l(f.shift()):n?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function r(t){v.each(t,function(t,n){var i=v.type(n);i==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&i!=="string"&&r(n)})})(arguments),i?o=a.length:n&&(s=t,l(n))}return this},remove:function(){return a&&v.each(arguments,function(e,t){var n;while((n=v.inArray(t,a,n))>-1)a.splice(n,1),i&&(n<=o&&o--,n<=u&&u--)}),this},has:function(e){return v.inArray(e,a)>-1},empty:function(){return a=[],this},disable:function(){return a=f=n=t,this},disabled:function(){return!a},lock:function(){return f=t,n||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!r||f)&&(i?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},v.extend({Deferred:function(e){var t=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return v.Deferred(function(n){v.each(t,function(t,r){var s=r[0],o=e[t];i[r[1]](v.isFunction(o)?function(){var e=o.apply(this,arguments);e&&v.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s+"With"](this===i?n:this,[e])}:n[s])}),e=null}).promise()},promise:function(e){return e!=null?v.extend(e,r):r}},i={};return r.pipe=r.then,v.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=o.fire,i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=l.call(arguments),r=n.length,i=r!==1||e&&v.isFunction(e.promise)?r:0,s=i===1?e:v.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?l.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&v.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),v.support=function(){var t,n,r,s,o,u,a,f,l,c,h,p=i.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};s=i.createElement("select"),o=s.appendChild(i.createElement("option")),u=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:u.value==="on",optSelected:o.selected,getSetAttribute:p.className!=="t",enctype:!!i.createElement("form").enctype,html5Clone:i.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:i.compatMode==="CSS1Compat",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},u.checked=!0,t.noCloneChecked=u.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!o.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",h=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",h)),u=i.createElement("input"),u.value="t",u.setAttribute("type","radio"),t.radioValue=u.value==="t",u.setAttribute("checked","checked"),u.setAttribute("name","t"),p.appendChild(u),a=i.createDocumentFragment(),a.appendChild(p.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=u.checked,a.removeChild(u),a.appendChild(p);if(p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})f="on"+l,c=f in p,c||(p.setAttribute(f,"return;"),c=typeof p[f]=="function"),t[l+"Bubbles"]=c;return v(function(){var n,r,s,o,u="padding:0;margin:0;border:0;display:block;overflow:hidden;",a=i.getElementsByTagName("body")[0];if(!a)return;n=i.createElement("div"),n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",a.insertBefore(n,a.firstChild),r=i.createElement("div"),n.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=r.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=s[0].offsetHeight===0,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&s[0].offsetHeight===0,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=r.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(r,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(r,null)||{width:"4px"}).width==="4px",o=i.createElement("div"),o.style.cssText=r.style.cssText=u,o.style.marginRight=o.style.width="0",r.style.width="1px",r.appendChild(o),t.reliableMarginRight=!parseFloat((e.getComputedStyle(o,null)||{}).marginRight)),typeof r.style.zoom!="undefined"&&(r.innerHTML="",r.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=r.offsetWidth===3,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=r.offsetWidth!==3,n.style.zoom=1),a.removeChild(n),n=r=s=o=null}),a.removeChild(p),n=r=s=o=u=a=p=null,t}();var D=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,P=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?v.cache[e[v.expando]]:e[v.expando],!!e&&!B(e)},data:function(e,n,r,i){if(!v.acceptData(e))return;var s,o,u=v.expando,a=typeof n=="string",f=e.nodeType,l=f?v.cache:e,c=f?e[u]:e[u]&&u;if((!c||!l[c]||!i&&!l[c].data)&&a&&r===t)return;c||(f?e[u]=c=v.deletedIds.pop()||v.guid++:c=u),l[c]||(l[c]={},f||(l[c].toJSON=v.noop));if(typeof n=="object"||typeof n=="function")i?l[c]=v.extend(l[c],n):l[c].data=v.extend(l[c].data,n);return s=l[c],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[v.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[v.camelCase(n)])):o=s,o},removeData:function(e,t,n){if(!v.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?v.cache:e,a=o?e[v.expando]:v.expando;if(!u[a])return;if(t){r=n?u[a]:u[a].data;if(r){v.isArray(t)||(t in r?t=[t]:(t=v.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?B:v.isEmptyObject)(r))return}}if(!n){delete u[a].data;if(!B(u[a]))return}o?v.cleanData([e],!0):v.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null},_data:function(e,t,n){return v.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&v.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),v.fn.extend({data:function(e,n){var r,i,s,o,u,a=this[0],f=0,l=null;if(e===t){if(this.length){l=v.data(a);if(a.nodeType===1&&!v._data(a,"parsedAttrs")){s=a.attributes;for(u=s.length;f<u;f++)o=s[f].name,o.indexOf("data-")||(o=v.camelCase(o.substring(5)),H(a,o,l[o]));v._data(a,"parsedAttrs",!0)}}return l}return typeof e=="object"?this.each(function(){v.data(this,e)}):(r=e.split(".",2),r[1]=r[1]?"."+r[1]:"",i=r[1]+"!",v.access(this,function(n){if(n===t)return l=this.triggerHandler("getData"+i,[r[0]]),l===t&&a&&(l=v.data(a,e),l=H(a,e,l)),l===t&&r[1]?this.data(r[0]):l;r[1]=n,this.each(function(){var t=v(this);t.triggerHandler("setData"+i,r),v.data(this,e,n),t.triggerHandler("changeData"+i,r)})},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){v.removeData(this,e)})}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=v._data(e,t),n&&(!r||v.isArray(n)?r=v._data(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=v.queue(e,t),r=n.length,i=n.shift(),s=v._queueHooks(e,t),o=function(){v.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return v._data(e,n)||v._data(e,n,{empty:v.Callbacks("once memory").add(function(){v.removeData(e,t+"queue",!0),v.removeData(e,n,!0)})})}}),v.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):n===t?this:this.each(function(){var t=v.queue(this,e,n);v._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&v.dequeue(this,e)})},dequeue:function(e){return this.each(function(){v.dequeue(this,e)})},delay:function(e,t){return e=v.fx?v.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=v.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=v._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var j,F,I,q=/[\t\r\n]/g,R=/\r/g,U=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,W=/^a(?:rea|)$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,V=v.support.getSetAttribute;v.fn.extend({attr:function(e,t){return v.access(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){v.removeAttr(this,e)})},prop:function(e,t){return v.access(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return e=v.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(v.isFunction(e))return this.each(function(t){v(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(y);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)s.indexOf(" "+t[o]+" ")<0&&(s+=t[o]+" ");i.className=v.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(v.isFunction(e))return this.each(function(t){v(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(y);for(u=0,a=this.length;u<a;u++){i=this[u];if(i.nodeType===1&&i.className){r=(" "+i.className+" ").replace(q," ");for(s=0,o=n.length;s<o;s++)while(r.indexOf(" "+n[s]+" ")>=0)r=r.replace(" "+n[s]+" "," ");i.className=e?v.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return v.isFunction(e)?this.each(function(n){v(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=v(this),u=t,a=e.split(y);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&v._data(this,"__className__",this.className),this.className=this.className||e===!1?"":v._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(q," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return n=v.valHooks[s.type]||v.valHooks[s.nodeName.toLowerCase()],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(R,""):r==null?"":r);return}return i=v.isFunction(e),this.each(function(r){var s,o=v(this);if(this.nodeType!==1)return;i?s=e.call(this,r,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":v.isArray(s)&&(s=v.map(s,function(e){return e==null?"":e+""})),n=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,s,"value")===t)this.value=s})}}),v.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(v.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!v.nodeName(n.parentNode,"optgroup"))){t=v(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=v.makeArray(t);return v(e).find("option").each(function(){this.selected=v.inArray(v(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(i&&v.isFunction(v.fn[n]))return v(e)[n](r);if(typeof e.getAttribute=="undefined")return v.prop(e,n,r);u=a!==1||!v.isXMLDoc(e),u&&(n=n.toLowerCase(),o=v.attrHooks[n]||(X.test(n)?F:j));if(r!==t){if(r===null){v.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.split(y);for(;o<r.length;o++)i=r[o],i&&(n=v.propFix[i]||i,s=X.test(i),s||v.attr(e,i,""),e.removeAttribute(V?i:n),s&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(U.test(e.nodeName)&&e.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&t==="radio"&&v.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return j&&v.nodeName(e,"button")?j.get(e,t):t in e?e.value:null},set:function(e,t,n){if(j&&v.nodeName(e,"button"))return j.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!v.isXMLDoc(e),o&&(n=v.propFix[n]||n,s=v.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||W.test(e.nodeName)&&e.href?0:t}}}}),F={get:function(e,n){var r,i=v.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?v.removeAttr(e,n):(r=v.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},V||(I={name:!0,id:!0,coords:!0},j=v.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(I[n]?r.value!=="":r.specified)?r.value:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=i.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},v.each(["width","height"],function(e,t){v.attrHooks[t]=v.extend(v.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),v.attrHooks.contenteditable={get:j.get,set:function(e,t,n){t===""&&(t="false"),j.set(e,t,n)}}),v.support.hrefNormalized||v.each(["href","src","width","height"],function(e,n){v.attrHooks[n]=v.extend(v.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),v.support.style||(v.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),v.support.enctype||(v.propFix.enctype="encoding"),v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(e,t){if(v.isArray(t))return e.checked=v.inArray(v(e).val(),t)>=0}})});var $=/^(?:textarea|input|select)$/i,J=/^([^\.]*|)(?:\.(.+)|)$/,K=/(?:^|\s)hover(\.\S+|)\b/,Q=/^key/,G=/^(?:mouse|contextmenu)|click/,Y=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return v.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};v.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,m,g;if(e.nodeType===3||e.nodeType===8||!n||!r||!(o=v._data(e)))return;r.handler&&(d=r,r=d.handler,s=d.selector),r.guid||(r.guid=v.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof v=="undefined"||!!e&&v.event.triggered===e.type?t:v.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=v.trim(Z(n)).split(" ");for(f=0;f<n.length;f++){l=J.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=v.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=v.event.special[c]||{},p=v.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,needsContext:s&&v.expr.match.needsContext.test(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),v.event.global[c]=!0}e=null},global:{},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,m,g=v.hasData(e)&&v._data(e);if(!g||!(h=g.events))return;t=v.trim(Z(t||"")).split(" ");for(s=0;s<t.length;s++){o=J.exec(t[s])||[],u=a=o[1],f=o[2];if(!u){for(u in h)v.event.remove(e,u+t[s],n,r,!0);continue}p=v.event.special[u]||{},u=(r?p.delegateType:p.bindType)||u,d=h[u]||[],l=d.length,f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(c=0;c<d.length;c++)m=d[c],(i||a===m.origType)&&(!n||n.guid===m.guid)&&(!f||f.test(m.namespace))&&(!r||r===m.selector||r==="**"&&m.selector)&&(d.splice(c--,1),m.selector&&d.delegateCount--,p.remove&&p.remove.call(e,m));d.length===0&&l!==d.length&&((!p.teardown||p.teardown.call(e,f,g.handle)===!1)&&v.removeEvent(e,u,g.handle),delete h[u])}v.isEmptyObject(h)&&(delete g.handle,v.removeData(e,"events",!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,s,o){if(!s||s.nodeType!==3&&s.nodeType!==8){var u,a,f,l,c,h,p,d,m,g,y=n.type||n,b=[];if(Y.test(y+v.event.triggered))return;y.indexOf("!")>=0&&(y=y.slice(0,-1),a=!0),y.indexOf(".")>=0&&(b=y.split("."),y=b.shift(),b.sort());if((!s||v.event.customEvent[y])&&!v.event.global[y])return;n=typeof n=="object"?n[v.expando]?n:new v.Event(y,n):new v.Event(y),n.type=y,n.isTrigger=!0,n.exclusive=a,n.namespace=b.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h=y.indexOf(":")<0?"on"+y:"";if(!s){u=v.cache;for(f in u)u[f].events&&u[f].events[y]&&v.event.trigger(n,r,u[f].handle.elem,!0);return}n.result=t,n.target||(n.target=s),r=r!=null?v.makeArray(r):[],r.unshift(n),p=v.event.special[y]||{};if(p.trigger&&p.trigger.apply(s,r)===!1)return;m=[[s,p.bindType||y]];if(!o&&!p.noBubble&&!v.isWindow(s)){g=p.delegateType||y,l=Y.test(g+y)?s:s.parentNode;for(c=s;l;l=l.parentNode)m.push([l,g]),c=l;c===(s.ownerDocument||i)&&m.push([c.defaultView||c.parentWindow||e,g])}for(f=0;f<m.length&&!n.isPropagationStopped();f++)l=m[f][0],n.type=m[f][1],d=(v._data(l,"events")||{})[n.type]&&v._data(l,"handle"),d&&d.apply(l,r),d=h&&l[h],d&&v.acceptData(l)&&d.apply&&d.apply(l,r)===!1&&n.preventDefault();return n.type=y,!o&&!n.isDefaultPrevented()&&(!p._default||p._default.apply(s.ownerDocument,r)===!1)&&(y!=="click"||!v.nodeName(s,"a"))&&v.acceptData(s)&&h&&s[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!v.isWindow(s)&&(c=s[h],c&&(s[h]=null),v.event.triggered=y,s[y](),v.event.triggered=t,c&&(s[h]=c)),n.result}return},dispatch:function(n){n=v.event.fix(n||e.event);var r,i,s,o,u,a,f,c,h,p,d=(v._data(this,"events")||{})[n.type]||[],m=d.delegateCount,g=l.call(arguments),y=!n.exclusive&&!n.namespace,b=v.event.special[n.type]||{},w=[];g[0]=n,n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===!1)return;if(m&&(!n.button||n.type!=="click"))for(s=n.target;s!=this;s=s.parentNode||this)if(s.disabled!==!0||n.type!=="click"){u={},f=[];for(r=0;r<m;r++)c=d[r],h=c.selector,u[h]===t&&(u[h]=c.needsContext?v(h,this).index(s)>=0:v.find(h,this,null,[s]).length),u[h]&&f.push(c);f.length&&w.push({elem:s,matches:f})}d.length>m&&w.push({elem:this,matches:d.slice(m)});for(r=0;r<w.length&&!n.isPropagationStopped();r++){a=w[r],n.currentTarget=a.elem;for(i=0;i<a.matches.length&&!n.isImmediatePropagationStopped();i++){c=a.matches[i];if(y||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))n.data=c.data,n.handleObj=c,o=((v.event.special[c.origType]||{}).handle||c.handler).apply(a.elem,g),o!==t&&(n.result=o,o===!1&&(n.preventDefault(),n.stopPropagation()))}}return b.postDispatch&&b.postDispatch.call(this,n),n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,s,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||i,s=r.documentElement,o=r.body,e.pageX=n.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},fix:function(e){if(e[v.expando])return e;var t,n,r=e,s=v.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=v.Event(r);for(t=o.length;t;)n=o[--t],e[n]=r[n];return e.target||(e.target=r.srcElement||i),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){v.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=v.extend(new v.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?v.event.trigger(i,null,t):v.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},v.event.handle=v.event.dispatch,v.removeEvent=i.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]=="undefined"&&(e[r]=null),e.detachEvent(r,n))},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?tt:et):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||v.now(),this[v.expando]=!0},v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et},v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj,o=s.selector;if(!i||i!==r&&!v.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),v.support.submitBubbles||(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=v.nodeName(n,"input")||v.nodeName(n,"button")?n.form:t;r&&!v._data(r,"_submit_attached")&&(v.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),v._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&v.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(v.nodeName(this,"form"))return!1;v.event.remove(this,"._submit")}}),v.support.changeBubbles||(v.event.special.change={setup:function(){if($.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")v.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),v.event.simulate("change",this,e,!0)});return!1}v.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!v._data(t,"_change_attached")&&(v.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&v.event.simulate("change",this.parentNode,e,!0)}),v._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return v.event.remove(this,"._change"),!$.test(this.nodeName)}}),v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){v.event.simulate(t,e.target,v.event.fix(e),!0)};v.event.special[t]={setup:function(){n++===0&&i.addEventListener(e,r,!0)},teardown:function(){--n===0&&i.removeEventListener(e,r,!0)}}}),v.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=et;else if(!i)return this;return s===1&&(o=i,i=function(e){return v().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=v.guid++)),this.each(function(){v.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,v(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=et),this.each(function(){v.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return v(this.context).on(e,this.selector,t,n),this},die:function(e,t){return v(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){v.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return v.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||v.guid++,r=0,i=function(n){var i=(v._data(this,"lastToggle"+e.guid)||0)%r;return v._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){v.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Q.test(t)&&(v.event.fixHooks[t]=v.event.keyHooks),G.test(t)&&(v.event.fixHooks[t]=v.event.mouseHooks)}),function(e,t){function nt(e,t,n,r){n=n||[],t=t||g;var i,s,a,f,l=t.nodeType;if(!e||typeof e!="string")return n;if(l!==1&&l!==9)return[];a=o(t);if(!a&&!r)if(i=R.exec(e))if(f=i[1]){if(l===9){s=t.getElementById(f);if(!s||!s.parentNode)return n;if(s.id===f)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(f))&&u(t,s)&&s.id===f)return n.push(s),n}else{if(i[2])return S.apply(n,x.call(t.getElementsByTagName(e),0)),n;if((f=i[3])&&Z&&t.getElementsByClassName)return S.apply(n,x.call(t.getElementsByClassName(f),0)),n}return vt(e.replace(j,"$1"),t,n,r,a)}function rt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function it(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function st(e){return N(function(t){return t=+t,N(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ot(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}function ut(e,t){var n,r,s,o,u,a,f,l=L[d][e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=F.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=I.exec(u))s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=r[0].replace(j," ");for(o in i.filter)(r=J[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(s.push(n=new m(r.shift())),u=u.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?u.length:u?nt.error(e):L(e,a).slice(0)}function at(e,t,r){var i=t.dir,s=r&&t.dir==="parentNode",o=w++;return t.first?function(t,n,r){while(t=t[i])if(s||t.nodeType===1)return e(t,n,r)}:function(t,r,u){if(!u){var a,f=b+" "+o+" ",l=f+n;while(t=t[i])if(s||t.nodeType===1){if((a=t[d])===l)return t.sizset;if(typeof a=="string"&&a.indexOf(f)===0){if(t.sizset)return t}else{t[d]=l;if(e(t,r,u))return t.sizset=!0,t;t.sizset=!1}}}else while(t=t[i])if(s||t.nodeType===1)if(e(t,r,u))return t}}function ft(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function lt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function ct(e,t,n,r,i,s){return r&&!r[d]&&(r=ct(r)),i&&!i[d]&&(i=ct(i,s)),N(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||dt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?lt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=lt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?T.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=lt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):S.apply(o,g)})}function ht(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,f=at(function(e){return e===t},u,!0),l=at(function(e){return T.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==c)||((t=n).nodeType?f(e,n,r):l(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[at(ft(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[d]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return ct(a>1&&ft(h),a>1&&e.slice(0,a-1).join("").replace(j,"$1"),n,a<r&&ht(e.slice(a,r)),r<s&&ht(e=e.slice(r)),r<s&&e.join(""))}h.push(n)}return ft(h)}function pt(e,t){var r=t.length>0,s=e.length>0,o=function(u,a,f,l,h){var p,d,v,m=[],y=0,w="0",x=u&&[],T=h!=null,N=c,C=u||s&&i.find.TAG("*",h&&a.parentNode||a),k=b+=N==null?1:Math.E;T&&(c=a!==g&&a,n=o.el);for(;(p=C[w])!=null;w++){if(s&&p){for(d=0;v=e[d];d++)if(v(p,a,f)){l.push(p);break}T&&(b=k,n=++o.el)}r&&((p=!v&&p)&&y--,u&&x.push(p))}y+=w;if(r&&w!==y){for(d=0;v=t[d];d++)v(x,m,a,f);if(u){if(y>0)while(w--)!x[w]&&!m[w]&&(m[w]=E.call(l));m=lt(m)}S.apply(l,m),T&&!u&&m.length>0&&y+t.length>1&&nt.uniqueSort(l)}return T&&(b=k,c=N),x};return o.el=0,r?N(o):o}function dt(e,t,n){var r=0,i=t.length;for(;r<i;r++)nt(e,t[r],n);return n}function vt(e,t,n,r,s){var o,u,f,l,c,h=ut(e),p=h.length;if(!r&&h.length===1){u=h[0]=h[0].slice(0);if(u.length>2&&(f=u[0]).type==="ID"&&t.nodeType===9&&!s&&i.relative[u[1].type]){t=i.find.ID(f.matches[0].replace($,""),t,s)[0];if(!t)return n;e=e.slice(u.shift().length)}for(o=J.POS.test(e)?-1:u.length-1;o>=0;o--){f=u[o];if(i.relative[l=f.type])break;if(c=i.find[l])if(r=c(f.matches[0].replace($,""),z.test(u[0].type)&&t.parentNode||t,s)){u.splice(o,1),e=r.length&&u.join("");if(!e)return S.apply(n,x.call(r,0)),n;break}}}return a(e,h)(r,t,s,n,z.test(e)),n}function mt(){}var n,r,i,s,o,u,a,f,l,c,h=!0,p="undefined",d=("sizcache"+Math.random()).replace(".",""),m=String,g=e.document,y=g.documentElement,b=0,w=0,E=[].pop,S=[].push,x=[].slice,T=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[d]=t==null||t,e},C=function(){var e={},t=[];return N(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n+" "]=r},e)},k=C(),L=C(),A=C(),O="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",_=M.replace("w","w#"),D="([*^$|!~]?=)",P="\\["+O+"*("+M+")"+O+"*(?:"+D+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+_+")|)|)"+O+"*\\]",H=":("+M+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+P+")|[^:]|\\\\.)*|.*))\\)|)",B=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",j=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),I=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),q=new RegExp(H),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,W=/:not\($/,X=/h\d/i,V=/input|select|textarea|button/i,$=/\\(?!\\)/g,J={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),NAME:new RegExp("^\\[name=['\"]?("+M+")['\"]?\\]"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+H),POS:new RegExp(B,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+B,"i")},K=function(e){var t=g.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}},Q=K(function(e){return e.appendChild(g.createComment("")),!e.getElementsByTagName("*").length}),G=K(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),Y=K(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=K(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),et=K(function(e){e.id=d+0,e.innerHTML="<a name='"+d+"'></a><div name='"+d+"'></div>",y.insertBefore(e,y.firstChild);var t=g.getElementsByName&&g.getElementsByName(d).length===2+g.getElementsByName(d+0).length;return r=!g.getElementById(d),y.removeChild(e),t});try{x.call(y.childNodes,0)[0].nodeType}catch(tt){x=function(e){var t,n=[];for(;t=this[e];e++)n.push(t);return n}}nt.matches=function(e,t){return nt(e,null,null,t)},nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0},s=nt.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},o=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},u=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&r.nodeType===1&&n.contains&&n.contains(r))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode)if(t===e)return!0;return!1},nt.attr=function(e,t){var n,r=o(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||Y?e.getAttribute(t):(n=e.getAttributeNode(t),n?typeof e[t]=="boolean"?e[t]?t:null:n.specified?n.value:null:null)},i=nt.selectors={cacheLength:50,createPseudo:N,match:J,attrHandle:G?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(typeof t.getElementById!==p&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,n,r){if(typeof n.getElementById!==p&&!r){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==p&&i.getAttributeNode("id").value===e?[i]:t:[]}},TAG:Q?function(e,t){if(typeof t.getElementsByTagName!==p)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var r,i=[],s=0;for(;r=n[s];s++)r.nodeType===1&&i.push(r);return i}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p)return t.getElementsByName(name)},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,""),e[3]=(e[4]||e[5]||"").replace($,""),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1]==="nth"?(e[2]||nt.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd")),e[4]=+(e[6]+e[7]||e[2]==="odd")):e[2]&&nt.error(e[0]),e},PSEUDO:function(e){var t,n;if(J.CHILD.test(e[0]))return null;if(e[3])e[2]=e[3];else if(t=e[4])q.test(t)&&(n=ut(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t;return e.slice(0,3)}},filter:{ID:r?function(e){return e=e.replace($,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace($,""),function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace($,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[d][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r,i){var s=nt.attr(r,e);return s==null?t==="!=":t?(s+="",t==="="?s===n:t==="!="?s!==n:t==="^="?n&&s.indexOf(n)===0:t==="*="?n&&s.indexOf(n)>-1:t==="$="?n&&s.substr(s.length-n.length)===n:t==="~="?(" "+s+" ").indexOf(n)>-1:t==="|="?s===n||s.substr(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r){return e==="nth"?function(e){var t,i,s=e.parentNode;if(n===1&&r===0)return!0;if(s){i=0;for(t=s.firstChild;t;t=t.nextSibling)if(t.nodeType===1){i++;if(e===t)break}}return i-=r,i===n||i%n===0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling)if(n.nodeType===1)return!1;if(e==="first")return!0;n=t;case"last":while(n=n.nextSibling)if(n.nodeType===1)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);return r[d]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=T.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:N(function(e){var t=[],n=[],r=a(e.replace(j,"$1"));return r[d]?N(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:N(function(e){return function(t){return nt(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4)return!1;e=e.nextSibling}return!0},header:function(e){return X.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:rt("radio"),checkbox:rt("checkbox"),file:rt("file"),password:rt("password"),image:rt("image"),submit:it("submit"),reset:it("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return V.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:st(function(){return[0]}),last:st(function(e,t){return[t-1]}),eq:st(function(e,t,n){return[n<0?n+t:n]}),even:st(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:st(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:st(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:st(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},f=y.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,u=t.parentNode,a=o;if(o===u)return ot(e,t);if(!o)return-1;if(!u)return 1;while(a)i.unshift(a),a=a.parentNode;a=u;while(a)s.unshift(a),a=a.parentNode;n=i.length,r=s.length;for(var f=0;f<n&&f<r;f++)if(i[f]!==s[f])return ot(i[f],s[f]);return f===n?ot(e,s[f],-1):ot(i[f],t,1)},[0,0].sort(f),h=!l,nt.uniqueSort=function(e){var t,n=[],r=1,i=0;l=h,e.sort(f);if(l){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},a=nt.compile=function(e,t){var n,r=[],i=[],s=A[d][e+" "];if(!s){t||(t=ut(e)),n=t.length;while(n--)s=ht(t[n]),s[d]?r.push(s):i.push(s);s=A(e,pt(i,r))}return s},g.querySelectorAll&&function(){var e,t=vt,n=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,i=[":focus"],s=[":active"],u=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;K(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||i.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||i.push(":checked")}),K(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&i.push("[*^$]="+O+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||i.push(":enabled",":disabled")}),i=new RegExp(i.join("|")),vt=function(e,r,s,o,u){if(!o&&!u&&!i.test(e)){var a,f,l=!0,c=d,h=r,p=r.nodeType===9&&e;if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){a=ut(e),(l=r.getAttribute("id"))?c=l.replace(n,"\\$&"):r.setAttribute("id",c),c="[id='"+c+"'] ",f=a.length;while(f--)a[f]=c+a[f].join("");h=z.test(e)&&r.parentNode||r,p=a.join(",")}if(p)try{return S.apply(s,x.call(h.querySelectorAll(p),0)),s}catch(v){}finally{l||r.removeAttribute("id")}}return t(e,r,s,o,u)},u&&(K(function(t){e=u.call(t,"div");try{u.call(t,"[test!='']:sizzle"),s.push("!=",H)}catch(n){}}),s=new RegExp(s.join("|")),nt.matchesSelector=function(t,n){n=n.replace(r,"='$1']");if(!o(t)&&!s.test(n)&&!i.test(n))try{var a=u.call(t,n);if(a||e||t.document&&t.document.nodeType!==11)return a}catch(f){}return nt(n,null,null,[t]).length>0})}(),i.pseudos.nth=i.pseudos.eq,i.filters=mt.prototype=i.pseudos,i.setFilters=new mt,nt.attr=v.attr,v.find=nt,v.expr=nt.selectors,v.expr[":"]=v.expr.pseudos,v.unique=nt.uniqueSort,v.text=nt.getText,v.isXMLDoc=nt.isXML,v.contains=nt.contains}(e);var nt=/Until$/,rt=/^(?:parents|prev(?:Until|All))/,it=/^.[^:#\[\.,]*$/,st=v.expr.match.needsContext,ot={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(e){var t,n,r,i,s,o,u=this;if(typeof e!="string")return v(e).filter(function(){for(t=0,n=u.length;t<n;t++)if(v.contains(u[t],this))return!0});o=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){r=o.length,v.find(e,this[t],o);if(t>0)for(i=r;i<o.length;i++)for(s=0;s<r;s++)if(o[s]===o[i]){o.splice(i--,1);break}}return o},has:function(e){var t,n=v(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(v.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1),"not",e)},filter:function(e){return this.pushStack(ft(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?st.test(e)?v(e,this.context).index(this[0])>=0:v.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=st.test(e)||typeof e!="string"?v(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:v.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return s=s.length>1?v.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?typeof e=="string"?v.inArray(this[0],v(e)):v.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?v(e,t):v.makeArray(e&&e.nodeType?[e]:e),r=v.merge(this.get(),n);return this.pushStack(ut(n[0])||ut(r[0])?r:v.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),v.fn.andSelf=v.fn.addBack,v.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return v.dir(e,"parentNode")},parentsUntil:function(e,t,n){return v.dir(e,"parentNode",n)},next:function(e){return at(e,"nextSibling")},prev:function(e){return at(e,"previousSibling")},nextAll:function(e){return v.dir(e,"nextSibling")},prevAll:function(e){return v.dir(e,"previousSibling")},nextUntil:function(e,t,n){return v.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return v.dir(e,"previousSibling",n)},siblings:function(e){return v.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return v.sibling(e.firstChild)},contents:function(e){return v.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:v.merge([],e.childNodes)}},function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return nt.test(e)||(r=n),r&&typeof r=="string"&&(i=v.filter(r,i)),i=this.length>1&&!ot[e]?v.unique(i):i,this.length>1&&rt.test(e)&&(i=i.reverse()),this.pushStack(i,e,l.call(arguments).join(","))}}),v.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?v.find.matchesSelector(t[0],e)?[t[0]]:[]:v.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!v(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var ct="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ht=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,vt=/<([\w:]+)/,mt=/<tbody/i,gt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,wt=new RegExp("<(?:"+ct+")[\\s/>]","i"),Et=/^(?:checkbox|radio)$/,St=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Nt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ct=lt(i),kt=Ct.appendChild(i.createElement("div"));Nt.optgroup=Nt.option,Nt.tbody=Nt.tfoot=Nt.colgroup=Nt.caption=Nt.thead,Nt.th=Nt.td,v.support.htmlSerialize||(Nt._default=[1,"X<div>","</div>"]),v.fn.extend({text:function(e){return v.access(this,function(e){return e===t?v.text(this):this.empty().append((this[0]&&this[0].ownerDocument||i).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(v.isFunction(e))return this.each(function(t){v(this).wrapAll(e.call(this,t))});if(this[0]){var t=v(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return v.isFunction(e)?this.each(function(t){v(this).wrapInner(e.call(this,t))}):this.each(function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=v.isFunction(e);return this.each(function(n){v(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(e,this),"before",this.selector)}},after:function(){if(!ut(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=v.clean(arguments);return this.pushStack(v.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||v.filter(e,[n]).length)!t&&n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),v.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&v.cleanData(e.getElementsByTagName("*"));while(e.firstChild)e.removeChild(e.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return v.clone(this,e,t)})},html:function(e){return v.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(ht,""):t;if(typeof e=="string"&&!yt.test(e)&&(v.support.htmlSerialize||!wt.test(e))&&(v.support.leadingWhitespace||!pt.test(e))&&!Nt[(vt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(dt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(v.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return ut(this[0])?this.length?this.pushStack(v(v.isFunction(e)?e():e),"replaceWith",e):this:v.isFunction(e)?this.each(function(t){var n=v(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=v(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;v(this).remove(),t?v(t).before(e):v(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=[].concat.apply([],e);var i,s,o,u,a=0,f=e[0],l=[],c=this.length;if(!v.support.checkClone&&c>1&&typeof f=="string"&&St.test(f))return this.each(function(){v(this).domManip(e,n,r)});if(v.isFunction(f))return this.each(function(i){var s=v(this);e[0]=f.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){i=v.buildFragment(e,this,l),o=i.fragment,s=o.firstChild,o.childNodes.length===1&&(o=s);if(s){n=n&&v.nodeName(s,"tr");for(u=i.cacheable||c-1;a<c;a++)r.call(n&&v.nodeName(this[a],"table")?Lt(this[a],"tbody"):this[a],a===u?o:v.clone(o,!0,!0))}o=s=null,l.length&&v.each(l,function(e,t){t.src?v.ajax?v.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Tt,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),v.buildFragment=function(e,n,r){var s,o,u,a=e[0];return n=n||i,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,e.length===1&&typeof a=="string"&&a.length<512&&n===i&&a.charAt(0)==="<"&&!bt.test(a)&&(v.support.checkClone||!St.test(a))&&(v.support.html5Clone||!wt.test(a))&&(o=!0,s=v.fragments[a],u=s!==t),s||(s=n.createDocumentFragment(),v.clean(e,n,s,r),o&&(v.fragments[a]=u&&s)),{fragment:s,cacheable:o}},v.fragments={},v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){v.fn[e]=function(n){var r,i=0,s=[],o=v(n),u=o.length,a=this.length===1&&this[0].parentNode;if((a==null||a&&a.nodeType===11&&a.childNodes.length===1)&&u===1)return o[t](this[0]),this;for(;i<u;i++)r=(i>0?this.clone(!0):this).get(),v(o[i])[t](r),s=s.concat(r);return this.pushStack(s,e,o.selector)}}),v.extend({clone:function(e,t,n){var r,i,s,o;v.support.html5Clone||v.isXMLDoc(e)||!wt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(kt.innerHTML=e.outerHTML,kt.removeChild(o=kt.firstChild));if((!v.support.noCloneEvent||!v.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!v.isXMLDoc(e)){Ot(e,o),r=Mt(e),i=Mt(o);for(s=0;r[s];++s)i[s]&&Ot(r[s],i[s])}if(t){At(e,o);if(n){r=Mt(e),i=Mt(o);for(s=0;r[s];++s)At(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var s,o,u,a,f,l,c,h,p,d,m,g,y=t===i&&Ct,b=[];if(!t||typeof t.createDocumentFragment=="undefined")t=i;for(s=0;(u=e[s])!=null;s++){typeof u=="number"&&(u+="");if(!u)continue;if(typeof u=="string")if(!gt.test(u))u=t.createTextNode(u);else{y=y||lt(t),c=t.createElement("div"),y.appendChild(c),u=u.replace(dt,"<$1></$2>"),a=(vt.exec(u)||["",""])[1].toLowerCase(),f=Nt[a]||Nt._default,l=f[0],c.innerHTML=f[1]+u+f[2];while(l--)c=c.lastChild;if(!v.support.tbody){h=mt.test(u),p=a==="table"&&!h?c.firstChild&&c.firstChild.childNodes:f[1]==="<table>"&&!h?c.childNodes:[];for(o=p.length-1;o>=0;--o)v.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o])}!v.support.leadingWhitespace&&pt.test(u)&&c.insertBefore(t.createTextNode(pt.exec(u)[0]),c.firstChild),u=c.childNodes,c.parentNode.removeChild(c)}u.nodeType?b.push(u):v.merge(b,u)}c&&(u=c=y=null);if(!v.support.appendChecked)for(s=0;(u=b[s])!=null;s++)v.nodeName(u,"input")?_t(u):typeof u.getElementsByTagName!="undefined"&&v.grep(u.getElementsByTagName("input"),_t);if(n){m=function(e){if(!e.type||xt.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)};for(s=0;(u=b[s])!=null;s++)if(!v.nodeName(u,"script")||!m(u))n.appendChild(u),typeof u.getElementsByTagName!="undefined"&&(g=v.grep(v.merge([],u.getElementsByTagName("script")),m),b.splice.apply(b,[s+1,0].concat(g)),s+=g.length)}return b},cleanData:function(e,t){var n,r,i,s,o=0,u=v.expando,a=v.cache,f=v.support.deleteExpando,l=v.event.special;for(;(i=e[o])!=null;o++)if(t||v.acceptData(i)){r=i[u],n=r&&a[r];if(n){if(n.events)for(s in n.events)l[s]?v.event.remove(i,s):v.removeEvent(i,s,n.handle);a[r]&&(delete a[r],f?delete i[u]:i.removeAttribute?i.removeAttribute(u):i[u]=null,v.deletedIds.push(r))}}}}),function(){var e,t;v.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=v.uaMatch(o.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),v.browser=t,v.sub=function(){function e(t,n){return new e.fn.init(t,n)}v.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){return i&&i instanceof v&&!(i instanceof e)&&(i=e(i)),v.fn.init.call(this,r,i,t)},e.fn.init.prototype=e.fn;var t=e(i);return e}}();var Dt,Pt,Ht,Bt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,It=/^(none|table(?!-c[ea]).+)/,qt=/^margin/,Rt=new RegExp("^("+m+")(.*)$","i"),Ut=new RegExp("^("+m+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+m+")","i"),Wt={BODY:"block"},Xt={position:"absolute",visibility:"hidden",display:"block"},Vt={letterSpacing:0,fontWeight:400},$t=["Top","Right","Bottom","Left"],Jt=["Webkit","O","Moz","ms"],Kt=v.fn.toggle;v.fn.extend({css:function(e,n){return v.access(this,function(e,n,r){return r!==t?v.style(e,n,r):v.css(e,n)},e,n,arguments.length>1)},show:function(){return Yt(this,!0)},hide:function(){return Yt(this)},toggle:function(e,t){var n=typeof e=="boolean";return v.isFunction(e)&&v.isFunction(t)?Kt.apply(this,arguments):this.each(function(){(n?e:Gt(this))?v(this).show():v(this).hide()})}}),v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Dt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=v.camelCase(n),f=e.style;n=v.cssProps[a]||(v.cssProps[a]=Qt(f,a)),u=v.cssHooks[n]||v.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=zt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(v.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!v.cssNumber[a]&&(r+="px");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=v.camelCase(n);return n=v.cssProps[a]||(v.cssProps[a]=Qt(e.style,a)),u=v.cssHooks[n]||v.cssHooks[a],u&&"get"in u&&(s=u.get(e,!0,i)),s===t&&(s=Dt(e,n)),s==="normal"&&n in Vt&&(s=Vt[n]),r||i!==t?(o=parseFloat(s),r||v.isNumeric(o)?o||0:s):s},swap:function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=s[i];return r}}),e.getComputedStyle?Dt=function(t,n){var r,i,s,o,u=e.getComputedStyle(t,null),a=t.style;return u&&(r=u.getPropertyValue(n)||u[n],r===""&&!v.contains(t.ownerDocument,t)&&(r=v.style(t,n)),Ut.test(r)&&qt.test(n)&&(i=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=u.width,a.width=i,a.minWidth=s,a.maxWidth=o)),r}:i.documentElement.currentStyle&&(Dt=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],s=e.style;return i==null&&s&&s[t]&&(i=s[t]),Ut.test(i)&&!Ft.test(t)&&(n=s.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),s.left=t==="fontSize"?"1em":i,i=s.pixelLeft+"px",s.left=n,r&&(e.runtimeStyle.left=r)),i===""?"auto":i}),v.each(["height","width"],function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&It.test(Dt(e,"display"))?v.swap(e,Xt,function(){return tn(e,t,r)}):tn(e,t,r)},set:function(e,n,r){return Zt(e,n,r?en(e,t,r,v.support.boxSizing&&v.css(e,"boxSizing")==="border-box"):0)}}}),v.support.opacity||(v.cssHooks.opacity={get:function(e,t){return jt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=v.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&v.trim(s.replace(Bt,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Bt.test(s)?s.replace(Bt,i):s+" "+i}}),v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(e,t){return v.swap(e,{display:"inline-block"},function(){if(t)return Dt(e,"marginRight")})}}),!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(e,t){v.cssHooks[t]={get:function(e,n){if(n){var r=Dt(e,t);return Ut.test(r)?v(e).position()[t]+"px":r}}}})}),v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!v.support.reliableHiddenOffsets&&(e.style&&e.style.display||Dt(e,"display"))==="none"},v.expr.filters.visible=function(e){return!v.expr.filters.hidden(e)}),v.each({margin:"",padding:"",border:"Width"},function(e,t){v.cssHooks[e+t]={expand:function(n){var r,i=typeof n=="string"?n.split(" "):[n],s={};for(r=0;r<4;r++)s[e+$t[r]+t]=i[r]||i[r-2]||i[0];return s}},qt.test(e)||(v.cssHooks[e+t].set=Zt)});var rn=/%20/g,sn=/\[\]$/,on=/\r?\n/g,un=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,an=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||an.test(this.nodeName)||un.test(this.type))}).map(function(e,t){var n=v(this).val();return n==null?null:v.isArray(n)?v.map(n,function(e,n){return{name:t.name,value:e.replace(on,"\r\n")}}):{name:t.name,value:n.replace(on,"\r\n")}}).get()}}),v.param=function(e,n){var r,i=[],s=function(e,t){t=v.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=v.ajaxSettings&&v.ajaxSettings.traditional);if(v.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,function(){s(this.name,this.value)});else for(r in e)fn(r,e[r],n,s);return i.join("&").replace(rn,"+")};var ln,cn,hn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,dn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,vn=/^(?:GET|HEAD)$/,mn=/^\/\//,gn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,wn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,En=v.fn.load,Sn={},xn={},Tn=["*/"]+["*"];try{cn=s.href}catch(Nn){cn=i.createElement("a"),cn.href="",cn=cn.href}ln=wn.exec(cn.toLowerCase())||[],v.fn.load=function(e,n,r){if(typeof e!="string"&&En)return En.apply(this,arguments);if(!this.length)return this;var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),v.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(s="POST"),v.ajax({url:e,type:s,dataType:"html",data:n,complete:function(e,t){r&&u.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,u.html(i?v("<div>").append(e.replace(yn,"")).find(i):e)}),this},v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){v.fn[t]=function(e){return this.on(t,e)}}),v.each(["get","post"],function(e,n){v[n]=function(e,r,i,s){return v.isFunction(r)&&(s=s||i,i=r,r=t),v.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),v.extend({getScript:function(e,n){return v.get(e,t,n,"script")},getJSON:function(e,t,n){return v.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Ln(e,v.ajaxSettings):(t=e,e=v.ajaxSettings),Ln(e,t),e},ajaxSettings:{url:cn,isLocal:dn.test(ln[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Tn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:Cn(Sn),ajaxTransport:Cn(xn),ajax:function(e,n){function T(e,n,s,a){var l,y,b,w,S,T=n;if(E===2)return;E=2,u&&clearTimeout(u),o=t,i=a||"",x.readyState=e>0?4:0,s&&(w=An(c,x,s));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(v.lastModified[r]=S),S=x.getResponseHeader("Etag"),S&&(v.etag[r]=S)),e===304?(T="notmodified",l=!0):(l=On(c,w),T=l.state,y=l.data,b=l.error,l=!b);else{b=T;if(!T||e)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[y,T,x]):d.rejectWith(h,[x,T,b]),x.statusCode(g),g=t,f&&p.trigger("ajax"+(l?"Success":"Error"),[x,c,l?y:b]),m.fireWith(h,[x,T]),f&&(p.trigger("ajaxComplete",[x,c]),--v.active||v.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=v.ajaxSetup({},n),h=c.context||c,p=h!==c&&(h.nodeType||h instanceof v)?v(h):v.event,d=v.Deferred(),m=v.Callbacks("once memory"),g=c.statusCode||{},b={},w={},E=0,S="canceled",x={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=w[n]=w[n]||e,b[e]=t}return this},getAllResponseHeaders:function(){return E===2?i:null},getResponseHeader:function(e){var n;if(E===2){if(!s){s={};while(n=pn.exec(i))s[n[1].toLowerCase()]=n[2]}n=s[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(c.mimeType=e),this},abort:function(e){return e=e||S,o&&o.abort(e),T(0,e),this}};d.promise(x),x.success=x.done,x.error=x.fail,x.complete=m.add,x.statusCode=function(e){if(e){var t;if(E<2)for(t in e)g[t]=[g[t],e[t]];else t=e[x.status],x.always(t)}return this},c.url=((e||c.url)+"").replace(hn,"").replace(mn,ln[1]+"//"),c.dataTypes=v.trim(c.dataType||"*").toLowerCase().split(y),c.crossDomain==null&&(a=wn.exec(c.url.toLowerCase()),c.crossDomain=!(!a||a[1]===ln[1]&&a[2]===ln[2]&&(a[3]||(a[1]==="http:"?80:443))==(ln[3]||(ln[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=v.param(c.data,c.traditional)),kn(Sn,c,n,x);if(E===2)return x;f=c.global,c.type=c.type.toUpperCase(),c.hasContent=!vn.test(c.type),f&&v.active++===0&&v.event.trigger("ajaxStart");if(!c.hasContent){c.data&&(c.url+=(gn.test(c.url)?"&":"?")+c.data,delete c.data),r=c.url;if(c.cache===!1){var N=v.now(),C=c.url.replace(bn,"$1_="+N);c.url=C+(C===c.url?(gn.test(c.url)?"&":"?")+"_="+N:"")}}(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(r=r||c.url,v.lastModified[r]&&x.setRequestHeader("If-Modified-Since",v.lastModified[r]),v.etag[r]&&x.setRequestHeader("If-None-Match",v.etag[r])),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+Tn+"; q=0.01":""):c.accepts["*"]);for(l in c.headers)x.setRequestHeader(l,c.headers[l]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&E!==2){S="abort";for(l in{success:1,error:1,complete:1})x[l](c[l]);o=kn(xn,c,n,x);if(!o)T(-1,"No Transport");else{x.readyState=1,f&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{E=1,o.send(b,T)}catch(k){if(!(E<2))throw k;T(-1,k)}}return x}return x.abort()},active:0,lastModified:{},etag:{}});var Mn=[],_n=/\?/,Dn=/(=)\?(?=&|$)|\?\?/,Pn=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mn.pop()||v.expando+"_"+Pn++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.data,f=n.url,l=n.jsonp!==!1,c=l&&Dn.test(f),h=l&&!c&&typeof a=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(a);if(n.dataTypes[0]==="jsonp"||c||h)return s=n.jsonpCallback=v.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,o=e[s],c?n.url=f.replace(Dn,"$1"+s):h?n.data=a.replace(Dn,"$1"+s):l&&(n.url+=(_n.test(f)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||v.error(s+" was not called"),u[0]},n.dataTypes[0]="json",e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,Mn.push(s)),u&&v.isFunction(o)&&o(u[0]),u=o=t}),"script"}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),v.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement;return{send:function(s,o){n=i.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||o(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var Hn,Bn=e.ActiveXObject?function(){for(var e in Hn)Hn[e](0,1)}:!1,jn=0;v.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||In()}:Fn,function(e){v.extend(v.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(v.ajaxSettings.xhr()),v.support.ajax&&v.ajaxTransport(function(n){if(!n.crossDomain||v.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c,h;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=v.noop,Bn&&delete Hn[o]);if(i)a.readyState!==4&&a.abort();else{u=a.status,l=a.getAllResponseHeaders(),c={},h=a.responseXML,h&&h.documentElement&&(c.xml=h);try{c.text=a.responseText}catch(p){}try{f=a.statusText}catch(p){f=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(d){i||s(-1,d)}c&&s(u,f,c,l)},n.async?a.readyState===4?setTimeout(r,0):(o=++jn,Bn&&(Hn||(Hn={},v(e).unload(Bn)),Hn[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var qn,Rn,Un=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+m+")([a-z%]*)$","i"),Wn=/queueHooks$/,Xn=[Gn],Vn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=zn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(v.cssNumber[e]?"":"px");if(r!=="px"&&u){u=v.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,v.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};v.Animation=v.extend(Kn,{tweener:function(e,t){v.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Vn[n]=Vn[n]||[],Vn[n].unshift(t)},prefilter:function(e,t){t?Xn.unshift(e):Xn.push(e)}}),v.Tween=Yn,Yn.prototype={constructor:Yn,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(v.cssNumber[n]?"":"px")},cur:function(){var e=Yn.propHooks[this.prop];return e&&e.get?e.get(this):Yn.propHooks._default.get(this)},run:function(e){var t,n=Yn.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yn.propHooks._default.set(this),this}},Yn.prototype.init.prototype=Yn.prototype,Yn.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=v.css(e.elem,e.prop,!1,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):e.elem.style&&(e.elem.style[v.cssProps[e.prop]]!=null||v.cssHooks[e.prop])?v.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yn.propHooks.scrollTop=Yn.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.each(["toggle","show","hide"],function(e,t){var n=v.fn[t];v.fn[t]=function(r,i,s){return r==null||typeof r=="boolean"||!e&&v.isFunction(r)&&v.isFunction(i)?n.apply(this,arguments):this.animate(Zn(t,!0),r,i,s)}}),v.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Gt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=v.isEmptyObject(e),s=v.speed(t,n,r),o=function(){var t=Kn(this,v.extend({},e),s);i&&t.stop(!0)};return i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=v.timers,o=v._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Wn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&v.dequeue(this,e)})}}),v.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){v.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),v.speed=function(e,t,n){var r=e&&typeof e=="object"?v.extend({},e):{complete:n||!n&&t||v.isFunction(e)&&e,duration:e,easing:n&&t||t&&!v.isFunction(t)&&t};r.duration=v.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in v.fx.speeds?v.fx.speeds[r.duration]:v.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){v.isFunction(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},v.timers=[],v.fx=Yn.prototype.init,v.fx.tick=function(){var e,n=v.timers,r=0;qn=v.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||v.fx.stop(),qn=t},v.fx.timer=function(e){e()&&v.timers.push(e)&&!Rn&&(Rn=setInterval(v.fx.tick,v.fx.interval))},v.fx.interval=13,v.fx.stop=function(){clearInterval(Rn),Rn=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fx.step={},v.expr&&v.expr.filters&&(v.expr.filters.animated=function(e){return v.grep(v.timers,function(t){return e===t.elem}).length});var er=/^(?:body|html)$/i;v.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){v.offset.setOffset(this,e,t)});var n,r,i,s,o,u,a,f={top:0,left:0},l=this[0],c=l&&l.ownerDocument;if(!c)return;return(r=c.body)===l?v.offset.bodyOffset(l):(n=c.documentElement,v.contains(n,l)?(typeof l.getBoundingClientRect!="undefined"&&(f=l.getBoundingClientRect()),i=tr(c),s=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,u=i.pageYOffset||n.scrollTop,a=i.pageXOffset||n.scrollLeft,{top:f.top+u-s,left:f.left+a-o}):f)},v.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return v.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(v.css(e,"marginTop"))||0,n+=parseFloat(v.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=v.css(e,"position");r==="static"&&(e.style.position="relative");var i=v(e),s=i.offset(),o=v.css(e,"top"),u=v.css(e,"left"),a=(r==="absolute"||r==="fixed")&&v.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),v.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},v.fn.extend({position:function(){if(!this[0])return;var e=this[0],t=this.offsetParent(),n=this.offset(),r=er.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(v.css(e,"marginTop"))||0,n.left-=parseFloat(v.css(e,"marginLeft"))||0,r.top+=parseFloat(v.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(v.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||i.body;while(e&&!er.test(e.nodeName)&&v.css(e,"position")==="static")e=e.offsetParent;return e||i.body})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);v.fn[e]=function(i){return v.access(this,function(e,i,s){var o=tr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?v(o).scrollLeft():s,r?s:v(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),v.each({Height:"height",Width:"width"},function(e,n){v.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){v.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return v.access(this,function(n,r,i){var s;return v.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?v.css(n,r,i,u):v.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=v,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})}(window),define("mockup-registry",["jquery"],function(e,t){var n={patterns:{},warn:function(e){window.DEBUG&&window.console&&console.warn(e)},getOptions:function(t,r,i){i=i||{},t.length!==0&&!e.nodeName(t[0],"body")&&(i=n.getOptions(t.parent(),r,i));var s={};if(t.length!==0){s=t.data("pat-"+r);if(s&&typeof s=="string"){var o={};e.each(s.split(";"),function(e,t){t=t.split(":"),t.reverse();var n=t.pop();n=n.replace(/^\s+|\s+$/g,""),t.reverse();var r=t.join(":");r=r.replace(/^\s+|\s+$/g,""),o[n]=r}),s=o}}return e.extend(!0,{},i,s)},init:function(e,r,i){var s=e.data("pattern-"+r);if(s===t&&n.patterns[r]){if(window.DEBUG)s=new n.patterns[r](e,n.getOptions(e,r,i));else try{s=new n.patterns[r](e,n.getOptions(e,r,i))}catch(o){n.warn('Failed while initializing "'+r+'" pattern.')}e.data("pattern-"+r,s)}return s},scan:function(t){var r=e(t),i=[];i=e.merge(i,r.filter('[class*="pat-"]')),i=e.merge(i,e('[class*="pat-"]',r)),e.each(i,function(t,r){r=e(r),e.each(r.attr("class").split(" "),function(e,t){t.indexOf("pat-")===0&&n.init(r,t.substr(4))})})},register:function(r){if(!r.prototype.name)return n.warn("Pattern didn't specified a name."),!1;r.prototype.jqueryPlugin===t&&(r.prototype.jqueryPlugin="pattern"+r.prototype.name.charAt(0).toUpperCase()+r.prototype.name.slice(1)),e.fn[r.prototype.jqueryPlugin]=function(i,s){return e(this).each(function(){typeof i=="object"&&(s=i,i=t);var o=e(this),u=n.init(o,r.prototype.name,s);if(i){if(u[i]===t)return n.warn('Method "'+i+'" does not exists.'),!1;if(i.charAt(0)==="_")return n.warn('Method "'+i+'" is private.'),!1;u[i].apply(u,[s])}}),this},n.patterns[r.prototype.name]=r}};return n}),define("mockup-patterns-base",["jquery","mockup-registry"],function(e,t){var n=function(t,n){this.$el=t,this.options=e.extend(!0,{},this.defaults||{},n||{}),this.init(),this.trigger("init")};return n.prototype={constructor:n,on:function(e,t){this.$el.on(e+"."+this.name+".patterns",t)},trigger:function(e,t){t===undefined&&(t=[]),this.$el.trigger(e+"."+this.name+".patterns",t)}},n.extend=function(n){var r=this,i;n&&n.hasOwnProperty("constructor")?i=n.constructor:i=function(){r.apply(this,arguments)};var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,i.extend=r.extend,e.extend(!0,i.prototype,n),i.__super__=r.prototype,t.register(i),i},n}),function(e){typeof e.fn.each2=="undefined"&&e.extend(e.fn,{each2:function(t){var n=e([0]),r=-1,i=this.length;while(++r<i&&(n.context=n[0]=this[r])&&t.call(n[0],r,n)!==!1);return this}})}(jQuery),function(e,t){function p(e){var t,n,r,i;if(!e||e.length<1)return e;t="";for(n=0,r=e.length;n<r;n++)i=e.charAt(n),t+=h[i]||i;return t}function d(e,t){var n=0,r=t.length;for(;n<r;n+=1)if(m(e,t[n]))return n;return-1}function v(){var t=e(c);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function m(e,n){return e===n?!0:e===t||n===t?!1:e===null||n===null?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function g(t,n){var r,i,s;if(t===null||t.length<1)return[];r=t.split(n);for(i=0,s=r.length;i<s;i+=1)r[i]=e.trim(r[i]);return r}function y(e){return e.outerWidth(!1)-e.width()}function b(n){var r="keyup-change-value";n.on("keydown",function(){e.data(n,r)===t&&e.data(n,r,n.val())}),n.on("keyup",function(){var i=e.data(n,r);i!==t&&n.val()!==i&&(e.removeData(n,r),n.trigger("keyup-change"))})}function w(n){n.on("mousemove",function(n){var r=a;(r===t||r.x!==n.pageX||r.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function E(e,n,r){r=r||t;var i;return function(){var t=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,t)},e)}}function S(e){var t=!1,n;return function(){return t===!1&&(n=e(),t=!0),n}}function x(e,t){var n=E(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){d(e.target,t.get())>=0&&n(e)})}function T(e){if(e[0]===document.activeElement)return;window.setTimeout(function(){var t=e[0],n=e.val().length,r;e.focus(),e.is(":visible")&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(n,n):t.createTextRange&&(r=t.createTextRange(),r.collapse(!1),r.select()))},0)}function N(t){t=e(t)[0];var n=0,r=0;if("selectionStart"in t)n=t.selectionStart,r=t.selectionEnd-n;else if("selection"in document){t.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),n=i.text.length-r}return{offset:n,length:r}}function C(e){e.preventDefault(),e.stopPropagation()}function k(e){e.preventDefault(),e.stopImmediatePropagation()}function L(t){if(!u){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);u=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),u.attr("class","select2-sizer"),e("body").append(u)}return u.text(t.val()),u.width()}function A(t,n,r){var i,s=[],o;i=t.attr("class"),i&&(i=""+i,e(i.split(" ")).each2(function(){this.indexOf("select2-")===0&&s.push(this)})),i=n.attr("class"),i&&(i=""+i,e(i.split(" ")).each2(function(){this.indexOf("select2-")!==0&&(o=r(this),o&&s.push(o))})),t.attr("class",s.join(" "))}function O(e,t,n,r){var i=p(e.toUpperCase()).indexOf(p(t.toUpperCase())),s=t.length;if(i<0){n.push(r(e));return}n.push(r(e.substring(0,i))),n.push("<span class='select2-match'>"),n.push(r(e.substring(i,i+s))),n.push("</span>"),n.push(r(e.substring(i+s,e.length)))}function M(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(n){var r,i=null,s=n.quietMillis||100,o=n.url,u=this;return function(a){window.clearTimeout(r),r=window.setTimeout(function(){var r=n.data,s=o,f=n.transport||e.fn.select2.ajaxDefaults.transport,l={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},c=e.extend({},e.fn.select2.ajaxDefaults.params,l);r=r?r.call(u,a.term,a.page,a.context):null,s=typeof s=="function"?s.call(u,a.term,a.page,a.context):s,i&&i.abort(),n.params&&(e.isFunction(n.params)?e.extend(c,n.params.call(u)):e.extend(c,n.params)),e.extend(c,{url:s,dataType:n.dataType,data:r,success:function(e){var t=n.results(e,a.page);a.callback(t)}}),i=f.call(u,c)},s)}}function D(t){var n=t,r,i,s=function(e){return""+e.text};e.isArray(n)&&(i=n,n={results:i}),e.isFunction(n)===!1&&(i=n,n=function(){return i});var o=n();return o.text&&(s=o.text,e.isFunction(s)||(r=o.text,s=function(e){return e[r]})),function(t){var r=t.term,i={results:[]},o;if(r===""){t.callback(n());return}o=function(n,i){var u,a;n=n[0];if(n.children){u={};for(a in n)n.hasOwnProperty(a)&&(u[a]=n[a]);u.children=[],e(n.children).each2(function(e,t){o(t,u.children)}),(u.children.length||t.matcher(r,s(u),n))&&i.push(u)}else t.matcher(r,s(n),n)&&i.push(n)},e(n().results).each2(function(e,t){o(t,i.results)}),t.callback(i)}}function P(n){var r=e.isFunction(n);return function(i){var s=i.term,o={results:[]};e(r?n():n).each(function(){var e=this.text!==t,n=e?this.text:this;(s===""||i.matcher(s,n))&&o.results.push(e?this:{id:this,text:this})}),i.callback(o)}}function H(t,n){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(n+" must be a function or a falsy value")}function B(t){return e.isFunction(t)?t():t}function j(t){var n=0;return e.each(t,function(e,t){t.children?n+=j(t.children):n++}),n}function F(e,n,r,i){var s=e,o=!1,u,a,f,l,c;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return t;for(;;){a=-1;for(f=0,l=i.tokenSeparators.length;f<l;f++){c=i.tokenSeparators[f],a=e.indexOf(c);if(a>=0)break}if(a<0)break;u=e.substring(0,a),e=e.substring(a+c.length);if(u.length>0){u=i.createSearchChoice.call(this,u,n);if(u!==t&&u!==null&&i.id(u)!==t&&i.id(u)!==null){o=!1;for(f=0,l=n.length;f<l;f++)if(m(i.id(u),i.id(n[f]))){o=!0;break}o||r(u)}}}if(s!==e)return e}function I(t,n){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=e.extend(r.prototype,n),r}if(window.Select2!==t)return;var n,r,i,s,o,u,a={x:0,y:0},f,l,n={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case n.SHIFT:case n.CTRL:case n.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&e<=123}},c="<div class='select2-measure-scrollbar'></div>",h={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};f=e(document),o=function(){var e=1;return function(){return e++}}(),f.on("mousemove",function(e){a.x=e.pageX,a.y=e.pageY}),r=I(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var r,i,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&n.element.data("select2")!==null&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+o()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=S(function(){return n.element.closest("body")}),A(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(B(n.containerCss)),this.container.addClass(B(n.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",C),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),A(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(B(n.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",C),this.results=r=this.container.find(s),this.search=i=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",C),w(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",s,this.bind(this.highlightUnderEvent)),x(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&r.mousewheel(function(e,t,n,i){var s=r.scrollTop();i>0&&s-i<=0?(r.scrollTop(0),C(e)):i<0&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),C(e))}),b(i),i.on("keyup-change input paste",this.bind(this.updateResults)),i.on("focus",function(){i.addClass("select2-focused")}),i.on("blur",function(){i.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),n.maximumInputLength!==null&&this.search.attr("maxlength",n.maximumInputLength);var u=n.element.prop("disabled");u===t&&(u=!1),this.enable(!u);var a=n.element.prop("readonly");a===t&&(a=!1),this.readonly(a),l=l||v(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.nextSearchTerm=t},destroy:function(){var e=this.opts.element,n=e.data("select2");this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),n!==t&&(n.container.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){if(e.is("option"))return{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:m(e.attr("locked"),"locked")||m(e.data("locked"),!0)};if(e.is("optgroup"))return{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}},prepareOpts:function(n){var r,i,s,o,u=this;r=n.element,r.get(0).tagName.toLowerCase()==="select"&&(this.select=i=n.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(r,i,s){var o,a=this.opts.id;o=function(r,i,f){var l,c,h,p,d,v,m,g,y,b;r=n.sortResults(r,i,s);for(l=0,c=r.length;l<c;l+=1)h=r[l],d=h.disabled===!0,p=!d&&a(h)!==t,v=h.children&&h.children.length>0,m=e("<li></li>"),m.addClass("select2-results-dept-"+f),m.addClass("select2-result"),m.addClass(p?"select2-result-selectable":"select2-result-unselectable"),d&&m.addClass("select2-disabled"),v&&m.addClass("select2-result-with-children"),m.addClass(u.opts.formatResultCssClass(h)),g=e(document.createElement("div")),g.addClass("select2-result-label"),b=n.formatResult(h,g,s,u.opts.escapeMarkup),b!==t&&g.html(b),m.append(g),v&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),o(h.children,y,f+1),m.append(y)),m.data("select2-data",h),i.append(m)},o(i,r,0)}},e.fn.select2.defaults,n),typeof n.id!="function"&&(s=n.id,n.id=function(e){return e[s]});if(e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}i?(n.query=this.bind(function(e){var n={results:[],more:!1},i=e.term,s,o,a;a=function(t,n){var r;t.is("option")?e.matcher(i,t.text(),t)&&n.push(u.optionToData(t)):t.is("optgroup")&&(r=u.optionToData(t),t.children().each2(function(e,t){a(t,r.children)}),r.children.length>0&&n.push(r))},s=r.children(),this.getPlaceholder()!==t&&s.length>0&&(o=this.getPlaceholderOption(),o&&(s=s.not(o))),s.each2(function(e,t){a(t,n.results)}),e.callback(n)}),n.id=function(e){return e.id},n.formatResultCssClass=function(e){return e.css}):"query"in n||("ajax"in n?(o=n.element.data("ajax-url"),o&&o.length>0&&(n.ajax.url=o),n.query=_.call(n.element,n.ajax)):"data"in n?n.query=D(n.data):"tags"in n&&(n.query=P(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,r){var i=[];e(g(t.val(),n.separator)).each(function(){var t={id:this,text:this},r=n.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){if(m(this.id,t.id))return t=this,!1}),i.push(t)}),r(i)})));if(typeof n.query!="function")throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){var e=this.opts.element,n,r;e.on("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),n=this.bind(function(){var n=e.prop("disabled");n===t&&(n=!1),this.enable(!n);var r=e.prop("readonly");r===t&&(r=!1),this.readonly(r),A(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(B(this.opts.containerCssClass)),A(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(B(this.opts.dropdownCssClass))}),e.on("propertychange.select2",n),this.mutationCallback===t&&(this.mutationCallback=function(e){e.forEach(n)}),r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,r!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new r(this.mutationCallback),this.propertyObserver.observe(e.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0);if(this._enabled===e)return;this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface()},disable:function(){this.enable(!1)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t=this.dropdown,n=this.container.offset(),r=this.container.outerHeight(!1),i=this.container.outerWidth(!1),s=t.outerHeight(!1),o=e(window),u=o.width(),a=o.height(),f=o.scrollLeft()+u,c=o.scrollTop()+a,h=n.top+r,p=n.left,d=h+s<=c,v=n.top-s>=this.body().scrollTop(),m=t.outerWidth(!1),g=p+m<=f,y=t.hasClass("select2-drop-above"),b,w,E,S,x;y?(w=!0,!v&&d&&(E=!0,w=!1)):(w=!1,!d&&v&&(E=!0,w=!0)),E&&(t.hide(),n=this.container.offset(),r=this.container.outerHeight(!1),i=this.container.outerWidth(!1),s=t.outerHeight(!1),f=o.scrollLeft()+u,c=o.scrollTop()+a,h=n.top+r,p=n.left,m=t.outerWidth(!1),g=p+m<=f,t.show()),this.opts.dropdownAutoWidth?(x=e(".select2-results",t)[0],t.addClass("select2-drop-auto-width"),t.css("width",""),m=t.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:l.width),m>i?i=m:m=i,g=p+m<=f):this.container.removeClass("select2-drop-auto-width"),this.body().css("position")!=="static"&&(b=this.body().offset(),h-=b.top,p-=b.left),g||(p=n.left+i-m),S={left:p,width:i},w?(S.bottom=a-n.top,S.top="auto",this.container.addClass("select2-drop-above"),t.addClass("select2-drop-above")):(S.top=h,S.bottom="auto",this.container.removeClass("select2-drop-above"),t.removeClass("select2-drop-above")),S=e.extend(S,B(this.opts.dropdownCss)),t.css(S)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var t=this.containerId,n="scroll."+t,r="resize."+t,i="orientationchange."+t,s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),s=e("#select2-drop-mask"),s.length==0&&(s=e(document.createElement("div")),s.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),s.hide(),s.appendTo(this.body()),s.on("mousedown touchstart click",function(t){var n=e("#select2-drop"),r;n.length>0&&(r=n.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close({focus:!0}),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==s[0]&&this.dropdown.before(s),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),s.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+n+" "+i,function(e){o.positionDropdown()})})},close:function(){if(!this.opened())return;var t=this.containerId,n="scroll."+t,r="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(r).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return B(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t=this.results,n,r,i,s,o,u,a;r=this.highlight();if(r<0)return;if(r==0){t.scrollTop(0);return}n=this.findHighlightableChoices().find(".select2-result-label"),i=e(n[r]),s=i.offset().top+i.outerHeight(!0),r===n.length-1&&(a=t.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=t.offset().top+t.outerHeight(!0),s>o&&t.scrollTop(t.scrollTop()+(s-o)),u=i.offset().top-t.offset().top,u<0&&i.css("display")!="none"&&t.scrollTop(t.scrollTop()+u)},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(t){var n=this.findHighlightableChoices(),r=this.highlight();while(r>-1&&r<n.length){r+=t;var i=e(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(t){var n=this.findHighlightableChoices(),r,i;if(arguments.length===0)return d(n.filter(".select2-highlighted")[0],n.get());t>=n.length&&(t=n.length-1),t<0&&(t=0),this.removeHighlight(),r=e(n[t]),r.addClass("select2-highlighted"),this.ensureHighlightVisible(),i=r.data("select2-data"),i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else n.length==0&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n,r=this.resultsPage+1,i=this,s=this.search.val(),o=this.context;if(t.length===0)return;n=t.offset().top-e.offset().top-e.height(),n<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:r,context:o,matcher:this.opts.matcher,callback:this.bind(function(n){if(!i.opened())return;i.opts.populateResults.call(this,e,n.results,{term:s,page:r,context:o}),i.postprocessResults(n,!1,!1),n.more===!0?(t.detach().appendTo(e).text(i.opts.formatLoadMore(r+1)),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):t.remove(),i.positionDropdown(),i.resultsPage=r,i.context=n.context,this.opts.element.trigger({type:"select2-loaded",items:n})})}))},tokenize:function(){},updateResults:function(n){function h(){r.removeClass("select2-active"),u.positionDropdown()}function p(e){i.html(e),h()}var r=this.search,i=this.results,s=this.opts,o,u=this,a,f=r.val(),l=e.data(this.container,"select2-last-term"),c;if(n!==!0&&l&&m(f,l))return;e.data(this.container,"select2-last-term",f);if(n!==!0&&(this.showSearchInput===!1||!this.opened()))return;c=++this.queryCount;var d=this.getMaximumSelectionSize();if(d>=1){o=this.data();if(e.isArray(o)&&o.length>=d&&H(s.formatSelectionTooBig,"formatSelectionTooBig")){p("<li class='select2-selection-limit'>"+s.formatSelectionTooBig(d)+"</li>");return}}if(r.val().length<s.minimumInputLength){H(s.formatInputTooShort,"formatInputTooShort")?p("<li class='select2-no-results'>"+s.formatInputTooShort(r.val(),s.minimumInputLength)+"</li>"):p(""),n&&this.showSearch&&this.showSearch(!0);return}if(s.maximumInputLength&&r.val().length>s.maximumInputLength){H(s.formatInputTooLong,"formatInputTooLong")?p("<li class='select2-no-results'>"+s.formatInputTooLong(r.val(),s.maximumInputLength)+"</li>"):p("");return}s.formatSearching&&this.findHighlightableChoices().length===0&&p("<li class='select2-searching'>"+s.formatSearching()+"</li>"),r.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&a!=null&&r.val(a),this.resultsPage=1,s.query({element:s.element,term:r.val(),page:this.resultsPage,context:null,matcher:s.matcher,callback:this.bind(function(o){var a;if(c!=this.queryCount)return;if(!this.opened()){this.search.removeClass("select2-active");return}this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&r.val()!==""&&(a=this.opts.createSearchChoice.call(u,r.val(),o.results),a!==t&&a!==null&&u.id(a)!==t&&u.id(a)!==null&&e(o.results).filter(function(){return m(u.id(this),u.id(a))}).length===0&&o.results.unshift(a));if(o.results.length===0&&H(s.formatNoMatches,"formatNoMatches")){p("<li class='select2-no-results'>"+s.formatNoMatches(r.val())+"</li>");return}i.empty(),u.opts.populateResults.call(this,i,o.results,{term:r.val(),page:this.resultsPage,context:null}),o.more===!0&&H(s.formatLoadMore,"formatLoadMore")&&(i.append("<li class='select2-more-results'>"+u.opts.escapeMarkup(s.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),h(),this.opts.element.trigger({type:"select2-loaded",items:o})})})},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){T(this.search)},selectHighlighted:function(e){var t=this.highlight(),n=this.results.find(".select2-highlighted"),r=n.closest(".select2-result").data("select2-data");r?(this.highlight(t),this.onSelect(r,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children("option").first();if(this.opts.placeholderOption!==t)return this.opts.placeholderOption==="first"&&e||typeof this.opts.placeholderOption=="function"&&this.opts.placeholderOption(this.select);if(e.text()===""&&e.val()==="")return e}},initContainerWidth:function(){function n(){var n,r,i,s,o,u;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){n=this.opts.element.attr("style");if(n!==t){r=n.split(";");for(s=0,o=r.length;s<o;s+=1){u=r[s].replace(/\s/g,""),i=u.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(i!==null&&i.length>=1)return i[1]}}return this.opts.width==="resolve"?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var r=n.call(this);r!==null&&this.container.css("width",r)}}),i=I(r,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow'><b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,r,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),n=this.search.get(0),n.createTextRange?(r=n.createTextRange(),r.collapse(!1),r.select()):n.setSelectionRange&&(i=this.search.val().length,n.setSelectionRange(i,i)),this.search.val()===""&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(e){if(!this.opened())return;this.parent.close.apply(this,arguments),e=e||{focus:!0},this.focusser.removeAttr("disabled"),e.focus&&this.focusser.focus()},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t,r=this.container,i=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=r.find(".select2-choice"),this.focusser=r.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+o()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===n.PAGE_UP||e.which===n.PAGE_DOWN){C(e);return}switch(e.which){case n.UP:case n.DOWN:this.moveHighlight(e.which===n.UP?-1:1),C(e);return;case n.ENTER:this.selectHighlighted(),C(e);return;case n.TAB:this.selectHighlighted({noFocus:!0});return;case n.ESC:this.cancel(e),C(e);return}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===n.TAB||n.isControl(e)||n.isFunctionKey(e)||e.which===n.ESC)return;if(this.opts.openOnEnter===!1&&e.which===n.ENTER){C(e);return}if(e.which==n.DOWN||e.which==n.UP||e.which==n.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;this.open(),C(e);return}if(e.which==n.DELETE||e.which==n.BACKSPACE){this.opts.allowClear&&this.clear(),C(e);return}})),b(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){e.stopPropagation();if(this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){if(!this.isInterfaceEnabled())return;this.clear(),k(e),this.close(),this.selection.focus()})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),C(t)})),i.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){C(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var r=e.Event("select2-clearing");this.opts.element.trigger(r);if(r.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){var e;if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&e!==null&&(n.updateSelection(e),n.close(),n.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()?(e=this.getPlaceholderOption())!==t&&e.prop("selected")||this.opts.element.val()===""||this.opts.element.val()===t||this.opts.element.val()===null:!1},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(e,t){var r=e.find("option").filter(function(){return this.selected});t(n.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=n.val(),s=null;t.query({matcher:function(e,n,r){var o=m(i,t.id(r));return o&&(s=r),o},callback:e.isFunction(r)?function(){r(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var r=0,i=this,s=!0;this.findHighlightableChoices().each2(function(e,t){if(m(i.id(t.data("select2-data")),i.opts.element.val()))return r=e,!1}),n!==!1&&(t===!0&&r>=0?this.highlight(r):this.highlight(0));if(t===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(j(e.results)>=o)}},showSearch:function(t){if(this.showSearchInput===t)return;this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t)},onSelect:function(e,t){if(!this.triggerSelect(e))return;var n=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),(!t||!t.noFocus)&&this.focusser.focus(),m(n,this.id(e))||this.triggerChange({added:e,removed:r})},updateSelection:function(e){var n=this.selection.find(".select2-chosen"),r,i;this.selection.data("select2-data",e),n.empty(),e!==null&&(r=this.opts.formatSelection(e,n,this.opts.escapeMarkup)),r!==t&&n.append(r),i=this.opts.formatSelectionCssClass(e,n),i!==t&&n.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,r=null,i=this,s=this.data();if(arguments.length===0)return this.opts.element.val();e=arguments[0],arguments.length>1&&(n=arguments[1]);if(this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return r=i.optionToData(t),!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange({added:r,removed:s});else{if(!e&&e!==0){this.clear(n);return}if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),n&&i.triggerChange({added:e,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,r=!1;if(arguments.length===0)return n=this.selection.data("select2-data"),n==t&&(n=null),n;arguments.length>1&&(r=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),r&&this.triggerChange({added:e,removed:n})):this.clear(r)}}),s=I(r,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(e,t){var r=[];e.find("option").filter(function(){return this.selected}).each2(function(e,t){r.push(n.optionToData(t))}),t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=g(n.val(),t.separator),s=[];t.query({matcher:function(n,r,o){var u=e.grep(i,function(e){return m(e,t.id(o))}).length;return u&&s.push(o),u},callback:e.isFunction(r)?function(){var e=[];for(var n=0;n<i.length;n++){var o=i[n];for(var u=0;u<s.length;u++){var a=s[u];if(m(o,t.id(a))){e.push(a),s.splice(u,1);break}}}r(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");if(!t.length||!e||e[0]!=t[0])t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments)},initContainer:function(){var t=".select2-choices",r;this.searchContainer=this.container.find(".select2-search-field"),this.selection=r=this.container.find(t);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(t){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+o()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){if(!this.isInterfaceEnabled())return;this.opened()||this.open()})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;++this.keydowns;var t=r.find(".select2-search-choice-focus"),i=t.prev(".select2-search-choice:not(.select2-locked)"),s=t.next(".select2-search-choice:not(.select2-locked)"),o=N(this.search);if(!(!t.length||e.which!=n.LEFT&&e.which!=n.RIGHT&&e.which!=n.BACKSPACE&&e.which!=n.DELETE&&e.which!=n.ENTER)){var u=t;e.which==n.LEFT&&i.length?u=i:e.which==n.RIGHT?u=s.length?s:null:e.which===n.BACKSPACE?(this.unselect(t.first()),this.search.width(10),u=i.length?i:s):e.which==n.DELETE?(this.unselect(t.first()),this.search.width(10),u=s.length?s:null):e.which==n.ENTER&&(u=null),this.selectChoice(u),C(e),(!u||!u.length)&&this.open();return}if((e.which===n.BACKSPACE&&this.keydowns==1||e.which==n.LEFT)&&o.offset==0&&!o.length){this.selectChoice(r.find(".select2-search-choice:not(.select2-locked)").last()),C(e);return}this.selectChoice(null);if(this.opened())switch(e.which){case n.UP:case n.DOWN:this.moveHighlight(e.which===n.UP?-1:1),C(e);return;case n.ENTER:this.selectHighlighted(),C(e);return;case n.TAB:this.selectHighlighted({noFocus:!0}),this.close();return;case n.ESC:this.cancel(e),C(e);return}if(e.which===n.TAB||n.isControl(e)||n.isFunctionKey(e)||e.which===n.BACKSPACE||e.which===n.ESC)return;if(e.which===n.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===n.PAGE_UP||e.which===n.PAGE_DOWN)&&C(e),e.which===n.ENTER&&C(e)})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",t,this.bind(function(t){if(!this.isInterfaceEnabled())return;if(e(t.target).closest(".select2-search-choice").length>0)return;this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()})),this.container.on("focus",t,this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder()})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var e;this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||this.opts.element.val()!==""){var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&e!==null&&(n.updateSelection(e),n.close(),n.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],i=this;e(t).each(function(){d(i.id(this),n)<0&&(n.push(i.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){i.addSelectedChoice(this)}),i.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),e!=null&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){if(!this.triggerSelect(e))return;this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),(!t||!t.noFocus)&&this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r=!n.locked,i=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),o=r?i:s,u=this.id(n),a=this.getVal(),f,l;f=this.opts.formatSelection(n,o.find("div"),this.opts.escapeMarkup),f!=t&&o.find("div").replaceWith("<div>"+f+"</div>"),l=this.opts.formatSelectionCssClass(n,o.find("div")),l!=t&&o.addClass(l),r&&o.find(".select2-search-choice-close").on("mousedown",C).on("click dblclick",this.bind(function(t){if(!this.isInterfaceEnabled())return;e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),C(t)})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active")})),o.data("select2-data",n),o.insertBefore(this.searchContainer),a.push(u),this.setVal(a)},unselect:function(t){var n=this.getVal(),r,i;t=t.closest(".select2-search-choice");if(t.length===0)throw"Invalid argument: "+t+". Must be .select2-search-choice";r=t.data("select2-data");if(!r)return;while((i=d(this.id(r),n))>=0)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();var s=e.Event("select2-removing");s.val=this.id(r),s.choice=r,this.opts.element.trigger(s);if(s.isDefaultPrevented())return;t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(r),choice:r}),this.triggerChange({removed:r})},postprocessResults:function(e,t,n){var r=this.getVal(),i=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),o=this;i.each2(function(e,t){var n=o.id(t.data("select2-data"));d(n,r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(e,t){!t.is(".select2-result-selectable")&&t.find(".select2-result-selectable:not(.select2-selected)").length===0&&t.addClass("select2-selected")}),this.highlight()==-1&&n!==!1&&o.highlight(0),!this.opts.createSearchChoice&&!i.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&this.results.find(".select2-no-results").length===0)&&H(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+o.opts.formatNoMatches(o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-y(this.search)},resizeSearch:function(){var e,t,n,r,i,s=y(this.search);e=L(this.search)+10,t=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(t-r)-s,i<e&&(i=n-s),i<40&&(i=n-s),i<=0&&(i=e),this.search.width(Math.floor(i))},getVal:function(){var e;return this.select?(e=this.select.val(),e===null?[]:e):(e=this.opts.element.val(),g(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){d(this,n)<0&&n.push(this)}),this.opts.element.val(n.length===0?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){var t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var r=0;r<e.length;r++)m(this.opts.id(t[n]),this.opts.id(e[r]))&&(t.splice(n,1),n>0&&n--,e.splice(r,1),r--);return{added:t,removed:e}},val:function(n,r){var i,s=this;if(arguments.length===0)return this.getVal();i=this.data(),i.length||(i=[]);if(!n&&n!==0){this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),r&&this.triggerChange({added:this.data(),removed:i});return}this.setVal(n);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,s.id);s.setVal(n),s.updateSelection(t),s.clearSearch(),r&&s.triggerChange(s.buildChangeDetails(i,s.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var r=this,i,s;if(arguments.length===0)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();s=this.data(),t||(t=[]),i=e.map(t,function(e){return r.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(s,this.data()))}}),e.fn.select2=function(){var n=Array.prototype.slice.call(arguments,0),r,o,u,a,f,l=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],h=["val","data"],p={search:"externalSearch"};return this.each(function(){if(n.length===0||typeof n[0]=="object")r=n.length===0?{}:e.extend({},n[0]),r.element=e(this),r.element.get(0).tagName.toLowerCase()==="select"?f=r.element.prop("multiple"):(f=r.multiple||!1,"tags"in r&&(r.multiple=f=!0)),o=f?new s:new i,o.init(r);else{if(typeof n[0]!="string")throw"Invalid arguments to select2 plugin: "+n;if(d(n[0],l)<0)throw"Unknown method: "+n[0];a=t,o=e(this).data("select2");if(o===t)return;u=n[0],u==="container"?a=o.container:u==="dropdown"?a=o.dropdown:(p[u]&&(u=p[u]),a=o[u].apply(o,n.slice(1)));if(d(n[0],c)>=0||d(n[0],h)&&n.length==1)return!1}}),a===t?this:a},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var i=[];return O(e.text,n.term,i,r),i.join("")},formatSelection:function(e,n,r){return e?r(e.text):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return t},formatSelectionCssClass:function(e,n){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" more character"+(n==1?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(n==1?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(e==1?"":"s")},formatLoadMore:function(e){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return p(""+t).toUpperCase().indexOf(p(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:F,escapeMarkup:M,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:_,local:D,tags:P},util:{debounce:E,markMatch:O,escapeMarkup:M,stripDiacritics:p},"class":{"abstract":r,single:i,multi:s}}}(jQuery),define("select2",function(){}),function(e){define("jquery.event.drag",["jquery"],function(){return function(){(function(e){e.fn.drag=function(t,n,r){var i=typeof t=="string"?t:"",s=e.isFunction(t)?t:e.isFunction(n)?n:null;return i.indexOf("drag")!==0&&(i="drag"+i),r=(t==s?n:r)||{},s?this.bind(i,r,s):this.trigger(i)};var t=e.event,n=t.special,r=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,r.datakey),i=t.data||{};n.related+=1,e.each(r.defaults,function(e,t){i[e]!==undefined&&(n[e]=i[e])})},remove:function(){e.data(this,r.datakey).related-=1},setup:function(){if(e.data(this,r.datakey))return;var n=e.extend({related:0},r.defaults);e.data(this,r.datakey,n),t.add(this,"touchstart mousedown",r.init,n),this.attachEvent&&this.attachEvent("ondragstart",r.dontstart)},teardown:function(){var n=e.data(this,r.datakey)||{};if(n.related)return;e.removeData(this,r.datakey),t.remove(this,"touchstart mousedown",r.init),r.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",r.dontstart)},init:function(i){if(r.touched)return;var s=i.data,o;if(i.which!=0&&s.which>0&&i.which!=s.which)return;if(e(i.target).is(s.not))return;if(s.handle&&!e(i.target).closest(s.handle,i.currentTarget).length)return;r.touched=i.type=="touchstart"?this:null,s.propagates=1,s.mousedown=this,s.interactions=[r.interaction(this,s)],s.target=i.target,s.pageX=i.pageX,s.pageY=i.pageY,s.dragging=null,o=r.hijack(i,"draginit",s);if(!s.propagates)return;o=r.flatten(o),o&&o.length&&(s.interactions=[],e.each(o,function(){s.interactions.push(r.interaction(this,s))})),s.propagates=s.interactions.length,s.drop!==!1&&n.drop&&n.drop.handler(i,s),r.textselect(!1),r.touched?t.add(r.touched,"touchmove touchend",r.handler,s):t.add(document,"mousemove mouseup",r.handler,s);if(!r.touched||s.live)return!1},interaction:function(t,n){var i=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new r.callback,droppable:[],offset:i}},handler:function(i){var s=i.data;switch(i.type){case!s.dragging&&"touchmove":i.preventDefault();case!s.dragging&&"mousemove":if(Math.pow(i.pageX-s.pageX,2)+Math.pow(i.pageY-s.pageY,2)<Math.pow(s.distance,2))break;i.target=s.target,r.hijack(i,"dragstart",s),s.propagates&&(s.dragging=!0);case"touchmove":i.preventDefault();case"mousemove":if(s.dragging){r.hijack(i,"drag",s);if(s.propagates){s.drop!==!1&&n.drop&&n.drop.handler(i,s);break}i.type="mouseup"};case"touchend":case"mouseup":default:r.touched?t.remove(r.touched,"touchmove touchend",r.handler):t.remove(document,"mousemove mouseup",r.handler),s.dragging&&(s.drop!==!1&&n.drop&&n.drop.handler(i,s),r.hijack(i,"dragend",s)),r.textselect(!0),s.click===!1&&s.dragging&&e.data(s.mousedown,"suppress.click",(new Date).getTime()+5),s.dragging=r.touched=!1}},hijack:function(n,i,s,o,u){if(!s)return;var a={event:n.originalEvent,type:n.type},f=i.indexOf("drop")?"drag":"drop",l,c=o||0,h,p,d,v=isNaN(o)?s.interactions.length:o;n.type=i,n.originalEvent=null,s.results=[];do if(h=s.interactions[c]){if(i!=="dragend"&&h.cancelled)continue;d=r.properties(n,s,h),h.results=[],e(u||h[f]||s.droppable).each(function(o,u){d.target=u,n.isPropagationStopped=function(){return!1},l=u?t.dispatch.call(u,n,d):null,l===!1?(f=="drag"&&(h.cancelled=!0,s.propagates-=1),i=="drop"&&(h[f][o]=null)):i=="dropinit"&&h.droppable.push(r.element(l)||u),i=="dragstart"&&(h.proxy=e(r.element(l)||h.drag)[0]),h.results.push(l),delete n.result;if(i!=="dropinit")return l}),s.results[c]=r.flatten(h.results),i=="dropinit"&&(h.droppable=r.flatten(h.droppable)),i=="dragstart"&&!h.cancelled&&d.update()}while(++c<v);return n.type=a.type,n.originalEvent=a.event,r.flatten(s.results)},properties:function(e,t,n){var i=n.callback;return i.drag=n.drag,i.proxy=n.proxy||n.drag,i.startX=t.pageX,i.startY=t.pageY,i.deltaX=e.pageX-t.pageX,i.deltaY=e.pageY-t.pageY,i.originalX=n.offset.left,i.originalY=n.offset.top,i.offsetX=i.originalX+i.deltaX,i.offsetY=i.originalY+i.deltaY,i.drop=r.flatten((n.drop||[]).slice()),i.available=r.flatten((n.droppable||[]).slice()),i},element:function(e){if(e&&(e.jquery||e.nodeType==1))return e},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?r.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",r.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};r.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,function(e){n.drop.locate(this,e)})}};var i=t.dispatch;t.dispatch=function(t){if(e.data(this,"suppress."+t.type)-(new Date).getTime()>0){e.removeData(this,"suppress."+t.type);return}return i.apply(this,arguments)};var s=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var r=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;r&&e.each(s.props,function(e,n){t[n]=r[n]})}return t}};n.draginit=n.dragstart=n.dragend=r})(jQuery)}.apply(e,arguments)})}(this),function(e){define("jquery.event.drop",["jquery"],function(){return function(){return function(e){e.fn.drop=function(t,n,r){var i=typeof t=="string"?t:"",s=e.isFunction(t)?t:e.isFunction(n)?n:null;return i.indexOf("drop")!==0&&(i="drop"+i),r=(t==s?n:r)||{},s?this.bind(i,r,s):this.trigger(i)},e.drop=function(t){t=t||{},r.multi=t.multi===!0?Infinity:t.multi===!1?1:isNaN(t.multi)?r.multi:t.multi,r.delay=t.delay||r.delay,r.tolerance=e.isFunction(t.tolerance)?t.tolerance:t.tolerance===null?null:r.tolerance,r.mode=t.mode||r.mode||"intersect"};var t=e.event,n=t.special,r=e.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(t){var n=e.data(this,r.datakey);n.related+=1},remove:function(){e.data(this,r.datakey).related-=1},setup:function(){if(e.data(this,r.datakey))return;var t={related:0,active:[],anyactive:0,winner:0,location:{}};e.data(this,r.datakey,t),r.targets.push(this)},teardown:function(){var t=e.data(this,r.datakey)||{};if(t.related)return;e.removeData(this,r.datakey);var n=this;r.targets=e.grep(r.targets,function(e){return e!==n})},handler:function(t,i){var s,o;if(!i)return;switch(t.type){case"mousedown":case"touchstart":o=e(r.targets),typeof i.drop=="string"&&(o=o.filter(i.drop)),o.each(function(){var t=e.data(this,r.datakey);t.active=[],t.anyactive=0,t.winner=0}),i.droppable=o,n.drag.hijack(t,"dropinit",i);break;case"mousemove":case"touchmove":r.event=t,r.timer||r.tolerate(i);break;case"mouseup":case"touchend":r.timer=clearTimeout(r.timer),i.propagates&&(n.drag.hijack(t,"drop",i),n.drag.hijack(t,"dropend",i))}},locate:function(t,n){var i=e.data(t,r.datakey),s=e(t),o=s.offset()||{},u=s.outerHeight(),a=s.outerWidth(),f={elem:t,width:a,height:u,top:o.top,left:o.left,right:o.left+a,bottom:o.top+u};return i&&(i.location=f,i.index=n,i.elem=t),f},contains:function(e,t){return(t[0]||t.left)>=e.left&&(t[0]||t.right)<=e.right&&(t[1]||t.top)>=e.top&&(t[1]||t.bottom)<=e.bottom},modes:{intersect:function(e,t,n){return this.contains(n,[e.pageX,e.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(e,t,n){return Math.max(0,Math.min(n.bottom,t.bottom)-Math.max(n.top,t.top))*Math.max(0,Math.min(n.right,t.right)-Math.max(n.left,t.left))},fit:function(e,t,n){return this.contains(n,t)?1:0},middle:function(e,t,n){return this.contains(n,[t.left+t.width*.5,t.top+t.height*.5])?1:0}},sort:function(e,t){return t.winner-e.winner||e.index-t.index},tolerate:function(t){var i,s,o,u,a,f,l,c=0,h,p=t.interactions.length,d=[r.event.pageX,r.event.pageY],v=r.tolerance||r.modes[r.mode];do if(h=t.interactions[c]){if(!h)return;h.drop=[],a=[],f=h.droppable.length,v&&(o=r.locate(h.proxy)),i=0;do if(l=h.droppable[i]){u=e.data(l,r.datakey),s=u.location;if(!s)continue;u.winner=v?v.call(r,r.event,o,s):r.contains(s,d)?1:0,a.push(u)}while(++i<f);a.sort(r.sort),i=0;do if(u=a[i])u.winner&&h.drop.length<r.multi?(!u.active[c]&&!u.anyactive&&(n.drag.hijack(r.event,"dropstart",t,c,u.elem)[0]!==!1?(u.active[c]=1,u.anyactive+=1):u.winner=0),u.winner&&h.drop.push(u.elem)):u.active[c]&&u.anyactive==1&&(n.drag.hijack(r.event,"dropend",t,c,u.elem),u.active[c]=0,u.anyactive-=1);while(++i<f)}while(++c<p);r.last&&d[0]==r.last.pageX&&d[1]==r.last.pageY?delete r.timer:r.timer=setTimeout(function(){r.tolerate(t)},r.delay),r.last=r.event}};n.dropinit=n.dropstart=n.dropend=r}(jQuery),$.drop}.apply(e,arguments)})}(this),define("mockup-patterns-select2",["jquery","mockup-patterns-base","select2","jquery.event.drag","jquery.event.drop"],function(e,t){var n=t.extend({name:"select2",defaults:{separator:","},initializeValues:function(){var t=this;t.options.initialValues&&(t.options.id=function(e){return e.id},t.options.initSelection=function(n,r){var i=[],s=n.val(),o=t.options.initialValues;typeof t.options.initialValues=="string"&&t.options.initialValues!==""&&(t.options.initialValues[0]==="{"?o=JSON.parse(t.options.initialValues):(o={},e(t.options.initialValues.split(t.options.separator)).each(function(){var t=this.split(":"),n=e.trim(t[0]),r=e.trim(t[1]);o[n]=r}))),e(s.split(t.options.separator)).each(function(){var e=this;o[this]&&(e=o[this]),i.push({id:this,text:e})}),r(i)})},initializeTags:function(){var t=this;t.options.tags&&typeof t.options.tags=="string"&&(t.options.tags.substr(0,1)==="["?t.options.tags=JSON.parse(t.options.tags):t.options.tags=t.options.tags.split(t.options.separator)),t.options.tags&&!t.options.allowNewItems&&(t.options.data=e.map(t.options.tags,function(e,t){return{id:e,text:e}}),t.options.multiple=!0,delete t.options.tags)},initializeOrdering:function(){var t=this;if(t.options.orderable){var n=function(e,t){return e?e.text:undefined};t.options.formatSelection&&(n=t.options.formatSelection),t.options.formatSelection=function(r,i){return i.parents("li").drag("start",function(n,r){return e(this).addClass("select2-choice-dragging"),t.$el.select2("onSortStart"),e.drop({tolerance:function(t,n,r){var i=t.pageY>r.top+r.height/2;return e.data(r.elem,"drop+reorder",i?"insertAfter":"insertBefore"),this.contains(r,[t.pageX,t.pageY])}}),e(this).clone().addClass("dragging").css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(t,n){e(n.proxy).css({top:n.offsetY,left:n.offsetX});var r=n.drop[0],i=e.data(r||{},"drop+reorder");r&&(r!=n.current||i!=n.method)&&(e(this)[i](r),n.current=r,n.method=i,n.update())}).drag("end",function(n,r){e(this).removeClass("select2-choice-dragging"),t.$el.select2("onSortEnd"),e(r.proxy).remove()}).drop("init",function(e,t){return this==t.drag?!1:!0}),n(r,i)}}},initializeSelect2:function(){var e=this;e.$el.select2(e.options),e.$select2=e.$el.parent().find(".select2-container"),e.$el.parent().off("close.modal.patterns"),e.options.orderable&&e.$select2.addClass("select2-orderable")},init:function(){var t=this;t.options.allowNewItems=t.options.hasOwnProperty("allowNewItems")?JSON.parse(t.options.allowNewItems):!0;if(t.options.ajax||t.options.vocabularyUrl){t.options.vocabularyUrl&&(t.options.multiple=t.options.multiple===undefined?!0:t.options.multiple,t.options.ajax=t.options.ajax||{},t.options.ajax.url=t.options.vocabularyUrl,t.options.initSelection=function(n,r){var i=[],s=n.val();e(s.split(t.options.separator)).each(function(){i.push({id:this,text:this})}),r(i)});var n="";t.options.ajax=e.extend({quietMillis:300,data:function(e,t){return n=e,{query:e,page_limit:10,page:t}},results:function(r,i){var s=r.results;if(t.options.vocabularyUrl){var o=[];e.each(r.results,function(e,t){o.push(t.id)}),s=[];var u=n===""||e.inArray(n,o)>=0;t.options.allowNewItems&&!u&&s.push({id:n,text:n}),(u||t.options.allowNewItems)&&e.each(r.results,function(e,t){s.push(t)})}return{results:s}}},t.options.ajax)}else if(t.options.multiple&&t.$el.is("select")){var r=t.$el.val()||[],i=e.map(t.$el.find("option"),function(t){return{text:e(t).html(),id:t.value}}),s=e('<input type="hidden" />');s.val(r.join(t.options.separator)),s.attr("class",t.$el.attr("class")),s.attr("name",t.$el.attr("name")),s.attr("id",t.$el.attr("id")),t.$orig=t.$el,t.$el.replaceWith(s),t.$el=s,t.options.data=i}t.initializeValues(),t.initializeTags(),t.initializeOrdering(),t.initializeSelect2()}});return n}),function(e){typeof define=="function"&&define.amd?define("picker",["jquery"],e):this.Picker=e(jQuery)}(function(e){function n(i,s,o,u){function d(){return n._.node("div",n._.node("div",n._.node("div",n._.node("div",p.component.nodes(a.open),l.box),l.wrap),l.frame),l.holder)}function v(){c.data(s,p).addClass(l.input).val(c.data("value")?p.get("select",f.format):i.value).on("focus."+a.id+" click."+a.id,y),f.editable||c.on("keydown."+a.id,function(e){var t=e.keyCode,n=/^(8|46)$/.test(t);if(t==27)return p.close(),!1;if(t==32||n||!a.open&&p.component.key[t])e.preventDefault(),e.stopPropagation(),n?p.clear().close():p.open()}),r(i,{haspopup:!0,expanded:!1,readonly:!1,owns:i.id+"_root"+(p._hidden?" "+p._hidden.id:"")})}function m(){p.$root.on({focusin:function(e){p.$root.removeClass(l.focused),r(p.$root[0],"selected",!1),e.stopPropagation()},"mousedown click":function(t){var n=t.target;n!=p.$root.children()[0]&&(t.stopPropagation(),t.type=="mousedown"&&!e(n).is(":input")&&n.nodeName!="OPTION"&&(t.preventDefault(),i.focus()))}}).on("click","[data-pick], [data-nav], [data-clear]",function(){var t=e(this),r=t.data(),s=t.hasClass(l.navDisabled)||t.hasClass(l.disabled),o=document.activeElement;o=o&&(o.type||o.href)&&o,(s||o&&!e.contains(p.$root[0],o))&&i.focus(),r.nav&&!s?p.set("highlight",p.component.item.highlight,{nav:r.nav}):n._.isInteger(r.pick)&&!s?p.set("select",r.pick).close(!0):r.clear&&p.clear().close(!0)}),r(p.$root[0],"hidden",!0)}function g(){var t=[typeof f.hiddenPrefix=="string"?f.hiddenPrefix:"",typeof f.hiddenSuffix=="string"?f.hiddenSuffix:"_submit"];p._hidden=e('<input type=hidden name="'+t[0]+i.name+t[1]+'"'+'id="'+t[0]+i.id+t[1]+'"'+(c.data("value")||i.value?' value="'+p.get("select",f.formatSubmit)+'"':"")+">")[0],c.on("change."+a.id,function(){p._hidden.value=i.value?p.get("select",f.formatSubmit):""}).after(p._hidden)}function y(e){e.stopPropagation(),e.type=="focus"&&(p.$root.addClass(l.focused),r(p.$root[0],"selected",!0)),p.open()}if(!i)return n;var a={id:i.id||"P"+Math.abs(~~(Math.random()*new Date))},f=o?e.extend(!0,{},o.defaults,u):u||{},l=e.extend({},n.klasses(),f.klass),c=e(i),h=function(){return this.start()},p=h.prototype={constructor:h,$node:c,start:function(){return a&&a.start?p:(a.methods={},a.start=!0,a.open=!1,a.type=i.type,i.autofocus=i==document.activeElement,i.type="text",i.readOnly=!f.editable,i.id=i.id||a.id,p.component=new o(p,f),p.$root=e(n._.node("div",d(),l.picker,'id="'+i.id+'_root"')),m(),f.formatSubmit&&g(),v(),f.container?e(f.container).append(p.$root):c.after(p.$root),p.on({start:p.component.onStart,render:p.component.onRender,stop:p.component.onStop,open:p.component.onOpen,close:p.component.onClose,set:p.component.onSet}).on({start:f.onStart,render:f.onRender,stop:f.onStop,open:f.onOpen,close:f.onClose,set:f.onSet}),i.autofocus&&p.open(),p.trigger("start").trigger("render"))},render:function(e){return e?p.$root.html(d()):p.$root.find("."+l.box).html(p.component.nodes(a.open)),p.trigger("render")},stop:function(){return a.start?(p.close(),p._hidden&&p._hidden.parentNode.removeChild(p._hidden),p.$root.remove(),c.removeClass(l.input).removeData(s),setTimeout(function(){c.off("."+a.id)},0),i.type=a.type,i.readOnly=!1,p.trigger("stop"),a.methods={},a.start=!1,p):p},open:function(s){return a.open?p:(c.addClass(l.active),r(i,"expanded",!0),p.$root.addClass(l.opened),r(p.$root[0],"hidden",!1),s!==!1&&(a.open=!0,c.trigger("focus"),t.on("click."+a.id+" focusin."+a.id,function(e){var t=e.target;t!=i&&t!=document&&e.which!=3&&p.close(t===p.$root.children()[0])}).on("keydown."+a.id,function(t){var r=t.keyCode,s=p.component.key[r],o=t.target;r==27?p.close(!0):o!=i||!s&&r!=13?e.contains(p.$root[0],o)&&r==13&&(t.preventDefault(),o.click()):(t.preventDefault(),s?n._.trigger(p.component.key.go,p,[n._.trigger(s)]):p.$root.find("."+l.highlighted).hasClass(l.disabled)||p.set("select",p.component.item.highlight).close())})),p.trigger("open"))},close:function(e){return e&&(c.off("focus."+a.id).trigger("focus"),setTimeout(function(){c.on("focus."+a.id,y)},0)),c.removeClass(l.active),r(i,"expanded",!1),p.$root.removeClass(l.opened+" "+l.focused),r(p.$root[0],"hidden",!0),r(p.$root[0],"selected",!1),a.open?(a.open=!1,t.off("."+a.id),p.trigger("close")):p},clear:function(){return p.set("clear")},set:function(t,n,r){var i,s,o=e.isPlainObject(t),u=o?t:{};r=o&&e.isPlainObject(n)?n:r||{};if(t){o||(u[t]=n);for(i in u)s=u[i],i in p.component.item&&p.component.set(i,s,r),(i=="select"||i=="clear")&&c.val(i=="clear"?"":p.get(i,f.format)).trigger("change");p.render()}return r.muted?p:p.trigger("set",u)},get:function(e,t){e=e||"value";if(a[e]!=null)return a[e];if(e=="value")return i.value;if(e in p.component.item)return typeof t=="string"?n._.trigger(p.component.formats.toString,p.component,[t,p.component.get(e)]):p.component.get(e)},on:function(t,n){var r,i,s=e.isPlainObject(t),o=s?t:{};if(t){s||(o[t]=n);for(r in o)i=o[r],a.methods[r]=a.methods[r]||[],a.methods[r].push(i)}return p},off:function(){var e,t,n=arguments;for(e=0,namesCount=n.length;e<namesCount;e+=1)t=n[e],t in a.methods&&delete a.methods[t];return p},trigger:function(e,t){var r=a.methods[e];return r&&r.map(function(e){n._.trigger(e,p,[t])}),p}};return new h}function r(t,n,r){if(e.isPlainObject(n))for(var s in n)i(t,s,n[s]);else i(t,n,r)}function i(e,t,n){e.setAttribute((t=="role"?"":"aria-")+t,n)}function s(t,n){e.isPlainObject(t)||(t={attribute:n}),n="";for(var r in t){var i=(r=="role"?"":"aria-")+r,s=t[r];n+=s==null?"":i+'="'+t[r]+'"'}return n}var t=e(document);return n.klasses=function(e){return e=e||"picker",{picker:e,opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},n._={group:function(e){var t,r="",i=n._.trigger(e.min,e);for(;i<=n._.trigger(e.max,e,[i]);i+=e.i)t=n._.trigger(e.item,e,[i]),r+=n._.node(e.node,t[0],t[1],t[2]);return r},node:function(t,n,r,i){return n?(n=e.isArray(n)?n.join(""):n,r=r?' class="'+r+'"':"",i=i?" "+i:"","<"+t+r+i+">"+n+"</"+t+">"):""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,n){return typeof e=="function"?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1===0},ariaAttr:s},n.extend=function(t,r){e.fn[t]=function(i,s){var o=this.data(t);return i=="picker"?o:o&&typeof i=="string"?(n._.trigger(o[i],o,[s]),this):this.each(function(){var s=e(this);s.data(t)||new n(this,t,r,i)})},e.fn[t].defaults=r.defaults},n}),function(e){typeof define=="function"&&define.amd?define("picker.date",["picker","jquery"],e):e(Picker,jQuery)}(function(e,t){function s(e,t){var n=this,r=e.$node[0].value,i=e.$node.data("value"),s=i||r,o=i?t.formatSubmit:t.format,u=function(){return getComputedStyle(e.$root[0]).direction==="rtl"};n.settings=t,n.$node=e.$node,n.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},n.item={},n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return e[0]===!0?e.shift():-1}(n.item.disable),n.set("min",t.min).set("max",t.max).set("now"),s?n.set("select",s,{format:o,fromValue:!!r}):n.set("select",null).set("highlight",n.item.now),n.key={40:7,38:-7,39:function(){return u()?-1:1},37:function(){return u()?1:-1},go:function(e){var t=n.item.highlight,r=new Date(t.year,t.month,t.date+e);n.set("highlight",[r.getFullYear(),r.getMonth(),r.getDate()],{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var n=this.value;n&&(e.set("highlight",[e.get("view").year,n,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var n=this.value;n&&(e.set("highlight",[n,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})}).on("open",function(){e.$root.find("button, select").attr("disabled",!1)}).on("close",function(){e.$root.find("button, select").attr("disabled",!0)})}var n=7,r=6,i=e._;s.prototype.set=function(e,t,n){var r=this,i=r.item;return t===null?(i[e]=t,r):(i[e=="enable"?"disable":e=="flip"?"enable":e]=r.queue[e].split(" ").map(function(i){return t=r[i](e,t,n),t}).pop(),e=="select"?r.set("highlight",i.select,n):e=="highlight"?r.set("view",i.highlight,n):e.match(/^(flip|min|max|disable|enable)$/)&&(i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},s.prototype.get=function(e){return this.item[e]},s.prototype.create=function(e,n,r){var s,o=this;return n=n===undefined?e:n,n==-Infinity||n==Infinity?s=n:t.isPlainObject(n)&&i.isInteger(n.pick)?n=n.obj:t.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=i.isDate(n)?n:o.create().obj):i.isInteger(n)||i.isDate(n)?n=o.normalize(new Date(n),r):n=o.now(e,n,r),{year:s||n.getFullYear(),month:s||n.getMonth(),date:s||n.getDate(),day:s||n.getDay(),obj:s||n,pick:s||n.getTime()}},s.prototype.createRange=function(e,n){var r=this,s=function(e){return e===!0||t.isArray(e)||i.isDate(e)?r.create(e):e};return i.isInteger(e)||(e=s(e)),i.isInteger(n)||(n=s(n)),i.isInteger(e)&&t.isPlainObject(n)?e=[n.year,n.month,n.date+e]:i.isInteger(n)&&t.isPlainObject(e)&&(n=[e.year,e.month,e.date+n]),{from:s(e),to:s(n)}},s.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},s.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},s.prototype.now=function(e,t,n){return t=new Date,n&&n.rel&&t.setDate(t.getDate()+n.rel),this.normalize(t,n)},s.prototype.navigate=function(e,n,r){var i,s,o,u,a=t.isArray(n),f=t.isPlainObject(n),l=this.item.view;if(a||f){f?(s=n.year,o=n.month,u=n.date):(s=+n[0],o=+n[1],u=+n[2]),r&&r.nav&&l&&l.month!==o&&(s=l.year,o=l.month),i=new Date(s,o+(r&&r.nav?r.nav:0),1),s=i.getFullYear(),o=i.getMonth();while((new Date(s,o,u)).getMonth()!==o)u-=1;n=[s,o,u]}return n},s.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},s.prototype.measure=function(e,t){var n=this;return t?i.isInteger(t)&&(t=n.now(e,t,{rel:t})):t=e=="min"?-Infinity:Infinity,t},s.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},s.prototype.validate=function(e,n,r){var s=this,o=n,u=r&&r.interval?r.interval:1,a=s.item.enable===-1,f,l,c=s.item.min,h=s.item.max,p,d,v=a&&s.item.disable.filter(function(e){if(t.isArray(e)){var r=s.create(e).pick;r<n.pick?f=!0:r>n.pick&&(l=!0)}return i.isInteger(e)}).length;if(!r||!r.nav)if(!a&&s.disabled(n)||a&&s.disabled(n)&&(v||f||l)||!a&&(n.pick<=c.pick||n.pick>=h.pick)){a&&!v&&(!l&&u>0||!f&&u<0)&&(u*=-1);while(s.disabled(n)){Math.abs(u)>1&&(n.month<o.month||n.month>o.month)&&(n=o,u=u>0?1:-1),n.pick<=c.pick?(p=!0,u=1,n=s.create([c.year,c.month,c.date-1])):n.pick>=h.pick&&(d=!0,u=-1,n=s.create([h.year,h.month,h.date+1]));if(p&&d)break;n=s.create([n.year,n.month,n.date+u])}}return n},s.prototype.disabled=function(e){var n=this,r=n.item.disable.filter(function(r){if(i.isInteger(r))return e.day===(n.settings.firstDay?r:r-1)%7;if(t.isArray(r)||i.isDate(r))return e.pick===n.create(r).pick;if(t.isPlainObject(r))return n.withinRange(r,e)});return r=r.length&&!r.filter(function(e){return t.isArray(e)&&e[3]=="inverted"||t.isPlainObject(e)&&e.inverted}).length,n.item.enable===-1?!r:r||e.pick<n.item.min.pick||e.pick>n.item.max.pick},s.prototype.parse=function(e,n,r){var s=this,o={},u;if(!n||i.isInteger(n)||t.isArray(n)||i.isDate(n)||t.isPlainObject(n)&&i.isInteger(n.pick))return n;if(!r||!r.format)r=r||{},r.format=s.settings.format;return u=typeof n=="string"&&!r.fromValue?1:0,s.formats.toArray(r.format).map(function(e){var t=s.formats[e],r=t?i.trigger(t,s,[n,o]):e.replace(/^!/,"").length;t&&(o[e]=n.substr(0,r)),n=n.substr(r)}),[o.yyyy||o.yy,+(o.mm||o.m)-u,o.dd||o.d]},s.prototype.formats=function(){function e(e,t,n){var r=e.match(/\w+/)[0];return!n.mm&&!n.m&&(n.m=t.indexOf(r)),r.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?i.digits(e):t.date},dd:function(e,t){return e?2:i.lead(t.date)},ddd:function(e,n){return e?t(e):this.settings.weekdaysShort[n.day]},dddd:function(e,n){return e?t(e):this.settings.weekdaysFull[n.day]},m:function(e,t){return e?i.digits(e):t.month+1},mm:function(e,t){return e?2:i.lead(t.month+1)},mmm:function(t,n){var r=this.settings.monthsShort;return t?e(t,r,n):r[n.month]},mmmm:function(t,n){var r=this.settings.monthsFull;return t?e(t,r,n):r[n.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return i.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}}}(),s.prototype.isDateExact=function(e,n){var r=this;return i.isInteger(e)&&i.isInteger(n)||typeof e=="boolean"&&typeof n=="boolean"?e===n:(i.isDate(e)||t.isArray(e))&&(i.isDate(n)||t.isArray(n))?r.create(e).pick===r.create(n).pick:t.isPlainObject(e)&&t.isPlainObject(n)?r.isDateExact(e.from,n.from)&&r.isDateExact(e.to,n.to):!1},s.prototype.isDateOverlap=function(e,n){var r=this;return i.isInteger(e)&&(i.isDate(n)||t.isArray(n))?e===r.create(n).day+1:i.isInteger(n)&&(i.isDate(e)||t.isArray(e))?n===r.create(e).day+1:t.isPlainObject(e)&&t.isPlainObject(n)?r.overlapRanges(e,n):!1},s.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(t.enable==-1?1:-1)},s.prototype.deactivate=function(e,n){var r=this,s=r.item.disable.slice(0);return n=="flip"?r.flipEnable():n===!1?(r.flipEnable(1),s=[]):n===!0?(r.flipEnable(-1),s=[]):n.map(function(e){var n;for(var o=0;o<s.length;o+=1)if(r.isDateExact(e,s[o])){n=!0;break}n||(i.isInteger(e)||i.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&s.push(e)}),s},s.prototype.activate=function(e,n){var r=this,s=r.item.disable,o=s.length;return n=="flip"?r.flipEnable():n===!0?(r.flipEnable(1),s=[]):n===!1?(r.flipEnable(-1),s=[]):n.map(function(e){var n,u,a,f;for(a=0;a<o;a+=1){u=s[a];if(r.isDateExact(u,e)){n=s[a]=null,f=!0;break}if(r.isDateOverlap(u,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e,n[3]||n.push("inverted")):i.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(n)for(a=0;a<o;a+=1)if(r.isDateExact(s[a],e)){s[a]=null;break}if(f)for(a=0;a<o;a+=1)if(r.isDateOverlap(s[a],e)){s[a]=null;break}n&&s.push(n)}),s.filter(function(e){return e!=null})},s.prototype.nodes=function(e){var t=this,s=t.settings,o=t.item,u=o.now,a=o.select,f=o.highlight,l=o.view,c=o.disable,h=o.min,p=o.max,d=function(e){return s.firstDay&&e.push(e.shift()),i.node("thead",i.node("tr",i.group({min:0,max:n-1,i:1,node:"th",item:function(t){return[e[t],s.klass.weekdays]}})))}((s.showWeekdaysFull?s.weekdaysFull:s.weekdaysShort).slice(0)),v=function(e){return i.node("div"," ",s.klass["nav"+(e?"Next":"Prev")]+(e&&l.year>=p.year&&l.month>=p.month||!e&&l.year<=h.year&&l.month<=h.month?" "+s.klass.navDisabled:""),"data-nav="+(e||-1))},m=function(t){return s.selectMonths?i.node("select",i.group({min:0,max:11,i:1,node:"option",item:function(e){return[t[e],0,"value="+e+(l.month==e?" selected":"")+(l.year==h.year&&e<h.month||l.year==p.year&&e>p.month?" disabled":"")]}}),s.klass.selectMonth,e?"":"disabled"):i.node("div",t[l.month],s.klass.month)},g=function(){var t=l.year,n=s.selectYears===!0?5:~~(s.selectYears/2);if(n){var r=h.year,o=p.year,u=t-n,a=t+n;r>u&&(a+=r-u,u=r);if(o<a){var f=u-r,c=a-o;u-=f>c?c:f,a=o}return i.node("select",i.group({min:u,max:a,i:1,node:"option",item:function(e){return[e,0,"value="+e+(t==e?" selected":"")]}}),s.klass.selectYear,e?"":"disabled")}return i.node("div",t,s.klass.year)};return i.node("div",v()+v(1)+m(s.showMonthsShort?s.monthsShort:s.monthsFull)+g(),s.klass.header)+i.node("table",d+i.node("tbody",i.group({min:0,max:r-1,i:1,node:"tr",item:function(e){var r=s.firstDay&&t.create([l.year,l.month,1]).day===0?-7:0;return[i.group({min:n*e-l.day+r+1,max:function(){return this.min+n-1},i:1,node:"td",item:function(e){e=t.create([l.year,l.month,e+(s.firstDay?1:0)]);var n=a&&a.pick==e.pick,r=f&&f.pick==e.pick,o=c&&t.disabled(e)||e.pick<h.pick||e.pick>p.pick;return[i.node("div",e.date,function(t){return t.push(l.month==e.month?s.klass.infocus:s.klass.outfocus),u.pick==e.pick&&t.push(s.klass.now),n&&t.push(s.klass.selected),r&&t.push(s.klass.highlighted),o&&t.push(s.klass.disabled),t.join(" ")}([s.klass.day]),"data-pick="+e.pick+" "+i.ariaAttr({role:"button",controls:t.$node[0].id,checked:n&&t.$node.val()===i.trigger(t.formats.toString,t,[s.format,e])?!0:null,activedescendant:r?!0:null,disabled:o?!0:null}))]}})]}})),s.klass.table)+i.node("div",i.node("button",s.today,s.klass.buttonToday,"type=button data-pick="+u.pick+(e?"":" disabled"))+i.node("button",s.clear,s.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")),s.klass.footer)},s.defaults=function(e){return{monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today"}}}(e.klasses().picker+"__"),e.extend("pickadate",s)}),function(e){typeof define=="function"&&define.amd?define("picker.time",["picker","jquery"],e):e(Picker,jQuery)}(function(e,t){function u(e,t){var n=this,r=e.$node[0].value,i=e.$node.data("value"),s=i||r,o=i?t.formatSubmit:t.format;n.settings=t,n.$node=e.$node,n.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},n.item={},n.item.interval=t.interval||30,n.item.disable=(t.disable||[]).slice(0),n.item.enable=-function(e){return e[0]===!0?e.shift():-1}(n.item.disable),n.set("min",t.min).set("max",t.max).set("now"),s?n.set("select",s,{format:o,fromValue:!!r}):n.set("select",null).set("highlight",n.item.now),n.key={40:1,38:-1,39:1,37:-1,go:function(e){n.set("highlight",n.item.highlight.pick+e*n.item.interval,{interval:e*n.item.interval}),this.render()}},e.on("render",function(){var n=e.$root.children(),r=n.find("."+t.klass.viewset);r.length&&(n[0].scrollTop=~~r.position().top-r[0].clientHeight*2)}).on("open",function(){e.$root.find("button").attr("disable",!1)}).on("close",function(){e.$root.find("button").attr("disable",!0)})}var n=24,r=60,i=12,s=n*r,o=e._;u.prototype.set=function(e,t,n){var r=this,i=r.item;return t===null?(i[e]=t,r):(i[e=="enable"?"disable":e=="flip"?"enable":e]=r.queue[e].split(" ").map(function(i){return t=r[i](e,t,n),t}).pop(),e=="select"?r.set("highlight",i.select,n):e=="highlight"?r.set("view",i.highlight,n):e=="interval"?r.set("min",i.min,n).set("max",i.max,n):e.match(/^(flip|min|max|disable|enable)$/)&&(e=="min"&&r.set("max",i.max,n),i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},u.prototype.get=function(e){return this.item[e]},u.prototype.create=function(e,i,u){var a=this;return i=i===undefined?e:i,o.isDate(i)&&(i=[i.getHours(),i.getMinutes()]),t.isPlainObject(i)&&o.isInteger(i.pick)?i=i.pick:t.isArray(i)?i=+i[0]*r+ +i[1]:o.isInteger(i)||(i=a.now(e,i,u)),e=="max"&&i<a.item.min.pick&&(i+=s),e!="min"&&e!="max"&&(i-a.item.min.pick)%a.item.interval!==0&&(i+=a.item.interval),i=a.normalize(e,i,u),{hour:~~(n+i/r)%n,mins:(r+i%r)%r,time:(s+i)%s,pick:i}},u.prototype.createRange=function(e,n){var r=this,i=function(e){return e===!0||t.isArray(e)||o.isDate(e)?r.create(e):e};return o.isInteger(e)||(e=i(e)),o.isInteger(n)||(n=i(n)),o.isInteger(e)&&t.isPlainObject(n)?e=[n.hour,n.mins+e*r.settings.interval]:o.isInteger(n)&&t.isPlainObject(e)&&(n=[e.hour,e.mins+n*r.settings.interval]),{from:i(e),to:i(n)}},u.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},u.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},u.prototype.now=function(e,t){var n=this.item.interval,i=new Date,s=i.getHours()*r+i.getMinutes(),u=o.isInteger(t),a;return s-=s%n,a=t<0&&n*t+s<=-n,s+=e=="min"&&a?0:n,u&&(s+=n*(a&&e!="max"?t+1:t)),s},u.prototype.normalize=function(e,t){var n=this.item.interval,r=this.item.min&&this.item.min.pick||0;return t-=e=="min"?0:(t-r)%n,t},u.prototype.measure=function(e,i,s){var u=this;return i?i===!0||o.isInteger(i)?i=u.now(e,i,s):t.isPlainObject(i)&&o.isInteger(i.pick)&&(i=u.normalize(e,i.pick,s)):i=e=="min"?[0,0]:[n-1,r-1],i},u.prototype.validate=function(e,t,n){var r=this,i=n&&n.interval?n.interval:r.item.interval;return r.disabled(t)&&(t=r.shift(t,i)),t=r.scope(t),r.disabled(t)&&(t=r.shift(t,i*-1)),t},u.prototype.disabled=function(e){var n=this,r=n.item.disable.filter(function(r){if(o.isInteger(r))return e.hour==r;if(t.isArray(r)||o.isDate(r))return e.pick==n.create(r).pick;if(t.isPlainObject(r))return n.withinRange(r,e)});return r=r.length&&!r.filter(function(e){return t.isArray(e)&&e[2]=="inverted"||t.isPlainObject(e)&&e.inverted}).length,n.item.enable===-1?!r:r||e.pick<n.item.min.pick||e.pick>n.item.max.pick},u.prototype.shift=function(e,t){var n=this,r=n.item.min.pick,i=n.item.max.pick;t=t||n.item.interval;while(n.disabled(e)){e=n.create(e.pick+=t);if(e.pick<=r||e.pick>=i)break}return e},u.prototype.scope=function(e){var t=this.item.min.pick,n=this.item.max.pick;return this.create(e.pick>n?n:e.pick<t?t:e)},u.prototype.parse=function(e,n,i){var s,u,a,f,l,c=this,h={};if(!n||o.isInteger(n)||t.isArray(n)||o.isDate(n)||t.isPlainObject(n)&&o.isInteger(n.pick))return n;if(!i||!i.format)i=i||{},i.format=c.settings.format;c.formats.toArray(i.format).map(function(e){var t,r=c.formats[e],i=r?o.trigger(r,c,[n,h]):e.replace(/^!/,"").length;r&&(t=n.substr(0,i),h[e]=t.match(/^\d+$/)?+t:t),n=n.substr(i)});for(f in h){l=h[f];if(o.isInteger(l))if(f.match(/^(h|hh)$/i)){s=l;if(f=="h"||f=="hh")s%=12}else f=="i"&&(u=l);else f.match(/^a$/i)&&l.match(/^p/i)&&("h"in h||"hh"in h)&&(a=!0)}return(a?s+12:s)*r+u},u.prototype.formats={h:function(e,t){return e?o.digits(e):t.hour%i||i},hh:function(e,t){return e?2:o.lead(t.hour%i||i)},H:function(e,t){return e?o.digits(e):""+t.hour%24},HH:function(e,t){return e?o.digits(e):o.lead(t.hour%24)},i:function(e,t){return e?2:o.lead(t.mins)},a:function(e,t){return e?4:s/2>t.time%s?"a.m.":"p.m."},A:function(e,t){return e?2:s/2>t.time%s?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return o.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}},u.prototype.isTimeExact=function(e,n){var r=this;return o.isInteger(e)&&o.isInteger(n)||typeof e=="boolean"&&typeof n=="boolean"?e===n:(o.isDate(e)||t.isArray(e))&&(o.isDate(n)||t.isArray(n))?r.create(e).pick===r.create(n).pick:t.isPlainObject(e)&&t.isPlainObject(n)?r.isTimeExact(e.from,n.from)&&r.isTimeExact(e.to,n.to):!1},u.prototype.isTimeOverlap=function(e,n){var r=this;return o.isInteger(e)&&(o.isDate(n)||t.isArray(n))?e===r.create(n).hour:o.isInteger(n)&&(o.isDate(e)||t.isArray(e))?n===r.create(e).hour:t.isPlainObject(e)&&t.isPlainObject(n)?r.overlapRanges(e,n):!1},u.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(t.enable==-1?1:-1)},u.prototype.deactivate=function(e,n){var r=this,i=r.item.disable.slice(0);return n=="flip"?r.flipEnable():n===!1?(r.flipEnable(1),i=[]):n===!0?(r.flipEnable(-1),i=[]):n.map(function(e){var n;for(var s=0;s<i.length;s+=1)if(r.isTimeExact(e,i[s])){n=!0;break}n||(o.isInteger(e)||o.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&i.push(e)}),i},u.prototype.activate=function(e,n){var r=this,i=r.item.disable,s=i.length;return n=="flip"?r.flipEnable():n===!0?(r.flipEnable(1),i=[]):n===!1?(r.flipEnable(-1),i=[]):n.map(function(e){var n,u,a,f;for(a=0;a<s;a+=1){u=i[a];if(r.isTimeExact(u,e)){n=i[a]=null,f=!0;break}if(r.isTimeOverlap(u,e)){t.isPlainObject(e)?(e.inverted=!0,n=e):t.isArray(e)?(n=e,n[2]||n.push("inverted")):o.isDate(e)&&(n=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(n)for(a=0;a<s;a+=1)if(r.isTimeExact(i[a],e)){i[a]=null;break}if(f)for(a=0;a<s;a+=1)if(r.isTimeOverlap(i[a],e)){i[a]=null;break}n&&i.push(n)}),i.filter(function(e){return e!=null})},u.prototype.i=function(e,t){return o.isInteger(t)&&t>0?t:this.item.interval},u.prototype.nodes=function(e){var t=this,n=t.settings,r=t.item.select,i=t.item.highlight,s=t.item.view,u=t.item.disable;return o.node("ul",o.group({min:t.item.min.pick,max:t.item.max.pick,i:t.item.interval,node:"li",item:function(e){e=t.create(e);var a=e.pick,f=r&&r.pick==a,l=i&&i.pick==a,c=u&&t.disabled(e);return[o.trigger(t.formats.toString,t,[o.trigger(n.formatLabel,t,[e])||n.format,e]),function(e){return f&&e.push(n.klass.selected),l&&e.push(n.klass.highlighted),s&&s.pick==a&&e.push(n.klass.viewset),c&&e.push(n.klass.disabled),e.join(" ")}([n.klass.listItem]),"data-pick="+e.pick+" "+o.ariaAttr({role:"button",controls:t.$node[0].id,checked:f&&t.$node.val()===o.trigger(t.formats.toString,t,[n.format,e])?!0:null,activedescendant:l?!0:null,disabled:c?!0:null})]}})+o.node("li",o.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(e?"":" disable"))),n.klass.list)},u.defaults=function(e){return{clear:"Clear",format:"h:i A",interval:30,klass:{picker:e+" "+e+"--time",holder:e+"__holder",list:e+"__list",listItem:e+"__list-item",disabled:e+"__list-item--disabled",selected:e+"__list-item--selected",highlighted:e+"__list-item--highlighted",viewset:e+"__list-item--viewset",now:e+"__list-item--now",buttonClear:e+"__button--clear"}}}(e.klasses().picker),e.extend("pickatime",u)}),define("mockup-patterns-pickadate",["jquery","mockup-patterns-base","picker","picker.date","picker.time","mockup-patterns-select2"],function(e,t){var n=t.extend({name:"pickadate",defaults:{separator:" ",date:{selectYears:!0,selectMonths:!0},time:{},timezone:null,classWrapperName:"pattern-pickadate-wrapper",classSeparatorName:"pattern-pickadate-separator",classDateName:"pattern-pickadate-date",classDateWrapperName:"pattern-pickadate-date-wrapper",classTimeName:"pattern-pickadate-time",classTimeWrapperName:"pattern-pickadate-time-wrapper",classTimezoneName:"pattern-pickadate-timezone",classTimezoneWrapperName:"pattern-pickadate-timezone-wrapper",classClearName:"pattern-pickadate-clear",placeholderDate:"Enter date...",placeholderTime:"Enter time...",placeholderTimezone:"Enter timezone..."},isFalse:function(e){return typeof e=="string"&&e==="false"?!1:e},init:function(){var t=this,n=t.$el.val().split(" "),r=n[0]||"",i=n[1]||"";t.options.date=t.isFalse(t.options.date),t.options.time=t.isFalse(t.options.time),t.options.date===!1&&(i=n[0]),t.$el.hide(),t.$wrapper=e("<div/>").addClass(t.options.classWrapperName).insertAfter(t.$el),t.options.date!==!1&&(t.options.date.formatSubmit="yyyy-mm-dd",t.$date=e('<input type="text"/>').attr("placeholder",t.options.placeholderDate).attr("data-value",r).addClass(t.options.classDateName).appendTo(e("<div/>").addClass(t.options.classDateWrapperName).appendTo(t.$wrapper)).pickadate(e.extend(!0,{},t.options.date,{onSet:function(e){e.select!==undefined&&(t.$date.attr("data-value",e.select),(t.options.time===!1||t.$time.attr("data-value")!=="")&&t.updateValue.call(t)),e.hasOwnProperty("clear")&&(t.$el.removeAttr("value"),t.$date.attr("data-value",""))}}))),t.options.date!==!1&&t.options.time!==!1&&(t.$separator=e("<span/>").addClass(t.options.classSeparatorName).html(t.options.separator===" "?"&nbsp;":t.options.separator).appendTo(t.$wrapper)),t.options.time!==!1&&(t.options.time.formatSubmit="HH:i",t.$time=e('<input type="text"/>').attr("placeholder",t.options.placeholderTime).attr("data-value",i).addClass(t.options.classTimeName).appendTo(e("<div/>").addClass(t.options.classTimeWrapperName).appendTo(t.$wrapper)).pickatime(e.extend(!0,{},t.options.time,{onSet:function(e){e.select!==undefined&&(t.$time.attr("data-value",e.select),(t.options.date===!1||t.$date.attr("data-value")!=="")&&t.updateValue.call(t)),e.hasOwnProperty("clear")&&(t.$el.removeAttr("value"),t.$time.attr("data-value",""))}})),typeof i=="string"&&i.substring(0,2)==="00"&&(t.$time.pickatime("picker").set("select",i.split(":")),t.$time.attr("data-value",i))),t.options.date!==!1&&t.options.time!==!1&&t.options.timezone&&(t.$separator=e("<span/>").addClass(t.options.classSeparatorName).html(t.options.separator===" "?"&nbsp;":t.options.separator).appendTo(t.$wrapper));if(t.options.timezone!==null){t.$timezone=e('<input type="text"/>').addClass(t.options.classTimezoneName).appendTo(e("<div/>").addClass(t.options.classTimezoneWrapperName).appendTo(t.$wrapper)).patternSelect2(e.extend(!0,{placeholder:t.options.placeholderTimezone,width:"10em"},t.options.timezone,{multiple:!1})).on("change",function(e){e.val!==undefined&&(t.$timezone.attr("data-value",e.val),(t.options.date===!1||t.$date.attr("data-value")!=="")&&(t.options.time===!1||t.$time.attr("data-value")!=="")&&t.updateValue.call(t))});var s=t.options.timezone.default;if(s){var o;t.options.timezone.data.forEach(function(e){o=e.text===t.options.timezone.default?!0:!1}),o&&(t.$timezone.attr("data-value",s),t.$timezone.parent().find(".select2-chosen").text(s))}t.options.timezone.data.length===1&&(t.$timezone.attr("data-value",t.options.timezone.data[0].text),t.$timezone.parent().find(".select2-chosen").text(t.options.timezone.data[0].text),t.$timezone.select2("enable",!1))}t.$clear=e("<div/>").addClass(t.options.classClearName).appendTo(t.$wrapper)},updateValue:function(){var e=this,t="";if(e.options.date!==!1){var n=e.$date.data("pickadate").component,r=e.$date.data("pickadate").get("select"),i=n.formats.toString;r&&(t+=i.apply(n,["yyyy-mm-dd",r]))}e.options.date!==!1&&e.options.time!==!1&&(t+=" ");if(e.options.time!==!1){var s=e.$time.data("pickatime").component,o=e.$time.data("pickatime").get("select"),u=s.formats.toString;o&&(t+=u.apply(s,["HH:i",o]))}if(e.options.timezone!==null){var a=" "+e.$timezone.attr("data-value");a&&(t+=a)}e.$el.attr("value",t),e.trigger("updated")}});return n}),function(){function x(e,t,n){var r=(n||0)-1,i=e?e.length:0;while(++r<i)if(e[r]===t)return r;return-1}function T(e,t){var n=e.criteria,r=t.criteria,i=-1,s=n.length;while(++i<s){var o=n[i],u=r[i];if(o!==u){if(o>u||typeof o=="undefined")return 1;if(o<u||typeof u=="undefined")return-1}}return e.index-t.index}function N(e){return"\\"+g[e]}function C(e,t,n){t||(t=0),typeof n=="undefined"&&(n=e?e.length:0);var r=-1,i=n-t||0,s=Array(i<0?0:i);while(++r<i)s[r]=e[t+r];return s}function X(e){return e instanceof X?e:new V(e)}function V(e,t){this.__chain__=!!t,this.__wrapped__=e}function J(e){function i(){if(n){var e=C(n);H.apply(e,arguments)}if(this instanceof i){var s=K(t.prototype),o=t.apply(s,e||arguments);return _t(o)?o:s}return t.apply(r,e||arguments)}var t=e[0],n=e[2],r=e[4];return i}function K(e,t){return _t(e)?j(e):{}}function Q(e,t,n){if(typeof e!="function")return Vn;if(typeof t!="undefined"&&"prototype"in e){switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)}}return Dn(e,t)}return e}function G(e){function h(){var e=u?s:this;if(r){var p=C(r);H.apply(p,arguments)}if(i||f){p||(p=C(arguments)),i&&H.apply(p,i);if(f&&p.length<o)return n|=16,G([t,l?n:n&-4,p,null,s,o])}p||(p=arguments),a&&(t=e[c]);if(this instanceof h){e=K(t.prototype);var d=t.apply(e,p);return _t(d)?d:e}return t.apply(e,p)}var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=n&1,a=n&2,f=n&4,l=n&8,c=t;return h}function Y(e,t){var n=-1,r=ot(),i=e?e.length:0,s=[];while(++n<i){var o=e[n];r(t,o)<0&&s.push(o)}return s}function Z(e,t,n,r){var i=(r||0)-1,s=e?e.length:0,o=[];while(++i<s){var u=e[i];if(u&&typeof u=="object"&&typeof u.length=="number"&&(lt(u)||ft(u))){t||(u=Z(u,t,n));var a=-1,f=u.length,l=o.length;o.length+=f;while(++a<f)o[l++]=u[a]}else n||o.push(u)}return o}function et(e,t,r,i){if(e===t)return e!==0||1/e==1/t;var s=typeof e,o=typeof t;if(e===e&&(!e||!m[s])&&(!t||!m[o]))return!1;if(e==null||t==null)return e===t;var u=O.call(e),c=O.call(t);if(u!=c)return!1;switch(u){case f:case l:return+e==+t;case h:return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case d:case v:return e==String(t)}var g=u==a;if(!g){var y=e instanceof X,b=t instanceof X;if(y||b)return et(y?e.__wrapped__:e,b?t.__wrapped__:t,r,i);if(u!=p)return!1;var w=e.constructor,E=t.constructor;if(w!=E&&!(Mt(w)&&w instanceof w&&Mt(E)&&E instanceof E)&&"constructor"in e&&"constructor"in t)return!1}r||(r=[]),i||(i=[]);var S=r.length;while(S--)if(r[S]==e)return i[S]==t;var x=!0,T=0;r.push(e),i.push(t);if(g){T=t.length,x=T==e.length;if(x)while(T--)if(!(x=et(e[T],t[T],r,i)))break}else wt(t,function(t,s,o){if(P.call(o,s))return T++,!(x=P.call(e,s)&&et(e[s],t,r,i))&&n}),x&&wt(e,function(e,t,r){if(P.call(r,t))return!(x=--T>-1)&&n});return r.pop(),i.pop(),x}function tt(e,t){return e+D(W()*(t-e+1))}function nt(e,t,n){var r=-1,i=ot(),s=e?e.length:0,o=[],u=n?[]:o;while(++r<s){var a=e[r],f=n?n(a,r,e):a;if(t?!r||u[u.length-1]!==f:i(u,f)<0)n&&u.push(f),o.push(a)}return o}function rt(e){return function(t,n,r){var i={};n=Wn(n,r,3);var s=-1,o=t?t.length:0;if(typeof o=="number")while(++s<o){var u=t[s];e(i,u,n(u,s,t),t)}else Et(t,function(t,r,s){e(i,t,n(t,r,s),s)});return i}}function it(e,t,n,r,i,s){var o=t&1,u=t&2,a=t&4,f=t&8,l=t&16,c=t&32;if(!u&&!Mt(e))throw new TypeError;l&&!n.length&&(t&=-17,l=n=!1),c&&!r.length&&(t&=-33,c=r=!1);var h=t==1||t===17?J:G;return h([e,t,n,r,i,s])}function st(e){return pt[e]}function ot(){var e=(e=X.indexOf)===bn?x:e;return e}function ut(e){return typeof e=="function"&&M.test(e)}function at(e){return dt[e]}function ft(e){return e&&typeof e=="object"&&typeof e.length=="number"&&O.call(e)==u||!1}function gt(e){if(!e)return e;for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];if(r)for(var i in r)e[i]=r[i]}return e}function yt(e){return _t(e)?lt(e)?C(e):gt({},e):e}function bt(e){if(!e)return e;for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t];if(r)for(var i in r)typeof e[i]=="undefined"&&(e[i]=r[i])}return e}function St(e){var t=[];return wt(e,function(e,n){Mt(e)&&t.push(n)}),t.sort()}function xt(e,t){return e?P.call(e,t):!1}function Tt(e){var t=-1,n=ht(e),r=n.length,i={};while(++t<r){var s=n[t];i[e[s]]=s}return i}function Nt(e){return e===!0||e===!1||e&&typeof e=="object"&&O.call(e)==f||!1}function Ct(e){return e&&typeof e=="object"&&O.call(e)==l||!1}function kt(e){return e&&e.nodeType===1||!1}function Lt(e){if(!e)return!0;if(lt(e)||jt(e))return!e.length;for(var t in e)if(P.call(e,t))return!1;return!0}function At(e,t){return et(e,t)}function Ot(e){return I(e)&&!q(parseFloat(e))}function Mt(e){return typeof e=="function"}function _t(e){return!!e&&!!m[typeof e]}function Dt(e){return Ht(e)&&e!=+e}function Pt(e){return e===null}function Ht(e){return typeof e=="number"||e&&typeof e=="object"&&O.call(e)==h||!1}function Bt(e){return e&&m[typeof e]&&O.call(e)==d||!1}function jt(e){return typeof e=="string"||e&&typeof e=="object"&&O.call(e)==v||!1}function Ft(e){return typeof e=="undefined"}function It(e){var t=[];wt(e,function(e,n){t.push(n)}),t=Y(t,Z(arguments,!0,!1,1));var n=-1,r=t.length,i={};while(++n<r){var s=t[n];i[s]=e[s]}return i}function qt(e){var t=-1,n=ht(e),r=n.length,i=Array(r);while(++t<r){var s=n[t];i[t]=[s,e[s]]}return i}function Rt(e){var t=-1,n=Z(arguments,!0,!1,1),r=n.length,i={};while(++t<r){var s=n[t];s in e&&(i[s]=e[s])}return i}function Ut(e){var t=-1,n=ht(e),r=n.length,i=Array(r);while(++t<r)i[t]=e[n[t]];return i}function zt(e,t){var r=ot(),i=e?e.length:0,s=!1;return i&&typeof i=="number"?s=r(e,t)>-1:Et(e,function(e){return(s=e===t)&&n}),s}function Xt(e,t,r){var i=!0;t=Wn(t,r,3);var s=-1,o=e?e.length:0;if(typeof o=="number"){while(++s<o)if(!(i=!!t(e[s],s,e)))break}else Et(e,function(e,r,s){return!(i=!!t(e,r,s))&&n});return i}function Vt(e,t,n){var r=[];t=Wn(t,n,3);var i=-1,s=e?e.length:0;if(typeof s=="number")while(++i<s){var o=e[i];t(o,i,e)&&r.push(o)}else Et(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function $t(e,t,r){t=Wn(t,r,3);var i=-1,s=e?e.length:0;if(typeof s!="number"){var u;return Et(e,function(e,r,i){if(t(e,r,i))return u=e,n}),u}while(++i<s){var o=e[i];if(t(o,i,e))return o}}function Jt(e,t){return dn(e,t,!0)}function Kt(e,t,r){var i=-1,s=e?e.length:0;t=t&&typeof r=="undefined"?t:Q(t,r,3);if(typeof s=="number"){while(++i<s)if(t(e[i],i,e)===n)break}else Et(e,t)}function Qt(e,t){var r=e?e.length:0;if(typeof r=="number"){while(r--)if(t(e[r],r,e)===!1)break}else{var i=ht(e);r=i.length,Et(e,function(e,s,o){return s=i?i[--r]:--r,t(o[s],s,o)===!1&&n})}}function Zt(e,t){var n=C(arguments,2),r=-1,i=typeof t=="function",s=e?e.length:0,o=Array(typeof s=="number"?s:0);return Kt(e,function(e){o[++r]=(i?t:e[t]).apply(e,n)}),o}function en(e,t,n){var r=-1,i=e?e.length:0;t=Wn(t,n,3);if(typeof i=="number"){var s=Array(i);while(++r<i)s[r]=t(e[r],r,e)}else s=[],Et(e,function(e,n,i){s[++r]=t(e,n,i)});return s}function tn(e,t,n){var r=-Infinity,i=r;typeof t!="function"&&n&&n[t]===e&&(t=null);var s=-1,o=e?e.length:0;if(t==null&&typeof o=="number")while(++s<o){var u=e[s];u>i&&(i=u)}else t=Wn(t,n,3),Kt(e,function(e,n,s){var o=t(e,n,s);o>r&&(r=o,i=e)});return i}function nn(e,t,n){var r=Infinity,i=r;typeof t!="function"&&n&&n[t]===e&&(t=null);var s=-1,o=e?e.length:0;if(t==null&&typeof o=="number")while(++s<o){var u=e[s];u<i&&(i=u)}else t=Wn(t,n,3),Kt(e,function(e,n,s){var o=t(e,n,s);o<r&&(r=o,i=e)});return i}function sn(e,t,n,r){if(!e)return n;var i=arguments.length<3;t=Wn(t,r,4);var s=-1,o=e.length;if(typeof o=="number"){i&&(n=e[++s]);while(++s<o)n=t(n,e[s],s,e)}else Et(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)});return n}function on(e,t,n,r){var i=arguments.length<3;return t=Wn(t,r,4),Qt(e,function(e,r,s){n=i?(i=!1,e):t(n,e,r,s)}),n}function un(e,t,n){return t=Wn(t,n,3),Vt(e,function(e,n,r){return!t(e,n,r)})}function an(t,n,r){t&&typeof t.length!="number"&&(t=Ut(t));if(n==null||r)return t?t[tt(0,t.length-1)]:e;var i=fn(t);return i.length=z(U(0,n),i.length),i}function fn(e){var t=-1,n=e?e.length:0,r=Array(typeof n=="number"?n:0);return Kt(e,function(e){var n=tt(0,++t);r[t]=r[n],r[n]=e}),r}function ln(e){var t=e?e.length:0;return typeof t=="number"?t:ht(e).length}function cn(e,t,r){var i;t=Wn(t,r,3);var s=-1,o=e?e.length:0;if(typeof o=="number"){while(++s<o)if(i=t(e[s],s,e))break}else Et(e,function(e,r,s){return(i=t(e,r,s))&&n});return!!i}function hn(e,t,n){var r=-1,i=e?e.length:0,s=Array(typeof i=="number"?i:0);t=Wn(t,n,3),Kt(e,function(e,n,i){s[++r]={criteria:[t(e,n,i)],index:r,value:e}}),i=s.length,s.sort(T);while(i--)s[i]=s[i].value;return s}function pn(e){return lt(e)?C(e):e&&typeof e.length=="number"?en(e):Ut(e)}function dn(t,n,r){return r&&Lt(n)?e:(r?$t:Vt)(t,n)}function vn(e){var t=-1,n=e?e.length:0,r=[];while(++t<n){var i=e[t];i&&r.push(i)}return r}function mn(e){return Y(e,Z(arguments,!0,!0,1))}function gn(t,n,r){var i=0,s=t?t.length:0;if(typeof n!="number"&&n!=null){var o=-1;n=Wn(n,r,3);while(++o<s&&n(t[o],o,t))i++}else{i=n;if(i==null||r)return t?t[0]:e}return C(t,0,z(U(0,i),s))}function yn(e,t){return Z(e,t)}function bn(e,t,n){if(typeof n=="number"){var r=e?e.length:0;n=n<0?U(0,r+n):n||0}else if(n){var i=Cn(e,t);return e[i]===t?i:-1}return x(e,t,n)}function wn(e,t,n){var r=0,i=e?e.length:0;if(typeof t!="number"&&t!=null){var s=i;t=Wn(t,n,3);while(s--&&t(e[s],s,e))r++}else r=t==null||n?1:t||r;return C(e,0,z(U(0,i-r),i))}function En(){var e=[],t=-1,n=arguments.length;while(++t<n){var r=arguments[t];(lt(r)||ft(r))&&e.push(r)}var i=e[0],s=-1,o=ot(),u=i?i.length:0,a=[];e:while(++s<u){r=i[s];if(o(a,r)<0){var t=n;while(--t)if(o(e[t],r)<0)continue e;a.push(r)}}return a}function Sn(t,n,r){var i=0,s=t?t.length:0;if(typeof n!="number"&&n!=null){var o=s;n=Wn(n,r,3);while(o--&&n(t[o],o,t))i++}else{i=n;if(i==null||r)return t?t[s-1]:e}return C(t,U(0,s-i))}function xn(e,t,n){var r=e?e.length:0;typeof n=="number"&&(r=(n<0?U(0,r+n):z(n,r-1))+1);while(r--)if(e[r]===t)return r;return-1}function Tn(e,t,n){e=+e||0,n=+n||1,t==null&&(t=e,e=0);var r=-1,i=U(0,_((t-e)/n)),s=Array(i);while(++r<i)s[r]=e,e+=n;return s}function Nn(e,t,n){if(typeof t!="number"&&t!=null){var r=0,i=-1,s=e?e.length:0;t=Wn(t,n,3);while(++i<s&&t(e[i],i,e))r++}else r=t==null||n?1:U(0,t);return C(e,r)}function Cn(e,t,n,r){var i=0,s=e?e.length:i;n=n?Wn(n,r,1):Vn,t=n(t);while(i<s){var o=i+s>>>1;n(e[o])<t?i=o+1:s=o}return i}function kn(){return nt(Z(arguments,!0,!0))}function Ln(e,t,n,r){return typeof t!="boolean"&&t!=null&&(r=n,n=typeof t!="function"&&r&&r[t]===e?null:t,t=!1),n!=null&&(n=Wn(n,r,3)),nt(e,t,n)}function An(e){return Y(e,C(arguments,1))}function On(){var e=-1,t=tn(rn(arguments,"length")),n=Array(t<0?0:t);while(++e<t)n[e]=rn(arguments,e);return n}function Mn(e,t){var n=-1,r=e?e.length:0,i={};!t&&r&&!lt(e[0])&&(t=[]);while(++n<r){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function _n(e,t){if(!Mt(t))throw new TypeError;return function(){if(--e<1)return t.apply(this,arguments)}}function Dn(e,t){return arguments.length>2?it(e,17,C(arguments,2),null,t):it(e,1,null,null,t)}function Pn(e){var t=arguments.length>1?Z(arguments,!0,!1,1):St(e),n=-1,r=t.length;while(++n<r){var i=t[n];e[i]=it(e[i],1,null,null,e)}return e}function Hn(){var e=arguments,t=e.length;while(t--)if(!Mt(e[t]))throw new TypeError;return function(){var t=arguments,n=e.length;while(n--)t=[e[n].apply(this,t)];return t[0]}}function Bn(t,n,r){var i,s,o,u,a,f,l,c=0,h=!1,p=!0;if(!Mt(t))throw new TypeError;n=U(0,n)||0;if(r===!0){var d=!0;p=!1}else _t(r)&&(d=r.leading,h="maxWait"in r&&(U(n,r.maxWait)||0),p="trailing"in r?r.trailing:p);var v=function(){var r=n-(Qn()-u);if(r<=0){s&&clearTimeout(s);var h=l;s=f=l=e,h&&(c=Qn(),o=t.apply(a,i),!f&&!s&&(i=a=null))}else f=setTimeout(v,r)},m=function(){f&&clearTimeout(f),s=f=l=e;if(p||h!==n)c=Qn(),o=t.apply(a,i),!f&&!s&&(i=a=null)};return function(){i=arguments,u=Qn(),a=this,l=p&&(f||!d);if(h===!1)var e=d&&!f;else{!s&&!d&&(c=u);var r=h-(u-c),g=r<=0;g?(s&&(s=clearTimeout(s)),c=u,o=t.apply(a,i)):s||(s=setTimeout(m,r))}return g&&f?f=clearTimeout(f):!f&&n!==h&&(f=setTimeout(v,n)),e&&(g=!0,o=t.apply(a,i)),g&&!f&&!s&&(i=a=null),o}}function jn(t){if(!Mt(t))throw new TypeError;var n=C(arguments,1);return setTimeout(function(){t.apply(e,n)},1)}function Fn(t,n){if(!Mt(t))throw new TypeError;var r=C(arguments,2);return setTimeout(function(){t.apply(e,r)},n)}function In(e,t){var n={};return function(){var i=t?t.apply(this,arguments):r+arguments[0];return P.call(n,i)?n[i]:n[i]=e.apply(this,arguments)}}function qn(e){var t,n;if(!Mt(e))throw new TypeError;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Rn(e){return it(e,16,C(arguments,1))}function Un(e,t,n){var r=!0,i=!0;if(!Mt(e))throw new TypeError;return n===!1?r=!1:_t(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),n={},n.leading=r,n.maxWait=t,n.trailing=i,Bn(e,t,n)}function zn(e,t){return it(t,16,[e])}function Wn(e,t,n){var r=typeof e;if(e==null||r=="function")return Q(e,t,n);if(r!="object")return Gn(e);var i=ht(e);return function(t){var n=i.length,r=!1;while(n--)if(!(r=t[i[n]]===e[i[n]]))break;return r}}function Xn(e){return e==null?"":String(e).replace(mt,st)}function Vn(e){return e}function $n(e){Kt(St(e),function(t){var n=X[t]=e[t];X.prototype[t]=function(){var e=[this.__wrapped__];H.apply(e,arguments);var t=n.apply(X,e);return this.__chain__?new V(t,!0):t}})}function Jn(){return y._=A,this}function Kn(){}function Gn(e){return function(t){return t[e]}}function Yn(e,t){return e==null&&t==null&&(t=1),e=+e||0,t==null?(t=e,e=0):t=+t||0,e+D(W()*(t-e+1))}function Zn(e,t){if(e){var n=e[t];return Mt(n)?e[t]():n}}function er(e,t,n){var r=X,i=r.templateSettings;e=String(e||""),n=bt({},n,i);var u=0,a="__p += '",f=n.variable,l=RegExp((n.escape||s).source+"|"+(n.interpolate||s).source+"|"+(n.evaluate||s).source+"|$","g");e.replace(l,function(t,n,r,i,s){return a+=e.slice(u,s).replace(o,N),n&&(a+="' +\n_.escape("+n+") +\n'"),i&&(a+="';\n"+i+";\n__p += '"),r&&(a+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=s+t.length,t}),a+="';\n",f||(f="obj",a="with ("+f+" || {}) {\n"+a+"\n}\n"),a="function("+f+") {\n"+"var __t, __p = '', __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n"+a+"return __p\n}";try{var c=Function("_","return "+a)(r)}catch(h){throw h.source=a,h}return t?c(t):(c.source=a,c)}function tr(e,t,n){e=(e=+e)>-1?e:0;var r=-1,i=Array(e);t=Q(t,n,1);while(++r<e)i[r]=t(r);return i}function nr(e){return e==null?"":String(e).replace(vt,at)}function rr(e){var n=++t+"";return e?e+n:n}function ir(e){return e=new V(e),e.__chain__=!0,e}function sr(e,t){return t(e),e}function or(){return this.__chain__=!0,this}function ur(){return this.__wrapped__}var e,t=0,n={},r=+(new Date)+"",i=/<%=([\s\S]+?)%>/g,s=/($^)/,o=/['\n\r\t\u2028\u2029\\]/g,u="[object Arguments]",a="[object Array]",f="[object Boolean]",l="[object Date]",c="[object Function]",h="[object Number]",p="[object Object]",d="[object RegExp]",v="[object String]",m={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,"undefined":!1},g={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},y=m[typeof window]&&window||this,b=m[typeof exports]&&exports&&!exports.nodeType&&exports,w=m[typeof module]&&module&&!module.nodeType&&module,E=w&&w.exports===b&&b,S=m[typeof global]&&global;S&&(S.global===S||S.window===S)&&(y=S);var k=[],L=Object.prototype,A=y._,O=L.toString,M=RegExp("^"+String(O).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),_=Math.ceil,D=Math.floor,P=L.hasOwnProperty,H=k.push,B=L.propertyIsEnumerable,j=ut(j=Object.create)&&j,F=ut(F=Array.isArray)&&F,I=y.isFinite,q=y.isNaN,R=ut(R=Object.keys)&&R,U=Math.max,z=Math.min,W=Math.random;V.prototype=X.prototype;var $={};(function(){var e={0:1,length:1};$.spliceObjects=(k.splice.call(e,0,1),!e[0])})(1),X.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:i,variable:""},j||(K=function(){function e(){}return function(t){if(_t(t)){e.prototype=t;var n=new e;e.prototype=null}return n||y.Object()}}()),ft(arguments)||(ft=function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&P.call(e,"callee")&&!B.call(e,"callee")||!1});var lt=F||function(e){return e&&typeof e=="object"&&typeof e.length=="number"&&O.call(e)==a||!1},ct=function(e){var t,n=e,r=[];if(!n)return r;if(!m[typeof e])return r;for(t in n)P.call(n,t)&&r.push(t);return r},ht=R?function(e){return _t(e)?R(e):[]}:ct,pt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},dt=Tt(pt),vt=RegExp("("+ht(dt).join("|")+")","g"),mt=RegExp("["+ht(pt).join("")+"]","g"),wt=function(e,t){var r,i=e,s=i;if(!i)return s;if(!m[typeof i])return s;for(r in i)if(t(i[r],r,e)===n)return s;return s},Et=function(e,t){var r,i=e,s=i;if(!i)return s;if(!m[typeof i])return s;for(r in i)if(P.call(i,r)&&t(i[r],r,e)===n)return s;return s};Mt(/x/)&&(Mt=function(e){return typeof e=="function"&&O.call(e)==c});var Wt=rt(function(e,t,n){P.call(e,n)?e[n]++:e[n]=1}),Gt=rt(function(e,t,n){(P.call(e,n)?e[n]:e[n]=[]).push(t)}),Yt=rt(function(e,t,n){e[n]=t}),rn=en,Qn=ut(Qn=Date.now)&&Qn||function(){return(new Date).getTime()};X.after=_n,X.bind=Dn,X.bindAll=Pn,X.chain=ir,X.compact=vn,X.compose=Hn,X.countBy=Wt,X.debounce=Bn,X.defaults=bt,X.defer=jn,X.delay=Fn,X.difference=mn,X.filter=Vt,X.flatten=yn,X.forEach=Kt,X.functions=St,X.groupBy=Gt,X.indexBy=Yt,X.initial=wn,X.intersection=En,X.invert=Tt,X.invoke=Zt,X.keys=ht,X.map=en,X.max=tn,X.memoize=In,X.min=nn,X.omit=It,X.once=qn,X.pairs=qt,X.partial=Rn,X.pick=Rt,X.pluck=rn,X.range=Tn,X.reject=un,X.rest=Nn,X.shuffle=fn,X.sortBy=hn,X.tap=sr,X.throttle=Un,X.times=tr,X.toArray=pn,X.union=kn,X.uniq=Ln,X.values=Ut,X.where=dn,X.without=An,X.wrap=zn,X.zip=On,X.collect=en,X.drop=Nn,X.each=Kt,X.extend=gt,X.methods=St,X.object=Mn,X.select=Vt,X.tail=Nn,X.unique=Ln,X.clone=yt,X.contains=zt,X.escape=Xn,X.every=Xt,X.find=$t,X.has=xt,X.identity=Vn,X.indexOf=bn,X.isArguments=ft,X.isArray=lt,X.isBoolean=Nt,X.isDate=Ct,X.isElement=kt,X.isEmpty=Lt,X.isEqual=At,X.isFinite=Ot,X.isFunction=Mt,X.isNaN=Dt,X.isNull=Pt,X.isNumber=Ht,X.isObject=_t,X.isRegExp=Bt,X.isString=jt,X.isUndefined=Ft,X.lastIndexOf=xn,X.mixin=$n,X.noConflict=Jn,X.random=Yn,X.reduce=sn,X.reduceRight=on,X.result=Zn,X.size=ln,X.some=cn,X.sortedIndex=Cn,X.template=er,X.unescape=nr,X.uniqueId=rr,X.all=Xt,X.any=cn,X.detect=$t,X.findWhere=Jt,X.foldl=sn,X.foldr=on,X.include=zt,X.inject=sn,X.first=gn,X.last=Sn,X.sample=an,X.take=gn,X.head=gn,$n(X),X.VERSION="2.4.1",X.prototype.chain=or,X.prototype.value=ur,Kt(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=k[e];X.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),!$.spliceObjects&&e.length===0&&delete e[0],this}}),Kt(["concat","join","slice"],function(e){var t=k[e];X.prototype[e]=function(){var e=this.__wrapped__,n=t.apply(e,arguments);return this.__chain__&&(n=new V(n),n.__chain__=!0),n}}),typeof define=="function"&&typeof define.amd=="object"&&define.amd?(y._=X,define("underscore",[],function(){return X})):b&&w?E?(w.exports=X)._=X:b._=X:y._=X}.call(this),define("mockup-utils",["jquery"],function(e){var t=function(t){var n=this,r={pattern:null,vocabularyUrl:null,searchParam:"SearchableText",attributes:["UID","Title","Description","getURL","Type"],batchSize:10,baseCriteria:[],pathDepth:1};n.options=e.extend({},r,t),n.pattern=n.options.pattern;if(n.pattern===undefined||n.pattern===null)n.pattern={browsing:!1,basePath:"/"};return n.options.url&&!n.options.vocabularyUrl?n.options.vocabularyUrl=n.options.url:n.pattern.vocabularyUrl&&(n.options.vocabularyUrl=n.pattern.vocabularyUrl),n.options.vocabularyUrl!==undefined&&n.options.vocabularyUrl!==null?n.valid=!0:n.valid=!1,n.getCurrentPath=function(){var e=n.pattern,t;n.currentPath?t=n.currentPath:t=e.currentPath,typeof t=="function"&&(t=t());var r=t;return r||(e.basePath?r=e.basePath:e.options.basePath?r=e.options.basePath:r="/"),r},n.getCriterias=function(t,r){r===undefined&&(r={}),r=e.extend({},{useBaseCriteria:!0,additionalCriterias:[]},r);var i=[];return r.useBaseCriteria&&(i=n.options.baseCriteria.slice(0)),t&&(t+="*",i.push({i:n.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:t})),n.pattern.browsing&&i.push({i:"path",o:"plone.app.querystring.operation.string.path",v:n.getCurrentPath()+"::"+n.options.pathDepth}),i=i.concat(r.additionalCriterias),i},n.getBatch=function(e){return e||(e=1),{page:e,size:n.options.batchSize}},n.selectAjax=function(){return{url:n.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(e,t){return n.getQueryData(e,t)},results:function(e,t){var n=t*10<e.total;return{results:e.results,more:n}}}},n.getUrl=function(){var t=n.options.vocabularyUrl;return t.indexOf("?")===-1?t+="?":t+="&",t+e.param(n.getQueryData())},n.getQueryData=function(e,t){var r={query:JSON.stringify({criteria:n.getCriterias(e)}),attributes:JSON.stringify(n.options.attributes)};return t&&(r.batch=JSON.stringify(n.getBatch(t))),r},n.search=function(t,r,i,s,o){o===undefined&&(o=!0);var u=[];o&&(u=n.options.baseCriteria.slice(0)),u.push({i:t,o:r,v:i});var a={query:JSON.stringify({criteria:u}),attributes:JSON.stringify(n.options.attributes)};e.ajax({url:n.options.vocabularyUrl,dataType:"JSON",data:a,success:s})},n},n=function(t){var n=this,r={className:"progress-indicator",container:null,backdrop:null,wrapper:null,zIndex:10005};return t||(t={}),n.options=e.extend({},r,t),n.options.container===null&&(n.options.container=e("body")),n.$loading=e("> ."+n.options.className,n.options.container),n.$loading.size()===0&&(n.$loading=e("<div/>").hide().addClass(n.options.className).appendTo(n.options.container)),n.$wrapper=n.options.wrapper,n.$wrapper===null&&(n.$wrapper=n.options.container),n.show=function(e){e===undefined&&(e=!0),n.options.backdrop&&(n.options.backdrop.closeOnClick=e,n.options.backdrop.closeOnEsc=e,n.options.backdrop.init()),n.$wrapper.parent().css("overflow","hidden"),n.$wrapper.show(),n.options.backdrop&&n.options.backdrop.show(),n.$loading.show(),n.position()},n.position=function(){n.$loading.css({"margin-left":n.$wrapper.width()/2-n.$loading.width()/2,"margin-top":n.$wrapper.height()/2-n.$loading.height()/2,position:"absolute",bottom:"0",left:"0",right:"0",top:"0"});var e=n.options.zIndex;typeof e=="function"&&(e=e()),n.$loading.css("zIndex",e)},n.hide=function(){n.$loading.hide(),n.$wrapper.parent().css("overflow","")},n};return{parseBodyTag:function(t){return e(/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(t)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},setId:function(e,t){t===undefined&&(t="id");var n=e.attr("id");return n===undefined?n=t+Math.floor((1+Math.random())*65536).toString(16).substring(1):n=n.replace(/\./g,"-"),e.attr("id",n),n},bool:function(t){return typeof t=="string"&&(t=e.trim(t).toLowerCase()),["true",!0,1].indexOf(t)!==-1},QueryHelper:t,ProgressIndicator:n}}),function(e){define("jqtree",["jquery"],function(){return function(){(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C=[].slice,k={}.hasOwnProperty,L=function(e,t){function r(){this.constructor=e}for(var n in t)k.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};e=this.jQuery,g=function(){function t(t,n){this.$el=e(t),this.options=e.extend({},this.defaults,n)}return t.prototype.defaults={},t.prototype.destroy=function(){return this._deinit()},t.prototype._init=function(){return null},t.prototype._deinit=function(){return null},t.register=function(n,r){var i,s,o,u,a;return u=function(){return"simple_widget_"+r},a=function(n,r){var i;return i=e.data(n,r),i&&i instanceof t?i:null},s=function(t,r){var i,s,o,f,l,c;i=u();for(l=0,c=t.length;l<c;l++)s=t[l],o=a(s,i),o||(f=new n(s,r),e.data(s,i)||e.data(s,i,f),f._init());return t},o=function(t){var n,r,i,s,o,f;n=u(),f=[];for(s=0,o=t.length;s<o;s++)r=t[s],i=a(r,n),i&&i.destroy(),f.push(e.removeData(r,n));return f},i=function(n,r,i){var s,o,a,f,l,c;o=null;for(l=0,c=n.length;l<c;l++)s=n[l],a=e.data(s,u()),a&&a instanceof t&&(f=a[r],f&&typeof f=="function"&&(o=f.apply(a,i)));return o},e.fn[r]=function(){var e,t,n,r,u;n=arguments[0],t=2<=arguments.length?C.call(arguments,1):[],e=this;if(n===void 0||typeof n=="object")return u=n,s(e,u);if(typeof n=="string"&&n[0]!=="_")return r=n,r==="destroy"?o(e):i(e,r,t)}},t}(),this.SimpleWidget=g,l=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return L(n,t),n.is_mouse_handled=!1,n.prototype._init=function(){return this.$el.bind("mousedown.mousewidget",e.proxy(this._mouseDown,this)),this.$el.bind("touchstart.mousewidget",e.proxy(this._touchStart,this)),this.is_mouse_started=!1,this.mouse_delay=0,this._mouse_delay_timer=null,this._is_mouse_delay_met=!0,this.mouse_down_info=null},n.prototype._deinit=function(){var t;return this.$el.unbind("mousedown.mousewidget"),this.$el.unbind("touchstart.mousewidget"),t=e(document),t.unbind("mousemove.mousewidget"),t.unbind("mouseup.mousewidget")},n.prototype._mouseDown=function(e){var t;if(e.which!==1)return;return t=this._handleMouseDown(e,this._getPositionInfo(e)),t&&e.preventDefault(),t},n.prototype._handleMouseDown=function(e,t){if(n.is_mouse_handled)return;this.is_mouse_started&&this._handleMouseUp(t),this.mouse_down_info=t;if(!this._mouseCapture(t))return;return this._handleStartMouse(),this.is_mouse_handled=!0,!0},n.prototype._handleStartMouse=function(){var t;t=e(document),t.bind("mousemove.mousewidget",e.proxy(this._mouseMove,this)),t.bind("touchmove.mousewidget",e.proxy(this._touchMove,this)),t.bind("mouseup.mousewidget",e.proxy(this._mouseUp,this)),t.bind("touchend.mousewidget",e.proxy(this._touchEnd,this));if(this.mouse_delay)return this._startMouseDelayTimer()},n.prototype._startMouseDelayTimer=function(){return this._mouse_delay_timer&&clearTimeout(this._mouse_delay_timer),this._mouse_delay_timer=setTimeout(function(e){return function(){return e._is_mouse_delay_met=!0}}(this),this.mouse_delay),this._is_mouse_delay_met=!1},n.prototype._mouseMove=function(e){return this._handleMouseMove(e,this._getPositionInfo(e))},n.prototype._handleMouseMove=function(e,t){return this.is_mouse_started?(this._mouseDrag(t),e.preventDefault()):this.mouse_delay&&!this._is_mouse_delay_met?!0:(this.is_mouse_started=this._mouseStart(this.mouse_down_info)!==!1,this.is_mouse_started?this._mouseDrag(t):this._handleMouseUp(t),!this.is_mouse_started)},n.prototype._getPositionInfo=function(e){return{page_x:e.pageX,page_y:e.pageY,target:e.target,original_event:e}},n.prototype._mouseUp=function(e){return this._handleMouseUp(this._getPositionInfo(e))},n.prototype._handleMouseUp=function(t){var n;n=e(document),n.unbind("mousemove.mousewidget"),n.unbind("touchmove.mousewidget"),n.unbind("mouseup.mousewidget"),n.unbind("touchend.mousewidget"),this.is_mouse_started&&(this.is_mouse_started=!1,this._mouseStop(t))},n.prototype._mouseCapture=function(e){return!0},n.prototype._mouseStart=function(e){return null},n.prototype._mouseDrag=function(e){return null},n.prototype._mouseStop=function(e){return null},n.prototype.setMouseDelay=function(e){return this.mouse_delay=e},n.prototype._touchStart=function(e){var t;if(e.originalEvent.touches.length>1)return;return t=e.originalEvent.changedTouches[0],this._handleMouseDown(e,this._getPositionInfo(t))},n.prototype._touchMove=function(e){var t;if(e.originalEvent.touches.length>1)return;return t=e.originalEvent.changedTouches[0],this._handleMouseMove(e,this._getPositionInfo(t))},n.prototype._touchEnd=function(e){var t;if(e.originalEvent.touches.length>1)return;return t=e.originalEvent.changedTouches[0],this._handleMouseUp(this._getPositionInfo(t))},n}(g),this.Tree={},e=this.jQuery,p={getName:function(e){return p.strings[e-1]},nameToIndex:function(e){var t,n,r;for(t=n=1,r=p.strings.length;1<=r?n<=r:n>=r;t=1<=r?++n:--n)if(p.strings[t-1]===e)return t;return 0}},p.BEFORE=1,p.AFTER=2,p.INSIDE=3,p.NONE=4,p.strings=["before","after","inside","none"],this.Tree.Position=p,c=function(){function t(e,n,r){n==null&&(n=!1),r==null&&(r=t),this.setData(e),this.children=[],this.parent=null,n&&(this.id_mapping={},this.tree=this,this.node_class=r)}return t.prototype.setData=function(e){var t,n,r;if(typeof e!="object")return this.name=e;r=[];for(t in e)n=e[t],t==="label"?r.push(this.name=n):r.push(this[t]=n);return r},t.prototype.initFromData=function(e){var t,n;return n=function(e){return function(n){e.setData(n);if(n.children)return t(n.children)}}(this),t=function(e){return function(t){var n,r,i,s;for(i=0,s=t.length;i<s;i++)n=t[i],r=new e.tree.node_class(""),r.initFromData(n),e.addChild(r);return null}}(this),n(e),null},t.prototype.loadFromData=function(e){var t,n,r,i;this.removeChildren();for(r=0,i=e.length;r<i;r++)n=e[r],t=new this.tree.node_class(n),this.addChild(t),typeof n=="object"&&n.children&&t.loadFromData(n.children);return null},t.prototype.addChild=function(e){return this.children.push(e),e._setParent(this)},t.prototype.addChildAtPosition=function(e,t){return this.children.splice(t,0,e),e._setParent(this)},t.prototype._setParent=function(e){return this.parent=e,this.tree=e.tree,this.tree.addNodeToIndex(this)},t.prototype.removeChild=function(e){return e.removeChildren(),this._removeChild(e)},t.prototype._removeChild=function(e){return this.children.splice(this.getChildIndex(e),1),this.tree.removeNodeFromIndex(e)},t.prototype.getChildIndex=function(t){return e.inArray(t,this.children)},t.prototype.hasChildren=function(){return this.children.length!==0},t.prototype.isFolder=function(){return this.hasChildren()||this.load_on_demand},t.prototype.iterate=function(e){var t;return t=function(n){return function(r,i){var s,o,u,a,f;if(r.children){f=r.children;for(u=0,a=f.length;u<a;u++)s=f[u],o=e(s,i),n.hasChildren()&&o&&t(s,i+1);return null}}}(this),t(this,0),null},t.prototype.moveNode=function(e,t,n){if(e.isParentOf(t))return;e.parent._removeChild(e);if(n===p.AFTER)return t.parent.addChildAtPosition(e,t.parent.getChildIndex(t)+1);if(n===p.BEFORE)return t.parent.addChildAtPosition(e,t.parent.getChildIndex(t));if(n===p.INSIDE)return t.addChildAtPosition(e,0)},t.prototype.getData=function(){var e;return e=function(t){return function(t){var n,r,i,s,o,u,a;n=[];for(u=0,a=t.length;u<a;u++){i=t[u],s={};for(r in i)o=i[r],r!=="parent"&&r!=="children"&&r!=="element"&&r!=="tree"&&Object.prototype.hasOwnProperty.call(i,r)&&(s[r]=o);i.hasChildren()&&(s.children=e(i.children)),n.push(s)}return n}}(this),e(this.children)},t.prototype.getNodeByName=function(e){var t;return t=null,this.iterate(function(n){return n.name===e?(t=n,!1):!0}),t},t.prototype.addAfter=function(e){var t,n;return this.parent?(n=new this.tree.node_class(e),t=this.parent.getChildIndex(this),this.parent.addChildAtPosition(n,t+1),n):null},t.prototype.addBefore=function(e){var t,n;return this.parent?(n=new this.tree.node_class(e),t=this.parent.getChildIndex(this),this.parent.addChildAtPosition(n,t),n):null},t.prototype.addParent=function(e){var t,n,r,i,s,o;if(!this.parent)return null;n=new this.tree.node_class(e),n._setParent(this.tree),r=this.parent,o=r.children;for(i=0,s=o.length;i<s;i++)t=o[i],n.addChild(t);return r.children=[],r.addChild(n),n},t.prototype.remove=function(){if(this.parent)return this.parent.removeChild(this),this.parent=null},t.prototype.append=function(e){var t;return t=new this.tree.node_class(e),this.addChild(t),t},t.prototype.prepend=function(e){var t;return t=new this.tree.node_class(e),this.addChildAtPosition(t,0),t},t.prototype.isParentOf=function(e){var t;t=e.parent;while(t){if(t===this)return!0;t=t.parent}return!1},t.prototype.getLevel=function(){var e,t;e=0,t=this;while(t.parent)e+=1,t=t.parent;return e},t.prototype.getNodeById=function(e){return this.id_mapping[e]},t.prototype.addNodeToIndex=function(e){if(e.id!=null)return this.id_mapping[e.id]=e},t.prototype.removeNodeFromIndex=function(e){if(e.id!=null)return delete this.id_mapping[e.id]},t.prototype.removeChildren=function(){return this.iterate(function(e){return function(t){return e.tree.removeNodeFromIndex(t),!0}}(this)),this.children=[]},t.prototype.getPreviousSibling=function(){var e;return this.parent?(e=this.parent.getChildIndex(this)-1,e>=0?this.parent.children[e]:null):null},t.prototype.getNextSibling=function(){var e;return this.parent?(e=this.parent.getChildIndex(this)+1,e<this.parent.children.length?this.parent.children[e]:null):null},t}(),this.Tree.Node=c,i=function(){function t(e){this.tree_widget=e,this.opened_icon_text=this.getHtmlText(e.options.openedIcon),this.closed_icon_text=this.getHtmlText(e.options.closedIcon)}return t.prototype.render=function(e){return e&&e.parent?this.renderFromNode(e):this.renderFromRoot()},t.prototype.renderNode=function(t){var n,r,i,s;e(t.element).remove(),i=new h(t.parent,this.tree_widget),r=i.getUl(),n=this.createLi(t),this.attachNodeData(t,n),s=t.getPreviousSibling(),s?e(s.element).after(n):i.getUl().prepend(n);if(t.children)return this.renderFromNode(t)},t.prototype.renderFromRoot=function(){var e;return e=this.tree_widget.element,e.empty(),this.createDomElements(e[0],this.tree_widget.tree.children,!0,!0)},t.prototype.renderFromNode=function(e){var t;return t=this.tree_widget._getNodeElementForNode(e),t.getUl().remove(),this.createDomElements(t.$element[0],e.children,!1,!1)},t.prototype.createDomElements=function(e,t,n,r){var i,s,o,u,a;o=this.createUl(n),e.appendChild(o);for(u=0,a=t.length;u<a;u++)i=t[u],s=this.createLi(i),o.appendChild(s),this.attachNodeData(i,s),i.hasChildren()&&this.createDomElements(s,i.children,!1,i.is_open);return null},t.prototype.attachNodeData=function(t,n){return t.element=n,e(n).data("node",t)},t.prototype.createUl=function(e){var t,n;return e?t="jqtree-tree":t="",n=document.createElement("ul"),n.className="jqtree_common "+t,n},t.prototype.createLi=function(t){var n;return t.isFolder()?n=this.createFolderLi(t):n=this.createNodeLi(t),this.tree_widget.options.onCreateLi&&this.tree_widget.options.onCreateLi(t,e(n)),n},t.prototype.createFolderLi=function(e){var t,n,r,i,s,o,u,a;return n=this.getButtonClasses(e),o=this.getFolderClasses(e),s=this.escapeIfNecessary(e.name),e.is_open?t=this.opened_icon_text:t=this.closed_icon_text,u=document.createElement("li"),u.className="jqtree_common "+o,i=document.createElement("div"),i.className="jqtree-element jqtree_common",u.appendChild(i),r=document.createElement("a"),r.className="jqtree_common "+n,r.appendChild(document.createTextNode(t)),i.appendChild(r),a=document.createElement("span"),a.className="jqtree_common jqtree-title",i.appendChild(a),a.innerHTML=s,u},t.prototype.createNodeLi=function(e){var t,n,r,i,s,o;return s=["jqtree_common"],this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(e)&&s.push("jqtree-selected"),t=s.join(" "),r=this.escapeIfNecessary(e.name),i=document.createElement("li"),i.className=t,n=document.createElement("div"),n.className="jqtree-element jqtree_common",i.appendChild(n),o=document.createElement("span"),o.className="jqtree-title jqtree_common",o.innerHTML=r,n.appendChild(o),i},t.prototype.getButtonClasses=function(e){var t;return t=["jqtree-toggler"],e.is_open||t.push("jqtree-closed"),t.join(" ")},t.prototype.getFolderClasses=function(e){var t;return t=["jqtree-folder"],e.is_open||t.push("jqtree-closed"),this.tree_widget.select_node_handler&&this.tree_widget.select_node_handler.isNodeSelected(e)&&t.push("jqtree-selected"),t.join(" ")},t.prototype.escapeIfNecessary=function(e){return this.tree_widget.options.autoEscape?b(e):e},t.prototype.getHtmlText=function(t){return e(document.createElement("div")).html(t).text()},t}(),a=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return L(r,t),r.prototype.defaults={autoOpen:!1,saveState:!1,dragAndDrop:!1,selectable:!0,useContextMenu:!0,onCanSelectNode:null,onSetStateFromStorage:null,onGetStateFromStorage:null,onCreateLi:null,onIsMoveHandle:null,onCanMove:null,onCanMoveTo:null,onLoadFailed:null,autoEscape:!0,dataUrl:null,closedIcon:"&#x25ba;",openedIcon:"&#x25bc;",slide:!0,nodeClass:c,dataFilter:null,keyboardSupport:!0,openFolderDelay:500},r.prototype.toggle=function(e,t){return t==null&&(t=!0),e.is_open?this.closeNode(e,t):this.openNode(e,t)},r.prototype.getTree=function(){return this.tree},r.prototype.selectNode=function(e){return this._selectNode(e,!1)},r.prototype._selectNode=function(e,t){var n,r,i,s;t==null&&(t=!1);if(!this.select_node_handler)return;n=function(t){return function(){return t.options.onCanSelectNode?t.options.selectable&&t.options.onCanSelectNode(e):t.options.selectable}}(this),i=function(t){return function(){var n;n=e.parent;if(n&&n.parent&&!n.is_open)return t.openNode(n,!1)}}(this),s=function(e){return function(){if(e.options.saveState)return e.save_state_handler.saveState()}}(this);if(!e){this._deselectCurrentNode(),s();return}if(!n())return;return this.select_node_handler.isNodeSelected(e)?t&&(this._deselectCurrentNode(),this._triggerEvent("tree.select",{node:null,previous_node:e})):(r=this.getSelectedNode(),this._deselectCurrentNode(),this.addToSelection(e),this._triggerEvent("tree.select",{node:e,deselected_node:r}),i()),s()},r.prototype.getSelectedNode=function(){return this.select_node_handler.getSelectedNode()},r.prototype.toJson=function(){return JSON.stringify(this.tree.getData())},r.prototype.loadData=function(e,t){return this._loadData(e,t)},r.prototype.loadDataFromUrl=function(t,n,r){return e.type(t)!=="string"&&(r=n,n=t,t=null),this._loadDataFromUrl(t,n,r)},r.prototype.reload=function(){return this.loadDataFromUrl()},r.prototype._loadDataFromUrl=function(t,n,r){var i,o,u,a;return i=null,o=function(e){return function(){var t;return n?(t=new s(n,e),i=t.getLi()):i=e.element,i.addClass("jqtree-loading")}}(this),a=function(e){return function(){if(i)return i.removeClass("jqtree-loading")}}(this),u=function(n){return function(){e.type(t)==="string"&&(t={url:t});if(!t.method)return t.method="get"}}(this),o(),t||(t=this._getDataUrlInfo(n)),u(),e.ajax({url:t.url,data:t.data,type:t.method.toUpperCase(),cache:!1,dataType:"json",success:function(t){return function(i){var s;e.isArray(i)||typeof i=="object"?s=i:s=e.parseJSON(i),t.options.dataFilter&&(s=t.options.dataFilter(s)),a(),t._loadData(s,n);if(r&&e.isFunction(r))return r()}}(this),error:function(e){return function(t){a();if(e.options.onLoadFailed)return e.options.onLoadFailed(t)}}(this)})},r.prototype._loadData=function(e,t){var n,r,i,s;if(!e)return;this._triggerEvent("tree.load_data",{tree_data:e});if(!t)this._initTree(e);else{r=this.select_node_handler.getSelectedNodesUnder(t);for(i=0,s=r.length;i<s;i++)n=r[i],this.select_node_handler.removeFromSelection(n);t.loadFromData(e),t.load_on_demand=!1,this._refreshElements(t.parent)}if(this.is_dragging)return this.dnd_handler.refreshHitAreas()},r.prototype.getNodeById=function(e){return this.tree.getNodeById(e)},r.prototype.getNodeByName=function(e){return this.tree.getNodeByName(e)},r.prototype.openNode=function(e,t){return t==null&&(t=!0),this._openNode(e,t)},r.prototype._openNode=function(e,t,n){var r,i;t==null&&(t=!0),r=function(e){return function(t,n,r){var i;return i=new s(t,e),i.open(r,n)}}(this);if(e.isFolder()){if(e.load_on_demand)return this._loadFolderOnDemand(e,t,n);i=e.parent;while(i&&!i.is_open)i.parent&&r(i,!1,null),i=i.parent;return r(e,t,n),this._saveState()}},r.prototype._loadFolderOnDemand=function(e,t,n){return t==null&&(t=!0),this._loadDataFromUrl(null,e,function(r){return function(){return r._openNode(e,t,n)}}(this))},r.prototype.closeNode=function(e,t){t==null&&(t=!0);if(e.isFolder())return(new s(e,this)).close(t),this._saveState()},r.prototype.isDragging=function(){return this.is_dragging},r.prototype.refreshHitAreas=function(){return this.dnd_handler.refreshHitAreas()},r.prototype.addNodeAfter=function(e,t){var n;return n=t.addAfter(e),this._refreshElements(t.parent),n},r.prototype.addNodeBefore=function(e,t){var n;return n=t.addBefore(e),this._refreshElements(t.parent),n},r.prototype.addParentNode=function(e,t){var n;return n=t.addParent(e),this._refreshElements(n.parent),n},r.prototype.removeNode=function(e){var t;t=e.parent;if(t)return this.select_node_handler.removeFromSelection(e,!0),e.remove(),this._refreshElements(t.parent)},r.prototype.appendNode=function(e,t){var n,r;return t||(t=this.tree),n=t.isFolder(),r=t.append(e),n?this._refreshElements(t):this._refreshElements(t.parent),r},r.prototype.prependNode=function(e,t){var n;return t||(t=this.tree),n=t.prepend(e),this._refreshElements(t),n},r.prototype.updateNode=function(e,t){var n;return n=t.id&&t.id!==e.id,n&&this.tree.removeNodeFromIndex(e),e.setData(t),n&&this.tree.addNodeToIndex(e),this.renderer.renderNode(e),this._selectCurrentNode()},r.prototype.moveNode=function(e,t,n){var r;return r=p.nameToIndex(n),this.tree.moveNode(e,t,r),this._refreshElements()},r.prototype.getStateFromStorage=function(){return this.save_state_handler.getStateFromStorage()},r.prototype.addToSelection=function(e){return this.select_node_handler.addToSelection(e),this._getNodeElementForNode(e).select()},r.prototype.getSelectedNodes=function(){return this.select_node_handler.getSelectedNodes()},r.prototype.isNodeSelected=function(e){return this.select_node_handler.isNodeSelected(e)},r.prototype.removeFromSelection=function(e){return this.select_node_handler.removeFromSelection(e),this._getNodeElementForNode(e).deselect()},r.prototype.scrollToNode=function(t){var n,r;return n=e(t.element),r=n.offset().top-this.$el.offset().top,this.scroll_handler.scrollTo(r)},r.prototype.getState=function(){return this.save_state_handler.getState()},r.prototype.setState=function(e){return this.save_state_handler.setState(e),this._refreshElements()},r.prototype.setOption=function(e,t){return this.options[e]=t},r.prototype._init=function(){r.__super__._init.call(this),this.element=this.$el,this.mouse_delay=300,this.is_initialized=!1,this.renderer=new i(this),typeof d!="undefined"&&d!==null?this.save_state_handler=new d(this):this.options.saveState=!1,typeof m!="undefined"&&m!==null&&(this.select_node_handler=new m(this)),typeof n!="undefined"&&n!==null?this.dnd_handler=new n(this):this.options.dragAndDrop=!1,typeof v!="undefined"&&v!==null&&(this.scroll_handler=new v(this)),typeof f!="undefined"&&f!==null&&typeof m!="undefined"&&m!==null&&(this.key_handler=new f(this)),this._initData(),this.element.click(e.proxy(this._click,this)),this.element.dblclick(e.proxy(this._dblclick,this));if(this.options.useContextMenu)return this.element.bind("contextmenu",e.proxy(this._contextmenu,this))},r.prototype._deinit=function(){return this.element.empty(),this.element.unbind(),this.key_handler.deinit(),this.tree=null,r.__super__._deinit.call(this)},r.prototype._initData=function(){return this.options.data?this._loadData(this.options.data):this._loadDataFromUrl(this._getDataUrlInfo())},r.prototype._getDataUrlInfo=function(t){var n,r;return n=this.options.dataUrl||this.element.data("url"),r=function(e){return function(){var r,i,s;return s={url:n},t&&t.id?(r={node:t.id},s.data=r):(i=e._getNodeIdToBeSelected(),i&&(r={selected_node:i},s.data=r)),s}}(this),e.isFunction(n)?n(t):e.type(n)==="string"?r():n},r.prototype._getNodeIdToBeSelected=function(){return this.options.saveState?this.save_state_handler.getNodeIdToBeSelected():null},r.prototype._initTree=function(e){this.tree=new this.options.nodeClass(null,!0,this.options.nodeClass),this.select_node_handler&&this.select_node_handler.clear(),this.tree.loadFromData(e),this._openNodes(),this._refreshElements();if(!this.is_initialized)return this.is_initialized=!0,this._triggerEvent("tree.init")},r.prototype._openNodes=function(){var e;if(this.options.saveState&&this.save_state_handler.restoreState())return;if(this.options.autoOpen===!1)return;return this.options.autoOpen===!0?e=-1:e=parseInt(this.options.autoOpen),this.tree.iterate(function(t,n){return t.hasChildren()&&(t.is_open=!0),n!==e})},r.prototype._refreshElements=function(e){return e==null&&(e=null),this.renderer.render(e),this._triggerEvent("tree.refresh")},r.prototype._click=function(e){var t,n,r;t=this._getClickTarget(e.target);if(t){if(t.type==="button")return this.toggle(t.node,this.options.slide),e.preventDefault(),e.stopPropagation();if(t.type==="label"){r=t.node,n=this._triggerEvent("tree.click",{node:r,click_event:e});if(!n.isDefaultPrevented())return this._selectNode(r,!0)}}},r.prototype._dblclick=function(e){var t;t=this._getClickTarget(e.target);if(t&&t.type==="label")return this._triggerEvent("tree.dblclick",{node:t.node,click_event:e})},r.prototype._getClickTarget=function(t){var n,r,i,s;i=e(t),n=i.closest(".jqtree-toggler");if(n.length){s=this._getNode(n);if(s)return{type:"button",node:s}}else{r=i.closest(".jqtree-element");if(r.length){s=this._getNode(r);if(s)return{type:"label",node:s}}}return null},r.prototype._getNode=function(e){var t;return t=e.closest("li"),t.length===0?null:t.data("node")},r.prototype._getNodeElementForNode=function(e){return e.isFolder()?new s(e,this):new h(e,this)},r.prototype._getNodeElement=function(e){var t;return t=this._getNode(e),t?this._getNodeElementForNode(t):null},r.prototype._contextmenu=function(t){var n,r;n=e(t.target).closest("ul.jqtree-tree .jqtree-element");if(n.length){r=this._getNode(n);if(r)return t.preventDefault(),t.stopPropagation(),this._triggerEvent("tree.contextmenu",{node:r,click_event:t}),!1}},r.prototype._saveState=function(){if(this.options.saveState)return this.save_state_handler.saveState()},r.prototype._mouseCapture=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseCapture(e):!1},r.prototype._mouseStart=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseStart(e):!1},r.prototype._mouseDrag=function(e){var t;return this.options.dragAndDrop?(t=this.dnd_handler.mouseDrag(e),this.scroll_handler&&this.scroll_handler.checkScrolling(),t):!1},r.prototype._mouseStop=function(e){return this.options.dragAndDrop?this.dnd_handler.mouseStop(e):!1},r.prototype._triggerEvent=function(t,n){var r;return r=e.Event(t),e.extend(r,n),this.element.trigger(r),r},r.prototype.testGenerateHitAreas=function(e){return this.dnd_handler.current_item=this._getNodeElementForNode(e),this.dnd_handler.generateHitAreas(),this.dnd_handler.hit_areas},r.prototype._selectCurrentNode=function(){var e,t;e=this.getSelectedNode();if(e){t=this._getNodeElementForNode(e);if(t)return t.select()}},r.prototype._deselectCurrentNode=function(){var e;e=this.getSelectedNode();if(e)return this.removeFromSelection(e)},r}(l),g.register(a,"tree"),h=function(){function n(e,t){this.init(e,t)}return n.prototype.init=function(t,n){return this.node=t,this.tree_widget=n,this.$element=e(t.element)},n.prototype.getUl=function(){return this.$element.children("ul:first")},n.prototype.getSpan=function(){return this.$element.children(".jqtree-element").find("span.jqtree-title")},n.prototype.getLi=function(){return this.$element},n.prototype.addDropHint=function(e){return e===p.INSIDE?new t(this.$element):new o(this.node,this.$element,e)},n.prototype.select=function(){return this.getLi().addClass("jqtree-selected")},n.prototype.deselect=function(){return this.getLi().removeClass("jqtree-selected")},n}(),s=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return L(n,e),n.prototype.open=function(e,t){var n,r;t==null&&(t=!0);if(!this.node.is_open)return this.node.is_open=!0,n=this.getButton(),n.removeClass("jqtree-closed"),n.html(this.tree_widget.options.openedIcon),r=function(t){return function(){return t.getLi().removeClass("jqtree-closed"),e&&e(),t.tree_widget._triggerEvent("tree.open",{node:t.node})}}(this),t?this.getUl().slideDown("fast",r):(this.getUl().show(),r())},n.prototype.close=function(e){var t,n;e==null&&(e=!0);if(this.node.is_open)return this.node.is_open=!1,t=this.getButton(),t.addClass("jqtree-closed"),t.html(this.tree_widget.options.closedIcon),n=function(e){return function(){return e.getLi().addClass("jqtree-closed"),e.tree_widget._triggerEvent("tree.close",{node:e.node})}}(this),e?this.getUl().slideUp("fast",n):(this.getUl().hide(),n())},n.prototype.getButton=function(){return this.$element.children(".jqtree-element").find("a.jqtree-toggler")},n.prototype.addDropHint=function(e){return!this.node.is_open&&e===p.INSIDE?new t(this.$element):new o(this.node,this.$element,e)},n}(h),b=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},N=function(e,t){var n,r,i,s;for(n=i=0,s=e.length;i<s;n=++i){r=e[n];if(r===t)return n}return-1},w=function(e,t){return e.indexOf?e.indexOf(t):N(e,t)},this.Tree.indexOf=w,this.Tree._indexOf=N;if(this.JSON==null||this.JSON.stringify==null||typeof this.JSON.stringify!="function")E=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,S={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x=function(e){return E.lastIndex=0,E.test(e)?'"'+e.replace(E,function(e){var t;return t=S[e],typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'},T=function(e,t){var n,r,i,s,o,u,a;o=t[e];switch(typeof o){case"string":return x(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";i=[];if(Object.prototype.toString.apply(o)==="[object Array]"){for(n=u=0,a=o.length;u<a;n=++u)s=o[n],i[n]=T(n,o)||"null";return i.length===0?"[]":"["+i.join(",")+"]"}for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(s=T(r,o),s&&i.push(x(r)+":"+s));return i.length===0?"{}":"{"+i.join(",")+"}"}},this.JSON==null&&(this.JSON={}),this.JSON.stringify=function(e){return T("",{"":e})};d=function(){function t(e){this.tree_widget=e}return t.prototype.saveState=function(){var t;t=JSON.stringify(this.getState());if(this.tree_widget.options.onSetStateFromStorage)return this.tree_widget.options.onSetStateFromStorage(t);if(this.supportsLocalStorage())return localStorage.setItem(this.getCookieName(),t);if(e.cookie)return e.cookie.raw=!0,e.cookie(this.getCookieName(),t,{path:"/"})},t.prototype.restoreState=function(){var t;return t=this.getStateFromStorage(),t?(this.setState(e.parseJSON(t)),!0):!1},t.prototype.getStateFromStorage=function(){return this.tree_widget.options.onGetStateFromStorage?this.tree_widget.options.onGetStateFromStorage():this.supportsLocalStorage()?localStorage.getItem(this.getCookieName()):e.cookie?(e.cookie.raw=!0,e.cookie(this.getCookieName())):null},t.prototype.getState=function(){var e,t,n;return e=[],this.tree_widget.tree.iterate(function(t){return function(t){return t.is_open&&t.id&&t.hasChildren()&&e.push(t.id),!0}}(this)),t=this.tree_widget.getSelectedNode(),t?n=t.id:n="",{open_nodes:e,selected_node:n}},t.prototype.setState=function(e){var t,n,r;if(e){t=e.open_nodes,r=e.selected_node,this.tree_widget.tree.iterate(function(e){return function(e){return e.is_open=e.id&&e.hasChildren()&&w(t,e.id)>=0,!0}}(this));if(r&&this.tree_widget.select_node_handler){this.tree_widget.select_node_handler.clear(),n=this.tree_widget.getNodeById(r);if(n)return this.tree_widget.select_node_handler.addToSelection(n)}}},t.prototype.getCookieName=function(){return typeof this.tree_widget.options.saveState=="string"?this.tree_widget.options.saveState:"tree"},t.prototype.supportsLocalStorage=function(){var e;return e=function(){var e,t;if(typeof localStorage=="undefined"||localStorage===null)return!1;try{t="_storage_test",sessionStorage.setItem(t,!0),sessionStorage.removeItem(t)}catch(n){return e=n,!1}return!0},this._supportsLocalStorage==null&&(this._supportsLocalStorage=e()),this._supportsLocalStorage},t.prototype.getNodeIdToBeSelected=function(){var t,n;return n=this.getStateFromStorage(),n?(t=e.parseJSON(n),t.selected_node):null},t}(),m=function(){function e(e){this.tree_widget=e,this.clear()}return e.prototype.getSelectedNode=function(){var e;return e=this.getSelectedNodes(),e.length?e[0]:!1},e.prototype.getSelectedNodes=function(){var e,t,n;if(this.selected_single_node)return[this.selected_single_node];n=[];for(e in this.selected_nodes)t=this.tree_widget.getNodeById(e),t&&n.push(t);return n},e.prototype.getSelectedNodesUnder=function(e){var t,n,r;if(this.selected_single_node)return e.isParentOf(selected_single_node)?this.selected_single_node:null;r=[];for(t in this.selected_nodes)n=this.tree_widget.getNodeById(t),n&&e.isParentOf(n)&&r.push(n);return r},e.prototype.isNodeSelected=function(e){return e.id?this.selected_nodes[e.id]:this.selected_single_node?this.selected_single_node.element===e.element:!1},e.prototype.clear=function(){return this.selected_nodes={},this.selected_single_node=null},e.prototype.removeFromSelection=function(e,t){t==null&&(t=!1);if(!e.id){if(this.selected_single_node&&e.element===this.selected_single_node.element)return this.selected_single_node=null}else{delete this.selected_nodes[e.id];if(t)return e.iterate(function(t){return function(n){return delete t.selected_nodes[e.id],!0}}(this))}},e.prototype.addToSelection=function(e){return e.id?this.selected_nodes[e.id]=!0:this.selected_single_node=e},e}(),n=function(){function t(e){this.tree_widget=e,this.hovered_area=null,this.$ghost=null,this.hit_areas=[],this.is_dragging=!1}return t.prototype.mouseCapture=function(t){var n,r;return n=e(t.target),this.tree_widget.options.onIsMoveHandle&&!this.tree_widget.options.onIsMoveHandle(n)?null:(r=this.tree_widget._getNodeElement(n),r&&this.tree_widget.options.onCanMove&&(this.tree_widget.options.onCanMove(r.node)||(r=null)),this.current_item=r,this.current_item!==null)},t.prototype.mouseStart=function(t){var n;return this.refreshHitAreas(),n=e(t.target).offset(),this.drag_element=new r(this.current_item.node,t.page_x-n.left,t.page_y-n.top,this.tree_widget.element),this.is_dragging=!0,this.current_item.$element.addClass("jqtree-moving"),!0},t.prototype.mouseDrag=function(e){var t,n;return this.drag_element.move(e.page_x,e.page_y),t=this.findHoveredArea(e.page_x,e.page_y),n=this.canMoveToArea(t),n&&t?this.hovered_area!==t&&(this.hovered_area=t,this.mustOpenFolderTimer(t)&&this.startOpenFolderTimer(t.node),this.updateDropHint()):(this.removeHover(),this.removeDropHint(),this.stopOpenFolderTimer()),!0},t.prototype.canMoveToArea=function(e){var t;return e?this.tree_widget.options.onCanMoveTo?(t=p.getName(e.position),this.tree_widget.options.onCanMoveTo(this.current_item.node,e.node,t)):!0:!1},t.prototype.mouseStop=function(e){return this.moveItem(e),this.clear(),this.removeHover(),this.removeDropHint(),this.removeHitAreas(),this.current_item&&this.current_item.$element.removeClass("jqtree-moving"),this.is_dragging=!1,!1},t.prototype.refreshHitAreas=function(){return this.removeHitAreas(),this.generateHitAreas()},t.prototype.removeHitAreas=function(){return this.hit_areas=[]},t.prototype.clear=function(){return this.drag_element.remove(),this.drag_element=null},t.prototype.removeDropHint=function(){if(this.previous_ghost)return this.previous_ghost.remove()},t.prototype.removeHover=function(){return this.hovered_area=null},t.prototype.generateHitAreas=function(){var e;return e=new u(this.tree_widget.tree,this.current_item.node,this.getTreeDimensions().bottom),this.hit_areas=e.generate()},t.prototype.findHoveredArea=function(e,t){var n,r,i,s,o;r=this.getTreeDimensions();if(e<r.left||t<r.top||e>r.right||t>r.bottom)return null;s=0,i=this.hit_areas.length;while(s<i){o=s+i>>1,n=this.hit_areas[o];if(t<n.top)i=o;else{if(!(t>n.bottom))return n;s=o+1}}return null},t.prototype.mustOpenFolderTimer=function(e){var t;return t=e.node,t.isFolder()&&!t.is_open&&e.position===p.INSIDE},t.prototype.updateDropHint=function(){var e;if(!this.hovered_area)return;return this.removeDropHint(),e=this.tree_widget._getNodeElementForNode(this.hovered_area.node),this.previous_ghost=e.addDropHint(this.hovered_area.position)},t.prototype.startOpenFolderTimer=function(e){var t;return t=function(t){return function(){return t.tree_widget._openNode(e,t.tree_widget.options.slide,function(){return t.refreshHitAreas(),t.updateDropHint()})}}(this),this.stopOpenFolderTimer(),this.open_folder_timer=setTimeout(t,this.tree_widget.options.openFolderDelay)},t.prototype.stopOpenFolderTimer=function(){if(this.open_folder_timer)return clearTimeout(this.open_folder_timer),this.open_folder_timer=null},t.prototype.moveItem=function(e){var t,n,r,i,s,o;if(this.hovered_area&&this.hovered_area.position!==p.NONE&&this.canMoveToArea(this.hovered_area)){r=this.current_item.node,o=this.hovered_area.node,i=this.hovered_area.position,s=r.parent,i===p.INSIDE&&(this.hovered_area.node.is_open=!0),t=function(e){return function(){return e.tree_widget.tree.moveNode(r,o,i),e.tree_widget.element.empty(),e.tree_widget._refreshElements()}}(this),n=this.tree_widget._triggerEvent("tree.move",{move_info:{moved_node:r,target_node:o,position:p.getName(i),previous_parent:s,do_move:t,original_event:e.original_event}});if(!n.isDefaultPrevented())return t()}},t.prototype.getTreeDimensions=function(){var e;return e=this.tree_widget.element.offset(),{left:e.left,top:e.top,right:e.left+this.tree_widget.element.width(),bottom:e.top+this.tree_widget.element.height()+16}},t}(),y=function(){function t(e){this.tree=e}return t.prototype.iterate=function(){var t,n;return t=!0,n=function(r){return function(i,s){var o,u,a,f,l,c,h,p;l=(i.is_open||!i.element)&&i.hasChildren();if(i.element){o=e(i.element);if(!o.is(":visible"))return;t&&(r.handleFirstNode(i,o),t=!1),i.hasChildren()?i.is_open?r.handleOpenFolder(i,o)||(l=!1):r.handleClosedFolder(i,s,o):r.handleNode(i,s,o)}if(l){a=i.children.length,p=i.children;for(f=c=0,h=p.length;c<h;f=++c)u=p[f],f===a-1?n(i.children[f],null):n(i.children[f],i.children[f+1]);if(i.is_open)return r.handleAfterOpenFolder(i,s,o)}}}(this),n(this.tree,null)},t.prototype.handleNode=function(e,t,n){},t.prototype.handleOpenFolder=function(e,t){},t.prototype.handleClosedFolder=function(e,t,n){},t.prototype.handleAfterOpenFolder=function(e,t,n){},t.prototype.handleFirstNode=function(e,t){},t}(),u=function(t){function n(e,t,r){n.__super__.constructor.call(this,e),this.current_node=t,this.tree_bottom=r}return L(n,t),n.prototype.generate=function(){return this.positions=[],this.last_top=0,this.iterate(),this.generateHitAreas(this.positions)},n.prototype.getTop=function(e){return e.offset().top},n.prototype.addPosition=function(e,t,n){var r;return r={top:n,node:e,position:t},this.positions.push(r),this.last_top=n},n.prototype.handleNode=function(e,t,n){var r;return r=this.getTop(n),e===this.current_node?this.addPosition(e,p.NONE,r):this.addPosition(e,p.INSIDE,r),t===this.current_node||e===this.current_node?this.addPosition(e,p.NONE,r):this.addPosition(e,p.AFTER,r)},n.prototype.handleOpenFolder=function(e,t){return e===this.current_node?!1:(e.children[0]!==this.current_node&&this.addPosition(e,p.INSIDE,this.getTop(t)),!0)},n.prototype.handleClosedFolder=function(e,t,n){var r;r=this.getTop(n);if(e===this.current_node)return this.addPosition(e,p.NONE,r);this.addPosition(e,p.INSIDE,r);if(t!==this.current_node)return this.addPosition(e,p.AFTER,r)},n.prototype.handleFirstNode=function(t,n){if(t!==this.current_node)return this.addPosition(t,p.BEFORE,this.getTop(e(t.element)))},n.prototype.handleAfterOpenFolder=function(e,t,n){return e===this.current_node.node||t===this.current_node.node?this.addPosition(e,p.NONE,this.last_top):this.addPosition(e,p.AFTER,this.last_top)},n.prototype.generateHitAreas=function(e){var t,n,r,i,s,o;i=-1,t=[],n=[];for(s=0,o=e.length;s<o;s++)r=e[s],r.top!==i&&t.length&&(t.length&&this.generateHitAreasForGroup(n,t,i,r.top),i=r.top,t=[]),t.push(r);return this.generateHitAreasForGroup(n,t,i,this.tree_bottom),n},n.prototype.generateHitAreasForGroup=function(e,t,n,r){var i,s,o,u,a;a=Math.min(t.length,4),i=Math.round((r-n)/a),s=n,o=0;while(o<a)u=t[o],e.push({top:s,bottom:s+i,node:u.node,position:u.position}),s+=i,o+=1;return null},n}(y),r=function(){function t(t,n,r,i){this.offset_x=n,this.offset_y=r,this.$element=e('<span class="jqtree-title jqtree-dragging">'+t.name+"</span>"),this.$element.css("position","absolute"),i.append(this.$element)}return t.prototype.move=function(e,t){return this.$element.offset({left:e-this.offset_x,top:t-this.offset_y})},t.prototype.remove=function(){return this.$element.remove()},t}(),o=function(){function t(t,n,r){this.$element=n,this.node=t,this.$ghost=e('<li class="jqtree_common jqtree-ghost"><span class="jqtree_common jqtree-circle"></span><span class="jqtree_common jqtree-line"></span></li>'),r===p.AFTER?this.moveAfter():r===p.BEFORE?this.moveBefore():r===p.INSIDE&&(t.isFolder()&&t.is_open?this.moveInsideOpenFolder():this.moveInside())}return t.prototype.remove=function(){return this.$ghost.remove()},t.prototype.moveAfter=function(){return this.$element.after(this.$ghost)},t.prototype.moveBefore=function(){return this.$element.before(this.$ghost)},t.prototype.moveInsideOpenFolder=function(){return e(this.node.children[0].element).before(this.$ghost)},t.prototype.moveInside=function(){return this.$element.after(this.$ghost),this.$ghost.addClass("jqtree-inside")},t}(),t=function(){function t(t){var n,r;n=t.children(".jqtree-element"),r=t.width()-4,this.$hint=e('<span class="jqtree-border"></span>'),n.append(this.$hint),this.$hint.css({width:r,height:n.height()-4})}return t.prototype.remove=function(){return this.$hint.remove()},t}(),v=function(){function t(e){this.tree_widget=e,this.previous_top=-1,this._initScrollParent()}return t.prototype._initScrollParent=function(){var t,n,r;return n=function(t){return function(){var n,r,i,s,o,u;n=["overflow","overflow-y"],i=function(t){var r,i,s,o;for(i=0,s=n.length;i<s;i++){r=n[i];if((o=e.css(t,r))==="auto"||o==="scroll")return!0}return!1};if(i(t.tree_widget.$el[0]))return t.tree_widget.$el;u=t.tree_widget.$el.parents();for(s=0,o=u.length;s<o;s++){r=u[s];if(i(r))return e(r)}return null}}(this),r=function(e){return function(){return e.scroll_parent_top=0,e.$scroll_parent=null}}(this),this.tree_widget.$el.css("position")==="fixed"&&r(),t=n(),t&&t.length&&t[0].tagName!=="HTML"?(this.$scroll_parent=t,this.scroll_parent_top=this.$scroll_parent.offset().top):r()},t.prototype.checkScrolling=function(){var e;e=this.tree_widget.dnd_handler.hovered_area;if(e&&e.top!==this.previous_top)return this.previous_top=e.top,this.$scroll_parent?this._handleScrollingWithScrollParent(e):this._handleScrollingWithDocument(e)},t.prototype._handleScrollingWithScrollParent=function(e){var t;t=this.scroll_parent_top+this.$scroll_parent[0].offsetHeight-e.bottom;if(t<20)return this.$scroll_parent[0].scrollTop+=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1;if(e.top-this.scroll_parent_top<20)return this.$scroll_parent[0].scrollTop-=20,this.tree_widget.refreshHitAreas(),this.previous_top=-1},t.prototype._handleScrollingWithDocument=function(t){var n;n=t.top-e(document).scrollTop();if(n<20)return e(document).scrollTop(e(document).scrollTop()-20);if(e(window).height()-(t.bottom-e(document).scrollTop())<20)return e(document).scrollTop(e(document).scrollTop()+20)},t.prototype.scrollTo=function(t){var n;return this.$scroll_parent?this.$scroll_parent[0].scrollTop=t:(n=this.tree_widget.$el.offset().top,e(document).scrollTop(t+n))},t.prototype.isScrolledIntoView=function(t){var n,r,i,s,o;return n=e(t),this.$scroll_parent?(o=0,s=this.$scroll_parent.height(),i=n.offset().top-this.scroll_parent_top,r=i+n.height()):(o=e(window).scrollTop(),s=o+e(window).height(),i=n.offset().top,r=i+n.height()),r<=s&&i>=o},t}(),f=function(){function s(t){this.tree_widget=t,t.options.keyboardSupport&&e(document).bind("keydown.jqtree",e.proxy(this.handleKeyDown,this))}var t,n,r,i;return n=37,i=38,r=39,t=40,s.prototype.deinit=function(){return e(document).unbind("keydown.jqtree")},s.prototype.handleKeyDown=function(s){var o,u,a,f,l,c,h;if(!this.tree_widget.options.keyboardSupport)return;if(e(document.activeElement).is("textarea,input"))return!0;o=this.tree_widget.getSelectedNode(),h=function(t){return function(n){return n?(t.tree_widget.selectNode(n),t.tree_widget.scroll_handler&&!t.tree_widget.scroll_handler.isScrolledIntoView(e(n.element).find(".jqtree-element"))&&t.tree_widget.scrollToNode(n),!1):!0}}(this),a=function(e){return function(){return h(e.getNextNode(o))}}(this),c=function(e){return function(){return h(e.getPreviousNode(o))}}(this),l=function(e){return function(){return o.isFolder()&&!o.is_open?(e.tree_widget.openNode(o),!1):!0}}(this),f=function(e){return function(){return o.isFolder()&&o.is_open?(e.tree_widget.closeNode(o),!1):!0}}(this);if(!o)return!0;u=s.which;switch(u){case t:return a();case i:return c();case r:return l();case n:return f()}},s.prototype.getNextNode=function(e,t){var n;return t==null&&(t=!0),t&&e.hasChildren()&&e.is_open?e.children[0]:e.parent?(n=e.getNextSibling(),n?n:this.getNextNode(e.parent,!1)):null},s.prototype.getPreviousNode=function(e){var t;return e.parent?(t=e.getPreviousSibling(),t?!t.hasChildren()||!t.is_open?t:this.getLastChild(t):e.parent.parent?e.parent:null):null},s.prototype.getLastChild=function(e){var t;return e.hasChildren()?(t=e.children[e.children.length-1],!t.hasChildren()||!t.is_open?t:this.getLastChild(t)):null},s}()}).call(this)}.apply(e,arguments)})}(this),define("mockup-patterns-tree",["jquery","underscore","mockup-patterns-base","mockup-utils","jqtree"],function(e,t,n,r){var i=n.extend({name:"tree",defaults:{dragAndDrop:!1,autoOpen:!1,selectable:!0,keyboardSupport:!0},init:function(){var t=this;for(var n in t.options){var i=t.defaults[n];i!==undefined&&typeof i=="boolean"&&(t.options[n]=r.bool(t.options[n]))}t.options.dragAndDrop&&t.options.onCanMoveTo===undefined&&(t.options.onCanMoveTo=function(e,t,n){return t.folder===undefined||t.folder===!0}),t.options.data&&typeof t.options.data=="string"&&(t.options.data=e.parseJSON(t.options.data)),t.tree=t.$el.tree(t.options)}});return i}),define("mockup-patterns-relateditems",["jquery","underscore","mockup-patterns-base","mockup-patterns-select2","mockup-utils","mockup-patterns-tree"],function(e,t,n,r,i,s){var o=n.extend({name:"relateditems",browsing:!1,currentPath:null,defaults:{vocabularyUrl:null,width:"300px",multiple:!0,tokenSeparators:[","," "],separator:",",orderable:!0,cache:!0,mode:"search",closeOnSelect:!1,basePath:"/",searchText:"Search:",searchAllText:"entire site",homeText:"home",folderTypes:["Folder"],selectableTypes:null,attributes:["UID","Title","Type","path"],dropdownCssClass:"pattern-relateditems-dropdown",maximumSelectionSize:-1,resultTemplate:'<div class="pattern-relateditems-result pattern-relateditems-type-<%= Type %> <% if (selected) { %>pattern-relateditems-active<% } %>">  <a href="#" class="pattern-relateditems-result-select <% if (selectable) { %>selectable<% } %>">    <span class="pattern-relateditems-result-title"><%= Title %></span>    <span class="pattern-relateditems-result-path"><%= path %></span>  </a>  <span class="pattern-relateditems-buttons">  <% if (folderish) { %>     <a class="pattern-relateditems-result-browse" href="#" data-path="<%= path %>"></a>   <% } %> </span></div>',resultTemplateSelector:null,selectionTemplate:'<span class="pattern-relateditems-item pattern-relateditems-type-<%= Type %>"> <span class="pattern-relateditems-item-title"><%= Title %></span> <span class="pattern-relateditems-item-path"><%= path %></span></span>',selectionTemplateSelector:null,breadCrumbsTemplate:'<span><span class="pattern-relateditems-tree"><a href="#" class="pattern-relateditems-tree-select"><span class="glyphicon glyphicon-indent-left"></span></a> <div class="tree-container"><span class="select-folder-label">Select folder</span><a href="#" class="btn close pattern-relateditems-tree-cancel">X</a><div class="pat-tree" /><a href="#" class="btn btn-default pattern-relateditems-tree-itemselect">Select</a></div></span><span class="pattern-relateditems-path-label"><%= searchText %></span><a class="crumb" href="/"><span class="glyphicon glyphicon-home"></span></a><%= items %></span></span>',breadCrumbsTemplateSelector:null,breadCrumbTemplate:'/<a href="<%= path %>" class="crumb"><%= text %></a>',breadCrumbTemplateSelector:null,escapeMarkup:function(e){return e},setupAjax:function(){var e=this;return e.query.valid?e.query.selectAjax():{}}},applyTemplate:function(n,r){var i=this,s;i.options[n+"TemplateSelector"]?(s=e(i.options[n+"TemplateSelector"]).html(),s||(s=i.options[n+"Template"])):s=i.options[n+"Template"];var o=e.extend(!0,{},i.options,r);return o._item=r,t.template(s,o)},activateBrowsing:function(){var e=this;e.browsing=!0,e.setBreadCrumbs()},deactivateBrowsing:function(){var e=this;e.browsing=!1,e.setBreadCrumbs()},browseTo:function(e){var t=this;t.trigger("before-browse"),t.currentPath=e,e==="/"&&t.options.mode==="search"?t.deactivateBrowsing():t.activateBrowsing(),t.$el.select2("close"),t.$el.select2("open"),t.trigger("after-browse")},setBreadCrumbs:function(){var n=this,r=n.currentPath?n.currentPath:n.options.basePath,i;if(r==="/"){var o="";n.options.mode==="search"&&(o="<em>"+n.options.searchAllText+"</em>"),i=n.applyTemplate("breadCrumbs",{items:o,searchText:n.options.searchText})}else{var u=r.split("/"),a="",f="";t.each(u,function(e){if(e!==""){var t={};a=a+"/"+e,t.text=e,t.path=a,f+=n.applyTemplate("breadCrumb",t)}}),i=n.applyTemplate("breadCrumbs",{items:f,searchText:n.options.searchText})}var l=e(i);e("a.crumb",l).on("click",function(t){return t.preventDefault(),n.browseTo(e(this).attr("href")),!1});var c=e(".pattern-relateditems-tree-select",l),h=c.parent(),p=e(".tree-container",h),d=e(".pat-tree",h),v=null,m=new s(d,{data:[],dataFilter:function(e){var n=[];return t.each(e.results,function(e){n.push({label:e.Title,id:e.UID,path:e.path})}),n}});m.$el.bind("tree.select",function(e){var t=e.node;t&&!t._loaded&&(n.currentPath=t.path,v=t,m.$el.tree("loadDataFromUrl",n.treeQuery.getUrl(),t),t._loaded=!0)}),m.$el.bind("tree.refresh",function(){v&&m.$el.tree("selectNode",v)}),e("a.pattern-relateditems-tree-cancel",p).click(function(e){return e.preventDefault(),p.fadeOut(),!1}),e("a.pattern-relateditems-tree-itemselect",p).click(function(e){return e.preventDefault(),n.browseTo(n.currentPath),p.fadeOut(),!1}),c.on("click",function(e){return e.preventDefault(),n.browsing=!0,n.currentPath="/",p.fadeIn(),m.$el.tree("loadDataFromUrl",n.treeQuery.getUrl()),!1}),n.$browsePath.html(l)},selectItem:function(e){var t=this;t.trigger("selecting");var n=t.$el.select2("data");n.push(e),t.$el.select2("data",n),e.selected=!0,t.trigger("selected")},deselectItem:function(e){var n=this;n.trigger("deselecting");var r=n.$el.select2("data");t.each(r,function(t,n){t.UID===e.UID&&r.splice(n,1)}),n.$el.select2("data",r),e.selected=!1,n.trigger("deselected")},isSelectable:function(e){var n=this;return n.options.selectableTypes===null?!0:t.indexOf(n.options.selectableTypes,e.Type)>-1},init:function(){var n=this;n.query=new i.QueryHelper(e.extend(!0,{},n.options,{pattern:n})),n.treeQuery=new i.QueryHelper(e.extend(!0,{},n.options,{pattern:n,baseCriteria:[{i:"Type",o:"plone.app.querystring.operation.list.contains",v:n.options.folderTypes}]})),n.options.ajax=n.options.setupAjax.apply(n),n.$el.wrap('<div class="pattern-relateditems-container" />'),n.$container=n.$el.parents(".pattern-relateditems-container"),n.$container.width(n.options.width),r.prototype.initializeValues.call(n),r.prototype.initializeTags.call(n),n.options.formatSelection=function(e,t){return n.applyTemplate("selection",e)},r.prototype.initializeOrdering.call(n),n.options.formatResult=function(r){!r.Type||t.indexOf(n.options.folderTypes,r.Type)===-1?r.folderish=!1:r.folderish=!0,r.selectable=n.isSelectable(r);if(r.selected===undefined){var i=n.$el.select2("data");r.selected=!1,t.each(i,function(e){e.UID===r.UID&&(r.selected=!0)})}var s=e(n.applyTemplate("result",r));return e(".pattern-relateditems-result-select",s).on("click",function(t){t.preventDefault();if(e(this).is(".selectable")){var i=e(this).parents(".pattern-relateditems-result");if(i.is(".pattern-relateditems-active"))i.removeClass("pattern-relateditems-active"),n.deselectItem(r);else{n.selectItem(r),i.addClass("pattern-relateditems-active");if(n.options.maximumSelectionSize>0){var s=n.$select2.select2("data");s.length>=n.options.maximumSelectionSize&&n.$select2.select2("close")}}}}),e(".pattern-relateditems-result-browse",s).on("click",function(t){t.preventDefault(),t.stopPropagation();var r=e(this).data("path");n.browseTo(r)}),e(s)},n.options.initSelection=function(t,r){var i=[],s=e(t).val();if(s!==""){var o=s.split(n.options.separator);n.query.search("UID","plone.app.querystring.operation.list.contains",o,function(e){var t=e.results.reduce(function(e,t){return e[t.UID]=t,e},{});r(o.map(function(e){return t[e]}).filter(function(e){return e!==undefined}))},!1)}},n.options.id=function(e){return e.UID},r.prototype.initializeSelect2.call(n);var s={browseText:n.options.browseText,searchText:n.options.searchText};n.$browsePath=e('<span class="pattern-relateditems-path" />'),n.$container.prepend(n.$browsePath),n.options.mode==="search"?(n.deactivateBrowsing(),n.browsing=!1):(n.activateBrowsing(),n.browsing=!0),n.$el.on("select2-selecting",function(e){e.preventDefault()})}});return o}),define("mockup-patterns-querystring",["jquery","mockup-patterns-base","mockup-patterns-select2","mockup-patterns-pickadate","select2"],function(e,t,n,r,i){var s=function(){this.init.apply(this,arguments)};s.prototype={defaults:{indexWidth:"20em",placeholder:"Select criteria",remove:"",results:" items matching your search.",days:"days",betweendt:"to",classBetweenDtName:"querystring-criteria-betweendt",classWrapperName:"querystring-criteria-wrapper",classIndexName:"querystring-criteria-index",classOperatorName:"querystring-criteria-operator",classValueName:"querystring-criteria-value",classRemoveName:"querystring-criteria-remove",classResultsName:"querystring-criteria-results",classClearName:"querystring-criteria-clear"},init:function(t,n,r,s,o,u){var a=this;a.options=e.extend(!0,{},a.defaults,n),a.indexes=r,a.indexGroups={},a.$wrapper=e("<div/>").addClass(a.options.classWrapperName).appendTo(t),a.$remove=e("<div>"+a.options.remove+"</div>").addClass(a.options.classRemoveName).appendTo(a.$wrapper).on("click",function(e){a.remove()}),a.$index=e("<select><option></option></select>").attr("placeholder",a.options.placeholder),e.each(a.indexes,function(t,n){n.enabled&&(a.indexGroups[n.group]||(a.indexGroups[n.group]=e("<optgroup/>").attr("label",n.group).appendTo(a.$index)),a.indexGroups[n.group].append(e("<option/>").attr("value",t).html(n.title)))}),a.$wrapper.append(e("<div/>").addClass(a.options.classIndexName).append(a.$index)),a.$index.patternSelect2({width:a.options.indexWidth,placeholder:a.options.placeholder}).on("change",function(e){a.removeValue(),a.createOperator(e.val),a.createClear(),a.trigger("index-changed")}),s!==i&&(a.$index.select2("val",s),a.createOperator(s,o,u),a.createClear()),a.trigger("create-criteria")},createOperator:function(t,n,r){var s=this;s.removeOperator(),s.$operator=e("<select/>"),s.indexes[t]&&e.each(s.indexes[t].operators,function(t,n){e("<option/>").attr("value",t).html(n.title).appendTo(s.$operator)}),s.$wrapper.append(e("<div/>").addClass(s.options.classOperatorName).append(s.$operator)),s.$operator.patternSelect2({width:"10em"}).on("change",function(e){s.createValue(t),s.createClear(),s.trigger("operator-changed")}),n===i&&(n=s.$operator.select2("val")),s.$operator.select2("val",n),s.createValue(t,r),s.trigger("create-operator")},createValue:function(t,n){var r=this,s=r.indexes[t].operators[r.$operator.val()].widget,o=e("<div/>").addClass(r.options.classValueName).appendTo(r.$wrapper);r.removeValue();if(s==="StringWidget")r.$value=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).val(n).appendTo(o).change(function(){r.trigger("value-changed")});else if(s==="DateWidget")r.$value=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).appendTo(o).patternPickadate({time:!1,date:{format:"dd/mm/yyyy"}}).change(function(){r.trigger("value-changed")});else if(s==="DateRangeWidget"){var u=e("<span/>").appendTo(o),a=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).addClass(r.options.classValueName+"-"+s+"-start").appendTo(u).patternPickadate({time:!1,date:{format:"dd/mm/yyyy"}});o.append(e("<span/>").html(r.options.betweendt).addClass(r.options.classBetweenDtName));var f=e("<span/>").appendTo(o),l=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).addClass(r.options.classValueName+"-"+s+"-end").appendTo(f).patternPickadate({time:!1,date:{format:"dd/mm/yyyy"}});o.find(".picker__input").change(function(){r.trigger("value-changed")}),r.$value=[a,l]}else s==="RelativeDateWidget"?r.$value=e('<input type="text"/>').after(e("<span/>").html(r.options.days)).addClass(r.options.classValueName+"-"+s).appendTo(o).change(function(){r.trigger("value-changed")}):s==="ReferenceWidget"?r.$value=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).appendTo(o).change(function(){r.trigger("value-changed")}):s==="RelativePathWidget"?r.$value=e('<input type="text"/>').addClass(r.options.classValueName+"-"+s).appendTo(o).val(n).change(function(){r.trigger("value-changed")}):s==="MultipleSelectionWidget"&&(r.$value=e("<select/>").attr("multiple",!0).addClass(r.options.classValueName+"-"+s).appendTo(o).change(function(){r.trigger("value-changed")}),r.indexes[t]&&e.each(r.indexes[t].values,function(t,n){e("<option/>").attr("value",t).html(n.title).appendTo(r.$value)}),r.$value.patternSelect2({width:"250px"}));n!==i&&typeof r.$value!="undefined"&&r.$value.select2("val",n),r.trigger("create-value")},createClear:function(){var t=this;t.removeClear(),t.$clear=e("<div/>").addClass(t.options.classClearName).appendTo(t.$wrapper)},remove:function(){var e=this;e.trigger("remove"),e.$remove.remove(),e.$index.parent().remove(),e.removeOperator(),e.removeValue(),e.removeClear(),e.$wrapper.remove()},removeClear:function(){var e=this;e.trigger("remove-clear"),e.$clear&&e.$clear.remove()},removeOperator:function(){var e=this;e.trigger("remove-operator"),e.$operator&&e.$operator.parent().remove()},removeValue:function(){var t=this;t.trigger("remove-value"),t.$value&&(e.isArray(t.$value)?t.$value[0].parents(".querystring-criteria-value").remove():t.$value.parents(".querystring-criteria-value").remove())},buildQueryPart:function(){var t=this,n=t.$index.select2("val");if(n==="")return"";var r="query.i:records="+n;if(typeof t.$operator=="undefined")return"";var i=t.$operator.val(),s="query.o:records="+i,o="query.v:records=",u="query.v:records:list=",a=[];return typeof t.$value=="undefined"?a.push(o):e.isArray(t.$value)?e.each(t.$value,function(t,n){a.push(u+e(this).parent().find(".picker__input").val())}):a.push(o+t.$value.val()),r+"&"+s+"&"+a.join("&")},getJSONListStr:function(){var t=this,n=t.$index.select2("val");if(n==="")return"";if(typeof t.$operator=="undefined")return"";var r=t.$operator.val(),i=[];e.isArray(t.$value)?e.each(t.$value,function(t,n){i.push(e(this).parent().find(".picker__input").val())}):typeof t.$value!="undefined"&&i.push(t.$value.val());var s;return i.length>1?s="[j"+i.join('","')+'"]':i.length===1?s=JSON.stringify(i[0]):s='""','{"i":"'+n+'", "o":"'+r+'", "v":'+s+"}"},trigger:function(e){this.$wrapper.trigger(e+"-criteria.querystring.patterns",[this])},on:function(e,t){this.$wrapper.on(e+"-criteria.querystring.patterns",t)}};var o=t.extend({name:"querystring",defaults:{indexes:[],classWrapperName:"querystring-wrapper",criteria:{},indexOptionsUrl:null,previewURL:"portal_factory/@@querybuilder_html_results",previewCountURL:"portal_factory/@@querybuildernumberofresults",sorttxt:"Sort On",reversetxt:"Reversed Order",previewTitle:"Preview",previewDescription:"Preview of at most 10 items",classSortLabelName:"querystring-sort-label",classSortReverseName:"querystring-sortreverse",classSortReverseLabelName:"querystring-sortreverse-label",classPreviewCountWrapperName:"querystring-previewcount-wrapper",classPreviewResultsWrapperName:"querystring-previewresults-wrapper",classPreviewWrapperName:"querystring-preview-wrapper",classPreviewName:"querystring-preview",classPreviewTitleName:"querystring-preview-title",classPreviewDescriptionName:"querystring-preview-description",classSortWrapperName:"querystring-sort-wrapper",showPreviews:!0},init:function(){var t=this;t.$el.hide(),t.$wrapper=e("<div/>"),t.$el.after(t.$wrapper),t.initialized=!1,t.options.indexOptionsUrl?e.ajax({url:t.options.indexOptionsUrl,success:function(e){t.options.indexes=e.indexes,t.options.sortable_indexes=e.sortable_indexes,t._init()},error:function(e){}}):t._init()},_init:function(){var t=this;t.$criteriaWrapper=e("<div/>").addClass(t.options.classWrapperName).appendTo(t.$wrapper),t.$sortWrapper=e("<div/>").addClass(t.options.classSortWrapperName).appendTo(t.$wrapper),t.options.showPreviews==="false"&&(t.options.showPreviews=!1),t.options.showPreviews&&(t.$previewWrapper=e("<div/>").addClass(t.options.classPreviewWrapperName).appendTo(t.$wrapper),e("<div/>").addClass(t.options.classPreviewTitleName).html(t.options.previewTitle).appendTo(t.$previewWrapper),e("<div/>").addClass(t.options.classPreviewDescriptionName).html(t.options.previewDescription).appendTo(t.$previewWrapper)),t.criterias=[],t.$el.val()&&e.each(JSON.parse(t.$el.val()),function(e,n){t.createCriteria(n.i,n.o,n.v)}),t.createCriteria(),t.createSort(),t.options.showPreviews&&t.refreshPreviewEvent(),t.$el.trigger("initialized"),t.initialized=!0},createCriteria:function(e,t,n){var r=this,i=new s(r.$criteriaWrapper,r.options.criteria,r.options.indexes,e,t,n);i.on("remove",function(e){r.criterias[r.criterias.length-1]===i&&r.createCriteria()}),i.on("index-changed",function(e){r.criterias[r.criterias.length-1]===i&&r.createCriteria()});var o=function(){r.refreshPreviewEvent(),r.updateValue()};i.on("remove",function(e,t){r.criterias.indexOf(t)!==-1&&r.criterias.splice(r.criterias.indexOf(t),1),o(e,t)}),i.on("remove-clear",o),i.on("remove-operator",o),i.on("remove-value",o),i.on("index-changed",o),i.on("operator-changed",o),i.on("create-criteria",o),i.on("create-operator",o),i.on("create-value",o),i.on("value-changed",o),r.criterias.push(i)},createSort:function(){var t=this,n=e('[id$="-sort_on"]').filter('[id^="formfield-"]'),r=e('[id$="-sort_reversed"]').filter('[id^="formfield-"]');e("<span/>").addClass(t.options.classSortLabelName).html(t.options.sorttxt).appendTo(t.$sortWrapper),t.$sortOn=e("<select/>").attr("name","sort_on").appendTo(t.$sortWrapper).change(function(){t.refreshPreviewEvent.call(t),e('[id$="sort_on"]',n).val(e(this).val())}),t.$sortOn.append(e('<option value="">No sorting</option>'));for(var i in t.options.sortable_indexes)t.$sortOn.append(e("<option/>").attr("value",i).html(t.options.indexes[i].title));t.$sortOn.patternSelect2({width:150}),t.$sortOrder=e('<input type="checkbox" />').attr("name","sort_reversed:boolean").change(function(){t.refreshPreviewEvent.call(t),e(this).attr("checked")==="checked"?e('.option input[type="checkbox"]',r).attr("checked","checked"):e('.option input[type="checkbox"]',r).removeAttr("checked")}),e("<span/>").addClass(t.options.classSortReverseName).appendTo(t.$sortWrapper).append(t.$sortOrder).append(e("<span/>").html(t.options.reversetxt).addClass(t.options.classSortReverseLabelName));if(n.length>=1&&r.length>=1){var s=e('.option input[type="checkbox"]',r).attr("checked")==="checked",o=e('[id$="-sort_on"]',n).val();s&&t.$sortOrder.attr("checked","checked"),t.$sortOn.select2("val",o),e(n).hide(),e(r).hide()}},refreshPreviewEvent:function(){var t=this;if(!t.options.showPreviews)return;typeof t._previewXhr!="undefined"&&t._previewXhr.abort(),typeof t.$previewPane!="undefined"&&t.$previewPane.remove();var n=[],r;e.each(t.criterias,function(e,t){r=t.buildQueryPart(),r!==""&&n.push(t.buildQueryPart())}),t.$previewPane=e("<div/>").addClass(t.options.classPreviewName).appendTo(t.$previewWrapper);if(n.length<=0){e("<div/>").addClass(t.options.classPreviewCountWrapperName).html("No results to preview").prependTo(t.$previewPane);return}n.push("sort_on="+t.$sortOn.val());var i=t.$sortOrder.attr("checked");i==="checked"&&n.push("sort_order=reverse"),t._previewXhr=e.get(t.options.previewURL+"?"+n.join("&")).done(function(n,r){e("<div/>").addClass(t.options.classPreviewResultsWrapperName).html(n).appendTo(t.$previewPane)})},updateValue:function(){var t=this,n=[];e.each(t.criterias,function(e,t){var r=t.getJSONListStr();r!==""&&n.push(r)});var r=t.$el.val(),i="["+n.join(",")+"]";t.$el.val(i),t.$el.trigger("change")}});return o}),define("mockup-patterns-backdrop",["jquery","mockup-patterns-base"],function(e,t){var n=t.extend({name:"backdrop",defaults:{zIndex:null,opacity:.8,className:"backdrop",classActiveName:"backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var t=this;t.$backdrop=e("> ."+t.options.className,t.$el),t.$backdrop.size()===0&&(t.$backdrop=e("<div/>").hide().appendTo(t.$el).addClass(t.options.className),t.options.zIndex!==null&&t.$backdrop.css("z-index",t.options.zIndex)),t.options.closeOnEsc===!0&&e(document).on("keydown",function(e,n){t.$el.is("."+t.options.classActiveName)&&e.keyCode===27&&t.hide()}),t.options.closeOnClick===!0&&t.$backdrop.on("click",function(){t.$el.is("."+t.options.classActiveName)&&t.hide()})},show:function(){var e=this;e.$el.hasClass(e.options.classActiveName)||(e.trigger("show"),e.$backdrop.css("opacity","0").show(),e.$el.addClass(e.options.classActiveName),e.$backdrop.animate({opacity:e.options.opacity},500),e.trigger("shown"))},hide:function(){var e=this;e.$el.hasClass(e.options.classActiveName)&&(e.trigger("hide"),e.$backdrop.animate({opacity:"0"},500).hide(),e.$el.removeClass(e.options.classActiveName),e.trigger("hidden"))}});return n}),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),define("mockup-router",["jquery","underscore","backbone"],function(e,t,n){var r=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},i=n.Router.extend({actions:[],redirects:{},addRoute:function(e,n,i,s,o,u){t.findWhere(this.patterns,{patternName:e,id:n})===undefined&&this.actions.push({patternName:e,id:n,callback:i,context:s,pathExp:o,expReplace:u});var a=new RegExp("("+r(e)+":"+r(n)+")");this.route(a,"handleRoute")},addRedirect:function(e,t){this.redirects[e]=t},handleRoute:function(e){var n=e.split(":"),r=n[0],i=n[1],s=t.findWhere(this.actions,{patternName:r,id:i});s&&s.callback.call(s.context)},redirect:function(){var e=window.parent.location.pathname,n,r,i;t.some(this.actions,function(t){if(t.pathExp){r=new RegExp(t.pathExp);if(e.match(r)){i="!/"+t.patternName+":"+t.id;var s="";return t.expReplace&&(s=t.expReplace),n=e.replace(r,s),!0}}},this);if(i===undefined)for(var s in this.redirects){r=new RegExp(s);if(e.match(r)){i="!/"+this.redirects[s],n=e.replace(r,"");break}}i!==undefined&&this._changeLocation.apply(this,[n,i])},_changeLocation:function(e,t){window.parent.location.hash=t,window.parent.location.pathname=e},start:function(){n.history.start()},reset:function(){this.actions=[]}});return new i}),function(e){typeof define=="function"&&define.amd?define("jquery.form",["jquery"],e):e(typeof jQuery!="undefined"?jQuery:window.Zepto)}(function(e){function r(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(n))}function i(t){var n=t.target,r=e(n);if(!r.is("[type=submit],[type=image]")){var i=r.closest("[type=submit]");if(i.length===0)return;n=i[0]}var s=this;s.clk=n;if(n.type=="image")if(t.offsetX!==undefined)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left,s.clk_y=t.pageY-o.top}else s.clk_x=t.pageX-n.offsetLeft,s.clk_y=t.pageY-n.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function s(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined,t.formdata=window.FormData!==undefined;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||typeof e=="string"?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(r){function k(t){var n=e.param(t,r.traditional).split("&"),i=n.length,s=[],o,u;for(o=0;o<i;o++)n[o]=n[o].replace(/\+/g," "),u=n[o].split("="),s.push([decodeURIComponent(u[0]),decodeURIComponent(u[1])]);return s}function L(t){var n=new FormData;for(var s=0;s<t.length;s++)n.append(t[s].name,t[s].value);if(r.extraData){var o=k(r.extraData);for(s=0;s<o.length;s++)o[s]&&n.append(o[s][0],o[s][1])}r.data=null;var u=e.extend(!0,{},e.ajaxSettings,r,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});r.uploadProgress&&(u.xhr=function(){var t=e.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(e){var t=0,n=e.loaded||e.position,i=e.total;e.lengthComputable&&(t=Math.ceil(n/i*100)),r.uploadProgress(e,n,i,t)},!1),t}),u.data=null;var a=u.beforeSend;return u.beforeSend=function(e,t){r.formData?t.data=r.formData:t.data=n,a&&a.call(this,e,t)},e.ajax(u)}function A(t){function T(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(n){s("cannot get iframe.contentWindow document: "+n)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(n){s("cannot get iframe.contentDocument: "+n),t=e.document}return t}function k(){function r(){try{var e=T(v).readyState;s("state = "+e),e&&e.toLowerCase()=="uninitialized"&&setTimeout(r,50)}catch(t){s("Server abort: ",t," (",t.name,")"),_(x),w&&clearTimeout(w),w=undefined}}var t=a.attr2("target"),n=a.attr2("action");o.setAttribute("target",p),(!i||/post/i.test(i))&&o.setAttribute("method","POST"),n!=l.url&&o.setAttribute("action",l.url),!l.skipEncodingOverride&&(!i||/post/i.test(i))&&a.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(w=setTimeout(function(){b=!0,_(S)},l.timeout));var u=[];try{if(l.extraData)for(var f in l.extraData)l.extraData.hasOwnProperty(f)&&(e.isPlainObject(l.extraData[f])&&l.extraData[f].hasOwnProperty("name")&&l.extraData[f].hasOwnProperty("value")?u.push(e('<input type="hidden" name="'+l.extraData[f].name+'">').val(l.extraData[f].value).appendTo(o)[0]):u.push(e('<input type="hidden" name="'+f+'">').val(l.extraData[f]).appendTo(o)[0]));l.iframeTarget||d.appendTo("body"),v.attachEvent?v.attachEvent("onload",_):v.addEventListener("load",_,!1),setTimeout(r,15);try{o.submit()}catch(c){var h=document.createElement("form").submit;h.apply(o)}}finally{o.setAttribute("action",n),t?o.setAttribute("target",t):a.removeAttr("target"),e(u).remove()}}function _(t){if(m.aborted||M)return;A=T(v),A||(s("cannot access response document"),t=x);if(t===S&&m){m.abort("timeout"),E.reject(m,"timeout");return}if(t==x&&m){m.abort("server abort"),E.reject(m,"error","server abort");return}if(!A||A.location.href==l.iframeSrc)if(!b)return;v.detachEvent?v.detachEvent("onload",_):v.removeEventListener("load",_,!1);var n="success",r;try{if(b)throw"timeout";var i=l.dataType=="xml"||A.XMLDocument||e.isXMLDoc(A);s("isXml="+i);if(!i&&window.opera&&(A.body===null||!A.body.innerHTML)&&--O){s("requeing onLoad callback, DOM not available"),setTimeout(_,250);return}var o=A.body?A.body:A.documentElement;m.responseText=o?o.innerHTML:null,m.responseXML=A.XMLDocument?A.XMLDocument:A,i&&(l.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":l.dataType};return t[e.toLowerCase()]},o&&(m.status=Number(o.getAttribute("status"))||m.status,m.statusText=o.getAttribute("statusText")||m.statusText);var u=(l.dataType||"").toLowerCase(),a=/(json|script|text)/.test(u);if(a||l.textarea){var f=A.getElementsByTagName("textarea")[0];if(f)m.responseText=f.value,m.status=Number(f.getAttribute("status"))||m.status,m.statusText=f.getAttribute("statusText")||m.statusText;else if(a){var c=A.getElementsByTagName("pre")[0],p=A.getElementsByTagName("body")[0];c?m.responseText=c.textContent?c.textContent:c.innerText:p&&(m.responseText=p.textContent?p.textContent:p.innerText)}}else u=="xml"&&!m.responseXML&&m.responseText&&(m.responseXML=D(m.responseText));try{L=H(m,u,l)}catch(g){n="parsererror",m.error=r=g||n}}catch(g){s("error caught: ",g),n="error",m.error=r=g||n}m.aborted&&(s("upload aborted"),n=null),m.status&&(n=m.status>=200&&m.status<300||m.status===304?"success":"error"),n==="success"?(l.success&&l.success.call(l.context,L,"success",m),E.resolve(m.responseText,"success",m),h&&e.event.trigger("ajaxSuccess",[m,l])):n&&(r===undefined&&(r=m.statusText),l.error&&l.error.call(l.context,m,n,r),E.reject(m,"error",r),h&&e.event.trigger("ajaxError",[m,l,r])),h&&e.event.trigger("ajaxComplete",[m,l]),h&&!--e.active&&e.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,m,n),M=!0,l.timeout&&clearTimeout(w),setTimeout(function(){l.iframeTarget?d.attr("src",l.iframeSrc):d.remove(),m.responseXML=null},100)}var o=a[0],u,f,l,h,p,d,v,m,g,y,b,w,E=e.Deferred();E.abort=function(e){m.abort(e)};if(t)for(f=0;f<c.length;f++)u=e(c[f]),n?u.prop("disabled",!1):u.removeAttr("disabled");l=e.extend(!0,{},e.ajaxSettings,r),l.context=l.context||l,p="jqFormIO"+(new Date).getTime(),l.iframeTarget?(d=e(l.iframeTarget),y=d.attr2("name"),y?p=y:d.attr2("name",p)):(d=e('<iframe name="'+p+'" src="'+l.iframeSrc+'" />'),d.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=d[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";s("aborting upload... "+n),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(r){}d.attr("src",l.iframeSrc),m.error=n,l.error&&l.error.call(l.context,m,n,t),h&&e.event.trigger("ajaxError",[m,l,n]),l.complete&&l.complete.call(l.context,m,n)}},h=l.global,h&&0===e.active++&&e.event.trigger("ajaxStart"),h&&e.event.trigger("ajaxSend",[m,l]);if(l.beforeSend&&l.beforeSend.call(l.context,m,l)===!1)return l.global&&e.active--,E.reject(),E;if(m.aborted)return E.reject(),E;g=o.clk,g&&(y=g.name,y&&!g.disabled&&(l.extraData=l.extraData||{},l.extraData[y]=g.value,g.type=="image"&&(l.extraData[y+".x"]=o.clk_x,l.extraData[y+".y"]=o.clk_y)));var S=1,x=2,N=e("meta[name=csrf-token]").attr("content"),C=e("meta[name=csrf-param]").attr("content");C&&N&&(l.extraData=l.extraData||{},l.extraData[C]=N),l.forceSync?k():setTimeout(k,10);var L,A,O=50,M,D=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null},P=e.parseJSON||function(e){return window.eval("("+e+")")},H=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;return s&&o.documentElement.nodeName==="parsererror"&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,n)),typeof o=="string"&&(n==="json"||!n&&i.indexOf("json")>=0?o=P(o):(n==="script"||!n&&i.indexOf("javascript")>=0)&&e.globalEval(o)),o};return E}if(!this.length)return s("ajaxSubmit: skipping submit process - no element selected"),this;var i,o,u,a=this;typeof r=="function"?r={success:r}:r===undefined&&(r={}),i=r.type||this.attr2("method"),o=r.url||this.attr2("action"),u=typeof o=="string"?e.trim(o):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),r=e.extend(!0,{url:u,success:e.ajaxSettings.success,type:i||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},r);var f={};this.trigger("form-pre-serialize",[this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(r.beforeSerialize&&r.beforeSerialize(this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var l=r.traditional;l===undefined&&(l=e.ajaxSettings.traditional);var c=[],h,p=this.formToArray(r.semantic,c);r.data&&(r.extraData=r.data,h=e.param(r.data,l));if(r.beforeSubmit&&r.beforeSubmit(p,this,r)===!1)return s("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[p,this,r,f]);if(f.veto)return s("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var d=e.param(p,l);h&&(d=d?d+"&"+h:h),r.type.toUpperCase()=="GET"?(r.url+=(r.url.indexOf("?")>=0?"&":"?")+d,r.data=null):r.data=d;var v=[];r.resetForm&&v.push(function(){a.resetForm()}),r.clearForm&&v.push(function(){a.clearForm(r.includeHidden)});if(!r.dataType&&r.target){var m=r.success||function(){};v.push(function(t){var n=r.replaceTarget?"replaceWith":"html";e(r.target)[n](t).each(m,arguments)})}else r.success&&v.push(r.success);r.success=function(e,t,n){var i=r.context||this;for(var s=0,o=v.length;s<o;s++)v[s].apply(i,[e,t,n||a,a])};if(r.error){var g=r.error;r.error=function(e,t,n){var i=r.context||this;g.apply(i,[e,t,n,a])}}if(r.complete){var y=r.complete;r.complete=function(e,t){var n=r.context||this;y.apply(n,[e,t,a])}}var b=e("input[type=file]:enabled",this).filter(function(){return e(this).val()!==""}),w=b.length>0,E="multipart/form-data",S=a.attr("enctype")==E||a.attr("encoding")==E,x=t.fileapi&&t.formdata;s("fileAPI :"+x);var T=(w||S)&&!x,N;r.iframe!==!1&&(r.iframe||T)?r.closeKeepAlive?e.get(r.closeKeepAlive,function(){N=A(p)}):N=A(p):(w||S)&&x?N=L(p):N=e.ajax(r),a.removeData("jqxhr").data("jqxhr",N);for(var C=0;C<c.length;C++)c[C]=null;return this.trigger("form-submit-notify",[this,r]),this},e.fn.ajaxForm=function(t){t=t||{},t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(s("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(t)}),this):(s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return t.delegation?(e(document).off("submit.form-plugin",this.selector,r).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,t,r).on("click.form-plugin",this.selector,t,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",t,r).bind("click.form-plugin",t,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(n,r){var i=[];if(this.length===0)return i;var s=this[0],o=n?s.getElementsByTagName("*"):s.elements;if(!o)return i;var u,a,f,l,c,h,p;for(u=0,h=o.length;u<h;u++){c=o[u],f=c.name;if(!f||c.disabled)continue;if(n&&s.clk&&c.type=="image"){s.clk==c&&(i.push({name:f,value:e(c).val(),type:c.type}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}));continue}l=e.fieldValue(c,!0);if(l&&l.constructor==Array){r&&r.push(c);for(a=0,p=l.length;a<p;a++)i.push({name:f,value:l[a]})}else if(t.fileapi&&c.type=="file"){r&&r.push(c);var d=c.files;if(d.length)for(a=0;a<d.length;a++)i.push({name:f,value:d[a],type:c.type});else i.push({name:f,value:"",type:c.type})}else l!==null&&typeof l!="undefined"&&(r&&r.push(c),i.push({name:f,value:l,type:c.type,required:c.required}))}if(!n&&s.clk){var v=e(s.clk),m=v[0];f=m.name,f&&!m.disabled&&m.type=="image"&&(i.push({name:f,value:v.val()}),i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var r=this.name;if(!r)return;var i=e.fieldValue(this,t);if(i&&i.constructor==Array)for(var s=0,o=i.length;s<o;s++)n.push({name:r,value:i[s]});else i!==null&&typeof i!="undefined"&&n.push({name:this.name,value:i})}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r],o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length)continue;o.constructor==Array?e.merge(n,o):n.push(o)}return n},e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();n===undefined&&(n=!0);if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1))return null;if(s=="select"){var o=t.selectedIndex;if(o<0)return null;var u=[],a=t.options,f=i=="select-one",l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;p||(p=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value);if(f)return p;u.push(p)}}return u}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();n.test(r)||i=="textarea"?this.value="":r=="checkbox"||r=="radio"?this.checked=!1:i=="select"?this.selectedIndex=-1:r=="file"?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(t===!0&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return t===undefined&&(t=!0),this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio")this.checked=t;else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");t&&r[0]&&r[0].type=="select-one"&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),define("mockup-patterns-modal",["jquery","underscore","mockup-patterns-base","mockup-patterns-backdrop","mockup-registry","mockup-router","mockup-utils","jquery.form"],function(e,t,n,r,i,s,o){var u=n.extend({name:"modal",createModal:null,$model:null,defaults:{width:"",height:"",margin:20,position:"center middle",triggers:[],backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.8",className:"backdrop",classActiveName:"backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"]',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:".portalMessage",templateOptions:{className:"modal fade",classDialog:"modal-dialog",classModal:"modal-content",classHeaderName:"modal-header",classBodyName:"modal-body",classFooterName:"modal-footer",classWrapperName:"modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"in",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %>">    <div class="<%= options.classModal %>">      <div class="<%= options.classHeaderName %>">        <a class="close">&times;</a>        <% if (title) { %><h3><%= title %></h3><% } %>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <%= buttons %>         <a class="close hiddenStructure">&times;</a>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:5e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error",formFieldError:".field.error",onSuccess:null,onError:null,onFormError:null,onTimeout:null,redirectOnResponse:!1,redirectToUrl:function(t,n,r){var i=e(/<base.*?(\/>|<\/base>)/im.exec(n)[0]);return i.attr("href")}},routerOptions:{id:null,pathExp:null},form:function(n){var r=this,i=r.$modal;r.options.automaticallyAddButtonActions&&(n[r.options.buttons]={}),r.options.loadLinksWithinModal&&(n.a={}),e.each(n,function(n,s){var o=t.union(t.keys(r.options.actionOptions),["templateOptions"]),u=e.extend(!0,{},r.options.actionOptions,t.pick(s,o));s.templateOptions=e.extend(!0,s.templateOptions,r.options.templateOptions);var a=t.union(t.keys(r.options.actionOptions),["actions","actionOptions"]),f=e.extend(!0,t.omit(s,a),r.options);e(n,e("."+s.templateOptions.classBodyName,i)).each(function(t){var n=e(this);n.on(u.eventType,function(t){t.stopPropagation(),t.preventDefault(),r.loading.show(!1),u.modalFunction!==null?r[u.modalFunction]():e.nodeName(n[0],"input")||e.nodeName(n[0],"button")||s.isForm===!0?r.options.handleFormAction.apply(r,[n,u,f]):(s.ajaxUrl!==null||e.nodeName(n[0],"a"))&&r.options.handleLinkAction.apply(r,[n,u,f])})})})},handleFormAction:function(t,n,r){var i=this,s={};s[t.attr("name")]=t.attr("value");var o;e.nodeName(t[0],"form")?o=t:o=t.parents("form:not(.disableAutoSubmit)");var u;n.ajaxUrl!==null?typeof n.ajaxUrl=="function"?u=n.ajaxUrl.apply(i,[t,n]):u=n.ajaxUrl:u=t.parents("form").attr("action"),o.on("submit",function(e){e.preventDefault()}),o.trigger("submit"),i.loading.show(!1),o.ajaxSubmit({timeout:n.timeout,data:s,url:u,error:function(e,t,r){i.loading.hide(),t==="timeout"&&n.onTimeout?n.onTimeout.apply(i,e,r):n.onError?n.onError(e,t,r):console.log("error happened do something"),i.trigger("formActionError",[e,t,r])},success:function(s,o,u,a){i.loading.hide();if(e(n.error,s).size()!==0||e(n.formFieldError,s).size()!==0){n.onFormError?n.onFormError(i,s,o,u,a):i.redraw(s,r);return}if(n.redirectOnResponse===!0){typeof n.redirectToUrl=="function"?window.parent.location.href=n.redirectToUrl.apply(i,[t,s,n]):window.parent.location.href=n.redirectToUrl;return}n.onSuccess&&n.onSuccess(i,s,o,u,a),n.displayInModal===!0?i.redraw(s,r):(t.trigger("destroy.modal.patterns"),n.reloadWindowOnClose&&i.reloadWindow()),i.trigger("formActionSuccess",[s,o,u,a])}})},handleLinkAction:function(t,n,r){var i=this,s;n.ajaxUrl?typeof n.ajaxUrl=="function"?s=n.ajaxUrl.apply(i,[t,n]):s=n.ajaxUrl:s=t.attr("href");if(n.displayInModal===!1){window.parent.location.href=s;return}e.ajax({url:s,error:function(e,t,r){t==="timeout"&&n.onTimeout?n.onTimeout(i.$modal,e,r):n.onError?n.onError(e,t,r):console.log("error happened do something"),i.loading.hide(),i.trigger("linkActionError",[e,t,r])},success:function(e,t,s){i.redraw(e,r),n.onSuccess&&n.onSuccess(i,e,t,s),i.loading.hide(),i.trigger("linkActionSuccess",[e,t,s])}})},render:function(n){var r=this;r.trigger("before-render");if(!r.$raw)return;var i=r.$raw.clone();e("input:checked",i).each(function(){this.setAttribute&&this.setAttribute("checked","checked")});var s={title:"",prepend:"<div />",content:"",buttons:'<div class="pattern-modal-buttons"></div>',options:n.templateOptions};if(n.title===null){var o=e(n.titleSelector,i);s.title=o.html(),e(n.titleSelector,i).remove()}else s.title=n.title;n.prependContent&&(s.prepend=e("<div />").append(e(n.prependContent,i).clone()).html(),e(n.prependContent,i).remove()),n.content?s.content=e(n.content,i).html():s.content=i.html(),r.$modal=e(t.template(r.options.templateOptions.template,s)),r.$modalDialog=e("> ."+r.options.templateOptions.classDialog,r.$modal),e("form",r.$modal).on("keydown",function(t){if(t.keyCode!==13||t.target.nodeName==="TEXTAREA")return;t.preventDefault(),e("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click")}),e(n.buttons,r.$modal).each(function(){var t=e(this);t.on("click",function(e){e.stopPropagation(),e.preventDefault()}).clone().appendTo(e(".pattern-modal-buttons",r.$modal)).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),t.trigger("click")}),t.hide()}),r.trigger("before-events-setup"),e(".modal-header > a.close, .modal-footer > a.close",r.$modal).off("click").on("click",function(t){t.stopPropagation(),t.preventDefault(),e(t.target).trigger("destroy.modal.patterns")}),e(".row",r.$modal).removeClass("row"),n.form&&n.form.apply(r,[n.actions]),r.$modal.addClass(r.options.templateOptions.className).on("click",function(t){t.stopPropagation(),e.nodeName(t.target,"a")&&t.preventDefault(),r.$modal.trigger("modal-click")}).on("destroy.modal.patterns",function(e){e.stopPropagation(),r.hide()}).on("resize.modal.patterns",function(e){e.stopPropagation(),e.preventDefault(),r.positionModal()}).appendTo(r.$wrapperInner),r.$modal.data("pattern-"+r.name,r),r.trigger("after-render")}},reloadWindow:function(){window.parent.location.reload()},init:function(){var t=this;t.backdrop=new r(t.$el.parents(t.options.backdrop),t.options.backdropOptions),t.$wrapper=e("> ."+t.options.templateOptions.classWrapperName,t.backdrop.$el);if(t.$wrapper.size()===0){var n=t.options.backdropOptions.zIndex!==null?parseInt(t.options.backdropOptions.zIndex,10)+1:1041;t.$wrapper=e("<div/>").hide().css({"z-index":n,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(t.options.templateOptions.classWrapperName).insertBefore(t.backdrop.$backdrop).on("click",function(e){e.stopPropagation(),e.preventDefault(),t.options.backdropOptions.closeOnClick&&t.backdrop.hide()})}t.options.routerOptions.id!==null&&s.addRoute("modal",t.options.routerOptions.id,function(){this.show()},t,t.options.routerOptions.pathExp,t.options.routerOptions.expReplace),t.backdrop.on("hidden",function(e){t.$modal!==undefined&&t.$modal.hasClass(t.options.templateOptions.classActiveName)&&t.hide()}),t.options.backdropOptions.closeOnEsc===!0&&e(document).on("keydown",function(e,n){t.$el.is("."+t.options.templateOptions.classActiveName)&&e.keyCode===27&&t.hide()}),t.$wrapperInner=e("> ."+t.options.templateOptions.classWrapperInnerName,t.$wrapper),t.$wrapperInner.size()===0&&(t.$wrapperInner=e("<div/>").addClass(t.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(t.$wrapper)),t.loading=new o.ProgressIndicator({container:t.$wrapperInner,backdrop:t.backdrop,wrapper:t.$wrapper,zIndex:function(){if(!t.modalInitialized())return 10005;var e=t.$modal.css("zIndex");if(e)return parseInt(e,10)+1}}),e(window.parent).resize(function(){t.positionModal()}),t.options.triggers&&e.each(t.options.triggers,function(n,r){var i=r.substring(0,r.indexOf(" ")),s=r.substring(r.indexOf(" "),r.length);e(s||t.$el).on(i,function(e){e.stopPropagation(),e.preventDefault(),t.show()})}),t.$el.is("a")&&(t.$el.attr("href")&&(!t.options.target&&t.$el.attr("href").substr(0,1)==="#"&&(t.options.target=t.$el.attr("href"),t.options.content=""),!t.options.ajaxUrl&&t.$el.attr("href").substr(0,1)!=="#"&&(t.options.ajaxUrl=t.$el.attr("href"))),t.$el.on("click",function(e){e.stopPropagation(),e.preventDefault(),t.show()})),t.initModal()},createAjaxModal:function(){var t=this;t.trigger("before-ajax"),t.loading.show(),t.ajaxXHR=e.ajax({url:t.options.ajaxUrl,type:t.options.ajaxType}).done(function(n,r,i){t.ajaxXHR=undefined,t.loading.hide(),t.$raw=e("<div />").append(e(o.parseBodyTag(n))),t.trigger("after-ajax",t,r,i),t._show()})},createTargetModal:function(){var t=this;t.$raw=e(t.options.target).clone(),t._show()},createBasicModal:function(){var t=this;t.$raw=e("<div/>").html(t.$el.clone()),t._show()},createHtmlModal:function(){var t=this,n=e(t.options.html);t.$raw=n,t._show()},initModal:function(){var e=this;e.options.ajaxUrl?e.createModal=e.createAjaxModal:e.options.target?e.createModal=e.createTargetModal:e.options.html?e.createModal=e.createHtmlModal:e.createModal=e.createBasicModal},findPosition:function(e,t,n,r,i,s,o){var u={},a,f,l,c;return c=l=a=l="auto",e==="left"?(l=n+"px",r>s&&(l="0px"),u.left=l):e==="right"?(c=n+"px",r>s&&(c="0px"),u.right=c,u.left="auto"):(l=s/2-r/2-n+"px",r>s&&(l="0px"),u.left=l),t==="top"?(a=n+"px",i>o&&(a="0px"),u.top=a):t==="bottom"?(f=n+"px",i>o&&(f="0px"),u.bottom=f,u.top="auto"):(a=o/2-i/2-n+"px",i>o&&(a="0px"),u.top=a),u},modalInitialized:function(){var e=this;return e.$modal!==null&&e.$modal!==undefined},positionModal:function(){var t=this;if(!t.modalInitialized())return;t.$modal.removeAttr("style"),t.$wrapper.parent().is("body")&&t.$wrapper.height(e(window.parent).height());var n=typeof t.options.margin=="function"?t.options.margin():t.options.margin;t.$modal.css({position:"absolute",padding:n}),t.$modalDialog.css({margin:"0",padding:"0",width:t.options.width,height:t.options.height});var r=t.options.position.split(" "),i=r[0],s=r[1],o=t.$modalDialog.outerWidth(!0),u=t.$modalDialog.outerHeight(!0),a=t.$wrapperInner.width(),f=t.$wrapperInner.height(),l=t.findPosition(i,s,n,o,u,a,f);for(var c in l)t.$modalDialog.css(c,l[c])},render:function(e){var t=this;t.trigger("render"),t.options.render.apply(t,[e]),t.trigger("rendered")},show:function(){var e=this;e.createModal()},_show:function(){var t=this;t.render.apply(t,[t.options]),t.trigger("show"),t.backdrop.show(),t.$wrapper.show(),t.loading.hide(),t.$wrapper.parent().css("overflow","hidden"),t.$el.addClass(t.options.templateOptions.classActiveName),t.$modal.addClass(t.options.templateOptions.classActiveName),i.scan(t.$modal),t.positionModal(),e("img",t.$modal).load(function(){t.positionModal()}),e(window.parent).on("resize.modal.patterns",function(){t.positionModal()}),t.trigger("shown")},hide:function(){var t=this;t.ajaxXHR&&t.ajaxXHR.abort(),t.trigger("hide");if(t._suppressHide&&!confirm(t._suppressHide))return;e(".modal",t.$wrapper).size()<2&&(t.backdrop.hide(),t.$wrapper.hide(),t.$wrapper.parent().css("overflow","visible")),t.loading.hide(),t.$el.removeClass(t.options.templateOptions.classActiveName),t.$modal!==undefined&&(t.$modal.remove(),t.initModal()),e(window.parent).off("resize.modal.patterns"),t.trigger("hidden")},redraw:function(t,n){var r=this;r.trigger("beforeDraw"),r.$modal.remove(),r.$raw=e("<div />").append(e(o.parseBodyTag(t))),r.render.apply(r,[n||r.options]),r.$modal.addClass(r.options.templateOptions.classActiveName),r.positionModal(),i.scan(r.$modal),r.trigger("afterDraw")}});return u}),function(e){define("tinymce",[],function(){return function(){return function(e,t){function r(e,t){var r,i=[];for(var s=0;s<e.length;++s){r=n[e[s]]||o(e[s]);if(!r)throw"module definition dependecy not found: "+e[s];i.push(r)}t.apply(null,i)}function i(e,i,s){if(typeof e!="string")throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(s===t)throw"invalid module definition, definition function must be specified";r(i,function(){n[e]=s.apply(null,arguments)})}function s(e){return!!n[e]}function o(t){var n=e,r=t.split(/[.\/]/);for(var i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function u(r){for(var i=0;i<r.length;i++){var s=e,o=r[i],u=o.split(/[.\/]/);for(var a=0;a<u.length-1;++a)s[u[a]]===t&&(s[u[a]]={}),s=s[u[a]];s[u[u.length-1]]=n[o]}}var n={};i("tinymce/dom/EventUtils",[],function(){function r(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function i(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function s(e,r){function u(){return!1}function a(){return!0}var i,s=r||{},o;for(i in e)n[i]||(s[i]=e[i]);s.target||(s.target=s.srcElement||document);if(e&&t.test(e.type)&&e.pageX===o&&e.clientX!==o){var f=s.target.ownerDocument||document,l=f.documentElement,c=f.body;s.pageX=e.clientX+(l&&l.scrollLeft||c&&c.scrollLeft||0)-(l&&l.clientLeft||c&&c.clientLeft||0),s.pageY=e.clientY+(l&&l.scrollTop||c&&c.scrollTop||0)-(l&&l.clientTop||c&&c.clientTop||0)}return s.preventDefault=function(){s.isDefaultPrevented=a,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},s.stopPropagation=function(){s.isPropagationStopped=a,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},s.stopImmediatePropagation=function(){s.isImmediatePropagationStopped=a,s.stopPropagation()},s.isDefaultPrevented||(s.isDefaultPrevented=u,s.isPropagationStopped=u,s.isImmediatePropagationStopped=u),s}function o(e,t,n){function u(){n.domLoaded||(n.domLoaded=!0,t(o))}function a(){if(s.readyState==="complete"||s.readyState==="interactive"&&s.body)i(s,"readystatechange",a),u()}function f(){try{s.documentElement.doScroll("left")}catch(e){setTimeout(f,0);return}u()}var s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}s.addEventListener?s.readyState==="complete"?u():r(e,"DOMContentLoaded",u):(r(s,"readystatechange",a),s.documentElement.doScroll&&e.self===e.top&&f()),r(e,"load",u)}function u(){function h(e,t){var r,i,s,o,u=n[t];r=u&&u[e.type];if(r)for(i=0,s=r.length;i<s;i++){o=r[i],o&&o.func.call(o.scope,e)===!1&&e.preventDefault();if(e.isImmediatePropagationStopped())return}}var t=this,n={},u,a,f,l,c;a=e+(+(new Date)).toString(32),l="onmouseenter"in document.documentElement,f="onfocusin"in document.documentElement,c={mouseenter:"mouseover",mouseleave:"mouseout"},u=1,t.domLoaded=!1,t.events=n,t.bind=function(e,i,p,d){function x(e){h(s(e||S.event),v)}var v,m,g,y,b,w,E,S=window;if(!e||e.nodeType===3||e.nodeType===8)return;e[a]?v=e[a]:(v=u++,e[a]=v,n[v]={}),d=d||e,i=i.split(" "),g=i.length;while(g--){y=i[g],w=x,b=E=!1,y==="DOMContentLoaded"&&(y="ready");if(t.domLoaded&&y==="ready"&&e.readyState=="complete"){p.call(d,s({type:y}));continue}l||(b=c[y],b&&(w=function(e){var t,n;t=e.currentTarget,n=e.relatedTarget;if(n&&t.contains)n=t.contains(n);else while(n&&n!==t)n=n.parentNode;n||(e=s(e||S.event),e.type=e.type==="mouseout"?"mouseleave":"mouseenter",e.target=t,h(e,v))})),!f&&(y==="focusin"||y==="focusout")&&(E=!0,b=y==="focusin"?"focus":"blur",w=function(e){e=s(e||S.event),e.type=e.type==="focus"?"focusin":"focusout",h(e,v)}),m=n[v][y],m?y==="ready"&&t.domLoaded?p({type:y}):m.push({func:p,scope:d}):(n[v][y]=m=[{func:p,scope:d}],m.fakeName=b,m.capture=E,m.nativeHandler=w,y==="ready"?o(e,w,t):r(e,b||y,w,E))}return e=m=0,p},t.unbind=function(e,r,s){var o,u,f,l,c,h;if(!e||e.nodeType===3||e.nodeType===8)return t;o=e[a];if(o){h=n[o];if(r){r=r.split(" "),f=r.length;while(f--){c=r[f],u=h[c];if(u){if(s){l=u.length;while(l--)if(u[l].func===s){var p=u.nativeHandler,d=u.fakeName,v=u.capture;u=u.slice(0,l).concat(u.slice(l+1)),u.nativeHandler=p,u.fakeName=d,u.capture=v,h[c]=u}}if(!s||u.length===0)delete h[c],i(e,u.fakeName||c,u.nativeHandler,u.capture)}}}else{for(c in h)u=h[c],i(e,u.fakeName||c,u.nativeHandler,u.capture);h={}}for(c in h)return t;delete n[o];try{delete e[a]}catch(m){e[a]=null}}return t},t.fire=function(e,n,r){var i;if(!e||e.nodeType===3||e.nodeType===8)return t;r=s(null,r),r.type=n,r.target=e;do i=e[a],i&&h(r,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!r.isPropagationStopped());return t},t.clean=function(e){var n,r,i=t.unbind;if(!e||e.nodeType===3||e.nodeType===8)return t;e[a]&&i(e),e.getElementsByTagName||(e=e.document);if(e&&e.getElementsByTagName){i(e),r=e.getElementsByTagName("*"),n=r.length;while(n--)e=r[n],e[a]&&i(e)}return t},t.destroy=function(){n={}},t.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var e="mce-data-",t=/^(?:mouse|contextmenu)|click/,n={keyLocation:1,layerX:1,layerY:1,returnValue:1};return u.Event=new u,u.Event.bind(window,"ready",function(){}),u}),i("tinymce/dom/Sizzle",[],function(){function it(e,t,r,i){var s,u,f,l,c,d,g,y,S,x;(t?t.ownerDocument||t:E)!==p&&h(t),t=t||p,r=r||[];if(!e||typeof e!="string")return r;if((l=t.nodeType)!==1&&l!==9)return[];if(v&&!i){if(s=Y.exec(e))if(f=s[1]){if(l===9){u=t.getElementById(f);if(!u||!u.parentNode)return r;if(u.id===f)return r.push(u),r}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&b(t,u)&&u.id===f)return r.push(u),r}else{if(s[2])return P.apply(r,t.getElementsByTagName(e)),r;if((f=s[3])&&n.getElementsByClassName)return P.apply(r,t.getElementsByClassName(f)),r}if(n.qsa&&(!m||!m.test(e))){y=g=w,S=t,x=l===9&&e;if(l===1&&t.nodeName.toLowerCase()!=="object"){d=o(e),(g=t.getAttribute("id"))?y=g.replace(et,"\\$&"):t.setAttribute("id",y),y="[id='"+y+"'] ",c=d.length;while(c--)d[c]=y+vt(d[c]);S=Z.test(e)&&pt(t.parentNode)||t,x=d.join(",")}if(x)try{return P.apply(r,S.querySelectorAll(x)),r}catch(T){}finally{g||t.removeAttribute("id")}}}return a(e.replace(U,"$1"),t,r,i)}function st(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function ot(e){return e[w]=!0,e}function ut(e){var t=p.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function at(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function ft(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ht(e){return ot(function(t){return t=+t,ot(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function pt(e){return e&&typeof e.getElementsByTagName!==L&&e}function dt(){}function vt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function mt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=x++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[S,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){a=t[w]||(t[w]={});if((u=a[r])&&u[0]===S&&u[1]===s)return f[2]=u[2];a[r]=f;if(f[2]=e(t,n,o))return!0}}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function yt(e,t,n){var r=0,i=t.length;for(;r<i;r++)it(e,t[r],n);return n}function bt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function wt(e,t,n,r,i,s){return r&&!r[w]&&(r=wt(r)),i&&!i[w]&&(i=wt(i,s)),ot(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||yt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?bt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=bt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?B.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=bt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):P.apply(o,g)})}function Et(e){var t,n,i,s=e.length,o=r.relative[e[0].type],u=o||r.relative[" "],a=o?1:0,l=mt(function(e){return e===t},u,!0),c=mt(function(e){return B.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=r.relative[e[a].type])h=[mt(gt(h),n)];else{n=r.filter[e[a].type].apply(null,e[a].matches);if(n[w]){i=++a;for(;i<s;i++)if(r.relative[e[i].type])break;return wt(a>1&&gt(h),a>1&&vt(e.slice(0,a-1).concat({value:e[a-2].type===" "?"*":""})).replace(U,"$1"),n,a<i&&Et(e.slice(a,i)),i<s&&Et(e=e.slice(i)),i<s&&vt(e))}h.push(n)}return gt(h)}function St(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,u,a,l){var c,h,d,v=0,m="0",g=s&&[],y=[],b=f,w=s||i&&r.find.TAG("*",l),E=S+=b==null?1:Math.random()||.1,x=w.length;l&&(f=o!==p&&o);for(;m!==x&&(c=w[m])!=null;m++){if(i&&c){h=0;while(d=e[h++])if(d(c,o,u)){a.push(c);break}l&&(S=E)}n&&((c=!d&&c)&&v--,s&&g.push(c))}v+=m;if(n&&m!==v){h=0;while(d=t[h++])d(g,y,o,u);if(s){if(v>0)while(m--)!g[m]&&!y[m]&&(y[m]=_.call(a));y=bt(y)}P.apply(a,y),l&&!s&&y.length>0&&v+t.length>1&&it.uniqueSort(a)}return l&&(S=E,f=b),g};return n?ot(s):s}var e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w="sizzle"+ -(new Date),E=window.document,S=0,x=0,T=st(),N=st(),C=st(),k=function(e,t){return e===t&&(c=!0),0},L=typeof t,A=1<<31,O={}.hasOwnProperty,M=[],_=M.pop,D=M.push,P=M.push,H=M.slice,B=M.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",q="\\["+F+"*("+I+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+F+"*\\]",R=":("+I+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+q+")*)|"+".*"+")\\)|)",U=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),z=new RegExp("^"+F+"*,"+F+"*"),W=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),X=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),V=new RegExp(R),$=new RegExp("^"+I+"$"),J={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+q),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},K=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,G=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,et=/'|\\/g,tt=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),nt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{P.apply(M=H.call(E.childNodes),E.childNodes),M[E.childNodes.length].nodeType}catch(rt){P={apply:M.length?function(e,t){D.apply(e,H.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=it.support={},s=it.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},h=it.setDocument=function(e){var t,i=e?e.ownerDocument||e:E,o=i.defaultView;if(i===p||i.nodeType!==9||!i.documentElement)return p;p=i,d=i.documentElement,v=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){h()},!1):o.attachEvent&&o.attachEvent("onunload",function(){h()})),n.attributes=ut(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ut(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=G.test(i.getElementsByClassName),n.getById=ut(function(e){return d.appendChild(e).id=w,!i.getElementsByName||!i.getElementsByName(w).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==L&&v){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(tt,nt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(v)return t.getElementsByClassName(e)},g=[],m=[];if(n.qsa=G.test(i.querySelectorAll))ut(function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+j+")"),e.querySelectorAll(":checked").length||m.push(":checked")}),ut(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")});return(n.matchesSelector=G.test(y=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&ut(function(e){n.disconnectedMatch=y.call(e,"div"),y.call(e,"[s!='']:x"),g.push("!=",R)}),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=G.test(d.compareDocumentPosition),b=t||G.test(d.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return c=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===E&&b(E,e)?-1:t===i||t.ownerDocument===E&&b(E,t)?1:l?B.call(l,e)-B.call(l,t):0:r&4?-1:1)}:function(e,t){if(e===t)return c=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],a=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:l?B.call(l,e)-B.call(l,t):0;if(s===o)return ft(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)a.unshift(n);while(u[r]===a[r])r++;return r?ft(u[r],a[r]):u[r]===E?-1:a[r]===E?1:0},i},it.matches=function(e,t){return it(e,null,null,t)},it.matchesSelector=function(e,t){(e.ownerDocument||e)!==p&&h(e),t=t.replace(X,"='$1']");if(n.matchesSelector&&v&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return it(t,p,null,[e]).length>0},it.contains=function(e,t){return(e.ownerDocument||e)!==p&&h(e),b(e,t)},it.attr=function(e,i){(e.ownerDocument||e)!==p&&h(e);var s=r.attrHandle[i.toLowerCase()],o=s&&O.call(r.attrHandle,i.toLowerCase())?s(e,i,!v):t;return o!==t?o:n.attributes||!v?e.getAttribute(i):(o=e.getAttributeNode(i))&&o.specified?o.value:null},it.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},it.uniqueSort=function(e){var t,r=[],i=0,s=0;c=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(k);if(c){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return l=null,e},i=it.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=it.selectors={cacheLength:50,createPseudo:ot,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(tt,nt),e[3]=(e[3]||e[4]||e[5]||"").replace(tt,nt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||it.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&it.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return J.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(tt,nt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&T(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=it.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===S&&f[1],h=f[0]===S&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[S,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===S)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[S,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||it.error("unsupported pseudo: "+e);return i[w]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=B.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:ot(function(e){var t=[],n=[],r=u(e.replace(U,"$1"));return r[w]?ot(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:ot(function(e){return function(t){return it(e,t).length>0}}),contains:ot(function(e){return e=e.replace(tt,nt),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:ot(function(e){return $.test(e||"")||it.error("unsupported lang: "+e),e=e.replace(tt,nt).toLowerCase(),function(t){var n;do if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===d},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:ht(function(){return[0]}),last:ht(function(e,t){return[t-1]}),eq:ht(function(e,t,n){return[n<0?n+t:n]}),even:ht(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ht(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ht(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ht(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r.pseudos.nth=r.pseudos.eq;for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=lt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ct(e);return dt.prototype=r.filters=r.pseudos,r.setFilters=new dt,o=it.tokenize=function(e,t){var n,i,s,o,u,a,f,l=N[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=z.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=W.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(U," ")}),u=u.slice(n.length);for(o in r.filter)(i=J[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?it.error(e):N(e,a).slice(0)},u=it.compile=function(e,t){var n,r=[],i=[],s=C[e+" "];if(!s){t||(t=o(e)),n=t.length;while(n--)s=Et(t[n]),s[w]?r.push(s):i.push(s);s=C(e,St(i,r)),s.selector=e}return s},a=it.select=function(e,t,i,s){var a,f,l,c,h,p=typeof e=="function"&&e,d=!s&&o(e=p.selector||e);i=i||[];if(d.length===1){f=d[0]=d[0].slice(0);if(f.length>2&&(l=f[0]).type==="ID"&&n.getById&&t.nodeType===9&&v&&r.relative[f[1].type]){t=(r.find.ID(l.matches[0].replace(tt,nt),t)||[])[0];if(!t)return i;p&&(t=t.parentNode),e=e.slice(f.shift().value.length)}a=J.needsContext.test(e)?0:f.length;while(a--){l=f[a];if(r.relative[c=l.type])break;if(h=r.find[c])if(s=h(l.matches[0].replace(tt,nt),Z.test(f[0].type)&&pt(t.parentNode)||t)){f.splice(a,1),e=s.length&&vt(f);if(!e)return P.apply(i,s),i;break}}}return(p||u(e,d))(s,t,!v,i,Z.test(e)&&pt(t.parentNode)||t),i},n.sortStable=w.split("").sort(k).join("")===w,n.detectDuplicates=!!c,h(),n.sortDetached=ut(function(e){return e.compareDocumentPosition(p.createElement("div"))&1}),ut(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||at("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!ut(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&at("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ut(function(e){return e.getAttribute("disabled")==null})||at(j,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),it}),i("tinymce/util/Tools",[],function(){function n(n){return n===null||n===t?"":(""+n).replace(e,"")}function i(e,n){return n?n=="array"&&r(e)?!0:typeof e==n:e!==t}function s(e){var t=e,n,i;if(!r(e)){t=[];for(n=0,i=e.length;n<i;n++)t[n]=e[n]}return t}function o(e,t,n){var r;e=e||[],t=t||",",typeof e=="string"&&(e=e.split(t)),n=n||{},r=e.length;while(r--)n[e[r]]={};return n}function u(e,n,r){var i,s;if(!e)return 0;r=r||e;if(e.length!==t){for(i=0,s=e.length;i<s;i++)if(n.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return 0;return 1}function a(e,t){var n=[];return u(e,function(e){n.push(t(e))}),n}function f(e,t){var n=[];return u(e,function(e){(!t||t(e))&&n.push(e)}),n}function l(e,t,n){var r=this,i,s,o,u,a,f=0;e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],s=r.createNS(e[3].replace(/\.\w+$/,""),n);if(s[o])return;if(e[2]=="static"){s[o]=t,this.onCreate&&this.onCreate(e[2],e[3],s[o]);return}t[o]||(t[o]=function(){},f=1),s[o]=t[o],r.extend(s[o].prototype,t),e[5]&&(i=r.resolve(e[5]).prototype,u=e[5].match(/\.(\w+)$/i)[1],a=s[o],f?s[o]=function(){return i[u].apply(this,arguments)}:s[o]=function(){return this.parent=i[u],a.apply(this,arguments)},s[o].prototype[o]=s[o],r.each(i,function(e,t){s[o].prototype[t]=i[t]}),r.each(t,function(e,t){i[t]?s[o].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=o&&(s[o].prototype[t]=e)})),r.each(t["static"],function(e,t){s[o][t]=e})}function c(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function h(e,n){var r,i,s,o=arguments,u;for(r=1,i=o.length;r<i;r++){n=o[r];for(s in n)n.hasOwnProperty(s)&&(u=n[s],u!==t&&(e[s]=u))}return e}function p(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),u(e,function(e,i){if(t.call(r,e,i,n)===!1)return!1;p(e,t,n,r)}))}function d(e,t){var n,r;t=t||window,e=e.split(".");for(n=0;n<e.length;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t}function v(e,t){var n,r;t=t||window,e=e.split(".");for(n=0,r=e.length;n<r;n++){t=t[e[n]];if(!t)break}return t}function m(e,t){return!e||i(e,"array")?e:a(e.split(t||","),n)}var e=/^\s*|\s*$/g,r=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};return{trim:n,isArray:r,is:i,toArray:s,makeMap:o,each:u,map:a,grep:f,inArray:c,extend:h,create:l,walk:p,createNS:d,resolve:v,explode:m}}),i("tinymce/Env",[],function(){var e=navigator,t=e.userAgent,n,r,i,s,o,u,a;n=window.opera&&window.opera.buildNumber,r=/WebKit/.test(t),i=!r&&!n&&/MSIE/gi.test(t)&&/Explorer/gi.test(e.appName),i=i&&/MSIE (\w+)\./.exec(t)[1],s=t.indexOf("Trident/")==-1||t.indexOf("rv:")==-1&&e.appName.indexOf("Netscape")==-1?!1:11,i=i||s,o=!r&&!s&&/Gecko/.test(t),u=t.indexOf("Mac")!=-1,a=/(iPad|iPhone)/.test(t);var f=!a||t.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:n,webkit:r,ie:i,gecko:o,mac:u,iOS:a,contentEditable:f,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:i!=8,range:window.getSelection&&"Range"in window,documentMode:i?document.documentMode||7:10}}),i("tinymce/dom/DomQuery",["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/Env"],function(e,n,r,i){function c(e){return typeof e!="undefined"}function h(e){return typeof e=="string"}function p(e,t){var n,r,i;t=t||s,i=t.createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;while(r=i.firstChild)n.appendChild(r);return n}function d(e,t,n,r){var i;if(h(t))t=p(t,A(e[0]));else if(t.length&&!t.nodeType){t=x.makeArray(t);if(r)for(i=t.length-1;i>=0;i--)d(e,t[i],n,r);else for(i=0;i<t.length;i++)d(e,t[i],n,r);return e}if(t.nodeType){i=e.length;while(i--)n.call(e[i],t)}return e}function v(e,t){return e&&t&&(" "+e.className+" ").indexOf(" "+t+" ")!==-1}function m(e,t,n){var r,i;return t=x(t)[0],e.each(function(){var e=this;!n||r!=e.parentNode?(r=e.parentNode,i=t.cloneNode(!1),e.parentNode.insertBefore(i,e),i.appendChild(e)):i.appendChild(e)}),e}function x(e,t){return new x.fn.init(e,t)}function T(e,t){var n;if(t.indexOf)return t.indexOf(e);n=t.length;while(n--)if(t[n]===e)return n;return-1}function C(e){return e===null||e===l?"":(""+e).replace(N,"")}function k(e,t){var n,r,i,s,o;if(e){n=e.length;if(n===s){for(r in e)if(e.hasOwnProperty(r)){o=e[r];if(t.call(o,r,o)===!1)break}}else for(i=0;i<n;i++){o=e[i];if(t.call(o,i,o)===!1)break}}return e}function L(e,t){var n=[];return k(e,function(e,r){t(r,e)&&n.push(r)}),n}function A(e){return e?e.nodeType==9?e:e.ownerDocument:s}function O(e,n,r){var i=[],s=e[n];typeof r!="string"&&r instanceof x&&(r=r[0]);while(s&&s.nodeType!==9){if(r!==t){if(s===r)break;if(typeof r=="string"&&x(s).is(r))break}s.nodeType===1&&i.push(s),s=s[n]}return i}function M(e,n,r,i){var s=[];i instanceof x&&(i=i[0]);for(;e;e=e[n]){if(r&&e.nodeType!==r)continue;if(i!==t){if(e===i)break;if(typeof i=="string"&&x(e).is(i))break}s.push(e)}return s}function _(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function D(e,t,n){k(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})}var s=document,o=Array.prototype.push,u=Array.prototype.slice,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,f=e.Event,l,g=r.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),y=r.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),b={"for":"htmlFor","class":"className",readonly:"readOnly"},w={"float":"cssFloat"},E={},S={},N=/^\s*|\s*$/g;return x.fn=x.prototype={constructor:x,selector:"",context:null,length:0,init:function(e,t){var n=this,r,i;if(!e)return n;if(e.nodeType)return n.context=n[0]=e,n.length=1,n;if(t&&t.nodeType)n.context=t;else{if(t)return x(e).attr(t);n.context=t=document}if(h(e)){n.selector=e,e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?r=[null,e,null]:r=a.exec(e);if(!r)return x(t).find(e);if(r[1]){i=p(e,A(t)).firstChild;while(i)o.call(n,i),i=i.nextSibling}else{i=A(t).getElementById(r[2]);if(!i)return n;if(i.id!==r[2])return n.find(e);n.length=1,n[0]=i}}else this.add(e,!1);return n},toArray:function(){return r.toArray(this)},add:function(e,t){var n=this,r,i;if(h(e))return n.add(x(e));if(e.nodeType)return n.add([e]);if(t!==!1){r=x.unique(n.toArray().concat(x.makeArray(e))),n.length=r.length;for(i=0;i<r.length;i++)n[i]=r[i]}else o.apply(n,x.makeArray(e));return n},attr:function(e,t){var n=this,r;if(typeof e=="object")k(e,function(e,t){n.attr(e,t)});else{if(!c(t)){if(n[0]&&n[0].nodeType===1){r=E[e];if(r&&r.get)return r.get(n[0],e);if(y[e])return n.prop(e)?e:l;t=n[0].getAttribute(e,2),t===null&&(t=l)}return t}this.each(function(){var n;if(this.nodeType===1){n=E[e];if(n&&n.set){n.set(this,t);return}t===null?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return n},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;e=b[e]||e;if(typeof e=="object")k(e,function(e,t){n.prop(e,t)});else{if(!c(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){this.nodeType==1&&(this[e]=t)})}return n},css:function(e,t){function s(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function o(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var n=this,r,i;if(typeof e=="object")k(e,function(e,t){n.css(e,t)});else if(c(t))e=s(e),typeof t=="number"&&!g[e]&&(t+="px"),n.each(function(){var n=this.style;i=S[e];if(i&&i.set){i.set(this,t);return}try{this.style[w[e]||e]=t}catch(r){}if(t===null||t==="")n.removeProperty?n.removeProperty(o(e)):n.removeAttribute(e)});else{r=n[0],i=S[e];if(i&&i.get)return i.get(r);if(r.ownerDocument.defaultView)try{return r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(o(e))}catch(u){return l}else if(r.currentStyle)return r.currentStyle[s(e)]}return n},remove:function(){var e=this,t,n=this.length;while(n--)t=e[n],f.clean(t),t.parentNode&&t.parentNode.removeChild(t);return this},empty:function(){var e=this,t,n=this.length;while(n--){t=e[n];while(t.firstChild)t.removeChild(t.firstChild)}return this},html:function(e){var t=this,n;if(c(e)){n=t.length;try{while(n--)t[n].innerHTML=e}catch(r){x(t[n]).empty().append(e)}return t}return t[0]?t[0].innerHTML:""},text:function(e){var t=this,n;if(c(e)){n=t.length;while(n--)"innerText"in t[n]?t[n].innerText=e:t[0].textContent=e;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return d(this,arguments,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return d(this,arguments,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?d(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?d(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return x(e).append(this),this},prependTo:function(e){return x(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return m(this,e)},wrapAll:function(e){return m(this,e,!0)},wrapInner:function(e){return this.each(function(){x(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){x(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),x(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return typeof e!="string"?n:(e.indexOf(" ")!==-1?k(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var i,s;s=v(r,e),s!==t&&(i=r.className,s?r.className=C((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e)}),n)},hasClass:function(e){return v(this[0],e)},each:function(e){return k(this,e)},on:function(e,t){return this.each(function(){f.bind(this,e,t)})},off:function(e,t){return this.each(function(){f.unbind(this,e,t)})},trigger:function(e){return this.each(function(){typeof e=="object"?f.fire(this,e.type,e):f.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new x(u.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)x.find(e,this[t],r);return x(r)},filter:function(e){return typeof e=="function"?x(L(this.toArray(),function(t,n){return e(n,t)})):x(x.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof x&&(e=e[0]),this.each(function(n,r){while(r){if(typeof e=="string"&&x(r).is(e)){t.push(r);break}if(r==e){t.push(r);break}r=r.parentNode}}),x(t)},offset:function(e){var t,n,r,i=0,s=0,o;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,r=n.documentElement,t.getBoundingClientRect&&(o=t.getBoundingClientRect(),i=o.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,s=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:i,top:s})},push:o,sort:[].sort,splice:[].splice},r.extend(x,{extend:r.extend,makeArray:r.toArray,inArray:T,isArray:r.isArray,each:k,trim:C,grep:L,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){var r=t.length;n&&(e=":not("+e+")");while(r--)t[r].nodeType!=1&&t.splice(r,1);return t.length===1?t=x.find.matchesSelector(t[0],e)?[t[0]]:[]:t=x.find.matches(e,t),t}}),k({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return O(e,"parentNode")},next:function(e){return _(e,"nextSibling",1)},prev:function(e){return _(e,"previousSibling",1)},children:function(e){return M(e.firstChild,"nextSibling",1)},contents:function(e){return r.toArray((e.nodeName==="iframe"?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){x.fn[e]=function(n){var r=this,i=[];return r.each(function(){var e=t.call(i,this,n,i);e&&(x.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=x.unique(i),e.indexOf("parents")===0&&(i=i.reverse())),i=x(i),n?i.filter(n):i}}),k({parentsUntil:function(e,t){return O(e,"parentNode",t)},nextUntil:function(e,t){return M(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return M(e,"previousSibling",1,t).slice(1)}},function(e,t){x.fn[e]=function(n,r){var i=this,s=[];i.each(function(){var e=t.call(s,this,n,s);e&&(x.isArray(e)?s.push.apply(s,e):s.push(e))});if(this.length>1){s=x.unique(s);if(e.indexOf("parents")===0||e==="prevUntil")s=s.reverse()}return s=x(s),r?s.filter(r):s}}),x.fn.is=function(e){return!!e&&this.filter(e).length>0},x.fn.init.prototype=x.fn,x.overrideDefaults=function(e){function n(r,i){return t=t||e(),arguments.length===0&&(r=t.element),i||(i=t.context),new n.fn.init(r,i)}var t;return x.extend(n,this),n},i.ie&&i.ie<8&&(D(E,"get",{maxlength:function(e){var t=e.maxLength;return t===2147483647?l:t},size:function(e){var t=e.size;return t===20?l:t},"class":function(e){return e.className},style:function(e){var t=e.style.cssText;return t.length===0?l:t}}),D(E,"set",{"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),i.ie&&i.ie<9&&(w["float"]="styleFloat",D(S,"set",{opacity:function(e,t){var n=e.style;t===null||t===""?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+t*100+")")}})),x.attrHooks=E,x.cssHooks=S,x}),i("tinymce/html/Styles",[],function(){return function(e,t){function p(e,t,n,r){function i(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var n=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,r=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,s=/\s+$/,o,u,a={},f,l,c,h="﻿";e=e||{},t&&(l=t.getValidStyles(),c=t.getInvalidStyles()),f=("\\\" \\' \\; \\: ; : "+h).split(" ");for(u=0;u<f.length;u++)a[f[u]]=h+u,a[h+u]=f[u];return{toHex:function(e){return e.replace(n,p)},parse:function(t){function m(e,t,n){var r,i,s,a;r=o[e+"-top"+t];if(!r)return;i=o[e+"-right"+t];if(!i)return;s=o[e+"-bottom"+t];if(!s)return;a=o[e+"-left"+t];if(!a)return;var f=[r,i,s,a];u=f.length-1;while(u--)if(f[u]!==f[u+1])break;if(u>-1&&n)return;o[e+t]=u==-1?f[0]:f.join(" "),delete o[e+"-top"+t],delete o[e+"-right"+t],delete o[e+"-bottom"+t],delete o[e+"-left"+t]}function g(e){var t=o[e],n;if(!t)return;t=t.split(" "),n=t.length;while(n--)if(t[n]!==t[0])return!1;return o[e]=t[0],!0}function y(e,t,n,r){if(!g(t))return;if(!g(n))return;if(!g(r))return;o[e]=o[t]+" "+o[n]+" "+o[r],delete o[t],delete o[n],delete o[r]}function b(e){return h=!0,a[e]}function w(e,t){return h&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return a[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function E(t,n,r,i,s,o){s=s||o;if(s)return s=w(s),"'"+s.replace(/\'/g,"\\'")+"'";n=w(n||r||i);if(!e.allow_script_urls){var u=n.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(u))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(u))return""}return d&&(n=d.call(v,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var o={},f,l,c,h,d=e.url_converter,v=e.url_converter_scope||this;if(t){t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,b).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,b)});while(f=i.exec(t)){l=f[1].replace(s,"").toLowerCase(),c=f[2].replace(s,""),c=c.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16))});if(l&&c.length>0){if(!e.allow_script_urls&&(l=="behavior"||/expression\s*\(|\/\*|\*\//.test(c)))continue;if(l==="font-weight"&&c==="700")c="bold";else if(l==="color"||l==="background-color")c=c.toLowerCase();c=c.replace(n,p),c=c.replace(r,E),o[l]=h?w(c,!0):c}i.lastIndex=f.index+f[0].length}m("border","",!0),m("border","-width"),m("border","-color"),m("border","-style"),m("padding",""),m("margin",""),y("border","border-width","border-style","border-color"),o.border==="medium none"&&delete o.border,o["border-image"]==="none"&&delete o["border-image"]}return o},serialize:function(e,t){function s(t){var r,i,s,u;r=l[t];if(r)for(i=0,s=r.length;i<s;i++)t=r[i],u=e[t],u!==o&&u.length>0&&(n+=(n.length>0?" ":"")+t+": "+u+";")}function u(e,t){var n;return n=c["*"],n&&n[e]?!1:(n=c[t],n&&n[e]?!1:!0)}var n="",r,i;if(t&&l)s("*"),s(t);else for(r in e)i=e[r],i!==o&&i.length>0&&(!c||u(r,t))&&(n+=(n.length>0?" ":"")+r+": "+i+";");return n}}}}),i("tinymce/dom/TreeWalker",[],function(){return function(e,t){function r(e,n,r,i){var s,o;if(e){if(!i&&e[n])return e[n];if(e!=t){s=e[r];if(s)return s;for(o=e.parentNode;o&&o!=t;o=o.parentNode){s=o[r];if(s)return s}}}}var n=e;this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e),n},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e),n}}}),i("tinymce/dom/Range",["tinymce/util/Tools"],function(e){function t(n){function m(){return i.createDocumentFragment()}function g(e,t){B(a,e,t)}function y(e,t){B(f,e,t)}function b(e){g(e.parentNode,v(e))}function w(e){g(e.parentNode,v(e)+1)}function E(e){y(e.parentNode,v(e))}function S(e){y(e.parentNode,v(e)+1)}function x(e){e?(r[h]=r[c],r[p]=r[l]):(r[c]=r[h],r[l]=r[p]),r.collapsed=a}function T(e){b(e),S(e)}function N(e){g(e,0),y(e,e.nodeType===1?e.childNodes.length:e.nodeValue.length)}function C(e,t){var n=r[c],i=r[l],s=r[h],o=r[p],u=t.startContainer,a=t.startOffset,f=t.endContainer,d=t.endOffset;if(e===0)return H(n,i,u,a);if(e===1)return H(s,o,u,a);if(e===2)return H(s,o,f,d);if(e===3)return H(n,i,f,d)}function k(){j(u)}function L(){return j(s)}function A(){return j(o)}function O(e){var t=this[c],r=this[l],i,s;t.nodeType!==3&&t.nodeType!==4||!t.nodeValue?(t.childNodes.length>0&&(s=t.childNodes[r]),s?t.insertBefore(e,s):t.nodeType==3?n.insertAfter(e,t):t.appendChild(e)):r?r>=t.nodeValue.length?n.insertAfter(e,t):(i=t.splitText(r),t.parentNode.insertBefore(e,i)):t.parentNode.insertBefore(e,t)}function M(e){var t=r.extractContents();r.insertNode(e),e.appendChild(t),r.selectNode(e)}function _(){return d(new t(n),{startContainer:r[c],startOffset:r[l],endContainer:r[h],endOffset:r[p],collapsed:r.collapsed,commonAncestorContainer:r.commonAncestorContainer})}function D(e,t){var n;if(e.nodeType==3)return e;if(t<0)return e;n=e.firstChild;while(n&&t>0)--t,n=n.nextSibling;return n?n:e}function P(){return r[c]==r[h]&&r[l]==r[p]}function H(e,t,r,i){var s,o,u,a,f,l;if(e==r)return t==i?0:t<i?-1:1;s=r;while(s&&s.parentNode!=e)s=s.parentNode;if(s){o=0,u=e.firstChild;while(u!=s&&o<t)o++,u=u.nextSibling;return t<=o?-1:1}s=e;while(s&&s.parentNode!=r)s=s.parentNode;if(s){o=0,u=r.firstChild;while(u!=s&&o<i)o++,u=u.nextSibling;return o<i?-1:1}a=n.findCommonAncestor(e,r),f=e;while(f&&f.parentNode!=a)f=f.parentNode;f||(f=a),l=r;while(l&&l.parentNode!=a)l=l.parentNode;l||(l=a);if(f==l)return 0;u=a.firstChild;while(u){if(u==f)return-1;if(u==l)return 1;u=u.nextSibling}}function B(e,t,i){var s,o;e?(r[c]=t,r[l]=i):(r[h]=t,r[p]=i),s=r[h];while(s.parentNode)s=s.parentNode;o=r[c];while(o.parentNode)o=o.parentNode;o==s?H(r[c],r[l],r[h],r[p])>0&&r.collapse(e):r.collapse(e),r.collapsed=P(),r.commonAncestorContainer=n.findCommonAncestor(r[c],r[h])}function j(e){var t,n=0,i=0,s,o,u,a,f,l;if(r[c]==r[h])return F(e);for(t=r[h],s=t.parentNode;s;t=s,s=s.parentNode){if(s==r[c])return I(t,e);++n}for(t=r[c],s=t.parentNode;s;t=s,s=s.parentNode){if(s==r[h])return q(t,e);++i}o=i-n,u=r[c];while(o>0)u=u.parentNode,o--;a=r[h];while(o<0)a=a.parentNode,o++;for(f=u.parentNode,l=a.parentNode;f!=l;f=f.parentNode,l=l.parentNode)u=f,a=l;return R(u,a,e)}function F(e){var t,n,s,f,h,d,v,g,y;e!=u&&(t=m());if(r[l]==r[p])return t;if(r[c].nodeType==3){n=r[c].nodeValue,s=n.substring(r[l],r[p]),e!=o&&(f=r[c],g=r[l],y=r[p]-r[l],g===0&&y>=f.nodeValue.length-1?f.parentNode.removeChild(f):f.deleteData(g,y),r.collapse(a));if(e==u)return;return s.length>0&&t.appendChild(i.createTextNode(s)),t}f=D(r[c],r[l]),h=r[p]-r[l];while(f&&h>0)d=f.nextSibling,v=X(f,e),t&&t.appendChild(v),--h,f=d;return e!=o&&r.collapse(a),t}function I(e,t){var n,i,s,a,c,h;t!=u&&(n=m()),i=U(e,t),n&&n.appendChild(i),s=v(e),a=s-r[l];if(a<=0)return t!=o&&(r.setEndBefore(e),r.collapse(f)),n;i=e.previousSibling;while(a>0)c=i.previousSibling,h=X(i,t),n&&n.insertBefore(h,n.firstChild),--a,i=c;return t!=o&&(r.setEndBefore(e),r.collapse(f)),n}function q(e,t){var n,i,s,f,l,c;t!=u&&(n=m()),s=z(e,t),n&&n.appendChild(s),i=v(e),++i,f=r[p]-i,s=e.nextSibling;while(s&&f>0)l=s.nextSibling,c=X(s,t),n&&n.appendChild(c),--f,s=l;return t!=o&&(r.setStartAfter(e),r.collapse(a)),n}function R(e,t,n){var i,s,f,l,c,h,p;n!=u&&(s=m()),i=z(e,n),s&&s.appendChild(i),f=v(e),l=v(t),++f,c=l-f,h=e.nextSibling;while(c>0)p=h.nextSibling,i=X(h,n),s&&s.appendChild(i),h=p,--c;return i=U(t,n),s&&s.appendChild(i),n!=o&&(r.setStartAfter(e),r.collapse(a)),s}function U(e,t){var n=D(r[h],r[p]-1),i,s,o,l,c,d=n!=r[h];if(n==e)return W(n,d,f,t);i=n.parentNode,s=W(i,f,f,t);while(i){while(n)o=n.previousSibling,l=W(n,d,f,t),t!=u&&s.insertBefore(l,s.firstChild),d=a,n=o;if(i==e)return s;n=i.previousSibling,i=i.parentNode,c=W(i,f,f,t),t!=u&&c.appendChild(s),s=c}}function z(e,t){var n=D(r[c],r[l]),i=n!=r[c],s,o,h,p,d;if(n==e)return W(n,i,a,t);s=n.parentNode,o=W(s,f,a,t);while(s){while(n)h=n.nextSibling,p=W(n,i,a,t),t!=u&&o.appendChild(p),i=a,n=h;if(s==e)return o;n=s.nextSibling,s=s.parentNode,d=W(s,f,a,t),t!=u&&d.appendChild(o),o=d}}function W(e,t,i,s){var a,c,h,d,v;if(t)return X(e,s);if(e.nodeType==3){a=e.nodeValue,i?(d=r[l],c=a.substring(d),h=a.substring(0,d)):(d=r[p],c=a.substring(0,d),h=a.substring(d)),s!=o&&(e.nodeValue=h);if(s==u)return;return v=n.clone(e,f),v.nodeValue=c,v}if(s==u)return;return n.clone(e,f)}function X(e,t){if(t!=u)return t==o?n.clone(e,a):e;e.parentNode.removeChild(e)}function V(){return n.create("body",null,A()).outerText}var r=this,i=n.doc,s=0,o=1,u=2,a=!0,f=!1,l="startOffset",c="startContainer",h="endContainer",p="endOffset",d=e.extend,v=n.nodeIndex;return d(r,{startContainer:i,startOffset:0,endContainer:i,endOffset:0,collapsed:a,commonAncestorContainer:i,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:g,setEnd:y,setStartBefore:b,setStartAfter:w,setEndBefore:E,setEndAfter:S,collapse:x,selectNode:T,selectNodeContents:N,compareBoundaryPoints:C,deleteContents:k,extractContents:L,cloneContents:A,insertNode:O,surroundContents:M,cloneRange:_,toStringIE:V}),r}return t.prototype.toString=function(){return this.toStringIE()},t}),i("tinymce/html/Entities",["tinymce/util/Tools"],function(e){function l(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function c(e,t){var n,i,s,o={};if(e){e=e.split(","),t=t||10;for(n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),r[i]||(s="&"+e[n+1]+";",o[i]=s,o[s]=i);return o}}var t=e.makeMap,n,r,i,s=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,o=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[<>&\"\']/g,a=/&(#x|#)?([\w]+);/g,f={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};r={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},i={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},n=c("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var h={encodeRaw:function(e,t){return e.replace(t?s:o,function(e){return r[e]||e})},encodeAllRaw:function(e){return(""+e).replace(u,function(e){return r[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:o,function(e){return e.length>1?"&#"+((e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320)+65536)+";":r[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,i){return i=i||n,e.replace(t?s:o,function(e){return r[e]||i[e]||e})},getEncodeFunc:function(e,i){function u(e,t){return e.replace(t?s:o,function(e){return r[e]||i[e]||"&#"+e.charCodeAt(0)+";"||e})}function a(e,t){return h.encodeNamed(e,t,i)}return i=c(i)||n,e=t(e.replace(/\+/g,",")),e.named&&e.numeric?u:e.named?i?a:h.encodeNamed:e.numeric?h.encodeNumeric:h.encodeRaw},decode:function(e){return e.replace(a,function(e,t,r){return t?(r=parseInt(r,t.length===2?16:10),r>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(r&1023))):f[r]||String.fromCharCode(r)):i[e]||n[e]||l(e)})}};return h}),i("tinymce/dom/StyleSheetLoader",[],function(){return function(e,t){function s(t){e.getElementsByTagName("head")[0].appendChild(t)}function o(t,o,u){function h(){var e=c.passed,t=e.length;while(t--)e[t]();c.status=2,c.passed=[],c.failed=[]}function p(){var e=c.failed,t=e.length;while(t--)e[t]();c.status=3,c.passed=[],c.failed=[]}function d(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function v(e,t){e()||((new Date).getTime()-l<i?window.setTimeout(t,0):p())}function m(){v(function(){var t=e.styleSheets,n,r=t.length,i;while(r--){n=t[r],i=n.ownerNode?n.ownerNode:n.owningElement;if(i&&i.id===a.id)return h(),!0}},m)}function g(){v(function(){try{var e=f.sheet.cssRules;return h(),!!e}catch(t){}},g)}var a,f,l,c;r[t]?c=r[t]:(c={passed:[],failed:[]},r[t]=c),o&&c.passed.push(o),u&&c.failed.push(u);if(c.status==1)return;if(c.status==2){h();return}if(c.status==3){p();return}c.status=1,a=e.createElement("link"),a.rel="stylesheet",a.type="text/css",a.id="u"+n++,a.async=!1,a.defer=!1,l=(new Date).getTime();if("onload"in a&&!d())a.onload=m,a.onerror=p;else{if(navigator.userAgent.indexOf("Firefox")>0){f=e.createElement("style"),f.textContent='@import "'+t+'"',g(),s(f);return}m()}s(a),a.href=t}var n=0,r={},i;t=t||{},i=t.maxLoadTime||5e3,this.load=o}}),i("tinymce/dom/DOMUtils",["tinymce/dom/Sizzle","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/EventUtils","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/dom/StyleSheetLoader"],function(e,n,r,i,s,o,u,a,f,l){function y(e,t){var n={},r=t.keep_values,i;return i={set:function(n,r,i){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||e,r,i,n[0])),n.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},n={style:{set:function(e,t){if(t!==null&&typeof t=="object"){e.css(t);return}r&&e.attr("data-mce-style",t),e.attr("style",t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName),n}}},r&&(n.href=n.src=i),n}function b(e,t){var s=this,o;s.doc=e,s.win=window,s.files={},s.counter=0,s.stdMode=!v||e.documentMode>=8,s.boxModel=!v||e.compatMode=="CSS1Compat"||s.stdMode,s.styleSheetLoader=new l(e),s.boundEvents=[],s.settings=t=t||{},s.schema=t.schema,s.styles=new r({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),s.fixDoc(e),s.events=t.ownEvents?new i(t.proxy):i.Event,s.attrHooks=y(s,t),o=t.schema?t.schema.getBlockElements():{},s.$=n.overrideDefaults(function(){return{context:e,element:s.getRoot()}}),s.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?t===1&&!!o[e.nodeName]:!!o[e]}}var c=f.each,h=f.is,p=f.grep,d=f.trim,v=a.ie,m=/^([a-z0-9],?)+$/i,g=/^[ \t\r\n]*$/;return b.prototype={$$:function(e){return typeof e=="string"&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t=this.settings,n;if(v&&t.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(n in t.schema.getCustomElements())e.createElement(n)}},clone:function(e,t){var n=this,r,i;return!v||e.nodeType!==1||t?e.cloneNode(t):(i=n.doc,t?r.firstChild:(r=i.createElement(e.nodeName),c(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),r))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t=this,n,r;return e=t.get(e),n=t.getPos(e),r=t.getSize(e),{x:n.x,y:n.y,w:r.w,h:r.h}},getSize:function(e){var t=this,n,r;return e=t.get(e),n=t.getStyle(e,"width"),r=t.getStyle(e,"height"),n.indexOf("px")===-1&&(n=0),r.indexOf("px")===-1&&(r=0),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(r,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,r,i){var s=this,o,u=[];e=s.get(e),i=i===t,r=r||(s.getRoot().nodeName!="BODY"?s.getRoot().parentNode:null),h(n,"string")&&(o=n,n==="*"?n=function(e){return e.nodeType==1}:n=function(e){return s.is(e,o)});while(e){if(e==r||!e.nodeType||e.nodeType===9)break;if(!n||n(e)){if(!i)return e;u.push(e)}e=e.parentNode}return i?u:null},get:function(e){var t;if(e&&this.doc&&typeof e=="string"){t=e,e=this.doc.getElementById(e);if(e&&e.id!==t)return this.doc.getElementsByName(t)[1]}return e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e(t,r.get(n)||r.settings.root_element||r.doc,[])},is:function(n,r){var i;if(n.length===t){if(r==="*")return n.nodeType==1;if(m.test(r)){r=r.toLowerCase().split(/,/),n=n.nodeName.toLowerCase();for(i=r.length-1;i>=0;i--)if(r[i]==n)return!0;return!1}}if(n.nodeType&&n.nodeType!=1)return!1;var s=n.nodeType?[n]:n;return e(r,s[0].ownerDocument||s[0],null,s).length>0},add:function(e,t,n,r,i){var s=this;return this.run(e,function(e){var o;return o=h(t,"string")?s.doc.createElement(t):t,s.setAttribs(o,n),r&&(r.nodeType?o.appendChild(r):s.setHTML(o,r)),i?o:e.appendChild(o)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r="",i;r+="<"+e;for(i in t)t.hasOwnProperty(i)&&t[i]!==null&&typeof t[i]!="undefined"&&(r+=" "+i+'="'+this.encode(t[i])+'"');return typeof n!="undefined"?r+">"+n+"</"+e+">":r+" />"},createFragment:function(e){var t,n,r=this.doc,i;i=r.createElement("div"),t=r.createDocumentFragment(),e&&(i.innerHTML=e);while(n=i.firstChild)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){var e;while(e=this.firstChild)e.nodeType==3&&e.data.length===0?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&e.attr("data-mce-style",null)},getStyle:function(e,n,r){return e=this.$$(e),r?e.css(n):(n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),n=="float"&&(n=v?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[n]:t)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&e.attr("data-mce-style",null)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r=this,i,s,o=r.settings;n===""&&(n=null),e=r.$$(e),i=e.attr(t);if(!e.length)return;s=r.attrHooks[t],s&&s.set?s.set(e,n,t):e.attr(t,n),i!=n&&o.onSetAttrib&&o.onSetAttrib({attrElm:e,attrName:t,attrValue:n})},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,r){c(t,function(e,t){n.setAttrib(r,t,e)})})},getAttrib:function(e,t,n){var r=this,i,s;return e=r.$$(e),e.length&&(i=r.attrHooks[t],i&&i.get?s=i.get(e,t):s=e.attr(t)),typeof s=="undefined"&&(s=n||""),s},getPos:function(e,t){var r=this,i=0,s=0,o,u=r.doc,a=u.body,f;e=r.get(e),t=t||a;if(e){if(t===a&&e.getBoundingClientRect&&n(a).css("position")==="static")return f=e.getBoundingClientRect(),t=r.boxModel?u.documentElement:a,i=f.left+(u.documentElement.scrollLeft||a.scrollLeft)-t.clientLeft,s=f.top+(u.documentElement.scrollTop||a.scrollTop)-t.clientTop,{x:i,y:s};o=e;while(o&&o!=t&&o.nodeType)i+=o.offsetLeft||0,s+=o.offsetTop||0,o=o.offsetParent;o=e.parentNode;while(o&&o!=t&&o.nodeType)i-=o.scrollLeft||0,s-=o.scrollTop||0,o=o.parentNode}return{x:i,y:s}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t=this,n=t.doc,r,i;if(t!==b.DOM&&n===document){var s=b.DOM.addedStyles;s=s||[];if(s[e])return;s[e]=!0,b.DOM.addedStyles=s}i=n.getElementById("mceDefaultStyles"),i||(i=n.createElement("style"),i.id="mceDefaultStyles",i.type="text/css",r=n.getElementsByTagName("head")[0],r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i)),i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(n.createTextNode(e))},loadCSS:function(e){var t=this,n=t.doc,r;if(t!==b.DOM&&n===document){b.DOM.loadCSS(e);return}e||(e=""),r=n.getElementsByTagName("head")[0],c(e.split(","),function(e){var i;if(t.files[e])return;t.files[e]=!0,i=t.create("link",{rel:"stylesheet",href:e}),v&&n.documentMode&&n.recalc&&(i.onload=function(){n.recalc&&n.recalc(),i.onload=null}),r.appendChild(i)})},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,r){this.$$(e).toggleClass(t,r).each(function(){this.className===""&&n(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return this.$$(e).css("display")=="none"},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),v?e.each(function(e,r){if(r.canHaveHTML===!1)return;while(r.firstChild)r.removeChild(r.firstChild);try{r.innerHTML="<br>"+t,r.removeChild(r.firstChild)}catch(i){n("<div>").html("<br>"+t).contents().slice(1).appendTo(r)}return t}):e.html(t)},getOuterHTML:function(e){return e=this.get(e),e.nodeType==1?e.outerHTML:n("<div>").append(n(e).clone()).html()},setOuterHTML:function(e,t){var r=this;r.$$(e).each(function(){try{this.outerHTML=t}catch(e){r.remove(n(this).html(t),!0)}})},decode:u.decode,encode:u.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){var r=this;return r.run(t,function(t){return h(t,"array")&&(e=e.cloneNode(!0)),n&&c(p(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n=this,r;return e.nodeName!=t.toUpperCase()&&(r=n.create(t),c(n.getAttribs(e),function(t){n.setAttrib(r,t.nodeName,n.getAttrib(e,t.nodeName))}),n.replace(r,e,1)),r||e},findCommonAncestor:function(e,t){var n=e,r;while(n){r=t;while(r&&n!=r)r=r.parentNode;if(n==r)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},toHex:function(e){return this.styles.toHex(f.trim(e))},run:function(e,t,n){var r=this,i;return typeof e=="string"&&(e=r.get(e)),e?(n=n||this,!e.nodeType&&(e.length||e.length===0)?(i=[],c(e,function(e,s){e&&(typeof e=="string"&&(e=r.get(e)),i.push(t.call(n,e,s)))}),i):t.call(n,e)):!1},getAttribs:function(e){var t;e=this.get(e);if(!e)return[];if(v){t=[];if(e.nodeName=="OBJECT")return e.attributes;e.nodeName==="OPTION"&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n=this,r,i,o,u,a,f=0;e=e.firstChild;if(e){u=new s(e,e.parentNode),t=t||(n.schema?n.schema.getNonEmptyElements():null);do{o=e.nodeType;if(o===1){if(e.getAttribute("data-mce-bogus"))continue;a=e.nodeName.toLowerCase();if(t&&t[a]){if(a==="br"){f++;continue}return!1}i=n.getAttribs(e),r=i.length;while(r--){a=i[r].nodeName;if(a==="name"||a==="data-mce-bookmark")return!1}}if(o==8)return!1;if(o===3&&!g.test(e.nodeValue))return!1}while(e=u.next())}return f<=1},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new o(this)},nodeIndex:function(e,t){var n=0,r,i;if(e)for(r=e.nodeType,e=e.previousSibling;e;e=e.previousSibling){i=e.nodeType;if(t&&i==3)if(i==r||!e.nodeValue.length)continue;n++,r=i}return n},split:function(e,t,n){function a(e){function s(e){var t=e.previousSibling&&e.previousSibling.nodeName=="SPAN",n=e.nextSibling&&e.nextSibling.nodeName=="SPAN";return t&&n}var t,n=e.childNodes,i=e.nodeType;if(i==1&&e.getAttribute("data-mce-type")=="bookmark")return;for(t=n.length-1;t>=0;t--)a(n[t]);if(i!=9){if(i==3&&e.nodeValue.length>0){var o=d(e.nodeValue).length;if(!r.isBlock(e.parentNode)||o>0||o===0&&s(e))return}else if(i==1){n=e.childNodes,n.length==1&&n[0]&&n[0].nodeType==1&&n[0].getAttribute("data-mce-type")=="bookmark"&&e.parentNode.insertBefore(n[0],e);if(n.length||/^(br|hr|input|img)$/i.test(e.nodeName))return}r.remove(e)}return e}var r=this,i=r.createRng(),s,o,u;if(e&&t)return i.setStart(e.parentNode,r.nodeIndex(e)),i.setEnd(t.parentNode,r.nodeIndex(t)),s=i.extractContents(),i=r.createRng(),i.setStart(t.parentNode,r.nodeIndex(t)+1),i.setEnd(e.parentNode,r.nodeIndex(e)+1),o=i.extractContents(),u=e.parentNode,u.insertBefore(a(s),e),n?u.replaceChild(n,t):u.insertBefore(t,e),u.insertBefore(a(o),e),r.remove(e),n||t},bind:function(e,t,n,r){var i=this;if(f.isArray(e)){var s=e.length;while(s--)e[s]=i.bind(e[s],t,n,r);return e}return i.settings.collect&&(e===i.doc||e===i.win)&&i.boundEvents.push([e,t,n,r]),i.events.bind(e,t,n,r||i)},unbind:function(e,t,n){var r=this,i;if(f.isArray(e)){i=e.length;while(i--)e[i]=r.unbind(e[i],t,n);return e}if(r.boundEvents&&(e===r.doc||e===r.win)){i=r.boundEvents.length;while(i--){var s=r.boundEvents[i];e==s[0]&&(!t||t==s[1])&&(!n||n==s[2])&&this.events.unbind(s[0],s[1],s[2])}}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return!e||e.nodeType!=1?null:(t=e.getAttribute("data-mce-contenteditable"),t&&t!=="inherit"?t:e.contentEditable!=="inherit"?e.contentEditable:null)},getContentEditableParent:function(e){var t=this.getRoot(),n=null;for(;e&&e!==t;e=e.parentNode){n=this.getContentEditable(e);if(n!==null)break}return n},destroy:function(){var t=this;if(t.boundEvents){var n=t.boundEvents.length;while(n--){var r=t.boundEvents[n];this.events.unbind(r[0],r[1],r[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){while(e){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e){typeof i=="string"&&(i=function(e){return r.is(e,t)});for(e=e[n];e;e=e[n])if(i(e))return e}return null}},b.DOM=new b(document),b}),i("tinymce/dom/ScriptLoader",["tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t){function s(){function h(e,t){function o(){r.remove(s),i&&(i.onreadystatechange=i.onload=i=null),t()}function u(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+e)}var r=n,i,s;s=r.uniqueId(),i=document.createElement("script"),i.id=s,i.type="text/javascript",i.src=e,"onreadystatechange"in i?i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&o()}:i.onload=o,i.onerror=u,(document.getElementsByTagName("head")[0]||document.body).appendChild(i)}var e=0,t=1,s=2,o={},u=[],a={},f=[],l=0,c;this.isDone=function(e){return o[e]==s},this.markDone=function(e){o[e]=s},this.add=this.load=function(t,n,r){var i=o[t];i==c&&(u.push(t),o[t]=e),n&&(a[t]||(a[t]=[]),a[t].push({func:n,scope:r||this}))},this.loadQueue=function(e,t){this.loadScripts(u,e,t)},this.loadScripts=function(e,n,u){function d(e){r(a[e],function(e){e.func.call(e.scope)}),a[e]=c}var p;f.push({func:n,scope:u||this}),p=function(){var n=i(e);e.length=0,r(n,function(e){if(o[e]==s){d(e);return}o[e]!=t&&(o[e]=t,l++,h(e,function(){o[e]=s,l--,d(e),p()}))}),l||(r(f,function(e){e.func.call(e.scope)}),f.length=0)},p()}}var n=e.DOM,r=t.each,i=t.grep;return s.ScriptLoader=new s,s}),i("tinymce/AddOnManager",["tinymce/dom/ScriptLoader","tinymce/util/Tools"],function(e,n){function i(){var e=this;e.items=[],e.urls={},e.lookup={}}var r=n.each;return i.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,n){var r=i.language;if(r&&i.languageLoad!==!1){if(n){n=","+n+",";if(n.indexOf(","+r.substr(0,2)+",")!=-1)r=r.substr(0,2);else if(n.indexOf(","+r+",")==-1)return}e.ScriptLoader.add(this.urls[t]+"/langs/"+r+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return typeof t=="object"?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var i=this.urls[t];r(n,function(t){e.ScriptLoader.add(i+"/"+t)})},load:function(n,s,o,u){function l(){var i=a.dependencies(n);r(i,function(e){var n=a.createUrl(s,e);a.load(n.resource,n,t,t)}),o&&(u?o.call(u):o.call(e))}var a=this,f=s;if(a.urls[n])return;typeof s=="object"&&(f=s.prefix+s.resource+s.suffix),f.indexOf("/")!==0&&f.indexOf("://")==-1&&(f=i.baseURL+"/"+f),a.urls[n]=f.substring(0,f.lastIndexOf("/")),a.lookup[n]?l():e.ScriptLoader.add(f,l,u)}},i.PluginManager=new i,i.ThemeManager=new i,i}),i("tinymce/dom/RangeUtils",["tinymce/util/Tools","tinymce/dom/TreeWalker"],function(e,t){function r(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e}function i(e){this.walk=function(t,i){function m(e){var t;return t=e[0],t.nodeType===3&&t===s&&o>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],a===0&&e.length>0&&t===u&&t.nodeType===3&&e.splice(e.length-1,1),e}function g(e,t,n){var r=[];for(;e&&e!=n;e=e[t])r.push(e);return r}function y(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function b(e,t,n){var r=n?"nextSibling":"previousSibling";for(h=e,p=h.parentNode;h&&h!=t;h=p)p=h.parentNode,d=g(h==e?h:h[r],r),d.length&&(n||d.reverse(),i(m(d)))}var s=t.startContainer,o=t.startOffset,u=t.endContainer,a=t.endOffset,f,l,c,h,p,d,v;v=e.select("td.mce-item-selected,th.mce-item-selected");if(v.length>0){n(v,function(e){i([e])});return}s.nodeType==1&&s.hasChildNodes()&&(s=s.childNodes[o]),u.nodeType==1&&u.hasChildNodes()&&(u=r(u,a));if(s==u)return i(m([s]));f=e.findCommonAncestor(s,u);for(h=s;h;h=h.parentNode){if(h===u)return b(s,f,!0);if(h===f)break}for(h=u;h;h=h.parentNode){if(h===s)return b(u,f);if(h===f)break}l=y(s,f)||s,c=y(u,f)||u,b(s,l,!0),d=g(l==s?l:l.nextSibling,"nextSibling",c==u?c.nextSibling:c),d.length&&i(m(d)),b(u,c)},this.split=function(e){function s(e,t){return e.splitText(t)}var t=e.startContainer,n=e.startOffset,r=e.endContainer,i=e.endOffset;return t==r&&t.nodeType==3?n>0&&n<t.nodeValue.length&&(r=s(t,n),t=r.previousSibling,i>n?(i-=n,t=r=s(r,i).previousSibling,i=r.nodeValue.length,n=0):i=0):(t.nodeType==3&&n>0&&n<t.nodeValue.length&&(t=s(t,n),n=0),r.nodeType==3&&i>0&&i<r.nodeValue.length&&(r=s(r,i).previousSibling,i=r.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:i}},this.normalize=function(n){function s(s){function d(n,r){var i=new t(n,e.getParent(n.parentNode,e.isBlock)||f);while(n=i[r?"prev":"next"]())if(n.nodeName==="BR")return!0}function v(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function m(n,s){var a,h,d;s=s||o,d=e.getParent(s.parentNode,e.isBlock)||f;if(n&&s.nodeName=="BR"&&p&&e.isEmpty(d)){o=s.parentNode,u=e.nodeIndex(s),r=!0;return}a=new t(s,d);while(l=a[n?"prev":"next"]()){if(e.getContentEditableParent(l)==="false")return;if(l.nodeType===3&&l.nodeValue.length>0){o=l,u=n?l.nodeValue.length:0,r=!0;return}if(e.isBlock(l)||c[l.nodeName.toLowerCase()])return;h=l}i&&h&&(o=h,r=!0,u=0)}var o,u,a,f=e.getRoot(),l,c,h,p;o=n[(s?"start":"end")+"Container"],u=n[(s?"start":"end")+"Offset"],p=o.nodeType==1&&u===o.childNodes.length,c=e.schema.getNonEmptyElements(),h=s,o.nodeType==1&&u>o.childNodes.length-1&&(h=!1),o.nodeType===9&&(o=e.getRoot(),u=0);if(o===f){if(h){l=o.childNodes[u>0?u-1:0];if(l)if(c[l.nodeName]||l.nodeName=="TABLE")return}if(o.hasChildNodes()){u=Math.min(!h&&u>0?u-1:u,o.childNodes.length-1),o=o.childNodes[u],u=0;if(o.hasChildNodes()&&!/TABLE/.test(o.nodeName)){l=o,a=new t(o,f);do{if(l.nodeType===3&&l.nodeValue.length>0){u=h?0:l.nodeValue.length,o=l,r=!0;break}if(c[l.nodeName.toLowerCase()]){u=e.nodeIndex(l),o=l.parentNode,l.nodeName=="IMG"&&!h&&u++,r=!0;break}}while(l=h?a.next():a.prev())}}}i&&(o.nodeType===3&&u===0&&m(!0),o.nodeType===1&&(l=o.childNodes[u],l||(l=o.childNodes[u-1]),l&&l.nodeName==="BR"&&!v(l,"A")&&!d(l)&&!d(l,!0)&&m(!0,l))),h&&!i&&o.nodeType===3&&u===o.nodeValue.length&&m(!1),r&&n["set"+(s?"Start":"End")](o,u)}var r,i;return i=n.collapsed,s(!0),i||s(),r&&i&&n.collapse(!0),r}}var n=e.each;return i.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},i}),i("tinymce/NodeChange",["tinymce/dom/RangeUtils"],function(e){return function(t){function i(e){var n,i;i=t.$(e).parentsUntil(t.getBody()).add(e);if(i.length===r.length){for(n=i.length;n>=0;n--)if(i[n]!==r[n])break;if(n===-1)return r=i,!0}return r=i,!1}var n,r=[];"onselectionchange"in t.getDoc()||t.on("NodeChange Click MouseUp KeyUp Focus",function(r){var i,s;i=t.selection.getRng(),s={startContainer:i.startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset},(r.type=="nodechange"||!e.compareRanges(s,n))&&t.fire("SelectionChange"),n=s}),t.on("contextmenu",function(){t.fire("SelectionChange")}),t.on("SelectionChange",function(){var e=t.selection.getStart(!0);!t.selection.isCollapsed()&&!i(e)&&t.dom.isChildOf(e,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("MouseUp",function(e){e.isDefaultPrevented()||setTimeout(function(){t.nodeChanged()},0)}),this.nodeChanged=function(e){var n=t.selection,r,i,s;t.initialized&&n&&!t.settings.disable_nodechange&&!t.settings.readonly&&(s=t.getBody(),r=n.getStart()||s,r=r.ownerDocument!=t.getDoc()?t.getBody():r,r.nodeName=="IMG"&&n.isCollapsed()&&(r=r.parentNode),i=[],t.dom.getParent(r,function(e){if(e===s)return!0;i.push(e)}),e=e||{},e.element=r,e.parents=i,t.fire("NodeChange",e))}}}),i("tinymce/html/Node",[],function(){function n(e,t,n){var r,i,s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){r=e[o];if(r)return r;for(i=e.parent;i&&i!==t;i=i.parent){r=i[o];if(r)return r}}}function r(e,t){this.name=e,this.type=t,t===1&&(this.attributes=[],this.attributes.map={})}var e=/^[ \t\r\n]*$/,t={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return r.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n=this,r,i,s;if(typeof e!="string"){for(i in e)n.attr(i,e[i]);return n}if(r=n.attributes){if(t!==s){if(t===null){if(e in r.map){delete r.map[e],i=r.length;while(i--)if(r[i].name===e)return r=r.splice(i,1),n}return n}if(e in r.map){i=r.length;while(i--)if(r[i].name===e){r[i].value=t;break}}else r.push({name:e,value:t});return r.map[e]=t,n}return r.map[e]}},clone:function(){var e=this,t=new r(e.name,e.type),n,i,s,o,u;if(s=e.attributes){u=[],u.map={};for(n=0,i=s.length;n<i;n++)o=s[n],o.name!=="id"&&(u[u.length]={name:o.name,value:o.value},u.map[o.name]=o.value);t.attributes=u}return t.value=e.value,t.shortEnded=e.shortEnded,t},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e=this,t,n;for(t=e.firstChild;t;)n=t.next,e.insert(t,e,!0),t=n;e.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t=this,n;return e.parent&&e.remove(),n=t.lastChild,n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(e){var t=this,r,i=[];for(r=t.firstChild;r;r=n(r,t))r.name===e&&i.push(r);return i},empty:function(){var e=this,t,r,i;if(e.firstChild){t=[];for(i=e.firstChild;i;i=n(i,e))t.push(i);r=t.length;while(r--)i=t[r],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return e.firstChild=e.lastChild=null,e},isEmpty:function(t){var r=this,i=r.firstChild,s,o;if(i)do{if(i.type===1){if(i.attributes.map["data-mce-bogus"])continue;if(t[i.name])return!1;s=i.attributes.length;while(s--){o=i.attributes[s].name;if(o==="name"||o.indexOf("data-mce-bookmark")===0)return!1}}if(i.type===8)return!1;if(i.type===3&&!e.test(i.value))return!1}while(i=n(i,r));return!0},walk:function(e){return n(this,null,e)}},r.create=function(e,n){var i,s;i=new r(e,t[e]||1);if(n)for(s in n)i.attr(s,n[s]);return i},r}),i("tinymce/html/Schema",["tinymce/util/Tools"],function(e){function a(e,t){return e?e.split(t||" "):[]}function f(e){function h(e,t,i){function c(e,t){var n={},r,i;for(r=0,i=e.length;r<i;r++)n[e[r]]=t||{};return n}var o,u,f,l=arguments;i=i||[],t=t||"",typeof i=="string"&&(i=a(i));for(u=3;u<l.length;u++)typeof l[u]=="string"&&(l[u]=a(l[u])),i.push.apply(i,l[u]);e=a(e),o=e.length;while(o--)f=[].concat(s,a(t)),r[e[o]]={attributes:c(f),attributesOrder:f,children:c(i,n)}}function p(e,t){var n,i,s,o;e=a(e),n=e.length,t=a(t);while(n--){i=r[e[n]];for(s=0,o=t.length;s<o;s++)i.attributes[t[s]]={},i.attributesOrder.push(t[s])}}var r={},s,o,u,f,l,c;return t[e]?t[e]:(s=a("id accesskey class dir lang style tabindex title"),o=a("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),u=a("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),e!="html4"&&(s.push.apply(s,a("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),o.push.apply(o,a("article aside details dialog figure header footer hgroup section nav")),u.push.apply(u,a("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),e!="html5-strict"&&(s.push("xml:lang"),c=a("acronym applet basefont big font strike tt"),u.push.apply(u,c),i(c,function(e){h(e,"",u)}),l=a("center dir isindex noframes"),o.push.apply(o,l),f=[].concat(o,u),i(l,function(e){h(e,"",f)})),f=f||[].concat(o,u),h("html","manifest","head body"),h("head","","base command link meta noscript script style title"),h("title hr noscript br"),h("base","href target"),h("link","href rel media hreflang type sizes hreflang"),h("meta","name http-equiv content charset"),h("style","media type scoped"),h("script","src async defer type charset"),h("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",f),h("address dt dd div caption","",f),h("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",u),h("blockquote","cite",f),h("ol","reversed start type","li"),h("ul","","li"),h("li","value",f),h("dl","","dt dd"),h("a","href target rel media hreflang type",u),h("q","cite",u),h("ins del","cite datetime",f),h("img","src alt usemap ismap width height"),h("iframe","src name width height",f),h("embed","src type width height"),h("object","data type typemustmatch name usemap form width height",f,"param"),h("param","name value"),h("map","name",f,"area"),h("area","alt coords shape href target rel media hreflang type"),h("table","border","caption colgroup thead tfoot tbody tr"+(e=="html4"?" col":"")),h("colgroup","span","col"),h("col","span"),h("tbody thead tfoot","","tr"),h("tr","","td th"),h("td","colspan rowspan headers",f),h("th","colspan rowspan headers scope abbr",f),h("form","accept-charset action autocomplete enctype method name novalidate target",f),h("fieldset","disabled form name",f,"legend"),h("label","form for",u),h("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),h("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e=="html4"?f:u),h("select","disabled form multiple name required size","option optgroup"),h("optgroup","disabled label","option"),h("option","disabled label selected value"),h("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),h("menu","type label",f,"li"),h("noscript","",f),e!="html4"&&(h("wbr"),h("ruby","",u,"rt rp"),h("figcaption","",f),h("mark rt rp summary bdi","",u),h("canvas","width height",f),h("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",f,"track source"),h("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",f,"track source"),h("source","src type media"),h("track","kind src srclang label default"),h("datalist","",u,"option"),h("article section nav aside header footer","",f),h("hgroup","","h1 h2 h3 h4 h5 h6"),h("figure","",f,"figcaption"),h("time","datetime",u),h("dialog","open",f),h("command","type label icon disabled checked radiogroup command"),h("output","for form name",u),h("progress","value max",u),h("meter","value min max low high optimum",u),h("details","open",f,"summary"),h("keygen","autofocus challenge disabled form keytype name")),e!="html5-strict"&&(p("script","language xml:space"),p("style","xml:space"),p("object","declare classid code codebase codetype archive standby align border hspace vspace"),p("embed","align name hspace vspace"),p("param","valuetype type"),p("a","charset name rev shape coords"),p("br","clear"),p("applet","codebase archive code object alt name width height align hspace vspace"),p("img","name longdesc align border hspace vspace"),p("iframe","longdesc frameborder marginwidth marginheight scrolling align"),p("font basefont","size color face"),p("input","usemap align"),p("select","onchange"),p("textarea"),p("h1 h2 h3 h4 h5 h6 div p legend caption","align"),p("ul","type compact"),p("li","type"),p("ol dl menu dir","compact"),p("pre","width xml:space"),p("hr","align noshade size width"),p("isindex","prompt"),p("table","summary width frame rules cellspacing cellpadding align bgcolor"),p("col","width align char charoff valign"),p("colgroup","width align char charoff valign"),p("thead","align char charoff valign"),p("tr","align char charoff valign bgcolor"),p("th","axis align char charoff valign nowrap bgcolor width height"),p("form","accept"),p("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),p("tfoot","align char charoff valign"),p("tbody","align char charoff valign"),p("area","nohref"),p("body","background bgcolor text link vlink alink")),e!="html4"&&(p("input button select textarea","autofocus"),p("input textarea","placeholder"),p("a","download"),p("link script img","crossorigin"),p("iframe","sandbox seamless allowfullscreen")),i(a("a form meter progress dfn"),function(e){r[e]&&delete r[e].children[e]}),delete r.caption.children.table,t[e]=r,r)}function l(e,t){var n;return e&&(n={},typeof e=="string"&&(e={"*":e}),i(e,function(e,i){n[i]=t=="map"?r(e,/[, ]/):o(e,/[, ]/)})),n}var t={},n={},r=e.makeMap,i=e.each,s=e.extend,o=e.explode,u=e.inArray;return function(e){function L(n,i,o){var u=e[n];return u?u=r(u,/[, ]/,r(u.toUpperCase(),/[, ]/)):(u=t[n],u||(u=r(i," ",r(i.toUpperCase()," ")),u=s(u,o),t[n]=u)),u}function A(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function O(e){var t,n,i,s,o,f,l,h,d,v,m,g,y,b,w,E,S,x,T,N=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,C=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,k=/[*?+]/;if(e){e=a(e,","),c["@"]&&(E=c["@"].attributes,S=c["@"].attributesOrder);for(t=0,n=e.length;t<n;t++){o=N.exec(e[t]);if(o){b=o[1],d=o[2],w=o[3],h=o[5],g={},y=[],f={attributes:g,attributesOrder:y},b==="#"&&(f.paddEmpty=!0),b==="-"&&(f.removeEmpty=!0),o[4]==="!"&&(f.removeEmptyAttrs=!0);if(E){for(x in E)g[x]=E[x];y.push.apply(y,S)}if(h){h=a(h,"|");for(i=0,s=h.length;i<s;i++){o=C.exec(h[i]);if(o){l={},m=o[1],v=o[2].replace(/::/g,":"),b=o[3],T=o[4],m==="!"&&(f.attributesRequired=f.attributesRequired||[],f.attributesRequired.push(v),l.required=!0);if(m==="-"){delete g[v],y.splice(u(y,v),1);continue}b&&(b==="="&&(f.attributesDefault=f.attributesDefault||[],f.attributesDefault.push({name:v,value:T}),l.defaultValue=T),b===":"&&(f.attributesForced=f.attributesForced||[],f.attributesForced.push({name:v,value:T}),l.forcedValue=T),b==="<"&&(l.validValues=r(T,"?"))),k.test(v)?(f.attributePatterns=f.attributePatterns||[],l.pattern=A(v),f.attributePatterns.push(l)):(g[v]||y.push(v),g[v]=l)}}}!E&&d=="@"&&(E=g,S=y),w&&(f.outputName=d,c[w]=f),k.test(d)?(f.pattern=A(d),p.push(f)):c[d]=f}}}}function M(e){c={},p=[],O(e),i(m,function(e,t){h[t]=e.children})}function _(e){var n=/^(~)?(.+)$/;e&&(t.text_block_elements=t.block_elements=null,i(a(e,","),function(e){var t=n.exec(e),r=t[1]==="~",o=r?"span":"div",u=t[2];h[u]=h[o],C[u]=o,r||(S[u.toUpperCase()]={},S[u]={});if(!c[u]){var a=c[o];a=s({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,c[u]=a}i(h,function(e,t){e[o]&&(h[t]=e=s({},h[t]),e[u]=e[o])})}))}function D(e){var t=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&i(a(e,","),function(e){var n=t.exec(e),r,o;n&&(o=n[1],o?r=h[n[2]]:r=h[n[2]]={"#comment":{}},r=h[n[2]],i(a(n[3],"|"),function(e){o==="-"?(h[n[2]]=r=s({},h[n[2]]),delete r[e]):r[e]={}}))})}function P(e){var t=c[e],n;if(t)return t;n=p.length;while(n--){t=p[n];if(t.pattern.test(e))return t}}var n=this,c={},h={},p=[],d,v,m,g,y,b,w,E,S,x,T,N,C={},k={};e=e||{},m=f(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),d=l(e.valid_styles),v=l(e.invalid_styles,"map"),E=l(e.valid_classes,"map"),g=L("whitespace_elements","pre script noscript style textarea video audio iframe object"),y=L("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=L("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),w=L("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),x=L("non_empty_elements","td th iframe video audio object script",b),T=L("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),S=L("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",T),N=L("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),i((e.special||"script noscript style textarea").split(" "),function(e){k[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?M(e.valid_elements):(i(m,function(e,t){c[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},h[t]=e.children}),e.schema!="html5"&&i(a("strong/b em/i"),function(e){e=a(e,"/"),c[e[1]].outputName=e[0]}),c.img.attributesDefault=[{name:"alt",value:""}],i(a("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){c[e]&&(c[e].removeEmpty=!0)}),i(a("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){c[e].paddEmpty=!0}),i(a("span"),function(e){c[e].removeEmptyAttrs=!0})),_(e.custom_elements),D(e.valid_children),O(e.extended_valid_elements),D("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&i(o(e.invalid_elements),function(e){c[e]&&delete c[e]}),P("span")||O("span[!data-mce-type|*]"),n.children=h,n.getValidStyles=function(){return d},n.getInvalidStyles=function(){return v},n.getValidClasses=function(){return E},n.getBoolAttrs=function(){return w},n.getBlockElements=function(){return S},n.getTextBlockElements=function(){return T},n.getTextInlineElements=function(){return N},n.getShortEndedElements=function(){return b},n.getSelfClosingElements=function(){return y},n.getNonEmptyElements=function(){return x},n.getWhiteSpaceElements=function(){return g},n.getSpecialElements=function(){return k},n.isValidChild=function(e,t){var n=h[e];return!!n&&!!n[t]},n.isValid=function(e,t){var n,r,i=P(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;n=i.attributePatterns;if(n){r=n.length;while(r--)if(n[r].pattern.test(e))return!0}}return!1},n.getElementRule=P,n.getCustomElements=function(){return C},n.addValidElements=O,n.setValidElements=M,n.addCustomElements=_,n.addValidChildren=D,n.elements=c}}),i("tinymce/html/SaxParser",["tinymce/html/Schema","tinymce/html/Entities","tinymce/util/Tools"],function(e,t,n){function i(e,t,n){var r=1,i,s,o,u;u=e.getShortEndedElements(),o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,o.lastIndex=i=n;while(s=o.exec(t)){i=o.lastIndex;if(s[1]==="/")r--;else if(!s[1]){if(s[2]in u)continue;r++}if(r===0)break}return i}function s(s,o){function a(){}var u=this;s=s||{},u.schema=o=o||new e,s.fix_self_closing!==!1&&(s.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(u[e]=s[e]||a)}),u.parse=function(e){function z(e){var t,n;t=c.length;while(t--)if(c[t].name===e)break;if(t>=0){for(n=c.length-1;n>=t;n--)e=c[n],e.valid&&r.end(e.name);c.length=t}}function W(e,t,n,r,i){var o,u,a=/[\s\u0000-\u001F]+/g;t=t.toLowerCase(),n=t in b?t:F(n||r||i||"");if(E&&!m&&t.indexOf("data-")!==0){o=C[t];if(!o&&k){u=k.length;while(u--){o=k[u];if(o.pattern.test(t))break}u===-1&&(o=null)}if(!o)return;if(o.validValues&&!(n in o.validValues))return}if(q[t]&&!s.allow_script_urls){var f=n.replace(a,"");try{f=decodeURIComponent(f)}catch(l){f=unescape(f)}if(R.test(f))return;if(!s.allow_html_data_urls&&U.test(f)&&!/^data:image\//i.test(f))return}h.map[t]=n,h.push({name:t,value:n})}var r=this,u,a=0,f,l,c=[],h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j=0,F=t.decode,I,q=n.makeMap("src,href,data,background,formaction,poster"),R=/((java|vb)script|mhtml):/i,U=/^data:/i;D=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),P=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,y=o.getShortEndedElements(),_=s.self_closing_elements||o.getSelfClosingElements(),b=o.getBoolAttrs(),E=s.validate,g=s.remove_internals,I=s.fix_self_closing,H=o.getSpecialElements();while(u=D.exec(e)){a<u.index&&r.text(F(e.substr(a,u.index-a)));if(f=u[6])f=f.toLowerCase(),f.charAt(0)===":"&&(f=f.substr(1)),z(f);else if(f=u[7]){f=f.toLowerCase(),f.charAt(0)===":"&&(f=f.substr(1)),w=f in y,I&&_[f]&&c.length>0&&c[c.length-1].name===f&&z(f);if(!E||(S=o.getElementRule(f))){x=!0,E&&(C=S.attributes,k=S.attributePatterns),(N=u[8])?(m=N.indexOf("data-mce-type")!==-1,m&&g&&(x=!1),h=[],h.map={},N.replace(P,W)):(h=[],h.map={});if(E&&!m){L=S.attributesRequired,A=S.attributesDefault,O=S.attributesForced,M=S.removeEmptyAttrs,M&&!h.length&&(x=!1);if(O){p=O.length;while(p--)T=O[p],v=T.name,B=T.value,B==="{$uid}"&&(B="mce_"+j++),h.map[v]=B,h.push({name:v,value:B})}if(A){p=A.length;while(p--)T=A[p],v=T.name,v in h.map||(B=T.value,B==="{$uid}"&&(B="mce_"+j++),h.map[v]=B,h.push({name:v,value:B}))}if(L){p=L.length;while(p--)if(L[p]in h.map)break;p===-1&&(x=!1)}if(T=h.map["data-mce-bogus"]){if(T==="all"){a=i(o,e,D.lastIndex),D.lastIndex=a;continue}x=!1}}x&&r.start(f,h,w)}else x=!1;if(l=H[f]){l.lastIndex=a=u.index+u[0].length,(u=l.exec(e))?(x&&(d=e.substr(a,u.index-a)),a=u.index+u[0].length):(d=e.substr(a),a=e.length),x&&(d.length>0&&r.text(d,!0),r.end(f)),D.lastIndex=a;continue}w||(!N||N.indexOf("/")!=N.length-1?c.push({name:f,valid:x}):x&&r.end(f))}else(f=u[1])?(f.charAt(0)===">"&&(f=" "+f),!s.allow_conditional_comments&&f.substr(0,3)==="[if"&&(f=" "+f),r.comment(f)):(f=u[2])?r.cdata(f):(f=u[3])?r.doctype(f):(f=u[4])&&r.pi(f,u[5]);a=u.index+u[0].length}a<e.length&&r.text(F(e.substr(a)));for(p=c.length-1;p>=0;p--)f=c[p],f.valid&&r.end(f.name)}}var r=n.each;return s.findEndTag=i,s}),i("tinymce/html/DomParser",["tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/util/Tools"],function(e,t,n,r){var i=r.makeMap,s=r.each,o=r.explode,u=r.extend;return function(r,a){function d(t){var n,r,s,o,u,l,c,h,p,d,v,m,g,y;v=i("tr,td,th,tbody,thead,tfoot,table"),d=a.getNonEmptyElements(),m=a.getTextBlockElements();for(n=0;n<t.length;n++){r=t[n];if(!r.parent||r.fixed)continue;if(m[r.name]&&r.parent.name=="li"){g=r.next;while(g){if(!m[g.name])break;g.name="li",g.fixed=!0,r.parent.insert(g,r.parent),g=g.next}r.unwrap(r);continue}o=[r];for(s=r.parent;s&&!a.isValidChild(s.name,r.name)&&!v[s.name];s=s.parent)o.push(s);if(s&&o.length>1){o.reverse(),u=l=f.filterNode(o[0].clone());for(p=0;p<o.length-1;p++){a.isValidChild(l.name,o[p].name)?(c=f.filterNode(o[p].clone()),l.append(c)):c=l;for(h=o[p].firstChild;h&&h!=o[p+1];)y=h.next,c.append(h),h=y;l=c}u.isEmpty(d)?s.insert(r,o[0],!0):(s.insert(u,o[0],!0),s.insert(r,u)),s=o[0],(s.isEmpty(d)||s.firstChild===s.lastChild&&s.firstChild.name==="br")&&s.empty().remove()}else if(r.parent){if(r.name==="li"){g=r.prev;if(!g||g.name!=="ul"&&g.name!=="ul"){g=r.next;if(!g||g.name!=="ul"&&g.name!=="ul"){r.wrap(f.filterNode(new e("ul",1)));continue}g.insert(r,g.firstChild,!0);continue}g.append(r);continue}a.isValidChild(r.parent.name,"div")&&a.isValidChild("div",r.name)?r.wrap(f.filterNode(new e("div",1))):r.name==="style"||r.name==="script"?r.empty().remove():r.unwrap()}}}var f=this,l={},c=[],h={},p={};r=r||{},r.validate="validate"in r?r.validate:!0,r.root_name=r.root_name||"body",f.schema=a=a||new t,f.filterNode=function(e){var t,n,r;n in l&&(r=h[n],r?r.push(e):h[n]=[e]),t=c.length;while(t--)n=c[t].name,n in e.attributes.map&&(r=p[n],r?r.push(e):p[n]=[e]);return e},f.addNodeFilter=function(e,t){s(o(e),function(e){var n=l[e];n||(l[e]=n=[]),n.push(t)})},f.addAttributeFilter=function(e,t){s(o(e),function(e){var n;for(n=0;n<c.length;n++)if(c[n].name===e){c[n].callbacks.push(t);return}c.push({name:e,callbacks:[t]})})},f.parse=function(t,s){function H(){function i(t){t&&(e=t.firstChild,e&&e.type==3&&(e.value=e.value.replace(N,"")),e=t.lastChild,e&&e.type==3&&(e.value=e.value.replace(L,"")))}var e=f.firstChild,t,n;if(!a.isValidChild(f.name,P.toLowerCase()))return;while(e)t=e.next,e.type==3||e.type==1&&e.name!=="p"&&!T[e.name]&&!e.attr("data-mce-type")?n?n.append(e):(n=B(P,1),n.attr(r.forced_root_block_attrs),f.insert(n,e),n.append(e)):(i(n),n=null),e=t;i(n)}function B(t,n){var r=new e(t,n),i;return t in l&&(i=h[t],i?i.push(r):h[t]=[r]),r}function j(e){var t,n,r;for(t=e.prev;t&&t.type===3;)n=t.value.replace(L,""),n.length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}function F(e){var t,n={};for(t in e)t!=="li"&&t!="p"&&(n[t]=e[t]);return n}var o,f,v,m,g,y,b,w,E,S,x,T,N,C=[],k,L,A,O,M,_,D,P;s=s||{},h={},p={},T=u(i("script,style,head,html,body,title,meta,param"),a.getBlockElements()),D=a.getNonEmptyElements(),_=a.children,x=r.validate,P="forced_root_block"in s?s.forced_root_block:r.forced_root_block,M=a.getWhiteSpaceElements(),N=/^[ \t\r\n]+/,L=/[ \t\r\n]+$/,A=/[ \t\r\n]+/g,O=/^[ \t\r\n]+$/,o=new n({validate:x,allow_script_urls:r.allow_script_urls,allow_conditional_comments:r.allow_conditional_comments,self_closing_elements:F(a.getSelfClosingElements()),cdata:function(e){v.append(B("#cdata",4)).value=e},text:function(e,t){var n;k||(e=e.replace(A," "),v.lastChild&&T[v.lastChild.name]&&(e=e.replace(N,""))),e.length!==0&&(n=B("#text",3),n.raw=!!t,v.append(n).value=e)},comment:function(e){v.append(B("#comment",8)).value=e},pi:function(e,t){v.append(B(e,7)).value=t,j(v)},doctype:function(e){var t;t=v.append(B("#doctype",10)),t.value=e,j(v)},start:function(e,t,n){var r,i,s,o,u;s=x?a.getElementRule(e):{};if(s){r=B(s.outputName||e,1),r.attributes=t,r.shortEnded=n,v.append(r),u=_[v.name],u&&_[r.name]&&!u[r.name]&&C.push(r),i=c.length;while(i--)o=c[i].name,o in t.map&&(E=p[o],E?E.push(r):p[o]=[r]);T[e]&&j(r),n||(v=r),!k&&M[e]&&(k=!0)}},end:function(t){var n,r,i,s,o;r=x?a.getElementRule(t):{};if(r){if(T[t]&&!k){n=v.firstChild;if(n&&n.type===3){i=n.value.replace(N,"");if(i.length>0)n.value=i,n=n.next;else{s=n.next,n.remove(),n=s;while(n&&n.type===3){i=n.value,s=n.next;if(i.length===0||O.test(i))n.remove(),n=s;n=s}}}n=v.lastChild;if(n&&n.type===3){i=n.value.replace(L,"");if(i.length>0)n.value=i,n=n.prev;else{s=n.prev,n.remove(),n=s;while(n&&n.type===3){i=n.value,s=n.prev;if(i.length===0||O.test(i))n.remove(),n=s;n=s}}}}k&&M[t]&&(k=!1);if(r.removeEmpty||r.paddEmpty)if(v.isEmpty(D))if(r.paddEmpty)v.empty().append(new e("#text","3")).value=" ";else if(!v.attributes.map.name&&!v.attributes.map.id){o=v.parent,T[v.name]?v.empty().remove():v.unwrap(),v=o;return}v=v.parent}}},a),f=v=new e(s.context||r.root_name,11),o.parse(t),x&&C.length&&(s.context?s.invalid=!0:d(C)),P&&(f.name=="body"||s.isRootContent)&&H();if(!s.invalid){for(S in h){E=l[S],m=h[S],b=m.length;while(b--)m[b].parent||m.splice(b,1);for(g=0,y=E.length;g<y;g++)E[g](m,S,s)}for(g=0,y=c.length;g<y;g++){E=c[g];if(E.name in p){m=p[E.name],b=m.length;while(b--)m[b].parent||m.splice(b,1);for(b=0,w=E.callbacks.length;b<w;b++)E.callbacks[b](m,E.name,s)}}}return f},r.remove_trailing_brs&&f.addNodeFilter("br",function(t){var n,r=t.length,i,s=u({},a.getBlockElements()),o=a.getNonEmptyElements(),f,l,c,h,p,d;s.body=1;for(n=0;n<r;n++){i=t[n],f=i.parent;if(s[i.parent.name]&&i===f.lastChild){c=i.prev;while(c){h=c.name;if(h!=="span"||c.attr("data-mce-type")!=="bookmark"){if(h!=="br")break;if(h==="br"){i=null;break}}c=c.prev}i&&(i.remove(),f.isEmpty(o)&&(p=a.getElementRule(f.name),p&&(p.removeEmpty?f.remove():p.paddEmpty&&(f.empty().append(new e("#text",3)).value=" "))))}else{l=i;while(f&&f.firstChild===l&&f.lastChild===l){l=f;if(s[f.name])break;f=f.parent}l===f&&(d=new e("#text",3),d.value=" ",i.replace(d))}}}),r.allow_html_in_named_anchor||f.addAttributeFilter("id,name",function(e){var t=e.length,n,r,i,s;while(t--){s=e[t];if(s.name==="a"&&s.firstChild&&!s.attr("href")){i=s.parent,n=s.lastChild;do r=n.prev,i.insert(n,s),n=r;while(n)}}}),r.validate&&a.getValidClasses()&&f.addAttributeFilter("class",function(e){var t=e.length,n,r,i,s,o,u=a.getValidClasses(),f,l;while(t--){n=e[t],r=n.attr("class").split(" "),o="";for(i=0;i<r.length;i++)s=r[i],l=!1,f=u["*"],f&&f[s]&&(l=!0),f=u[n.name],!l&&f&&!f[s]&&(l=!0),l&&(o&&(o+=" "),o+=s);o.length||(o=null),n.attr("class",o)}})}}),i("tinymce/html/Writer",["tinymce/html/Entities","tinymce/util/Tools"],function(e,t){var n=t.makeMap;return function(t){var r=[],i,s,o,u,a;return t=t||{},i=t.indent,s=n(t.indent_before||""),o=n(t.indent_after||""),u=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),a=t.element_format=="html",{start:function(e,t,n){var f,l,c,h;i&&s[e]&&r.length>0&&(h=r[r.length-1],h.length>0&&h!=="\n"&&r.push("\n")),r.push("<",e);if(t)for(f=0,l=t.length;f<l;f++)c=t[f],r.push(" ",c.name,'="',u(c.value,!0),'"');!n||a?r[r.length]=">":r[r.length]=" />",n&&i&&o[e]&&r.length>0&&(h=r[r.length-1],h.length>0&&h!=="\n"&&r.push("\n"))},end:function(e){var t;r.push("</",e,">"),i&&o[e]&&r.length>0&&(t=r[r.length-1],t.length>0&&t!=="\n"&&r.push("\n"))},text:function(e,t){e.length>0&&(r[r.length]=t?e:u(e))},cdata:function(e){r.push("<![CDATA[",e,"]]>")},comment:function(e){r.push("<!--",e,"-->")},pi:function(e,t){t?r.push("<?",e," ",t,"?>"):r.push("<?",e,"?>"),i&&r.push("\n")},doctype:function(e){r.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){r.length=0},getContent:function(){return r.join("").replace(/\n$/,"")}}}}),i("tinymce/html/Serializer",["tinymce/html/Writer","tinymce/html/Schema"],function(e,t){return function(n,r){var i=this,s=new e(n);n=n||{},n.validate="validate"in n?n.validate:!0,i.schema=r=r||new t,i.writer=s,i.serialize=function(e){function o(e){var n=t[e.type],u,a,f,l,c,h,p,d,v;if(!n){u=e.name,a=e.shortEnded,f=e.attributes;if(i&&f&&f.length>1){h=[],h.map={},v=r.getElementRule(e.name);for(p=0,d=v.attributesOrder.length;p<d;p++)l=v.attributesOrder[p],l in f.map&&(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));for(p=0,d=f.length;p<d;p++)l=f[p].name,l in h.map||(c=f.map[l],h.map[l]=c,h.push({name:l,value:c}));f=h}s.start(e.name,f,a);if(!a){if(e=e.firstChild)do o(e);while(e=e.next);s.end(u)}}else n(e)}var t,i;return i=n.validate,t={3:function(e){s.text(e.value,e.raw)},8:function(e){s.comment(e.value)},7:function(e){s.pi(e.name,e.value)},10:function(e){s.doctype(e.value)},4:function(e){s.cdata(e.value)},11:function(e){if(e=e.firstChild)do o(e);while(e=e.next)}},s.reset(),e.type==1&&!n.inner?o(e):t[11](e),s.getContent()}}}),i("tinymce/dom/Serializer",["tinymce/dom/DOMUtils","tinymce/html/DomParser","tinymce/html/Entities","tinymce/html/Serializer","tinymce/html/Node","tinymce/html/Schema","tinymce/Env","tinymce/util/Tools"],function(e,t,n,r,i,s,o,u){var a=u.each,f=u.trim,l=e.DOM;return function(e,i){var u,c,h;return i&&(u=i.dom,c=i.schema),u=u||l,c=c||new s(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,h=new t(e,c),h.addAttributeFilter("data-mce-tabindex",function(e,t){var n=e.length,r;while(n--)r=e[n],r.attr("tabindex",r.attributes.map["data-mce-tabindex"]),r.attr(t,null)}),h.addAttributeFilter("src,href,style",function(t,n){var r=t.length,i,s,o="data-mce-"+n,a=e.url_converter,f=e.url_converter_scope,l;while(r--)i=t[r],s=i.attributes.map[o],s!==l?(i.attr(n,s.length>0?s:null),i.attr(o,null)):(s=i.attributes.map[n],n==="style"?s=u.serializeStyle(u.parseStyle(s),i.name):a&&(s=a.call(f,s,n,i.name)),i.attr(n,s.length>0?s:null))}),h.addAttributeFilter("class",function(e){var t=e.length,n,r;while(t--)n=e[t],r=n.attr("class"),r&&(r=n.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",r.length>0?r:null))}),h.addAttributeFilter("data-mce-type",function(e,t,n){var r=e.length,i;while(r--)i=e[r],i.attributes.map["data-mce-type"]==="bookmark"&&!n.cleanup&&i.remove()}),h.addNodeFilter("noscript",function(e){var t=e.length,r;while(t--)r=e[t].firstChild,r&&(r.value=n.decode(r.value))}),h.addNodeFilter("script,style",function(e,t){function o(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}var n=e.length,r,i,s;while(n--)r=e[n],i=r.firstChild?r.firstChild.value:"",t==="script"?(s=r.attr("type"),s&&r.attr("type",s=="mce-no/type"?null:s.replace(/^mce\-/,"")),i.length>0&&(r.firstChild.value="// <![CDATA[\n"+o(i)+"\n// ]]>")):i.length>0&&(r.firstChild.value="<!--\n"+o(i)+"\n-->")}),h.addNodeFilter("#comment",function(e){var t=e.length,n;while(t--)n=e[t],n.value.indexOf("[CDATA[")===0?(n.name="#cdata",n.type=4,n.value=n.value.replace(/^\[CDATA\[|\]\]$/g,"")):n.value.indexOf("mce:protected ")===0&&(n.name="#text",n.type=3,n.raw=!0,n.value=unescape(n.value).substr(14))}),h.addNodeFilter("xml:namespace,input",function(e,t){var n=e.length,r;while(n--)r=e[n],r.type===7?r.remove():r.type===1&&t==="input"&&!("type"in r.attributes.map)&&r.attr("type","text")}),e.fix_list_elements&&h.addNodeFilter("ul,ol",function(e){var t=e.length,n,r;while(t--)n=e[t],r=n.parent,(r.name==="ul"||r.name==="ol")&&n.prev&&n.prev.name==="li"&&n.prev.append(n)}),h.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){var n=e.length;while(n--)e[n].attr(t,null)}),{schema:c,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:function(t,n){var i=this,s,l,p,d,v;return o.ie&&u.select("script,style,select,map").length>0?(v=t.innerHTML,t=t.cloneNode(!1),u.setHTML(t,v)):t=t.cloneNode(!0),s=t.ownerDocument.implementation,s.createHTMLDocument&&(l=s.createHTMLDocument(""),a(t.nodeName=="BODY"?t.childNodes:[t],function(e){l.body.appendChild(l.importNode(e,!0))}),t.nodeName!="BODY"?t=l.body.firstChild:t=l.body,p=u.doc,u.doc=l),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,i.onPreProcess(n)),d=new r(e,c),n.content=d.serialize(h.parse(f(n.getInner?t.innerHTML:u.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||i.onPostProcess(n),p&&(u.doc=p),n.node=null,n.content},addRules:function(e){c.addValidElements(e)},setRules:function(e){c.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)}}}}),i("tinymce/dom/TridentSelection",[],function(){function e(e){function i(t,n){var r,i=0,s,o,u,a,f,l,c=-1,h;r=t.duplicate(),r.collapse(n),h=r.parentElement();if(h.ownerDocument!==e.dom.doc)return;while(h.contentEditable==="false")h=h.parentNode;if(!h.hasChildNodes())return{node:h,inside:1};u=h.children,s=u.length-1;while(i<=s){l=Math.floor((i+s)/2),a=u[l],r.moveToElementText(a),c=r.compareEndPoints(n?"StartToStart":"EndToEnd",t);if(c>0)s=l-1;else{if(!(c<0))return{node:a};i=l+1}}if(c<0){a?r.collapse(!1):(r.moveToElementText(h),r.collapse(!0),a=h,o=!0),f=0;while(r.compareEndPoints(n?"StartToStart":"StartToEnd",t)!==0){if(r.move("character",1)===0||h!=r.parentElement())break;f++}}else{r.collapse(!0),f=0;while(r.compareEndPoints(n?"StartToStart":"StartToEnd",t)!==0){if(r.move("character",-1)===0||h!=r.parentElement())break;f++}}return{node:a,position:c,offset:f,inside:o}}function s(){function c(e){var t=i(r,e),n,o,u=0,a,f,l;n=t.node,o=t.offset;if(t.inside&&!n.hasChildNodes()){s[e?"setStart":"setEnd"](n,0);return}if(o===f){s[e?"setStartBefore":"setEndAfter"](n);return}if(t.position<0){a=t.inside?n.firstChild:n.nextSibling;if(!a){s[e?"setStartAfter":"setEndAfter"](n);return}if(!o){a.nodeType==3?s[e?"setStart":"setEnd"](a,0):s[e?"setStartBefore":"setEndBefore"](a);return}while(a){if(a.nodeType==3){l=a.nodeValue,u+=l.length;if(u>=o){n=a,u-=o,u=l.length-u;break}}a=a.nextSibling}}else{a=n.previousSibling;if(!a)return s[e?"setStartBefore":"setEndBefore"](n);if(!o){n.nodeType==3?s[e?"setStart":"setEnd"](a,n.nodeValue.length):s[e?"setStartAfter":"setEndAfter"](a);return}while(a){if(a.nodeType==3){u+=a.nodeValue.length;if(u>=o){n=a,u-=o;break}}a=a.previousSibling}}s[e?"setStart":"setEnd"](n,u)}var r=e.getRng(),s=n.createRng(),o,u,a,f,l;o=r.item?r.item(0):r.parentElement();if(o.ownerDocument!=n.doc)return s;u=e.isCollapsed();if(r.item)return s.setStart(o.parentNode,n.nodeIndex(o)),s.setEnd(s.startContainer,s.startOffset+1),s;try{c(!0),u||c()}catch(h){if(h.number!=-2147024809)throw h;l=t.getBookmark(2),a=r.duplicate(),a.collapse(!0),o=a.parentElement(),u||(a=r.duplicate(),a.collapse(!1),f=a.parentElement(),f.innerHTML=f.innerHTML),o.innerHTML=o.innerHTML,t.moveToBookmark(l),r=e.getRng(),c(!0),u||c()}return s}var t=this,n=e.dom,r=!1;this.getBookmark=function(t){function o(e){var t,r,i,s,o=[];t=e.parentNode,r=n.getRoot().parentNode;while(t!=r&&t.nodeType!==9){i=t.children,s=i.length;while(s--)if(e===i[s]){o.push(s);break}e=t,t=t.parentNode}return o}function u(e){var t;t=i(r,e);if(t)return{position:t.position,offset:t.offset,indexes:o(t.node),inside:t.inside}}var r=e.getRng(),s={};return t===2&&(r.item?s.start={ctrl:!0,indexes:o(r.item(0))}:(s.start=u(!0),e.isCollapsed()||(s.end=u()))),s},this.moveToBookmark=function(e){function i(e){var t,r,i,s;t=n.getRoot();for(r=e.length-1;r>=0;r--)s=t.children,i=e[r],i<=s.length-1&&(t=s[i]);return t}function s(n){var s=e[n?"start":"end"],o,u,a,f;s&&(o=s.position>0,u=r.createTextRange(),u.moveToElementText(i(s.indexes)),f=s.offset,f!==a?(u.collapse(s.inside||o),u.moveStart("character",o?-f:f)):u.collapse(n),t.setEndPoint(n?"StartToStart":"EndToStart",u),n&&t.collapse(!0))}var t,r=n.doc.body;e.start&&(e.start.ctrl?(t=r.createControlRange(),t.addElement(i(e.start.indexes)),t.select()):(t=r.createTextRange(),s(!0),s(),t.select()))},this.addRange=function(t){function v(e){var t,s,l,p,d;l=n.create("a"),t=e?o:a,s=e?u:f,p=i.duplicate();if(t==c||t==c.documentElement)t=h,s=0;t.nodeType==3?(t.parentNode.insertBefore(l,t),p.moveToElementText(l),p.moveStart("character",s),n.remove(l),i.setEndPoint(e?"StartToStart":"EndToEnd",p)):(d=t.childNodes,d.length?(s>=d.length?n.insertAfter(l,d[d.length-1]):t.insertBefore(l,d[s]),p.moveToElementText(l)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",l=t.firstChild,p.moveToElementText(l),p.collapse(r)),i.setEndPoint(e?"StartToStart":"EndToEnd",p),n.remove(l))}var i,s,o,u,a,f,l,c=e.dom.doc,h=c.body,p,d;o=t.startContainer,u=t.startOffset,a=t.endContainer,f=t.endOffset,i=h.createTextRange();if(o==a&&o.nodeType==1){if(u==f&&!o.hasChildNodes()){if(o.canHaveHTML){l=o.previousSibling,l&&!l.hasChildNodes()&&n.isBlock(l)?l.innerHTML="&#xFEFF;":l=null,o.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",i.moveToElementText(o.lastChild),i.select(),n.doc.selection.clear(),o.innerHTML="",l&&(l.innerHTML="");return}u=n.nodeIndex(o),o=o.parentNode}if(u==f-1)try{d=o.childNodes[u],s=h.createControlRange(),s.addElement(d),s.select(),p=e.getRng();if(p.item&&d===p.item(0))return}catch(m){}}v(!0),v(),i.select()},this.getRangeAt=s}return e}),i("tinymce/util/VK",["tinymce/Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),i("tinymce/dom/ControlSelection",["tinymce/util/VK","tinymce/util/Tools","tinymce/Env"],function(e,t,n){return function(r,i){function _(e){var t=i.settings.object_resizing;return t===!1||n.iOS?!1:(typeof t!="string"&&(t="table,img,div"),e.getAttribute("data-mce-resize")==="false"?!1:i.dom.is(e,t))}function D(t){var n,r,o,l,h;n=t.screenX-p,r=t.screenY-d,E=n*c[2]+g,S=r*c[3]+y,E=E<5?5:E,S=S<5?5:S,u.nodeName=="IMG"&&i.settings.resize_img_proportional!==!1?o=!e.modifierPressed(t):o=e.modifierPressed(t)||u.nodeName=="IMG"&&c[2]*c[3]!==0,o&&(C(n)>C(r)?(S=k(E*b),E=k(S/b)):(E=k(S/b),S=k(E*b))),s.setStyles(a,{width:E,height:S}),l=c.startPos.x+n,h=c.startPos.y+r,l=l>0?l:0,h=h>0?h:0,s.setStyles(f,{left:l,top:h,display:"block"}),f.innerHTML=E+" &times; "+S,c[2]<0&&a.clientWidth<=E&&s.setStyle(a,"left",v+(g-E)),c[3]<0&&a.clientHeight<=S&&s.setStyle(a,"top",m+(y-S)),n=L.scrollWidth-A,r=L.scrollHeight-O,n+r!==0&&s.setStyles(f,{left:l-n,top:h-r}),w||(i.fire("ObjectResizeStart",{target:u,width:g,height:y}),w=!0)}function P(){function e(e,t){t&&(u.style[e]||!i.schema.isValid(u.nodeName.toLowerCase(),e)?s.setStyle(u,e,t):s.setAttrib(u,e,t))}w=!1,e("width",E),e("height",S),s.unbind(x,"mousemove",D),s.unbind(x,"mouseup",P),T!=x&&(s.unbind(T,"mousemove",D),s.unbind(T,"mouseup",P)),s.remove(a),s.remove(f),(!N||u.nodeName=="TABLE")&&H(u),i.fire("ObjectResized",{target:u,width:E,height:S}),s.setAttrib(u,"style",s.getAttrib(u,"style")),i.nodeChanged()}function H(e,t,r){var h,w,N,C,k;z(),h=s.getPos(e,L),v=h.x,m=h.y,k=e.getBoundingClientRect(),w=k.width||k.right-k.left,N=k.height||k.bottom-k.top,u!=e&&(U(),u=e,E=S=0),C=i.fire("ObjectSelected",{target:e}),_(e)&&!C.isDefaultPrevented()?o(l,function(e,i){function h(t){p=t.screenX,d=t.screenY,g=u.clientWidth,y=u.clientHeight,b=y/g,c=e,e.startPos={x:w*e[0]+v,y:N*e[1]+m},A=L.scrollWidth,O=L.scrollHeight,a=u.cloneNode(!0),s.addClass(a,"mce-clonedresizable"),s.setAttrib(a,"data-mce-bogus","all"),a.contentEditable=!1,a.unSelectabe=!0,s.setStyles(a,{left:v,top:m,margin:0}),a.removeAttribute("data-mce-selected"),L.appendChild(a),s.bind(x,"mousemove",D),s.bind(x,"mouseup",P),T!=x&&(s.bind(T,"mousemove",D),s.bind(T,"mouseup",P)),f=s.add(L,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},g+" &times; "+y)}var o,l;if(t){i==t&&h(r);return}o=s.get("mceResizeHandle"+i),o?s.show(o):(l=L,o=s.add(l,"div",{id:"mceResizeHandle"+i,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+i+"-resize; margin:0; padding:0"}),n.ie&&(o.contentEditable=!1)),e.elm||(s.bind(o,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),h(e)}),e.elm=o),s.setStyles(o,{left:w*e[0]+v-o.offsetWidth/2,top:N*e[1]+m-o.offsetHeight/2})}):B(),u.setAttribute("data-mce-selected","1")}function B(){var e,t;z(),u&&u.removeAttribute("data-mce-selected");for(e in l)t=s.get("mceResizeHandle"+e),t&&(s.unbind(t),s.remove(t))}function j(e){function i(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var t,n;if(w)return;o(s.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n=e.type=="mousedown"?e.target:r.getNode(),n=s.$(n).closest(N?"table":"table,img,hr")[0];if(i(n,L)){W(),t=r.getStart(!0);if(i(t,n)&&i(r.getEnd(!0),n))if(!N||n!=t&&t.nodeName!=="IMG"){H(n);return}}B()}function F(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function I(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function q(e){var t=e.srcElement,n,r,s,o,a,f,p;n=t.getBoundingClientRect(),f=h.clientX-n.left,p=h.clientY-n.top;for(r in l){s=l[r],o=t.offsetWidth*s[0],a=t.offsetHeight*s[1];if(C(o-f)<8&&C(a-p)<8){c=s;break}}w=!0,i.fire("ObjectResizeStart",{target:u,width:u.clientWidth,height:u.clientHeight}),i.getDoc().selection.empty(),H(t,r,h)}function R(e){var t=e.srcElement;if(t!=u){i.fire("ObjectSelected",{target:t}),U();if(t.id.indexOf("mceResizeHandle")===0){e.returnValue=!1;return}if(t.nodeName=="IMG"||t.nodeName=="TABLE")B(),u=t,F(t,"resizestart",q)}}function U(){I(u,"resizestart",q)}function z(){for(var e in l){var t=l[e];t.elm&&(s.unbind(t.elm),delete t.elm)}}function W(){try{i.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function X(e){var t;if(!N)return;t=x.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}function V(){u=a=null,N&&(U(),I(L,"controlselect",R))}var s=i.dom,o=t.each,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x=i.getDoc(),T=document,N=n.ie&&n.ie<11,C=Math.abs,k=Math.round,L=i.getBody(),A,O;l={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var M=".mce-content-body";return i.contentStyles.push(M+" div.mce-resizehandle {"+"position: absolute;"+"border: 1px solid black;"+"background: #FFF;"+"width: 5px;"+"height: 5px;"+"z-index: 10000"+"}"+M+" .mce-resizehandle:hover {"+"background: #000"+"}"+M+" img[data-mce-selected], hr[data-mce-selected] {"+"outline: 1px solid black;"+"resize: none"+"}"+M+" .mce-clonedresizable {"+"position: absolute;"+(n.gecko?"":"outline: 1px dashed black;")+"opacity: .5;"+"filter: alpha(opacity=50);"+"z-index: 10000"+"}"+M+" .mce-resize-helper {"+"background: #555;"+"background: rgba(0,0,0,0.75);"+"border-radius: 3px;"+"border: 1px;"+"color: white;"+"display: none;"+"font-family: sans-serif;"+"font-size: 12px;"+"white-space: nowrap;"+"line-height: 14px;"+"margin: 5px 10px;"+"padding: 5px;"+"position: absolute;"+"z-index: 10001"+"}"),i.on("init",function(){N?(i.on("ObjectResized",function(e){e.target.nodeName!="TABLE"&&(B(),X(e.target))}),F(L,"controlselect",R),i.on("mousedown",function(e){h=e})):(W(),n.ie>=11&&(i.on("mouseup",function(e){var t=e.target.nodeName;!w&&/^(TABLE|IMG|HR)$/.test(t)&&(i.selection.select(e.target,t=="TABLE"),i.nodeChanged())}),i.dom.bind(L,"mscontrolselect",function(e){/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),e.target.tagName=="IMG"&&window.setTimeout(function(){i.selection.select(e.target)},0))}))),i.on("nodechange ResizeEditor",j),i.on("keydown keyup",function(e){u&&u.nodeName=="TABLE"&&j(e)}),i.on("hide",B)}),i.on("remove",z),{isResizable:_,showResizeRect:H,hideResizeRect:B,updateResizeRect:j,controlSelect:X,destroy:V}}}),i("tinymce/dom/BookmarkManager",["tinymce/Env","tinymce/util/Tools"],function(e,t){function n(n){var r=n.dom;this.getBookmark=function(e,i){function p(e,n){var i=0;return t.each(r.select(e),function(e,t){e==n&&(i=t)}),i}function d(e){function t(t){var n,r,i,s=t?"start":"end";n=e[s+"Container"],r=e[s+"Offset"],n.nodeType==1&&n.nodeName=="TR"&&(i=n.childNodes,n=i[Math.min(t?r:r-1,i.length-1)],n&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))}return t(!0),t(),e}function v(){function o(e,n){var s=e[n?"startContainer":"endContainer"],o=e[n?"startOffset":"endOffset"],u=[],a,f,l=0;if(s.nodeType==3){if(i)for(a=s.previousSibling;a&&a.nodeType==3;a=a.previousSibling)o+=a.nodeValue.length;u.push(o)}else f=s.childNodes,o>=f.length&&f.length&&(l=1,o=Math.max(0,f.length-1)),u.push(r.nodeIndex(f[o],i)+l);for(;s&&s!=t;s=s.parentNode)u.push(r.nodeIndex(s,i));return u}var e=n.getRng(!0),t=r.getRoot(),s={};return s.start=o(e,!0),n.isCollapsed()||(s.end=o(e)),s}var s,o,u,a,f,l,c="&#xFEFF;",h;if(e==2)return l=n.getNode(),f=l?l.nodeName:null,f=="IMG"?{name:f,index:p(f,l)}:n.tridentSel?n.tridentSel.getBookmark(e):v();if(e)return{rng:n.getRng()};s=n.getRng(),u=r.uniqueId(),a=n.isCollapsed(),h="overflow:hidden;line-height:0px";if(s.duplicate||s.item){if(!!s.item)return l=s.item(0),f=l.nodeName,{name:f,index:p(f,l)};o=s.duplicate();try{s.collapse(),s.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_start" style="'+h+'">'+c+"</span>"),a||(o.collapse(!1),s.moveToElementText(o.parentElement()),s.compareEndPoints("StartToEnd",o)===0&&o.move("character",-1),o.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_end" style="'+h+'">'+c+"</span>"))}catch(m){return null}}else{l=n.getNode(),f=l.nodeName;if(f=="IMG")return{name:f,index:p(f,l)};o=d(s.cloneRange()),a||(o.collapse(!1),o.insertNode(r.create("span",{"data-mce-type":"bookmark",id:u+"_end",style:h},c))),s=d(s),s.collapse(!0),s.insertNode(r.create("span",{"data-mce-type":"bookmark",id:u+"_start",style:h},c))}return n.moveToBookmark({id:u,keep:1}),{id:u}},this.moveToBookmark=function(i){function c(e){var t=i[e?"start":"end"],n,r,u,a;if(t){u=t[0];for(r=o,n=t.length-1;n>=1;n--){a=r.childNodes;if(t[n]>a.length-1)return;r=a[t[n]]}r.nodeType===3&&(u=Math.min(t[0],r.nodeValue.length)),r.nodeType===1&&(u=Math.min(t[0],r.childNodes.length)),e?s.setStart(r,u):s.setEnd(r,u)}return!0}function h(n){var s=r.get(i.id+"_"+n),o,c,h,p,d=i.keep;if(s){o=s.parentNode,n=="start"?(d?(o=s.firstChild,c=1):c=r.nodeIndex(s),u=a=o,f=l=c):(d?(o=s.firstChild,c=1):c=r.nodeIndex(s),a=o,l=c);if(!d){p=s.previousSibling,h=s.nextSibling,t.each(t.grep(s.childNodes),function(e){e.nodeType==3&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});while(s=r.get(i.id+"_"+n))r.remove(s,1);p&&h&&p.nodeType==h.nodeType&&p.nodeType==3&&!e.opera&&(c=p.nodeValue.length,p.appendData(h.nodeValue),r.remove(h),n=="start"?(u=a=p,f=l=c):(a=p,l=c))}}}function p(t){return r.isBlock(t)&&!t.innerHTML&&!e.ie&&(t.innerHTML='<br data-mce-bogus="1" />'),t}var s,o,u,a,f,l;if(i)if(i.start){s=r.createRng(),o=r.getRoot();if(n.tridentSel)return n.tridentSel.moveToBookmark(i);c(!0)&&c()&&n.setRng(s)}else i.id?(h("start"),h("end"),u&&(s=r.createRng(),s.setStart(p(u),f),s.setEnd(p(a),l),n.setRng(s))):i.name?n.select(r.select(i.name)[i.index]):i.rng&&n.setRng(i.rng)}}return n.isBookmarkNode=function(e){return e&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark"},n}),i("tinymce/dom/Selection",["tinymce/dom/TreeWalker","tinymce/dom/TridentSelection","tinymce/dom/ControlSelection","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/Env","tinymce/util/Tools"],function(e,n,r,i,s,o,u){function c(e,t,i,o){var u=this;u.dom=e,u.win=t,u.serializer=i,u.editor=o,u.bookmarkManager=new s(u),u.controlSelection=new r(u,o),u.win.getSelection||(u.tridentSel=new n(u))}var a=u.each,f=u.trim,l=o.ie;return c.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();e?(r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)):(n._moveEndPoint(r,n.editor.getBody(),!0),n.setRng(r))},getContent:function(e){var n=this,r=n.getRng(),i=n.dom.create("body"),s=n.getSel(),o,u,a;return e=e||{},o=u="",e.get=!0,e.format=e.format||"html",e.selection=!0,n.editor.fire("BeforeGetContent",e),e.format=="text"?n.isCollapsed()?"":r.text||(s.toString?s.toString():""):(r.cloneContents?(a=r.cloneContents(),a&&i.appendChild(a)):r.item!==t||r.htmlText!==t?(i.innerHTML="<br>"+(r.item?r.item(0).outerHTML:r.htmlText),i.removeChild(i.firstChild)):i.innerHTML=r.toString(),/^\s/.test(i.innerHTML)&&(o=" "),/\s+$/.test(i.innerHTML)&&(u=" "),e.getInner=!0,e.content=n.isCollapsed()?"":o+n.serializer.serialize(i,e)+u,n.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n=this,r=n.getRng(),i,s=n.win.document,o,u;t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||n.editor.fire("BeforeSetContent",t),e=t.content;if(r.insertNode){e+='<span id="__caret">_</span>',r.startContainer==s&&r.endContainer==s?s.body.innerHTML=e:(r.deleteContents(),s.body.childNodes.length===0?s.body.innerHTML=e:r.createContextualFragment?r.insertNode(r.createContextualFragment(e)):(o=s.createDocumentFragment(),u=s.createElement("div"),o.appendChild(u),u.outerHTML=e,r.insertNode(o))),i=n.dom.get("__caret"),r=s.createRange(),r.setStartBefore(i),r.setEndBefore(i),n.setRng(r),n.dom.remove("__caret");try{n.setRng(r)}catch(a){}}else r.item&&(s.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(e)?(r.pasteHTML('<span id="__mce_tmp">_</span>'+e),n.dom.remove("__mce_tmp")):r.pasteHTML(e);t.no_events||n.editor.fire("SetContent",t)},getStart:function(e){var t=this,n=t.getRng(),r,i,s,o;if(n.duplicate||n.item){if(n.item)return n.item(0);s=n.duplicate(),s.collapse(1),r=s.parentElement(),r.ownerDocument!==t.dom.doc&&(r=t.dom.getRoot()),i=o=n.parentElement();while(o=o.parentNode)if(o==r){r=i;break}return r}return r=n.startContainer,r.nodeType==1&&r.hasChildNodes()&&(!e||!n.collapsed)&&(r=r.childNodes[Math.min(r.childNodes.length-1,n.startOffset)]),r&&r.nodeType==3?r.parentNode:r},getEnd:function(e){var t=this,n=t.getRng(),r,i;return n.duplicate||n.item?n.item?n.item(0):(n=n.duplicate(),n.collapse(0),r=n.parentElement(),r.ownerDocument!==t.dom.doc&&(r=t.dom.getRoot()),r&&r.nodeName=="BODY"?r.lastChild||r:r):(r=n.endContainer,i=n.endOffset,r.nodeType==1&&r.hasChildNodes()&&(!e||!n.collapsed)&&(r=r.childNodes[i>0?i-1:i]),r&&r.nodeType==3?r.parentNode:r)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n=this,r=n.dom,i=r.createRng(),s;n.lastFocusBookmark=null;if(e){if(!t&&n.controlSelection.controlSelect(e))return;s=r.nodeIndex(e),i.setStart(e.parentNode,s),i.setEnd(e.parentNode,s+1),t&&(n._moveEndPoint(i,e,!0),n._moveEndPoint(i,e)),n.setRng(i)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?t.compareEndPoints("StartToEnd",t)===0:!n||t.collapsed},collapse:function(e){var t=this,n=t.getRng(),r;n.item&&(r=n.item(0),n=t.win.document.body.createTextRange(),n.moveToElementText(r)),n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function u(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(r){return-1}}var t=this,n,r,i,s=t.win.document,o;if(!e&&t.lastFocusBookmark){var a=t.lastFocusBookmark;return a.startContainer?(r=s.createRange(),r.setStart(a.startContainer,a.startOffset),r.setEnd(a.endContainer,a.endOffset)):r=a,r}if(e&&t.tridentSel)return t.tridentSel.getRangeAt(0);try{if(n=t.getSel())n.rangeCount>0?r=n.getRangeAt(0):r=n.createRange?n.createRange():s.createRange()}catch(f){}if(l&&r&&r.setStart&&s.selection){try{o=s.selection.createRange()}catch(f){}o&&o.item&&(i=o.item(0),r=s.createRange(),r.setStartBefore(i),r.setEndAfter(i))}return r||(r=s.createRange?s.createRange():s.body.createTextRange()),r.setStart&&r.startContainer.nodeType===9&&r.collapsed&&(i=t.dom.getRoot(),r.setStart(i,0),r.setEnd(i,0)),t.selectedRange&&t.explicitRange&&(u(r.START_TO_START,r,t.selectedRange)===0&&u(r.END_TO_END,r,t.selectedRange)===0?r=t.explicitRange:(t.selectedRange=null,t.explicitRange=null)),r},setRng:function(e,t){var n=this,r;if(!e)return;if(e.select){try{e.select()}catch(i){}return}if(!n.tridentSel){r=n.getSel();if(r){n.explicitRange=e;try{r.removeAllRanges(),r.addRange(e)}catch(i){}t===!1&&r.extend&&(r.collapse(e.endContainer,e.endOffset),r.extend(e.startContainer,e.startOffset)),n.selectedRange=r.rangeCount>0?r.getRangeAt(0):null}}else if(e.cloneRange)try{n.tridentSel.addRange(e);return}catch(i){}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function a(e,t){var n=e;while(e&&e.nodeType===3&&e.length===0)e=t?e.nextSibling:e.previousSibling;return e||n}var e=this,t=e.getRng(),n,r=t.startContainer,i=t.endContainer,s=t.startOffset,o=t.endOffset,u=e.dom.getRoot();if(!t)return u;if(t.setStart){n=t.commonAncestorContainer;if(!t.collapsed){r==i&&o-s<2&&r.hasChildNodes()&&(n=r.childNodes[s]);if(r.nodeType===3&&i.nodeType===3){r.length===s?r=a(r.nextSibling,!0):r=r.parentNode,o===0?i=a(i.previousSibling,!1):i=i.parentNode;if(r&&r===i)return r}}return n&&n.nodeType==3?n.parentNode:n}return n=t.item?t.item(0):t.parentElement(),n.ownerDocument!==e.win.document&&(n=u),n},getSelectedBlocks:function(t,n){var r=this,i=r.dom,s,o,u=[];o=i.getRoot(),t=i.getParent(t||r.getStart(),i.isBlock),n=i.getParent(n||r.getEnd(),i.isBlock),t&&t!=o&&u.push(t);if(t&&n&&t!=n){s=t;var a=new e(t,o);while((s=a.next())&&s!=n)i.isBlock(s)&&u.push(s)}return n&&t!=n&&n!=o&&u.push(n),u},isForward:function(){var e=this.dom,t=this.getSel(),n,r;return!t||!t.anchorNode||!t.focusNode?!0:(n=e.createRng(),n.setStart(t.anchorNode,t.anchorOffset),n.collapse(!0),r=e.createRng(),r.setStart(t.focusNode,t.focusOffset),r.collapse(!0),n.compareBoundaryPoints(n.START_TO_START,r)<=0)},normalize:function(){var e=this,t=e.getRng();return!l&&(new i(e.dom)).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n=this,r;return n.selectorChangedData||(n.selectorChangedData={},r={},n.editor.on("NodeChange",function(e){var t=e.element,i=n.dom,s=i.getParents(t,null,i.getRoot()),o={};a(n.selectorChangedData,function(e,t){a(s,function(n){if(i.is(n,t))return r[t]||(a(e,function(e){e(!0,{node:n,selector:t,parents:s})}),r[t]=e),o[t]=e,!1})}),a(r,function(e,n){o[n]||(delete r[n],a(e,function(e){e(!1,{node:t,selector:n,parents:s})}))})})),n.selectorChangedData[e]||(n.selectorChangedData[e]=[]),n.selectorChangedData[e].push(t),n},getScrollContainer:function(){var e,t=this.dom.getRoot();while(t&&t.nodeName!="BODY"){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e){function a(e){var t=0,n=0,r=e;while(r&&r.nodeType)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}}var t,n,r=this,i=r.dom,s=i.getRoot(),o,u;if(s.nodeName!="BODY"){var f=r.getScrollContainer();if(f){t=a(e).y-a(f).y,u=f.clientHeight,o=f.scrollTop;if(t<o||t+25>o+u)f.scrollTop=t<o?t:t-u+25;return}}n=i.getViewPort(r.editor.getWin()),t=i.getPos(e).y,o=n.y,u=n.h,(t<n.y||t+25>o+u)&&r.editor.getWin().scrollTo(0,t<o?t:t-u+25)},placeCaretAt:function(e,t){var n=this.editor.getDoc(),r,i;if(n.caretPositionFromPoint)i=n.caretPositionFromPoint(e,t),r=n.createRange(),r.setStart(i.offsetNode,i.offset),r.collapse(!0);else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(n.body.createTextRange){r=n.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(s){r.collapse(t<n.body.clientHeight)}}this.setRng(r)},_moveEndPoint:function(t,n,r){var i=n,s=new e(n,i),u=this.dom.schema.getNonEmptyElements();do{if(n.nodeType==3&&f(n.nodeValue).length!==0){r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length);return}if(u[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName)){r?t.setStartBefore(n):n.nodeName=="BR"?t.setEndBefore(n):t.setEndAfter(n);return}if(o.ie&&o.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n)){r?t.setStart(n,0):t.setEnd(n,0);return}}while(n=r?s.next():s.prev());i.nodeName=="BODY"&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},destroy:function(){this.win=null,this.controlSelection.destroy()}},c}),i("tinymce/dom/ElementUtils",["tinymce/dom/BookmarkManager","tinymce/util/Tools"],function(e,t){function r(t){this.compare=function(r,i){function s(e){var r={};return n(t.getAttribs(e),function(n){var i=n.nodeName.toLowerCase();i.indexOf("_")!==0&&i!=="style"&&i!=="data-mce-style"&&(r[i]=t.getAttrib(e,i))}),r}function o(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){n=t[r];if(typeof n=="undefined")return!1;if(e[r]!=n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0}return r.nodeName!=i.nodeName?!1:o(s(r),s(i))?o(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(i,"style")))?!e.isBookmarkNode(r)&&!e.isBookmarkNode(i):!1:!1}}var n=t.each;return r}),i("tinymce/fmt/Preview",["tinymce/util/Tools"],function(e){function n(e,n){function f(e){return e.replace(/%(\w+)/g,"")}var r,i,s=e.dom,o="",u,a;a=e.settings.preview_styles;if(a===!1)return"";a||(a="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");if(typeof n=="string"){n=e.formatter.get(n);if(!n)return;n=n[0]}return r=n.block||n.inline||"span",i=s.create(r),t(n.styles,function(e,t){e=f(e),e&&s.setStyle(i,t,e)}),t(n.attributes,function(e,t){e=f(e),e&&s.setAttrib(i,t,e)}),t(n.classes,function(e){e=f(e),s.hasClass(i,e)||s.addClass(i,e)}),e.fire("PreviewFormats"),s.setStyles(i,{position:"absolute",left:-65535}),e.getBody().appendChild(i),u=s.getStyle(e.getBody(),"fontSize",!0),u=/px$/.test(u)?parseInt(u,10):0,t(a.split(" "),function(t){var n=s.getStyle(i,t,!0);if(t=="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)){n=s.getStyle(e.getBody(),t,!0);if(s.toHex(n).toLowerCase()=="#ffffff")return}if(t=="color"&&s.toHex(n).toLowerCase()=="#000000")return;if(t=="font-size"&&/em|%$/.test(n)){if(u===0)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*u+"px"}t=="border"&&n&&(o+="padding:0 2px;"),o+=t+":"+n+";"}),e.fire("AfterPreviewFormats"),s.remove(i),o}var t=e.each;return{getCssText:n}}),i("tinymce/Formatter",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/dom/ElementUtils","tinymce/util/Tools","tinymce/fmt/Preview"],function(e,t,n,r,i,s){return function(o){function A(e){return e.nodeType&&(e=e.nodeName),!!o.schema.getTextBlockElements()[e.toLowerCase()]}function O(e,t){return a.getParents(e,t,a.getRoot())}function M(e){return e.nodeType===1&&e.id==="_mce_caret"}function _(){H({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){N(n,function(t,n){a.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),N("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){H(e,{block:e,remove:"all"})}),H(o.settings.formats)}function D(){o.addShortcut("ctrl+b","bold_desc","Bold"),o.addShortcut("ctrl+i","italic_desc","Italic"),o.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;e<=6;e++)o.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);o.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),o.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),o.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function P(e){return e?u[e]:u}function H(e,t){e&&(typeof e!="string"?N(e,function(e,t){H(t,e)}):(t=t.length?t:[t],N(t,function(e){e.deep===w&&(e.deep=!e.selector),e.split===w&&(e.split=!e.selector||e.inline),e.remove===w&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),typeof e.classes=="string"&&(e.classes=e.classes.split(/\s+/))}),u[e]=t))}function B(e){return e&&u[e]&&delete u[e],u}function j(e){var t;return o.dom.getParent(e,function(e){return t=o.dom.getStyle(e,"text-decoration"),t&&t!=="none"}),t}function F(e){var t;e.nodeType===1&&e.parentNode&&e.parentNode.nodeType===1&&(t=j(e.parentNode),o.dom.getStyle(e,"color")&&t?o.dom.setStyle(e,"text-decoration",t):o.dom.getStyle(e,"textdecoration")===t&&o.dom.setStyle(e,"text-decoration",null))}function I(t,n,r){function m(e,t){t=t||s;if(e){t.onformat&&t.onformat(e,t,n,r),N(t.styles,function(t,r){a.setStyle(e,r,Y(t,n))});if(t.styles){var i=a.getAttrib(e,"style");i&&e.setAttribute("data-mce-style",i)}N(t.attributes,function(t,r){a.setAttrib(e,r,Y(t,n))}),N(t.classes,function(t){t=Y(t,n),a.hasClass(e,t)||a.addClass(e,t)})}}function b(){function t(t,n){var i=new e(n);for(r=i.current();r;r=i.prev())if(r.childNodes.length>1||r==t||r.tagName=="BR")return r}var n=o.selection.getRng(),i=n.startContainer,s=n.endContainer;if(i!=s&&n.endOffset===0){var u=t(i,s),a=u.nodeType==3?u.length:u.childNodes.length;n.setEnd(u,a)}return n}function w(e,r,o){var u=[],f,p,d=!0;f=s.inline||s.block,p=a.create(f),m(p),l.walk(e,function(e){function l(e){var y,b,w,S,x;x=d,y=e.nodeName.toLowerCase(),b=e.parentNode.nodeName.toLowerCase(),e.nodeType===1&&E(e)&&(x=d,d=E(e)==="true",S=!0);if(K(y,"br")){r=0,s.block&&a.remove(e);return}if(s.wrapper&&U(e,t,n)){r=0;return}if(d&&!S&&s.block&&!s.wrapper&&A(y)&&c(b,f)){e=a.rename(e,f),m(e),u.push(e),r=0;return}if(s.selector){N(i,function(t){if("collapsed"in t&&t.collapsed!==v)return;a.is(e,t.selector)&&!M(e)&&(m(e,t),w=!0)});if(!s.inline||w){r=0;return}}d&&!S&&c(f,y)&&c(b,f)&&(!!o||e.nodeType!==3||e.nodeValue.length!==1||e.nodeValue.charCodeAt(0)!==65279)&&!M(e)&&(!s.inline||!h(e))?(r||(r=a.clone(p,g),e.parentNode.insertBefore(r,e),u.push(r)),r.appendChild(e)):(r=0,N(C(e.childNodes),l),S&&(d=x),r=0)}var r;N(e,l)}),s.links===!0&&N(u,function(e){function t(e){e.nodeName==="A"&&m(e,s),N(C(e.childNodes),t)}t(e)}),N(u,function(e){function o(e){var t=0;return N(e.childNodes,function(e){!Z(e)&&!T(e)&&t++}),t}function f(e){var t,n;return N(e.childNodes,function(e){if(e.nodeType==1&&!T(e)&&!M(e))return t=e,g}),t&&!T(t)&&J(t,s)&&(n=a.clone(t,g),m(n),a.replace(n,e,y),a.remove(t,1)),n||e}var r;r=o(e);if((u.length>1||!h(e))&&r===0){a.remove(e,1);return}if(s.inline||s.wrapper){!s.exact&&r===1&&(e=f(e)),N(i,function(t){N(a.select(t.inline,e),function(e){if(T(e))return;rt(t,n,e,t.exact?e:null)})});if(U(e.parentNode,t,n))return a.remove(e,1),e=0,y;s.merge_with_parents&&a.getParent(e.parentNode,function(r){if(U(r,t,n))return a.remove(e,1),e=0,y}),e&&s.merge_siblings!==!1&&(e=ot(st(e),e),e=ot(e,st(e,y)))}})}var i=P(t),s=i[0],u,d,v=!r&&f.isCollapsed();if(s)if(r)r.nodeType?(d=a.createRng(),d.setStartBefore(r),d.setEndAfter(r),w(tt(d,i),null,!0)):w(r,null,!0);else if(!v||!s.inline||a.select("td.mce-item-selected,th.mce-item-selected").length){var S=o.selection.getNode();!p&&i[0].defaultBlock&&!a.getParent(S,a.isBlock)&&I(i[0].defaultBlock),o.selection.setRng(b()),u=f.getBookmark(),w(tt(f.getRng(y),i),u),s.styles&&(s.styles.color||s.styles.textDecoration)&&(k(S,F,"childNodes"),F(S)),f.moveToBookmark(u),ft(f.getRng(y)),o.nodeChanged()}else at("apply",t,n)}function q(e,t,n,r){function v(e){var n,r,o,u,a;e.nodeType===1&&E(e)&&(u=p,p=E(e)==="true",a=!0),n=C(e.childNodes);if(p&&!a)for(r=0,o=i.length;r<o;r++)if(rt(i[r],t,e,e))break;if(s.deep&&n.length){for(r=0,o=n.length;r<o;r++)v(n[r]);a&&(p=u)}}function m(n){var i;return N(O(n.parentNode).reverse(),function(n){var s;!i&&n.id!="_start"&&n.id!="_end"&&(s=U(n,e,t,r),s&&s.split!==!1&&(i=n))}),i}function b(e,n,r,o){var u,f,l,c,p,d;if(e){d=e.parentNode;for(u=n.parentNode;u&&u!=d;u=u.parentNode){f=a.clone(u,g);for(p=0;p<i.length;p++)if(rt(i[p],t,f,f)){f=0;break}f&&(l&&f.appendChild(l),c||(c=f),l=f)}o&&(!s.mixed||!h(e))&&(n=a.split(e,n)),l&&(r.parentNode.insertBefore(l,r),c.appendChild(r))}return n}function w(e){return b(m(e),e,e,!0)}function S(e){var t=a.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return T(n)&&(n=n[e?"firstChild":"lastChild"]),a.remove(t,!0),n}function x(e){var t,n,r=e.commonAncestorContainer;e=tt(e,i,y),s.split&&(t=ut(e,y),n=ut(e),t!=n?(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t.nodeName=="TR"?t=t.firstChild.firstChild||t:t=t.firstChild||t),r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&/^(TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n=n.firstChild||n),t=et(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=et(n,"span",{id:"_end","data-mce-type":"bookmark"}),w(t),w(n),t=S(y),n=S()):t=n=w(t),e.startContainer=t.parentNode,e.startOffset=d(t),e.endContainer=n.parentNode,e.endOffset=d(n)+1),l.walk(e,function(e){N(e,function(e){v(e),e.nodeType===1&&o.dom.getStyle(e,"text-decoration")==="underline"&&e.parentNode&&j(e.parentNode)==="underline"&&rt({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var i=P(e),s=i[0],u,c,p=!0;if(n){n.nodeType?(c=a.createRng(),c.setStartBefore(n),c.setEndAfter(n),x(c)):x(n);return}!f.isCollapsed()||!s.inline||a.select("td.mce-item-selected,th.mce-item-selected").length?(u=f.getBookmark(),x(f.getRng(y)),f.moveToBookmark(u),s.inline&&z(e,t,f.getStart())&&ft(f.getRng(!0)),o.nodeChanged()):at("remove",e,t,r)}function R(e,t,n){var r=P(e);!z(e,t,n)||"toggle"in r[0]&&!r[0].toggle?I(e,t,n):q(e,t,n)}function U(e,t,n,r){function f(e,t,i){var s,o,u=t[i],f;if(t.onmatch)return t.onmatch(e,t,i);if(u)if(u.length===w){for(s in u)if(u.hasOwnProperty(s)){i==="attributes"?o=a.getAttrib(e,s):o=Q(e,s);if(r&&!o&&!t.exact)return;if((!r||t.exact)&&!K(o,G(Y(u[s],n),s)))return}}else for(f=0;f<u.length;f++)if(i==="attributes"?a.getAttrib(e,u[f]):Q(e,u[f]))return t;return t}var i=P(t),s,o,u;if(i&&e)for(o=0;o<i.length;o++){s=i[o];if(J(e,s)&&f(e,s,"attributes")&&f(e,s,"styles")){if(u=s.classes)for(o=0;o<u.length;o++)if(!a.hasClass(e,u[o]))return;return s}}}function z(e,t,n){function i(n){var r=a.getRoot();return n===r?!1:(n=a.getParent(n,function(n){return n.parentNode===r||!!U(n,e,t,!0)}),U(n,e,t))}var r;return n?i(n):(n=f.getNode(),i(n)?y:(r=f.getStart(),r!=n&&i(r)?y:g))}function W(e,t){var n,r=[],i={};return n=f.getStart(),a.getParent(n,function(n){var s,o;for(s=0;s<e.length;s++)o=e[s],!i[o]&&U(n,o,t)&&(i[o]=!0,r.push(o))},a.getRoot()),r}function X(e){var t=P(e),n,r,i,s,o;if(t){n=f.getStart(),r=O(n);for(s=t.length-1;s>=0;s--){o=t[s].selector;if(!o||t[s].defaultBlock)return y;for(i=r.length-1;i>=0;i--)if(a.is(r[i],o))return y}}return g}function V(e,t,n){var r;return b||(b={},r={},o.on("NodeChange",function(e){var t=O(e.element),n={};t=i.grep(t,function(e){return e.nodeType==1&&!e.getAttribute("data-mce-bogus")}),N(b,function(e,i){N(t,function(s){if(U(s,i,{},e.similar))return r[i]||(N(e,function(e){e(!0,{node:s,format:i,parents:t})}),r[i]=e),n[i]=e,!1})}),N(r,function(i,s){n[s]||(delete r[s],N(i,function(n){n(!1,{node:e.element,format:s,parents:t})}))})})),N(e.split(","),function(e){b[e]||(b[e]=[],b[e].similar=n),b[e].push(t)}),this}function $(e){return s.getCssText(o,e)}function J(e,t){if(K(e,t.inline))return y;if(K(e,t.block))return y;if(t.selector)return e.nodeType==1&&a.is(e,t.selector)}function K(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function Q(e,t){return G(a.getStyle(e,t),t)}function G(e,t){if(t=="color"||t=="backgroundColor")e=a.toHex(e);return t=="fontWeight"&&e==700&&(e="bold"),t=="fontFamily"&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function Y(e,t){return typeof e!="string"?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function Z(e){return e&&e.nodeType===3&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function et(e,t,n){var r=a.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function tt(t,n,r){function v(e){function u(e){return e.nodeName=="BR"&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var t,r,i,s,o;t=r=e?f:c,s=e?"previousSibling":"nextSibling",o=a.getRoot();if(t.nodeType==3&&!Z(t))if(e?l>0:p<t.nodeValue.length)return t;for(;;){if(!n[0].block_expand&&h(r))return r;for(i=r[s];i;i=i[s])if(!T(i)&&!Z(i)&&!u(i))return r;if(r.parentNode==o){t=r;break}r=r.parentNode}return t}function m(e,t){t===w&&(t=e.nodeType===3?e.length:e.childNodes.length);while(e&&e.hasChildNodes())e=e.childNodes[t],e&&(t=e.nodeType===3?e.length:e.childNodes.length);return{node:e,offset:t}}function y(e){var t=e;while(t){if(t.nodeType===1&&E(t))return E(t)==="false"?t:e;t=t.parentNode}return e}function b(t,n,i){function c(e,t){var n,s,o=e.nodeValue;return typeof t=="undefined"&&(t=i?o.length:0),i?(n=o.lastIndexOf(" ",t),s=o.lastIndexOf(" ",t),n=n>s?n:s,n!==-1&&!r&&n++):(n=o.indexOf(" ",t),s=o.indexOf(" ",t),n=n!==-1&&(s===-1||n<s)?n:s),n}var s,u,f,l;if(t.nodeType===3){f=c(t,n);if(f!==-1)return{container:t,offset:f};l=t}s=new e(t,a.getParent(t,h)||o.getBody());while(u=s[i?"prev":"next"]())if(u.nodeType===3){l=u,f=c(u);if(f!==-1)return{container:u,offset:f}}else if(h(u))break;if(l)return i?n=0:n=l.length,{container:l,offset:n}}function S(e,r){var i,s,o,u;e.nodeType==3&&e.nodeValue.length===0&&e[r]&&(e=e[r]),i=O(e);for(s=0;s<i.length;s++)for(o=0;o<n.length;o++){u=n[o];if("collapsed"in u&&u.collapsed!==t.collapsed)continue;if(a.is(i[s],u.selector))return i[s]}return e}function x(e,t){var r,i=a.getRoot();n[0].wrapper||(r=a.getParent(e,n[0].block,i)),r||(r=a.getParent(e.nodeType==3?e.parentNode:e,function(e){return e!=i&&A(e)})),r&&n[0].wrapper&&(r=O(r,"ul,ol").reverse()[0]||r);if(!r){r=e;while(r[t]&&!h(r[t])){r=r[t];if(K(r,"br"))break}}return r||e}var i,s,u,f=t.startContainer,l=t.startOffset,c=t.endContainer,p=t.endOffset;f.nodeType==1&&f.hasChildNodes()&&(i=f.childNodes.length-1,f=f.childNodes[l>i?i:l],f.nodeType==3&&(l=0)),c.nodeType==1&&c.hasChildNodes()&&(i=c.childNodes.length-1,c=c.childNodes[p>i?i:p-1],c.nodeType==3&&(p=c.nodeValue.length)),f=y(f),c=y(c);if(T(f.parentNode)||T(f))f=T(f)?f:f.parentNode,f=f.nextSibling||f,f.nodeType==3&&(l=0);if(T(c.parentNode)||T(c))c=T(c)?c:c.parentNode,c=c.previousSibling||c,c.nodeType==3&&(p=c.length);if(n[0].inline){t.collapsed&&(u=b(f,l,!0),u&&(f=u.container,l=u.offset),u=b(c,p),u&&(c=u.container,p=u.offset)),s=m(c,p);if(s.node){while(s.node&&s.offset===0&&s.node.previousSibling)s=m(s.node.previousSibling);s.node&&s.offset>0&&s.node.nodeType===3&&s.node.nodeValue.charAt(s.offset-1)===" "&&s.offset>1&&(c=s.node,c.splitText(s.offset-1))}}if(n[0].inline||n[0].block_expand){if(!n[0].inline||f.nodeType!=3||l===0)f=v(!0);if(!n[0].inline||c.nodeType!=3||p===c.nodeValue.length)c=v()}n[0].selector&&n[0].expand!==g&&!n[0].inline&&(f=S(f,"previousSibling"),c=S(c,"nextSibling"));if(n[0].block||n[0].selector)f=x(f,"previousSibling"),c=x(c,"nextSibling"),n[0].block&&(h(f)||(f=v(!0)),h(c)||(c=v()));return f.nodeType==1&&(l=d(f),f=f.parentNode),c.nodeType==1&&(p=d(c)+1,c=c.parentNode),{startContainer:f,startOffset:l,endContainer:c,endOffset:p}}function nt(e,t){return t.links&&e.tagName=="A"}function rt(e,t,n,r){var i,s,o;if(!J(n,e)&&!nt(n,e))return g;if(e.remove!="all"){N(e.styles,function(i,s){i=G(Y(i,t),s),typeof s=="number"&&(s=i,r=0),(e.remove_similar||!r||K(Q(r,s),i))&&a.setStyle(n,s,""),o=1}),o&&a.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),N(e.attributes,function(e,i){var s;e=Y(e,t),typeof i=="number"&&(i=e,r=0);if(!r||K(a.getAttrib(r,i),e)){if(i=="class"){e=a.getAttrib(n,i);if(e){s="",N(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(s+=(s?" ":"")+e)});if(s){a.setAttrib(n,i,s);return}}}i=="class"&&n.removeAttribute("className"),m.test(i)&&n.removeAttribute("data-mce-"+i),n.removeAttribute(i)}}),N(e.classes,function(e){e=Y(e,t),(!r||a.hasClass(r,e))&&a.removeClass(n,e)}),s=a.getAttribs(n);for(i=0;i<s.length;i++)if(s[i].nodeName.indexOf("_")!==0)return g}if(e.remove!="none")return it(n,e),y}function it(e,t){function i(e,t,n){return e=st(e,t,n),!e||e.nodeName=="BR"||h(e)}var n=e.parentNode,r;t.block&&(p?n==a.getRoot()&&(!t.list_block||!K(e,t.list_block))&&N(C(e.childNodes),function(e){c(p,e.nodeName.toLowerCase())?r?r.appendChild(e):(r=et(e,p),a.setAttribs(r,o.settings.forced_root_block_attrs)):r=0}):h(e)&&!h(n)&&(!i(e,g)&&!i(e.firstChild,y,1)&&e.insertBefore(a.create("br"),e.firstChild),!i(e,y)&&!i(e.lastChild,g,1)&&e.appendChild(a.create("br"))));if(t.selector&&t.inline&&!K(t.inline,e))return;a.remove(e,1)}function st(e,t,n){if(e){t=t?"nextSibling":"previousSibling";for(e=n?e:e[t];e;e=e[t])if(e.nodeType==1||!Z(e))return e}}function ot(e,t){function o(e,t){for(n=e;n;n=n[t]){if(n.nodeType==3&&n.nodeValue.length!==0)return e;if(n.nodeType==1&&!T(n))return n}return e}var n,i,s=new r(a);if(e&&t){e=o(e,"previousSibling"),t=o(t,"nextSibling");if(s.compare(e,t)){for(n=e.nextSibling;n&&n!=t;)i=n,n=n.nextSibling,e.appendChild(i);return a.remove(t),N(C(t.childNodes),function(t){e.appendChild(t)}),e}}return t}function ut(t,n){var r,i,s;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],r.nodeType==1&&(s=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>s?s:i]),r.nodeType===3&&n&&i>=r.nodeValue.length&&(r=(new e(r,o.getBody())).next()||r),r.nodeType===3&&!n&&i===0&&(r=(new e(r,o.getBody())).prev()||r),r}function at(t,n,r,i){function c(e){var t=a.create("span",{id:s,"data-mce-bogus":!0,style:u?"color:red":""});return e&&t.appendChild(o.getDoc().createTextNode(v)),t}function h(e,t){while(e){if(e.nodeType===3&&e.nodeValue!==v||e.childNodes.length>1)return!1;t&&e.nodeType===1&&t.push(e),e=e.firstChild}return!0}function p(e){while(e){if(e.id===s)return e;e=e.parentNode}}function d(t){var n;if(t){n=new e(t,t);for(t=n.current();t;t=n.next())if(t.nodeType===3)return t}}function m(e,t){var n,r;if(!e){e=p(f.getStart());if(!e)while(e=a.get(s))m(e,!1)}else r=f.getRng(!0),h(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),a.remove(e)):(n=d(e),n.nodeValue.charAt(0)===v&&(n.deleteData(0,1),r.startContainer==n&&r.startOffset>0&&r.setStart(n,r.startOffset-1),r.endContainer==n&&r.endOffset>0&&r.setEnd(n,r.endOffset-1)),a.remove(e,1)),f.setRng(r)}function g(){var e,t,i,s,o,u,a;e=f.getRng(!0),s=e.startOffset,u=e.startContainer,a=u.nodeValue,t=p(f.getStart()),t&&(i=d(t)),a&&s>0&&s<a.length&&/\w/.test(a.charAt(s))&&/\w/.test(a.charAt(s-1))?(o=f.getBookmark(),e.collapse(!0),e=tt(e,P(n)),e=l.split(e),I(n,r,e),f.moveToBookmark(o)):(!t||i.nodeValue!==v?(t=c(!0),i=t.firstChild,e.insertNode(t),s=1,I(n,r,t)):I(n,r,t),f.setCursorLocation(i,s))}function y(){var e=f.getRng(!0),t,s,o,u,h,p,d=[],m,g;t=e.startContainer,s=e.startOffset,h=t,t.nodeType==3&&(s!=t.nodeValue.length&&(u=!0),h=h.parentNode);while(h){if(U(h,n,r,i)){p=h;break}h.nextSibling&&(u=!0),d.push(h),h=h.parentNode}if(!p)return;if(u)o=f.getBookmark(),e.collapse(!0),e=tt(e,P(n),!0),e=l.split(e),q(n,r,e),f.moveToBookmark(o);else{g=c(),h=g;for(m=d.length-1;m>=0;m--)h.appendChild(a.clone(d[m],!1)),h=h.firstChild;h.appendChild(a.doc.createTextNode(v)),h=h.firstChild;var y=a.getParent(p,A);y&&a.isEmpty(y)?p.parentNode.replaceChild(g,p):a.insertAfter(g,p),f.setCursorLocation(h,1),a.isEmpty(p)&&a.remove(p)}}function b(){var e;e=p(f.getStart()),e&&!a.isEmpty(e)&&k(e,function(e){e.nodeType==1&&e.id!==s&&!a.isEmpty(e)&&a.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var s="_mce_caret",u=o.settings.caret_debug;o._hasCaretEvents||(x=function(){var e=[],t;if(h(p(f.getStart()),e)){t=e.length;while(t--)a.setAttrib(e[t],"data-mce-bogus","1")}},S=function(e){var t=e.keyCode;m(),(t==8||t==37||t==39)&&m(p(f.getStart())),b()},o.on("SetContent",function(e){e.selection&&b()}),o._hasCaretEvents=!0),t=="apply"?g():y()}function ft(t){var n=t.startContainer,r=t.startOffset,i,s,o,u,l;n.nodeType==3&&r>=n.nodeValue.length&&(r=d(n),n=n.parentNode,i=!0);if(n.nodeType==1){u=n.childNodes,n=u[Math.min(r,u.length-1)],s=new e(n,a.getParent(n,a.isBlock)),(r>u.length-1||i)&&s.next();for(o=s.current();o;o=s.next())if(o.nodeType==3&&!Z(o)){l=a.create("a",{"data-mce-bogus":"all"},v),o.parentNode.insertBefore(l,o),t.setStart(o,0),f.setRng(t),a.remove(l);return}}}var u={},a=o.dom,f=o.selection,l=new t(a),c=o.schema.isValidChild,h=a.isBlock,p=o.settings.forced_root_block,d=a.nodeIndex,v="﻿",m=/^(src|href|style)$/,g=!1,y=!0,b,w,E=a.getContentEditable,S,x,T=n.isBookmarkNode,N=i.each,C=i.grep,k=i.walk,L=i.extend;L(this,{get:P,register:H,unregister:B,apply:I,remove:q,toggle:R,match:z,matchAll:W,matchNode:U,canApply:X,formatChanged:V,getCssText:$}),_(),D(),o.on("BeforeGetContent",function(e){x&&e.format!="raw"&&x()}),o.on("mouseup keydown",function(e){S&&S(e)})}}),i("tinymce/UndoManager",["tinymce/Env","tinymce/util/Tools","tinymce/html/SaxParser"],function(e,t,n){var r=t.trim,i;return i=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​﻿]+<\\/span>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(t){function c(){var e=t.getContent({format:"raw",no_events:1}),s=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o,u,a,f,l,c=t.schema;e=e.replace(i,""),l=c.getShortEndedElements();while(f=s.exec(e))u=s.lastIndex,a=f[0].length,l[f[1]]?o=u:o=n.findEndTag(c,e,u),e=e.substring(0,u-a)+e.substring(o),s.lastIndex=u-a;return r(e)}function h(e){s.typing=!1,s.add({},e)}var s=this,o=0,u=[],a,f,l=0;return t.on("init",function(){s.add()}),t.on("BeforeExecCommand",function(e){var t=e.command;t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&s.beforeChange()}),t.on("ExecCommand",function(e){var t=e.command;t!="Undo"&&t!="Redo"&&t!="mceRepaint"&&h(e)}),t.on("ObjectResizeStart",function(){s.beforeChange()}),t.on("SaveContent ObjectResized blur",h),t.on("DragEnd",h),t.on("KeyUp",function(n){var r=n.keyCode;if(r>=33&&r<=36||r>=37&&r<=40||r==45||r==13||n.ctrlKey)h(),t.nodeChanged();(r==46||r==8||e.mac&&(r==91||r==93))&&t.nodeChanged(),f&&s.typing&&(t.isDirty()||(t.isNotDirty=!u[0]||c()==u[0].content,t.isNotDirty||t.fire("change",{level:u[0],lastLevel:null})),t.fire("TypingUndo"),f=!1,t.nodeChanged())}),t.on("KeyDown",function(e){var t=e.keyCode;if(t>=33&&t<=36||t>=37&&t<=40||t==45){s.typing&&h(e);return}(t<16||t>20)&&t!=224&&t!=91&&!s.typing&&(s.beforeChange(),s.typing=!0,s.add({},e),f=!0)}),t.on("MouseDown",function(e){s.typing&&h(e)}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||t.nodeChanged()}),s={data:u,typing:!1,beforeChange:function(){l||(a=t.selection.getBookmark(2,!0))},add:function(e,n){var r,i=t.settings,s;e=e||{},e.content=c();if(l||t.removed)return null;s=u[o];if(t.fire("BeforeAddUndo",{level:e,lastLevel:s,originalEvent:n}).isDefaultPrevented())return null;if(s&&s.content==e.content)return null;u[o]&&(u[o].beforeBookmark=a);if(i.custom_undo_redo_levels&&u.length>i.custom_undo_redo_levels){for(r=0;r<u.length-1;r++)u[r]=u[r+1];u.length--,o=u.length}e.bookmark=t.selection.getBookmark(2,!0),o<u.length-1&&(u.length=o+1),u.push(e),o=u.length-1;var f={level:e,lastLevel:s,originalEvent:n};return t.fire("AddUndo",f),o>0&&(t.isNotDirty=!1,t.fire("change",f)),e},undo:function(){var e;return s.typing&&(s.add(),s.typing=!1),o>0&&(e=u[--o],o===0&&(t.isNotDirty=!0),t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.beforeBookmark),t.fire("undo",{level:e})),e},redo:function(){var e;return o<u.length-1&&(e=u[++o],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.bookmark),t.fire("redo",{level:e})),e},clear:function(){u=[],o=0,s.typing=!1,t.fire("ClearUndos")},hasUndo:function(){return o>0||s.typing&&u[0]&&c()!=u[0].content},hasRedo:function(){return o<u.length-1&&!this.typing},transact:function(e){s.beforeChange();try{l++,e()}finally{l--}s.add()}},s}}),i("tinymce/EnterKey",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/Env"],function(e,t,n){var r=n.ie&&n.ie<11;return function(i){function c(c){function k(e){return e&&s.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&s.getContentEditable(e)!=="true"}function L(e){var t;s.isBlock(e)&&(t=o.getRng(),e.appendChild(s.create("span",null," ")),o.select(e),e.lastChild.outerHTML="",o.setRng(t))}function A(e){var t=e,n=[],r;if(!t)return;while(t=t.firstChild){if(s.isBlock(t))return;t.nodeType==1&&!l[t.nodeName.toLowerCase()]&&n.push(t)}r=n.length;while(r--)t=n[r],!t.hasChildNodes()||t.firstChild==t.lastChild&&t.firstChild.nodeValue===""?s.remove(t):t.nodeName=="A"&&(t.innerText||t.textContent)===" "&&s.remove(t)}function O(t){function c(e){while(e){if(e.nodeType==1||e.nodeType==3&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var r,i,u,a=t,f;if(!t)return;n.ie&&n.ie<9&&g&&g.firstChild&&g.firstChild==g.lastChild&&g.firstChild.tagName=="BR"&&s.remove(g.firstChild);if(/^(LI|DT|DD)$/.test(t.nodeName)){var h=c(t.firstChild);h&&/^(UL|OL|DL)$/.test(h.nodeName)&&t.insertBefore(s.doc.createTextNode(" "),t.firstChild)}u=s.createRng(),n.ie||t.normalize();if(t.hasChildNodes()){r=new e(t,t);while(i=r.current()){if(i.nodeType==3){u.setStart(i,0),u.setEnd(i,0);break}if(l[i.nodeName.toLowerCase()]){u.setStartBefore(i),u.setEndBefore(i);break}a=i,i=r.next()}i||(u.setStart(a,0),u.setEnd(a,0))}else if(t.nodeName=="BR")if(t.nextSibling&&s.isBlock(t.nextSibling)){if(!y||y<9)f=s.create("br"),t.parentNode.insertBefore(f,t);u.setStartBefore(t),u.setEndBefore(t)}else u.setStartAfter(t),u.setEndAfter(t);else u.setStart(t,0),u.setEnd(t,0);o.setRng(u),s.remove(f),o.scrollIntoView(t)}function M(e){var t=u.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&s.setAttribs(e,u.forced_root_block_attrs)}function _(e){var t=v,n,i,o,a=f.getTextInlineElements();e||x=="TABLE"?(n=s.create(e||N),M(n)):n=g.cloneNode(!1),o=n;if(u.keep_styles!==!1)do if(a[t.nodeName]){if(t.id=="_mce_caret")continue;i=t.cloneNode(!1),s.setAttrib(i,"id",""),n.hasChildNodes()?(i.appendChild(n.firstChild),n.appendChild(i)):(o=i,n.appendChild(i))}while(t=t.parentNode);return r||(o.innerHTML='<br data-mce-bogus="1">'),n}function D(t){var n,r,i;if(v.nodeType==3&&(t?m>0:m<v.nodeValue.length))return!1;if(v.parentNode==g&&C&&!t)return!0;if(t&&v.nodeType==1&&v==g.firstChild)return!0;if(v.nodeName==="TABLE"||v.previousSibling&&v.previousSibling.nodeName=="TABLE")return C&&!t||!C&&t;n=new e(v,g),v.nodeType==3&&(t&&m===0?n.prev():!t&&m==v.nodeValue.length&&n.next());while(r=n.current()){if(r.nodeType===1){if(!r.getAttribute("data-mce-bogus")){i=r.nodeName.toLowerCase();if(l[i]&&i!=="br")return!1}}else if(r.nodeType===3&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?n.prev():n.next()}return!0}function P(e,t){var n,r,o,u,a,l,c=N||"P";r=s.getParent(e,s.isBlock),l=i.getBody().nodeName.toLowerCase();if(!r||!k(r)){r=r||d;if(!r.hasChildNodes())return n=s.create(c),M(n),r.appendChild(n),h.setStart(n,0),h.setEnd(n,0),n;u=e;while(u.parentNode!=r)u=u.parentNode;while(u&&!s.isBlock(u))o=u,u=u.previousSibling;if(o&&f.isValidChild(l,c.toLowerCase())){n=s.create(c),M(n),o.parentNode.insertBefore(n,o),u=o;while(u&&!s.isBlock(u))a=u.nextSibling,n.appendChild(u),u=a;h.setStart(e,t),h.setEnd(e,t)}}return e}function H(){function e(e){var t=S[e?"firstChild":"lastChild"];while(t){if(t.nodeType==1)break;t=t[e?"nextSibling":"previousSibling"]}return t===g}function t(){var e=S.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:S}var n=S.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(N="LI"),w=N?_(N):s.create("BR"),e(!0)&&e()?n=="LI"?s.insertAfter(w,t()):s.replace(w,S):e(!0)?n=="LI"?(s.insertAfter(w,t()),w.appendChild(s.doc.createTextNode(" ")),w.appendChild(S)):S.parentNode.insertBefore(w,S):e()?(s.insertAfter(w,t()),L(w)):(S=t(),p=h.cloneRange(),p.setStartAfter(g),p.setEndAfter(S),E=p.extractContents(),N=="LI"&&E.firstChild.nodeName=="LI"?(w=E.firstChild,s.insertAfter(E,S)):(s.insertAfter(E,S),s.insertAfter(w,S))),s.remove(g),O(w),a.add()}function B(){i.execCommand("InsertLineBreak",!1,c)}function j(e){do e.nodeType===3&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function F(e){var t=s.getRoot(),n,r;n=e;while(n!==t&&s.getContentEditable(n)!=="false")s.getContentEditable(n)==="true"&&(r=n),n=n.parentNode;return n!==t?r:t}function I(e){var t;r||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(s.getStyle(t,"float",!0)))&&s.add(e,"br"))}var h,p,d,v,m,g,y,b,w,E,S,x,T,N,C;h=o.getRng(!0);if(c.isDefaultPrevented())return;if(!h.collapsed){i.execCommand("Delete");return}(new t(s)).normalize(h),v=h.startContainer,m=h.startOffset,N=(u.force_p_newlines?"p":"")||u.forced_root_block,N=N?N.toUpperCase():"",y=s.doc.documentMode,b=c.shiftKey,v.nodeType==1&&v.hasChildNodes()&&(C=m>v.childNodes.length-1,v=v.childNodes[Math.min(m,v.childNodes.length-1)]||v,C&&v.nodeType==3?m=v.nodeValue.length:m=0),d=F(v);if(!d)return;a.beforeChange();if(!s.isBlock(d)&&d!=s.getRoot()){(!N||b)&&B();return}if(N&&!b||!N&&b)v=P(v,m);g=s.getParent(v,s.isBlock),S=g?s.getParent(g.parentNode,s.isBlock):null,x=g?g.nodeName.toUpperCase():"",T=S?S.nodeName.toUpperCase():"",T=="LI"&&!c.ctrlKey&&(g=S,x=T);if(/^(LI|DT|DD)$/.test(x)){if(!N&&b){B();return}if(s.isEmpty(g)){H();return}}if(x=="PRE"&&u.br_in_pre!==!1){if(!b){B();return}}else if(!N&&!b&&x!="LI"||N&&b){B();return}if(N&&g===i.getBody())return;N=N||"P",D()?(/^(H[1-6]|PRE|FIGURE)$/.test(x)&&T!="HGROUP"?w=_(N):w=_(),u.end_container_on_empty_block&&k(S)&&s.isEmpty(g)?w=s.split(S,g):s.insertAfter(w,g),O(w)):D(!0)?(w=g.parentNode.insertBefore(_(),g),L(w),O(g)):(p=h.cloneRange(),p.setEndAfter(g),E=p.extractContents(),j(E),w=E.firstChild,s.insertAfter(E,g),A(w),I(g),O(w)),s.setAttrib(w,"id",""),i.fire("NewBlock",{newBlock:w}),a.add()}var s=i.dom,o=i.selection,u=i.settings,a=i.undoManager,f=i.schema,l=f.getNonEmptyElements();i.on("keydown",function(e){e.keyCode==13&&c(e)!==!1&&e.preventDefault()})}}),i("tinymce/ForceBlocks",[],function(){return function(e){function o(){var o=r.getStart(),u=e.getBody(),a,f,l,c,h,p,d,v=-16777215,m,g,y,b,w;w=t.forced_root_block;if(!o||o.nodeType!==1||!w)return;while(o&&o!=u){if(s[o.nodeName])return;o=o.parentNode}a=r.getRng();if(a.setStart){f=a.startContainer,l=a.startOffset,c=a.endContainer,h=a.endOffset;try{g=e.getDoc().activeElement===u}catch(E){}}else a.item&&(o=a.item(0),a=e.getDoc().body.createTextRange(),a.moveToElementText(o)),g=a.parentElement().ownerDocument===e.getDoc(),y=a.duplicate(),y.collapse(!0),l=y.move("character",v)*-1,y.collapsed||(y=a.duplicate(),y.collapse(!1),h=y.move("character",v)*-1-l);o=u.firstChild,b=u.nodeName.toLowerCase();while(o)if((o.nodeType===3||o.nodeType==1&&!s[o.nodeName])&&i.isValidChild(b,w.toLowerCase())){if(o.nodeType===3&&o.nodeValue.length===0){d=o,o=o.nextSibling,n.remove(d);continue}p||(p=n.create(w,e.settings.forced_root_block_attrs),o.parentNode.insertBefore(p,o),m=!0),d=o,o=o.nextSibling,p.appendChild(d)}else p=null,o=o.nextSibling;if(m&&g){if(a.setStart)a.setStart(f,l),a.setEnd(c,h),r.setRng(a);else try{a=e.getDoc().body.createTextRange(),a.moveToElementText(u),a.collapse(!0),a.moveStart("character",l),h>0&&a.moveEnd("character",h),a.select()}catch(E){}e.nodeChanged()}}var t=e.settings,n=e.dom,r=e.selection,i=e.schema,s=i.getBlockElements();t.forced_root_block&&e.on("NodeChange",o)}}),i("tinymce/EditorCommands",["tinymce/html/Serializer","tinymce/Env","tinymce/util/Tools","tinymce/dom/ElementUtils","tinymce/dom/RangeUtils","tinymce/dom/TreeWalker"],function(e,n,r,i,s,o){var u=r.each,a=r.extend,f=r.map,l=r.inArray,c=r.explode,h=n.gecko,p=n.ie,d=n.ie&&n.ie<11,v=!0,m=!1;return function(r){function x(e,t,n){var r;return e=e.toLowerCase(),(r=b.exec[e])?(r(e,t,n),v):m}function T(e){var t;return e=e.toLowerCase(),(t=b.state[e])?t(e):-1}function N(e){var t;return e=e.toLowerCase(),(t=b.value[e])?t(e):m}function C(e,t){t=t||"exec",u(e,function(e,n){u(n.toLowerCase().split(","),function(n){b[t][n]=e})})}function k(e,n,i){return n===t&&(n=m),i===t&&(i=null),r.getDoc().execCommand(e,n,i)}function L(e){return E.match(e)}function A(e,n){E.toggle(e,n?{value:n}:t),r.nodeChanged()}function O(e){S=y.getBookmark(e)}function M(){y.moveToBookmark(S)}var g=r.dom,y=r.selection,b={state:{},exec:{},value:{}},w=r.settings,E=r.formatter,S;a(this,{execCommand:x,queryCommandState:T,queryCommandValue:N,addCommands:C}),C({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){r.undoManager.add()},"Cut,Copy,Paste":function(e){var t=r.getDoc(),i;try{k(e)}catch(s){i=v}if(i||!t.queryCommandSupported(e)){var o=r.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");n.mac&&(o=o.replace(/Ctrl\+/g,"⌘+")),r.windowManager.alert(o)}},unlink:function(){if(y.isCollapsed()){var e=y.getNode();e.tagName=="A"&&r.dom.remove(e,!0);return}E.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);t=="full"&&(t="justify"),u("left,center,right,justify".split(","),function(e){t!=e&&E.remove("align"+e)}),A("align"+t),x("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;k(e),t=g.getParent(y.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(O(),g.split(n,t),M()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){A(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){A(e,n)},FontSize:function(e,t,n){var r,i;n>=1&&n<=7&&(i=c(w.font_size_style_values),r=c(w.font_size_classes),r?n=r[n-1]||n:n=i[n-1]||n),A(e,n)},RemoveFormat:function(e){E.remove(e)},mceBlockQuote:function(){A("blockquote")},FormatBlock:function(e,t,n){return A(n||"p")},mceCleanup:function(){var e=y.getBookmark();r.setContent(r.getContent({cleanup:v}),{cleanup:v}),y.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||y.getNode();i!=r.getBody()&&(O(),r.dom.remove(i,v),M())},mceSelectNodeDepth:function(e,t,n){var i=0;g.getParent(y.getNode(),function(e){if(e.nodeType==1&&i++==n)return y.select(e),m},r.getBody())},mceSelectNode:function(e,t,n){y.select(n)},mceInsertContent:function(t,n,s){function x(e){function i(e){return n[e]&&n[e].nodeType==3}var t,n,r;return t=y.getRng(!0),n=t.startContainer,r=t.startOffset,n.nodeType==3&&(r>0?e=e.replace(/^&nbsp;/," "):i("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):i("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function T(e){if(E)for(m=e.firstChild;m;m=m.walk(!0))S[m.name]&&m.attr("data-mce-new","true")}function N(){if(E){var e=r.getBody(),t=new i(g);u(g.select("*[data-mce-new]"),function(n){n.removeAttribute("data-mce-new");for(var r=n.parentNode;r&&r!=e;r=r.parentNode)t.compare(r,n)&&g.remove(n,!0)})}}var o,a,f,l,c,h,d,v,m,b,w,E,S=r.schema.getTextInlineElements();typeof s!="string"&&(E=s.merge,s=s.content),/^ | $/.test(s)&&(s=x(s)),o=r.parser,a=new e({},r.schema),w='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',h={content:s,format:"html",selection:!0},r.fire("BeforeSetContent",h),s=h.content,s.indexOf("{$caret}")==-1&&(s+="{$caret}"),s=s.replace(/\{\$caret\}/,w),v=y.getRng();var C=v.startContainer||(v.parentElement?v.parentElement():null),k=r.getBody();C===k&&y.isCollapsed()&&g.isBlock(k.firstChild)&&g.isEmpty(k.firstChild)&&(v=g.createRng(),v.setStart(k.firstChild,0),v.setEnd(k.firstChild,0),y.setRng(v)),y.isCollapsed()||r.getDoc().execCommand("Delete",!1,null),f=y.getNode();var L={context:f.nodeName.toLowerCase()};c=o.parse(s,L),T(c),m=c.lastChild;if(m.attr("id")=="mce_marker"){d=m;for(m=m.prev;m;m=m.walk(!0))if(m.type==3||!g.isBlock(m.name)){r.schema.isValidChild(m.parent.name,"span")&&m.parent.insert(d,m,m.name==="br");break}}if(!L.invalid)s=a.serialize(c),m=f.firstChild,b=f.lastChild,!m||m===b&&m.nodeName==="BR"?g.setHTML(f,s):y.setContent(s);else{y.setContent(w),f=y.getNode(),l=r.getBody(),f.nodeType==9?f=m=l:m=f;while(m!==l)f=m,m=m.parentNode;s=f==l?l.innerHTML:g.getOuterHTML(f),s=a.serialize(o.parse(s.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return a.serialize(c)}))),f==l?g.setHTML(l,s):g.setOuterHTML(f,s)}N(),d=g.get("mce_marker"),y.scrollIntoView(d),v=g.createRng(),m=d.previousSibling,m&&m.nodeType==3?(v.setStart(m,m.nodeValue.length),p||(b=d.nextSibling,b&&b.nodeType==3&&(m.appendData(b.data),b.parentNode.removeChild(b)))):(v.setStartBefore(d),v.setEndBefore(d)),g.remove(d),y.setRng(v),r.fire("SetContent",h),r.addVisual()},mceInsertRawHTML:function(e,t,n){y.setContent("tiny_mce_marker"),r.setContent(r.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){A(n)},mceSetContent:function(e,t,n){r.setContent(n)},"Indent,Outdent":function(e){var t,n,i;t=w.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),!T("InsertUnorderedList")&&!T("InsertOrderedList")?(!w.forced_root_block&&!g.getParent(y.getNode(),g.isBlock)&&E.apply("div"),u(y.getSelectedBlocks(),function(s){if(s.nodeName!="LI"){var o=r.getParam("indent_use_margin",!1)?"margin":"padding";o+=g.getStyle(s,"direction",true)=="rtl"?"Right":"Left",e=="outdent"?(i=Math.max(0,parseInt(s.style[o]||0,10)-t),g.setStyle(s,o,i?i+n:"")):(i=parseInt(s.style[o]||0,10)+t+n,g.setStyle(s,o,i))}})):k(e)},mceRepaint:function(){if(h)try{O(v),y.getSel()&&y.getSel().selectAllChildren(r.getBody()),y.collapse(v),M()}catch(e){}},InsertHorizontalRule:function(){r.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){r.hasVisual=!r.hasVisual,r.addVisual()},mceReplaceContent:function(e,t,n){r.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,y.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;typeof n=="string"&&(n={href:n}),r=g.getParent(y.getNode(),"a"),n.href=n.href.replace(" ","%20"),(!r||!n.href)&&E.remove("link"),n.href&&E.apply("link",n,r)},selectAll:function(){var e=g.getRoot(),t;y.getRng().setStart?(t=g.createRng(),t.setStart(e,0),t.setEnd(e,e.childNodes.length),y.setRng(t)):(t=y.getRng(),t.item||(t.moveToElementText(e),t.select()))},"delete":function(){k("Delete");var e=r.getBody();g.isEmpty(e)&&(r.setContent(""),e.firstChild&&g.isBlock(e.firstChild)?r.selection.setCursorLocation(e.firstChild,0):r.selection.setCursorLocation(e,0))},mceNewDocument:function(){r.setContent("")},InsertLineBreak:function(e,t,n){function x(){var e=new o(h,m),t,n=r.schema.getNonEmptyElements();while(t=e.next())if(n[t.nodeName.toLowerCase()]||t.length>0)return!0}var i=n,u,a,f,l=y.getRng(!0);(new s(g)).normalize(l);var c=l.startOffset,h=l.startContainer;if(h.nodeType==1&&h.hasChildNodes()){var p=c>h.childNodes.length-1;h=h.childNodes[Math.min(c,h.childNodes.length-1)]||h,p&&h.nodeType==3?c=h.nodeValue.length:c=0}var m=g.getParent(h,g.isBlock),b=m?m.nodeName.toUpperCase():"",w=m?g.getParent(m.parentNode,g.isBlock):null,E=w?w.nodeName.toUpperCase():"",S=i&&i.ctrlKey;E=="LI"&&!S&&(m=w,b=E),h&&h.nodeType==3&&c>=h.nodeValue.length&&!d&&!x()&&(u=g.create("br"),l.insertNode(u),l.setStartAfter(u),l.setEndAfter(u),a=!0),u=g.create("br"),l.insertNode(u);var T=g.doc.documentMode;return d&&b=="PRE"&&(!T||T<8)&&u.parentNode.insertBefore(g.doc.createTextNode("\r"),u),f=g.create("span",{},"&nbsp;"),u.parentNode.insertBefore(f,u),y.scrollIntoView(f),g.remove(f),a?(l.setStartBefore(u),l.setEndBefore(u)):(l.setStartAfter(u),l.setEndAfter(u)),y.setRng(l),r.undoManager.add(),v}}),C({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=y.isCollapsed()?[g.getParent(y.getNode(),g.isBlock)]:y.getSelectedBlocks(),r=f(n,function(e){return!!E.matchNode(e,t)});return l(r,v)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return L(e)},mceBlockQuote:function(){return L("blockquote")},Outdent:function(){var e;if(w.inline_styles){if((e=g.getParent(y.getStart(),g.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return v;if((e=g.getParent(y.getEnd(),g.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return v}return T("InsertUnorderedList")||T("InsertOrderedList")||!w.inline_styles&&!!g.getParent(y.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=g.getParent(y.getNode(),"ul,ol");return t&&(e==="insertunorderedlist"&&t.tagName==="UL"||e==="insertorderedlist"&&t.tagName==="OL")}},"state"),C({"FontSize,FontName":function(e){var t=0,n;if(n=g.getParent(y.getNode(),"span"))e=="fontsize"?t=n.style.fontSize:t=n.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return t}},"value"),C({Undo:function(){r.undoManager.undo()},Redo:function(){r.undoManager.redo()}})}}),i("tinymce/util/URI",["tinymce/util/Tools"],function(e){function s(e,i){var o=this,u,a;e=n(e),i=o.settings=i||{},u=i.base_uri;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e)){o.source=e;return}var f=e.indexOf("//")===0;e.indexOf("/")===0&&!f&&(e=(u?u.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(a=i.base_uri?i.base_uri.path:(new s(location.href)).directory,i.base_uri.protocol===""?e="//mce_host"+o.toAbsPath(a,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(u&&u.protocol||"http")+"://mce_host"+o.toAbsPath(a,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),t(r,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),o[t]=r});if(u){o.protocol||(o.protocol=u.protocol),o.userInfo||(o.userInfo=u.userInfo),!o.port&&o.host==="mce_host"&&(o.port=u.port);if(!o.host||o.host==="mce_host")o.host=u.host;o.source=""}f&&(o.protocol="")}var t=e.each,n=e.trim,r="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),i={ftp:21,http:80,https:443,mailto:25};return s.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t=this,n;if(e==="./")return e;e=new s(e,{base_uri:t});if(e.host!="mce_host"&&t.host!=e.host&&e.host||t.port!=e.port||t.protocol!=e.protocol&&e.protocol!=="")return e.getURI();var r=t.getURI(),i=e.getURI();return r==i||r.charAt(r.length-1)=="/"&&r.substr(0,r.length-1)==i?r:(n=t.toRelPath(t.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,t){return e=new s(e,{base_uri:this}),e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=i[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r=0,i="",s,o;e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/");if(e.length>=n.length)for(s=0,o=e.length;s<o;s++)if(s>=n.length||e[s]!=n[s]){r=s+1;break}if(e.length<n.length)for(s=0,o=n.length;s<o;s++)if(s>=e.length||e[s]!=n[s]){r=s+1;break}if(r===1)return t;for(s=0,o=e.length-(r-1);s<o;s++)i+="../";for(s=r-1,o=n.length;s<o;s++)s!=r-1?i+="/"+n[s]:i+=n[s];return i},toAbsPath:function(e,n){var r,i=0,s=[],o,u;o=/\/$/.test(n)?"/":"",e=e.split("/"),n=n.split("/"),t(e,function(e){e&&s.push(e)}),e=s;for(r=n.length-1,s=[];r>=0;r--){if(n[r].length===0||n[r]===".")continue;if(n[r]===".."){i++;continue}if(i>0){i--;continue}s.push(n[r])}return r=e.length-i,r<=0?u=s.reverse().join("/"):u=e.slice(0,r).join("/")+"/"+s.reverse().join("/"),u.indexOf("/")!==0&&(u="/"+u),o&&u.lastIndexOf("/")!==u.length-1&&(u+=o),u},getURI:function(e){var t,n=this;if(!n.source||e)t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t;return n.source}},s}),i("tinymce/util/Class",["tinymce/util/Tools"],function(e){function s(){}var t=e.each,n=e.extend,r,i;return s.extend=r=function(e){function l(){var e,t,n,r=this;if(!i){r.init&&r.init.apply(r,arguments),t=r.Mixins;if(t){e=t.length;while(e--)n=t[e],n.init&&n.init.apply(r,arguments)}}}function c(){return this}function h(e,t){return function(){var n=this,r=n._super,i;return n._super=o[e],i=t.apply(n,arguments),n._super=r,i}}var s=this,o=s.prototype,u,a,f;i=!0,u=new s,i=!1,e.Mixins&&(t(e.Mixins,function(t){t=t;for(var n in t)n!=="init"&&(e[n]=t[n])}),o.Mixins&&(e.Mixins=o.Mixins.concat(e.Mixins))),e.Methods&&t(e.Methods.split(","),function(t){e[t]=c}),e.Properties&&t(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t=this,r;return e!==r?(t[n]=e,t):t[n]}}),e.Statics&&t(e.Statics,function(e,t){l[t]=e}),e.Defaults&&o.Defaults&&(e.Defaults=n({},o.Defaults,e.Defaults));for(a in e)f=e[a],typeof f=="function"&&o[a]?u[a]=h(a,f):u[a]=f;return l.prototype=u,l.constructor=l,l.extend=r,l},s}),i("tinymce/util/EventDispatcher",["tinymce/util/Tools"],function(e){function n(e){function s(){return!1}function o(){return!0}function u(t,i){var u,a,l,c;t=t.toLowerCase(),i=i||{},i.type=t,i.target||(i.target=n),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=o},i.stopPropagation=function(){i.isPropagationStopped=o},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=o},i.isDefaultPrevented=s,i.isPropagationStopped=s,i.isImmediatePropagationStopped=s),e.beforeFire&&e.beforeFire(i),u=r[t];if(u)for(a=0,l=u.length;a<l;a++){u[a]=c=u[a],c.once&&f(t,c);if(i.isImmediatePropagationStopped())return i.stopPropagation(),i;if(c.call(n,i)===!1)return i.preventDefault(),i}return i}function a(e,n,o){var u,a,f;n===!1&&(n=s);if(n){a=e.toLowerCase().split(" "),f=a.length;while(f--)e=a[f],u=r[e],u||(u=r[e]=[],i(e,!0)),o?u.unshift(n):u.push(n)}return t}function f(e,n){var s,o,u,a,f;if(e){a=e.toLowerCase().split(" "),s=a.length;while(s--){e=a[s],o=r[e];if(!e){for(u in r)i(u,!1),delete r[u];return t}if(o){if(!n)o.length=0;else{f=o.length;while(f--)o[f]===n&&(o=o.slice(0,f).concat(o.slice(f+1)),r[e]=o)}o.length||(i(e,!1),delete r[e])}}}else{for(e in r)i(e,!1);r={}}return t}function l(e,t,n){return t.once=!0,a(e,t,n)}function c(e){return e=e.toLowerCase(),!!r[e]&&r[e].length!==0}var t=this,n,r={},i;e=e||{},n=e.scope||t,i=e.toggleEvent||s,t.fire=u,t.on=a,t.off=f,t.once=l,t.has=c}var t=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchend"," ");return n.isNative=function(e){return!!t[e.toLowerCase()]},n}),i("tinymce/ui/Selector",["tinymce/util/Class"],function(e){function t(e){var t=[],n=e.length,r;while(n--)r=e[n],r.__checked||(t.push(r),r.__checked=1);n=t.length;while(n--)delete t[n].__checked;return t}var n=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i=/^\s*|\s*$/g,s,o=e.extend({init:function(e){function s(e){if(e)return e=e.toLowerCase(),function(t){return e==="*"||t.type===e}}function o(e){if(e)return function(t){return t._name===e}}function u(e){if(e)return e=e.split("."),function(t){var n=e.length;while(n--)if(!t.hasClass(e[n]))return!1;return!0}}function a(e,t,n){if(e)return function(r){var i=r[e]?r[e]():"";return t?t==="="?i===n:t==="*="?i.indexOf(n)>=0:t==="~="?(" "+i+" ").indexOf(" "+n+" ")>=0:t==="!="?i!=n:t==="^="?i.indexOf(n)===0:t==="$="?i.substr(i.length-n.length)===n:!1:!!n}}function f(e){var n;if(e)return e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(n=c(e[1],[]),function(e){return!t(e,n)}):(e=e[2],function(t,n,r){return e==="first"?n===0:e==="last"?n===r-1:e==="even"?n%2===0:e==="odd"?n%2===1:t[e]?t[e]():!1})}function l(e,t,r){function c(e){e&&t.push(e)}var l;return l=n.exec(e.replace(i,"")),c(s(l[1])),c(o(l[2])),c(u(l[3])),c(a(l[4],l[5],l[6])),c(f(l[7])),t.psuedo=!!l[7],t.direct=r,t}function c(e,t){var n=[],i,s,o;do{r.exec(""),s=r.exec(e);if(s){e=s[3],n.push(s[1]);if(s[2]){i=s[3];break}}}while(s);i&&c(i,t),e=[];for(o=0;o<n.length;o++)n[o]!=">"&&e.push(l(n[o],[],n[o-1]===">"));return t.push(e),t}var t=this.match;this._selectors=c(e,[])},match:function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d;t=t||this._selectors;for(n=0,r=t.length;n<r;n++){o=t[n],s=o.length,d=e,p=0;for(i=s-1;i>=0;i--){f=o[i];while(d){if(f.psuedo){h=d.parent().items(),l=c=h.length;while(l--)if(h[l]===d)break}for(u=0,a=f.length;u<a;u++)if(!f[u](d,l,c)){u=a+1;break}if(u===a){p++;break}if(i===s-1)break;d=d.parent()}}if(p===s)return!0}return!1},find:function(e){function a(e,t,r){var i,s,o,u,f,l=t[r];for(i=0,s=e.length;i<s;i++){f=e[i];for(o=0,u=l.length;o<u;o++)if(!l[o](f,i,s)){o=u+1;break}if(o===u)r==t.length-1?n.push(f):f.items&&a(f.items(),t,r+1);else if(l.direct)return;f.items&&a(f.items(),t,r)}}var n=[],r,i,u=this._selectors;if(e.items){for(r=0,i=u.length;r<i;r++)a(e.items(),u[r],0);i>1&&(n=t(n))}return s||(s=o.Collection),new s(n)}});return o}),i("tinymce/ui/Collection",["tinymce/util/Tools","tinymce/ui/Selector","tinymce/util/Class"],function(e,t,n){var r,i,s=Array.prototype.push,o=Array.prototype.slice;return i={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?s.apply(n,t):t instanceof r?n.add(t.toArray()):s.call(n,t),n},set:function(e){var t=this,n=t.length,r;t.length=0,t.add(e);for(r=t.length;r<n;r++)delete t[r];return t},filter:function(e){var n=this,i,s,o=[],u,a;typeof e=="string"?(e=new t(e),a=function(t){return e.match(t)}):a=e;for(i=0,s=n.length;i<s;i++)u=n[i],a(u)&&o.push(u);return new r(o)},slice:function(){return new r(o.apply(this,arguments))},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){var t=this,n=t.length;while(n--)if(t[n]===e)break;return n},reverse:function(){return new r(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].hasClass(e):!1},prop:function(e,t){var n=this,r,i;if(t!==r)return n.each(function(n){n[e]&&n[e](t)}),n;i=n[0];if(i&&i[e])return i[e]()},exec:function(t){var n=this,r=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,r)}),n},remove:function(){var e=this.length;while(e--)this[e].remove();return this}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){i[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){i[e]=function(t){return this.prop(e,t)}}),r=n.extend(i),t.Collection=r,r}),i("tinymce/ui/DomUtils",["tinymce/util/Tools","tinymce/dom/DOMUtils"],function(e,t){var n=0;return{id:function(){return"mceu_"+n++},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,r){return t.DOM.toggleClass(e,n,r)},css:function(e,n,r){return t.DOM.setStyle(e,n,r)},getRuntimeStyle:function(e,n){return t.DOM.getStyle(e,n,!0)},on:function(e,n,r,i){return t.DOM.bind(e,n,r,i)},off:function(e,n,r){return t.DOM.unbind(e,n,r)},fire:function(e,n,r){return t.DOM.fire(e,n,r)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}}}),i("tinymce/ui/Control",["tinymce/util/Class","tinymce/util/Tools","tinymce/util/EventDispatcher","tinymce/ui/Collection","tinymce/ui/DomUtils"],function(e,t,n,r,i){function a(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,r){r&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e._rendered&&e.bindPendingEvents())}})),e._eventDispatcher}var s="onmousewheel"in document,o=!1,u="mce-",f=e.extend({Statics:{classPrefix:u},isRtl:function(){return f.rtl},classPrefix:u,init:function(e){var n=this,r,s;n.settings=e=t.extend({},n.Defaults,e),n._id=e.id||i.id(),n._text=n._name="",n._width=n._height=0,n._aria={role:e.role},this._elmCache={},r=e.classes;if(r){r=r.split(" "),r.map={},s=r.length;while(s--)r.map[r[s]]=!0}n._classes=r||[],n.visible(!0),t.each("title text width height name classes visible disabled active value".split(" "),function(t){var r=e[t],i;r!==i?n[t](r):n["_"+t]===i&&(n["_"+t]=!1)}),n.on("click",function(){if(n.disabled())return!1}),e.classes&&t.each(e.classes.split(" "),function(e){n.addClass(e)}),n.settings=e,n._borderBox=n.parseBox(e.border),n._paddingBox=n.parseBox(e.padding),n._marginBox=n.parseBox(e.margin),e.hidden&&n.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){var t,n=this.getRoot().controlIdLookup;while(e&&n){t=n[e.id];if(t)break;e=e.parentNode}return t},parseBox:function(e){var t,n=10;if(!e)return;return typeof e=="number"?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,t===1?e[1]=e[2]=e[3]=e[0]:t===2?(e[2]=e[0],e[3]=e[1]):t===3&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function r(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}},initLayoutRect:function(){var e=this,t=e.settings,n,r,s=e.getEl(),o,u,a,f,l,c,h,p;n=e._borderBox=e._borderBox||e.measureBox(s,"border"),e._paddingBox=e._paddingBox||e.measureBox(s,"padding"),e._marginBox=e._marginBox||e.measureBox(s,"margin"),p=i.getSize(s),c=t.minWidth,h=t.minHeight,a=c||p.width,f=h||p.height,o=t.width,u=t.height,l=t.autoResize,l=typeof l!="undefined"?l:!o&&!u,o=o||a,u=u||f;var d=n.left+n.right,v=n.top+n.bottom,m=t.maxWidth||65535,g=t.maxHeight||65535;return e._layoutRect=r={x:t.x||0,y:t.y||0,w:o,h:u,deltaW:d,deltaH:v,contentW:o-d,contentH:u-v,innerW:o-d,innerH:u-v,startMinWidth:c||0,startMinHeight:h||0,minW:Math.min(a,m),minH:Math.min(f,g),maxW:m,maxH:g,autoResize:l,scrollW:0},e._lastLayoutRect={},r},layoutRect:function(e){var t=this,n=t._layoutRect,r,i,s,o,u,a;n||(n=t.initLayoutRect());if(e){s=n.deltaW,o=n.deltaH,e.x!==u&&(n.x=e.x),e.y!==u&&(n.y=e.y),e.minW!==u&&(n.minW=e.minW),e.minH!==u&&(n.minH=e.minH),i=e.w,i!==u&&(i=i<n.minW?n.minW:i,i=i>n.maxW?n.maxW:i,n.w=i,n.innerW=i-s),i=e.h,i!==u&&(i=i<n.minH?n.minH:i,i=i>n.maxH?n.maxH:i,n.h=i,n.innerH=i-o),i=e.innerW,i!==u&&(i=i<n.minW-s?n.minW-s:i,i=i>n.maxW-s?n.maxW-s:i,n.innerW=i,n.w=i+s),i=e.innerH,i!==u&&(i=i<n.minH-o?n.minH-o:i,i=i>n.maxH-o?n.maxH-o:i,n.innerH=i,n.h=i+o),e.contentW!==u&&(n.contentW=e.contentW),e.contentH!==u&&(n.contentH=e.contentH),r=t._lastLayoutRect;if(r.x!==n.x||r.y!==n.y||r.w!==n.w||r.h!==n.h)a=f.repaintControls,a&&a.map&&!a.map[t._id]&&(a.push(t),a.map[t._id]=!0),r.x=n.x,r.y=n.y,r.w=n.w,r.h=n.h;return t}return n},repaint:function(){var e=this,t,n,r,i,s=0,o=0,u,a;a=document.createRange?function(e){return e}:Math.round,t=e.getEl().style,r=e._layoutRect,u=e._lastRepaintRect||{},i=e._borderBox,s=i.left+i.right,o=i.top+i.bottom,r.x!==u.x&&(t.left=a(r.x)+"px",u.x=r.x),r.y!==u.y&&(t.top=a(r.y)+"px",u.y=r.y),r.w!==u.w&&(t.width=a(r.w-s)+"px",u.w=r.w),r.h!==u.h&&(t.height=a(r.h-o)+"px",u.h=r.h),e._hasBody&&r.innerW!==u.innerW&&(n=e.getEl("body").style,n.width=a(r.innerW)+"px",u.innerW=r.innerW),e._hasBody&&r.innerH!==u.innerH&&(n=n||e.getEl("body").style,n.height=a(r.innerH)+"px",u.innerH=r.innerH),e._lastRepaintRect=u,e.fire("repaint",{},!1)},on:function(e,t){function r(e){var t,r;return typeof e!="string"?e:function(i){return t||n.parentsAndSelf().each(function(n){var i=n.settings.callbacks;if(i&&(t=i[e]))return r=n,!1}),t.call(r,i)}}var n=this;return a(n).on(e,r(t)),n},off:function(e,t){return a(this).off(e,t),this},fire:function(e,t,n){var r=this;t=t||{},t.control||(t.control=r),t=a(r).fire(e,t);if(n!==!1&&r.parent){var i=r.parent();while(i&&!t.isPropagationStopped())i.fire(e,t,!1),i=i.parent()}return t},hasEventListeners:function(e){return a(this).has(e)},parents:function(e){var t=this,n,i=new r;for(n=t.parent();n;n=n.parent())i.add(n);return e&&(i=i.filter(e)),i},parentsAndSelf:function(e){return(new r(this)).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){var n;while(e){n=t;while(n&&e!=n)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n=this,r,i;return e=this.classPrefix+e,r=n._classes[t||"control"],r||(r=[],r.map={},n._classes[t||"control"]=r),r.map[e]||(r.map[e]=e,r.push(e),n._rendered&&(i=n.getEl(t),i&&(i.className=r.join(" ")))),n},removeClass:function(e,t){var n=this,r,i,s;e=this.classPrefix+e,r=n._classes[t||"control"];if(r&&r.map[e]){delete r.map[e],i=r.length;while(i--)r[i]===e&&r.splice(i,1)}return n._rendered&&(s=n.getEl(t),s&&(s.className=r.join(" "))),n},toggleClass:function(e,t,n){var r=this;return t?r.addClass(e,n):r.removeClass(e,n),r},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},innerHtml:function(e){return i.innerHtml(this.getEl(),e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=i.get(t)),this._elmCache[t]},visible:function(e){var t=this,n;return typeof e!="undefined"?(t._visible!==e&&(t._rendered&&(t.getEl().style.display=e?"":"none"),t._visible=e,n=t.parent(),n&&(n._lastRect=null),t.fire(e?"show":"hide")),t):t._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return typeof t=="undefined"?n._aria[e]:(n._aria[e]=t,n._rendered&&r.setAttribute(e=="role"?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return f.translate?f.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e=this,t=e.getEl(),n=e.parent(),r,s;if(e.items){var o=e.items().toArray();s=o.length;while(s--)o[s].remove()}n&&n.items&&(r=[],n.items().each(function(t){t!==e&&r.push(t)}),n.items().set(r),n._lastRect=null),e._eventsRoot&&e._eventsRoot==e&&i.off(t);var u=e.getRoot().controlIdLookup;return u&&delete u[e._id],t&&t.parentNode&&t.parentNode.removeChild(t),e._rendered=!1,e},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(i.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(i.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e=this,t=e.settings,n,r,s,o,u;for(o in t)o.indexOf("on")===0&&e.on(o.substr(2),t[o]);if(e._eventsRoot){for(s=e.parent();!u&&s;s=s.parent())u=s._eventsRoot;if(u)for(o in u._nativeEvents)e._nativeEvents[o]=!0}e.bindPendingEvents(),t.style&&(n=e.getEl(),n&&(n.setAttribute("style",t.style),n.style.cssText=t.style)),e._visible||i.css(e.getEl(),"display","none"),e.settings.border&&(r=e.borderBox(),i.css(e.getEl(),{"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left}));var a=e.getRoot();a.controlIdLookup||(a.controlIdLookup={}),a.controlIdLookup[e._id]=e;for(var f in e._aria)e.aria(f,e._aria[f]);e.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,r,i=e;n=r=0;while(i&&i!=t&&i.nodeType)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}var n=this.getEl(),r=n.parentNode,i,s,o,u,a,f,l=t(n,r);return i=l.x,s=l.y,o=n.offsetWidth,u=n.offsetHeight,a=r.clientWidth,f=r.clientHeight,e=="end"?(i-=a-o,s-=f-u):e=="center"&&(i-=a/2-o/2,s-=f/2-u/2),r.scrollLeft=i,r.scrollTop=s,this},bindPendingEvents:function(){function l(t){var n=e.getParentCtrl(t.target);n&&n.fire(t.type,t)}function c(){var e=u._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),u._lastHoverCtrl=null)}function h(t){var n=e.getParentCtrl(t.target),r=u._lastHoverCtrl,i=0,s,o,a;if(n!==r){u._lastHoverCtrl=n,o=n.parents().toArray().reverse(),o.push(n);if(r){a=r.parents().toArray().reverse(),a.push(r);for(i=0;i<a.length;i++)if(o[i]!==a[i])break;for(s=a.length-1;s>=i;s--)r=a[s],r.fire("mouseleave",{target:r.getEl()})}for(s=i;s<o.length;s++)n=o[s],n.fire("mouseenter",{target:n.getEl()})}}function p(t){t.preventDefault(),t.type=="mousewheel"?(t.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-1/40*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail),t=e.fire("wheel",t)}var e=this,t,n,r,u,a,f;e._rendered=!0,a=e._nativeEvents;if(a){r=e.parents().toArray(),r.unshift(e);for(t=0,n=r.length;!u&&t<n;t++)u=r[t]._eventsRoot;u||(u=r[r.length-1]||e),e._eventsRoot=u;for(n=t,t=0;t<n;t++)r[t]._eventsRoot=u;var d=u._delegates;d||(d=u._delegates={});for(f in a){if(!a)return!1;if(f==="wheel"&&!o){s?i.on(e.getEl(),"mousewheel",p):i.on(e.getEl(),"DOMMouseScroll",p);continue}f==="mouseenter"||f==="mouseleave"?u._hasMouseEnter||(i.on(u.getEl(),"mouseleave",c),i.on(u.getEl(),"mouseover",h),u._hasMouseEnter=1):d[f]||(i.on(u.getEl(),f,l),d[f]=!0),a[f]=!1}}},getRoot:function(){var e=this,t,n=[];while(e){if(e.rootControl){t=e.rootControl;break}n.push(e),t=e,e=e.parent()}t||(t=this);var r=n.length;while(r--)n[r].rootControl=t;return t},reflow:function(){return this.repaint(),this}});return f}),i("tinymce/ui/Factory",[],function(){var e={},t;return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},create:function(n,r){var i,s,o;if(!t){o=tinymce.ui;for(s in o)e[s.toLowerCase()]=o[s];t=!0}typeof n=="string"?(r=r||{},r.type=n):(r=n,n=r.type),n=n.toLowerCase(),i=e[n];if(!i)throw new Error("Could not find control by type: "+n);return i=new i(r),i.type=n,i}}}),i("tinymce/ui/KeyboardNavigation",[],function(){return function(e){function s(e){return e=e||n,e&&e.getAttribute("role")}function o(e){var t,r=e||n;while(r=r.parentNode)if(t=s(r))return t}function u(e){var t=n;if(t)return t.getAttribute("aria-"+e)}function a(e){var t=e.tagName.toUpperCase();return t=="INPUT"||t=="TEXTAREA"}function f(e){return a(e)&&!e.hidden?!0:/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(s(e))?!0:!1}function l(e){function r(e){if(e.nodeType!=1||e.style.display=="none")return;f(e)&&n.push(e);for(var t=0;t<e.childNodes.length;t++)r(e.childNodes[t])}var n=[];return r(e||t.getEl()),n}function c(e){var t,n;e=e||r,n=e.parents().toArray(),n.unshift(e);for(var i=0;i<n.length;i++){t=n[i];if(t.settings.ariaRoot)break}return t}function h(e){var t=c(e),n=l(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?p(t.lastAriaIndex,n):p(0,n)}function p(e,t){return e<0?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var r=-1,i=c();t=t||l(i.getEl());for(var s=0;s<t.length;s++)t[s]===n&&(r=s);r+=e,i.lastAriaIndex=p(r,t)}function v(){var e=o();e=="tablist"?d(-1,l(n.parentNode)):r.parent().submenu?w():d(-1)}function m(){var e=s(),t=o();t=="tablist"?d(1,l(n.parentNode)):e=="menuitem"&&t=="menu"&&u("haspopup")?E():d(1)}function g(){d(-1)}function y(){var e=s(),t=o();e=="menuitem"&&t=="menubar"?E():e=="button"&&u("haspopup")?E({key:"down"}):d(1)}function b(e){var t=o();if(t=="tablist"){var n=l(r.getEl("body"))[0];n&&n.focus()}else d(e.shiftKey?-1:1)}function w(){r.fire("cancel")}function E(e){e=e||{},r.fire("click",{target:n,aria:e})}var t=e.root,n,r;try{n=document.activeElement}catch(i){n=document.body}return r=t.getParentCtrl(n),t.on("keydown",function(e){function t(e,t){if(a(n))return;t(e)!==!1&&e.preventDefault()}if(e.isDefaultPrevented())return;switch(e.keyCode){case 37:t(e,v);break;case 39:t(e,m);break;case 38:t(e,g);break;case 40:t(e,y);break;case 27:w();break;case 14:case 13:case 32:t(e,E);break;case 9:b(e)!==!1&&e.preventDefault()}}),t.on("focusin",function(e){n=e.target,r=e.control}),{focusFirst:h}}}),i("tinymce/ui/Container",["tinymce/ui/Control","tinymce/ui/Collection","tinymce/ui/Selector","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/util/Tools","tinymce/ui/DomUtils"],function(e,t,n,r,i,s,o){var u={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var n=this;n._super(e),e=n.settings,n._fixed=e.fixed,n._items=new t,n.isRtl()&&n.addClass("rtl"),n.addClass("container"),n.addClass("container-body","body"),e.containerCls&&n.addClass(e.containerCls),n._layout=r.create((e.layout||n.layout)+"layout"),n.settings.items&&n.add(n.settings.items),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=u[e]=u[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t=this,n,r,i;if(e){r=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav;if(r){r.focusFirst(t);return}}return i=t.find("*"),t.statusbar&&i.add(t.statusbar.items()),i.each(function(e){if(e.settings.autofocus)return n=null,!1;e.canFocus&&(n=n||e)}),n&&n.focus(),t},replace:function(e,t){var n,r=this.items(),i=r.length;while(i--)if(r[i]===e){r[i]=t;break}i>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n=this,i,o=[];return s.isArray(t)||(t=[t]),s.each(t,function(t){t&&(t instanceof e||(typeof t=="string"&&(t={type:t}),i=s.extend({},n.settings.defaults,t),t.type=i.type=i.type||t.type||n.settings.defaultType||(i.defaults?i.defaults.type:null),t=r.create(i)),o.push(t))}),o},renderNew:function(){var e=this;return e.items().each(function(t,n){var r,i;t.parent(e),t._rendered||(r=e.getEl("body"),i=o.createFragment(t.renderHtml()),r.hasChildNodes()&&n<=r.childNodes.length-1?r.insertBefore(i,r.childNodes[n]):r.appendChild(i),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r=this,i,s,o;return e=r.create(e),i=r.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(s=i.slice(0,t).toArray(),o=i.slice(t).toArray(),i.set(s.concat(e,o))),r.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),r=e.value();n&&typeof r!="undefined"&&(t[n]=r)}),t},preRender:function(){},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"'+(n?' role="'+this.settings.role+'"':"")+">"+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this,t;return e.items().exec("postRender"),e._super(),e._layout.postRender(e),e._rendered=!0,e.settings.style&&o.css(e.getEl(),e.settings.style),e.settings.border&&(t=e.borderBox(),o.css(e.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),e.parent()||(e.keyboardNav=new i({root:e})),e},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;if(!n||n.w!=t.w||n.h!=t.h)return e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0},reflow:function(){var t;if(this.visible()){e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;while(t--)e.repaintControls[t].repaint();this.settings.layout!=="flow"&&this.settings.layout!=="stack"&&this.repaint(),e.repaintControls=[]}return this}})}),i("tinymce/ui/DragHelper",["tinymce/ui/DomUtils"],function(e){function t(){var e=document,t,n,r,i,s,o,u,a,f=Math.max;return t=e.documentElement,n=e.body,r=f(t.scrollWidth,n.scrollWidth),i=f(t.clientWidth,n.clientWidth),s=f(t.offsetWidth,n.offsetWidth),o=f(t.scrollHeight,n.scrollHeight),u=f(t.clientHeight,n.clientHeight),a=f(t.offsetHeight,n.offsetHeight),{width:r<s?i:r,height:o<a?u:o}}return function(n,r){function h(){return s.getElementById(r.handle||n)}var i,s=document,o,u,a,f,l,c;r=r||{},u=function(n){var u=t(),p,d;n.preventDefault(),o=n.button,p=h(),l=n.screenX,c=n.screenY,window.getComputedStyle?d=window.getComputedStyle(p,null).getPropertyValue("cursor"):d=p.runtimeStyle.cursor,i=s.createElement("div"),e.css(i,{position:"absolute",top:0,left:0,width:u.width,height:u.height,zIndex:2147483647,opacity:1e-4,cursor:d}),s.body.appendChild(i),e.on(s,"mousemove",f),e.on(s,"mouseup",a),r.start(n)},f=function(e){if(e.button!==o)return a(e);e.deltaX=e.screenX-l,e.deltaY=e.screenY-c,e.preventDefault(),r.drag(e)},a=function(t){e.off(s,"mousemove",f),e.off(s,"mouseup",a),i.parentNode.removeChild(i),r.stop&&r.stop(t)},this.destroy=function(){e.off(h())},e.on(h(),"mousedown",u)}}),i("tinymce/ui/Scrollable",["tinymce/ui/DomUtils","tinymce/ui/DragHelper"],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function i(){function o(s,o,u,a,f,l){var c,h,p,d,v,m,g,y,b;h=n.getEl("scroll"+s);if(h){y=o.toLowerCase(),b=u.toLowerCase(),n.getEl("absend")&&e.css(n.getEl("absend"),y,n.layoutRect()[a]-1);if(!f){e.css(h,"display","none");return}e.css(h,"display","block"),c=n.getEl("body"),p=n.getEl("scroll"+s+"t"),d=c["client"+u]-r*2,d-=t&&i?h["client"+l]:0,v=c["scroll"+u],m=d/v,g={},g[y]=c["offset"+o]+r,g[b]=d,e.css(h,g),g={},g[y]=c["scroll"+o]*m,g[b]=d*m,e.css(p,g)}}var t,i,s;s=n.getEl("body"),t=s.scrollWidth>s.clientWidth,i=s.scrollHeight>s.clientHeight,o("h","Left","Width","contentW",t,"Height"),o("v","Top","Height","contentH",i,"Width")}function s(){function i(i,s,o,u,a){var f,l=n._id+"-scroll"+i,c=n.classPrefix;n.getEl().appendChild(e.createFragment('<div id="'+l+'" class="'+c+"scrollbar "+c+"scrollbar-"+i+'">'+'<div id="'+l+'t" class="'+c+'scrollbar-thumb"></div>'+"</div>")),n.draghelper=new t(l+"t",{start:function(){f=n.getEl("body")["scroll"+s],e.addClass(e.get(l),c+"active")},drag:function(e){var t,l,c,h,p=n.layoutRect();l=p.contentW>p.innerW,c=p.contentH>p.innerH,h=n.getEl("body")["client"+o]-r*2,h-=l&&c?n.getEl("scroll"+i)["client"+a]:0,t=h/n.getEl("body")["scroll"+o],n.getEl("body")["scroll"+s]=f+e["delta"+u]/t},stop:function(){e.removeClass(e.get(l),c+"active")}})}n.addClass("scroll"),i("v","Top","Height","Y","Width"),i("h","Left","Width","X","Height")}var n=this,r=2;n.settings.autoScroll&&(n._hasScroll||(n._hasScroll=!0,s(),n.on("wheel",function(e){var t=n.getEl("body");t.scrollLeft+=(e.deltaX||0)*10,t.scrollTop+=e.deltaY*10,i()}),e.on(n.getEl("body"),"scroll",i)),i())}}}),i("tinymce/ui/Panel",["tinymce/ui/Container","tinymce/ui/Scrollable"],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),typeof n=="undefined"?n='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>":(typeof n=="function"&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),i("tinymce/ui/Movable",["tinymce/ui/DomUtils"],function(e){function t(t,n,r){var i,s,o,u,a,f,l,c,h,p;return h=e.getViewPort(),s=e.getPos(n),o=s.x,u=s.y,t._fixed&&e.getRuntimeStyle(document.body,"position")=="static"&&(o-=h.x,u-=h.y),i=t.getEl(),p=e.getSize(i),a=p.width,f=p.height,p=e.getSize(n),l=p.width,c=p.height,r=(r||"").split(""),r[0]==="b"&&(u+=c),r[1]==="r"&&(o+=l),r[0]==="c"&&(u+=Math.round(c/2)),r[1]==="c"&&(o+=Math.round(l/2)),r[3]==="b"&&(u-=f),r[4]==="r"&&(o-=a),r[3]==="c"&&(u-=Math.round(f/2)),r[4]==="c"&&(o-=Math.round(a/2)),{x:o,y:u,w:a,h:f}}return{testMoveRel:function(n,r){var i=e.getViewPort();for(var s=0;s<r.length;s++){var o=t(this,n,r[s]);if(this._fixed){if(o.x>0&&o.x+o.w<i.w&&o.y>0&&o.y+o.h<i.h)return r[s]}else if(o.x>i.x&&o.x+o.w<i.w+i.x&&o.y>i.y&&o.y+o.h<i.h+i.y)return r[s]}return r[0]},moveRel:function(e,n){typeof n!="string"&&(n=this.testMoveRel(e,n));var r=t(this,e,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(t,n){function i(e,t,n){return e<0?0:e+n>t?(e=t-n,e<0?0:e):e}var r=this;if(r.settings.constrainToViewport){var s=e.getViewPort(window),o=r.layoutRect();t=i(t,s.w+s.x,o.w),n=i(n,s.h+s.y,o.h)}return r._rendered?r.layoutRect({x:t,y:n}).repaint():(r.settings.x=t,r.settings.y=n),r.fire("move",{x:t,y:n}),r}}}),i("tinymce/ui/Resizable",["tinymce/ui/DomUtils"],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(t<=1||n<=1){var r=e.getWindowSize();t=t<=1?t*r.w:t,n=n<=1?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}}}),i("tinymce/ui/FloatPanel",["tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/DomUtils"],function(e,t,n,r){function l(){function e(e,t){while(e){if(e==t)return!0;e=e.parent()}}i||(i=function(t){if(t.button==2)return;var n=u.length;while(n--){var r=u[n],i=r.getParentCtrl(t.target);if(r.settings.autohide){if(i)if(e(i,r)||r.parent()===i)continue;t=r.fire("autohide",{target:t.target}),t.isDefaultPrevented()||r.hide()}}},r.on(document,"click",i))}function c(){s||(s=function(){var e;e=u.length;while(e--)p(u[e])},r.on(window,"scroll",s))}function h(){if(!o){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;o=function(){if(!document.all||t!=e.clientWidth||n!=e.clientHeight)t=e.clientWidth,n=e.clientHeight,v.hideAll()},r.on(window,"resize",o)}}function p(e){function n(t,n){var r;for(var i=0;i<u.length;i++)if(u[i]!=e){r=u[i].parent();while(r&&(r=r.parent()))r==e&&u[i].fixed(t).moveBy(0,n).repaint()}}var t=r.getViewPort().y;e.settings.autofix&&(e._fixed?e._autoFixY>t&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),n(!1,e._autoFixY-t)):(e._autoFixY=e.layoutRect().y,e._autoFixY<t&&(e.fixed(!0).layoutRect({y:0}).repaint(),n(!0,t-e._autoFixY))))}function d(e,t){var n,i=v.zIndex||65535,s;if(e)a.push(t);else{n=a.length;while(n--)a[n]===t&&a.splice(n,1)}if(a.length)for(n=0;n<a.length;n++)a[n].modal&&(i++,s=a[n]),a[n].getEl().style.zIndex=i,a[n].zIndex=i,i++;var o=document.getElementById(t.classPrefix+"modal-block");s?r.css(o,"z-index",s.zIndex-1):o&&(o.parentNode.removeChild(o),f=!1),v.currentZIndex=i}function m(e){var t;t=u.length;while(t--)u[t]===e&&u.splice(t,1);t=a.length;while(t--)a[t]===e&&a.splice(t,1)}var i,s,o,u=[],a=[],f,v=e.extend({Mixins:[t,n],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.addClass("floatpanel"),e.autohide&&(l(),h(),u.push(t)),e.autofix&&(c(),t.on("move",function(){p(this)})),t.on("postrender show",function(e){if(e.control==t){var n,i=t.classPrefix;t.modal&&!f&&(n=r.createFragment('<div id="'+i+'modal-block" class="'+i+"reset "+i+'fade"></div>'),n=n.firstChild,t.getContainerElm().appendChild(n),setTimeout(function(){r.addClass(n,i+"in"),r.addClass(t.getEl(),i+"in")},0),f=!0),d(!0,t)}}),t.on("show",function(){t.parents().each(function(e){if(e._fixed)return t.fixed(!0),!1})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.addClass("popover").addClass("bottom").addClass(t.isRtl()?"end":"start"))},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var n=r.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.toggleClass("fixed",e),t._fixed=e}return t},show:function(){var e=this,t,n=e._super();t=u.length;while(t--)if(u[t]===e)break;return t===-1&&u.push(e),n},hide:function(){return m(this),d(!1,this),this._super()},hideAll:function(){v.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),d(!1,e)),e},remove:function(){m(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return v.hideAll=function(){var e=u.length;while(e--){var t=u[e];t&&t.settings.autohide&&(t.hide(),u.splice(e,1))}},v}),i("tinymce/ui/Window",["tinymce/ui/FloatPanel","tinymce/ui/Panel","tinymce/ui/DomUtils","tinymce/ui/DragHelper"],function(e,t,n,r){var i=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.addClass("rtl"),n.addClass("window"),n._fixed=!0,e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.addClass("foot"),n.statusbar.parent(n)),n.on("click",function(e){e.target.className.indexOf(n.classPrefix+"close")!=-1&&n.close()}),n.on("cancel",function(){n.close()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e=this,t=e.statusbar,r,i,s,o;e._fullscreen&&(e.layoutRect(n.getWindowSize()),e.layoutRect().contentH=e.layoutRect().innerH),e._super(),r=e.layoutRect(),e.settings.title&&!e._fullscreen&&(i=r.headerW,i>r.w&&(s=r.x-Math.max(0,i/2),e.layoutRect({w:i,x:s}),o=!0)),t&&(t.layoutRect({w:e.layoutRect().innerW}).recalc(),i=t.layoutRect().minW+r.deltaW,i>r.w&&(s=r.x-Math.max(0,i-r.w),e.layoutRect({w:i,x:s}),o=!0)),o&&e.recalc()},initLayoutRect:function(){var e=this,t=e._super(),r=0,i;if(e.settings.title&&!e._fullscreen){i=e.getEl("head");var s=n.getSize(i);t.headerW=s.width,t.headerH=s.height,r+=t.headerH}e.statusbar&&(r+=e.statusbar.layoutRect().h),t.deltaH+=r,t.minH+=r,t.h+=r;var o=n.getWindowSize();return t.x=Math.max(0,o.w/2-t.w/2),t.y=Math.max(0,o.h/2-t.h/2),t},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,i=e.settings,s="",o="",u=i.html;return e.preRender(),t.preRender(e),i.title&&(s='<div id="'+n+'-head" class="'+r+'window-head">'+'<div id="'+n+'-title" class="'+r+'title">'+e.encode(i.title)+"</div>"+'<button type="button" class="'+r+'close" aria-hidden="true">×</button>'+'<div id="'+n+'-dragh" class="'+r+'dragh"></div>'+"</div>"),i.url&&(u='<iframe src="'+i.url+'" tabindex="-1"></iframe>'),typeof u=="undefined"&&(u=t.renderHtml(e)),e.statusbar&&(o=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes()+'" hidefocus="1">'+'<div class="'+e.classPrefix+'reset" role="application">'+s+'<div id="'+n+'-body" class="'+e.classes("body")+'">'+u+"</div>"+o+"</div>"+"</div>"},fullscreen:function(e){var t=this,r=document.documentElement,i,s=t.classPrefix,o;if(e!=t._fullscreen){n.on(window,"resize",function(){var e;if(t._fullscreen)if(!i){e=(new Date).getTime();var r=n.getWindowSize();t.moveTo(0,0).resizeTo(r.w,r.h),(new Date).getTime()-e>50&&(i=!0)}else t._timer||(t._timer=setTimeout(function(){var e=n.getWindowSize();t.moveTo(0,0).resizeTo(e.w,e.h),t._timer=0},50))}),o=t.layoutRect(),t._fullscreen=e;if(!e)t._borderBox=t.parseBox(t.settings.border),t.getEl("head").style.display="",o.deltaH+=o.headerH,n.removeClass(r,s+"fullscreen"),n.removeClass(document.body,s+"fullscreen"),t.removeClass("fullscreen"),t.moveTo(t._initial.x,t._initial.y).resizeTo(t._initial.w,t._initial.h);else{t._initial={x:o.x,y:o.y,w:o.w,h:o.h},t._borderBox=t.parseBox("0"),t.getEl("head").style.display="none",o.deltaH-=o.headerH+2,n.addClass(r,s+"fullscreen"),n.addClass(document.body,s+"fullscreen"),t.addClass("fullscreen");var u=n.getWindowSize();t.moveTo(0,0).resizeTo(u.w,u.h)}}return t.reflow()},postRender:function(){var e=this,t;setTimeout(function(){e.addClass("in")},0),e._super(),e.statusbar&&e.statusbar.postRender(),e.focus(),this.dragHelper=new r(e._id+"-dragh",{start:function(){t={x:e.layoutRect().x,y:e.layoutRect().y}},drag:function(n){e.moveTo(t.x+n.deltaX,t.y+n.deltaY)}}),e.on("submit",function(t){t.isDefaultPrevented()||e.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t=e.classPrefix;e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),e._fullscreen&&(n.removeClass(document.documentElement,t+"fullscreen"),n.removeClass(document.body,t+"fullscreen"))},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return i}),i("tinymce/ui/MessageBox",["tinymce/ui/Window"],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function s(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),i(t)}}}var r,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[s("Ok",!0,!0),s("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:r=[s("Yes",1,!0),s("No",0)],n.buttons==t.YES_NO_CANCEL&&r.push(s("Cancel",-1));break;default:r=[s("Ok",!0,!0)]}return(new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){i(!1)}})).renderTo(document.body).reflow()},alert:function(e,n){return typeof e=="string"&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return typeof e=="string"&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),i("tinymce/WindowManager",["tinymce/ui/Window","tinymce/ui/MessageBox"],function(e,t){return function(n){function s(){if(i.length)return i[i.length-1]}var r=this,i=[];r.windows=i,n.on("remove",function(){var e=i.length;while(e--)i[e].close()}),r.open=function(t,r){var s;return n.editorManager.setActive(n),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),!t.url&&!t.buttons&&(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){s.find("form")[0].submit()}},{text:"Cancel",onclick:function(){s.close()}}]),s=new e(t),i.push(s),s.on("close",function(){var e=i.length;while(e--)i[e]===s&&i.splice(e,1);i.length||n.focus()}),t.data&&s.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),s.features=t||{},s.params=r||{},i.length===1&&n.nodeChanged(),s.renderTo().reflow()},r.alert=function(e,r,i){t.alert(e,function(){r?r.call(i||this):n.focus()})},r.confirm=function(e,n,r){t.confirm(e,function(e){n.call(r||this,e)})},r.close=function(){s()&&s().close()},r.getParams=function(){return s()?s().params:null},r.setParams=function(e){s()&&(s().params=e)},r.getWindows=function(){return i}}}),i("tinymce/util/Quirks",["tinymce/util/VK","tinymce/dom/RangeUtils","tinymce/html/Node","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools"],function(e,t,n,r,i,s){return function(o){function y(e,t){try{o.getDoc().execCommand(e,!1,t)}catch(n){}}function b(){var e=o.getDoc().documentMode;return e?e:6}function w(e){return e.isDefaultPrevented()}function E(){function h(e){var t=new r(function(){});s.each(o.getBody().getElementsByTagName("*"),function(e){e.tagName=="SPAN"&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&o.dom.setAttrib(e,"style",o.dom.getAttrib(e,"style"))}),t.observe(o.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),o.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null);var n=o.selection.getRng(),i=n.startContainer.parentNode;s.each(t.takeRecords(),function(e){if(!l.isChildOf(e.target,o.getBody()))return;if(e.attributeName=="style"){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}s.each(e.addedNodes,function(e){if(e.nodeName=="SPAN"&&!e.getAttribute("mce-data-marked")){var t,r;e==i&&(t=n.startOffset,r=e.firstChild),l.remove(e,!0),r&&(n.setStart(r,t),n.setEnd(r,t),o.selection.setRng(n))}})}),t.disconnect(),s.each(o.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")})}var t=o.getDoc(),n="data:text/mce-internal,",r=window.MutationObserver,i,u;r||(i=!0,r=function(){function n(t){var n=t.relatedNode||t.target;e.push({target:n,addedNodes:[n]})}function r(t){var n=t.relatedNode||t.target;e.push({target:n,attributeName:t.attrName})}var e=[],t;this.observe=function(e){t=e,t.addEventListener("DOMSubtreeModified",n,!1),t.addEventListener("DOMNodeInsertedIntoDocument",n,!1),t.addEventListener("DOMNodeInserted",n,!1),t.addEventListener("DOMAttrModified",r,!1)},this.disconnect=function(){t.removeEventListener("DOMSubtreeModified",n,!1),t.removeEventListener("DOMNodeInsertedIntoDocument",n,!1),t.removeEventListener("DOMNodeInserted",n,!1),t.removeEventListener("DOMAttrModified",r,!1)},this.takeRecords=function(){return e}}),o.on("keydown",function(t){var n=t.keyCode==f,r=e.metaKeyPressed(t);if(!w(t)&&(n||t.keyCode==a)){var i=o.selection.getRng(),s=i.startContainer,u=i.startOffset;if(!r&&i.collapsed&&s.nodeType==3)if(n?u<s.data.length:u>0)return;t.preventDefault(),r&&o.selection.getSel().modify("extend",n?"forward":"backward","word"),h(n)}}),o.on("keypress",function(t){!w(t)&&!c.isCollapsed()&&t.charCode&&!e.metaKeyPressed(t)&&(t.preventDefault(),h(!0),o.selection.setContent(String.fromCharCode(t.charCode)))}),o.addCommand("Delete",function(){h()}),o.addCommand("ForwardDelete",function(){h(!0)});if(i)return;o.on("dragstart",function(e){var t;o.selection.isCollapsed()&&e.target.tagName=="IMG"&&c.select(e.target),u=c.getRng(),t=o.selection.getContent(),t.length>0&&e.dataTransfer.setData("URL","data:text/mce-internal,"+escape(t))}),o.on("drop",function(e){if(!w(e)){var r=e.dataTransfer.getData("URL");if(!r||r.indexOf(n)==-1||!t.caretRangeFromPoint)return;r=unescape(r.substr(n.length)),t.caretRangeFromPoint&&(e.preventDefault(),window.setTimeout(function(){var n=t.caretRangeFromPoint(e.x,e.y);u&&(c.setRng(u),u=null),h(),c.setRng(n),o.insertContent(r)},0))}}),o.on("cut",function(e){!w(e)&&e.clipboardData&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",o.selection.getContent()),e.clipboardData.setData("text/plain",o.selection.getContent({format:"text"})),h(!0))})}function S(){function e(e){var t=l.create("body"),n=e.cloneContents();return t.appendChild(n),c.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var r=n.duplicate();return r.moveToElementText(o.getBody()),t.compareRanges(n,r)}var i=e(n),s=l.createRng();s.selectNode(o.getBody());var u=e(s);return i===u}o.on("keydown",function(e){var t=e.keyCode,r,i;if(!w(e)&&(t==f||t==a)){r=o.selection.isCollapsed(),i=o.getBody();if(r&&!l.isEmpty(i))return;if(!r&&!n(o.selection.getRng()))return;e.preventDefault(),o.setContent(""),i.firstChild&&l.isBlock(i.firstChild)?o.selection.setCursorLocation(i.firstChild,0):o.selection.setCursorLocation(i,0),o.nodeChanged()}})}function x(){o.shortcuts.add("ctrl+a",null,"SelectAll")}function T(){o.settings.content_editable||(l.bind(o.getDoc(),"focusin",function(){c.setRng(c.getRng())}),l.bind(o.getDoc(),"mousedown mouseup",function(e){e.target==o.getDoc().documentElement&&(o.getBody().focus(),e.type=="mousedown"?c.placeCaretAt(e.clientX,e.clientY):c.setRng(c.getRng()))}))}function N(){o.on("keydown",function(e){if(!w(e)&&e.keyCode===a){if(!o.getBody().getElementsByTagName("hr").length)return;if(c.isCollapsed()&&c.getRng(!0).startOffset===0){var t=c.getNode(),n=t.previousSibling;if(t.nodeName=="HR"){l.remove(t),e.preventDefault();return}n&&n.nodeName&&n.nodeName.toLowerCase()==="hr"&&(l.remove(n),e.preventDefault())}}})}function C(){window.Range.prototype.getClientRects||o.on("mousedown",function(e){if(!w(e)&&e.target.nodeName==="HTML"){var t=o.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function k(){o.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&(e.preventDefault(),c.getSel().setBaseAndExtent(t,0,t,1),o.nodeChanged()),t.nodeName=="A"&&l.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),c.select(t))})}function L(){function e(){var e=l.getAttribs(c.getStart().cloneNode(!1));return function(){var t=c.getStart();t!==o.getBody()&&(l.setAttrib(t,"style",null),u(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!c.isCollapsed()&&l.getParent(c.getStart(),l.isBlock)!=l.getParent(c.getEnd(),l.isBlock)}o.on("keypress",function(n){var r;if(!w(n)&&(n.keyCode==8||n.keyCode==46)&&t())return r=e(),o.getDoc().execCommand("delete",!1,null),r(),n.preventDefault(),!1}),l.bind(o.getDoc(),"cut",function(n){var r;!w(n)&&t()&&(r=e(),setTimeout(function(){r()},0))})}function A(){document.body.setAttribute("role","application")}function O(){o.on("keydown",function(e){if(!w(e)&&e.keyCode===a&&c.isCollapsed()&&c.getRng(!0).startOffset===0){var t=c.getNode().previousSibling;if(t&&t.nodeName&&t.nodeName.toLowerCase()==="table")return e.preventDefault(),!1}})}function M(){if(b()>7)return;y("RespectVisibilityInDesign",!0),o.contentStyles.push(".mceHideBrInPre pre br {display: none}"),l.addClass(o.getBody(),"mceHideBrInPre"),p.addNodeFilter("pre",function(e){var t=e.length,r,i,s,o;while(t--){r=e[t].getAll("br"),i=r.length;while(i--)s=r[i],o=s.prev,o&&o.type===3&&o.value.charAt(o.value-1)!="\n"?o.value+="\n":s.parent.insert(new n("#text",3),s,!0).value="\n"}}),d.addNodeFilter("pre",function(e){var t=e.length,n,r,i,s;while(t--){n=e[t].getAll("br"),r=n.length;while(r--)i=n[r],s=i.prev,s&&s.type==3&&(s.value=s.value.replace(/\r?\n$/,""))}})}function _(){l.bind(o.getBody(),"mouseup",function(){var e,t=c.getNode();if(t.nodeName=="IMG"){if(e=l.getStyle(t,"width"))l.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),l.setStyle(t,"width","");if(e=l.getStyle(t,"height"))l.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),l.setStyle(t,"height","")}})}function D(){o.on("keydown",function(t){var n,r,i,s,u;if(w(t)||t.keyCode!=e.BACKSPACE)return;n=c.getRng(),r=n.startContainer,i=n.startOffset,s=l.getRoot(),u=r;if(!n.collapsed||i!==0)return;while(u&&u.parentNode&&u.parentNode.firstChild==u&&u.parentNode!=s)u=u.parentNode;u.tagName==="BLOCKQUOTE"&&(o.formatter.toggle("blockquote",null,u),n=l.createRng(),n.setStart(r,0),n.setEnd(r,0),c.setRng(n))})}function P(){function e(){o._refreshContentEditable(),y("StyleWithCSS",!1),y("enableInlineTableEditing",!1),h.object_resizing||y("enableObjectResizing",!1)}h.readonly||o.on("BeforeExecCommand MouseDown",e)}function H(){function e(){u(l.select("a"),function(e){var t=e.parentNode,n=l.getRoot();if(t.lastChild===e){while(t&&!l.isBlock(t)){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}l.add(t,"br",{"data-mce-bogus":1})}})}o.on("SetContent ExecCommand",function(t){(t.type=="setcontent"||t.command==="mceInsertLink")&&e()})}function B(){h.forced_root_block&&o.on("init",function(){y("DefaultParagraphSeparator",h.forced_root_block)})}function j(){o.on("Undo Redo SetContent",function(e){e.initial||o.execCommand("mceRepaint")})}function F(){o.on("keydown",function(e){var t;!w(e)&&e.keyCode==a&&(t=o.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),o.undoManager.beforeChange(),l.remove(t.item(0)),o.undoManager.add()))})}function I(){var e;b()>=10&&(e="",u("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),o.contentStyles.push(e+"{padding-right: 1px !important}"))}function q(){b()<9&&(p.addNodeFilter("noscript",function(e){var t=e.length,n,r;while(t--)n=e[t],r=n.firstChild,r&&n.attr("data-mce-innertext",r.value)}),d.addNodeFilter("noscript",function(e){var t=e.length,i,s,o;while(t--)i=e[t],s=e[t].firstChild,s?s.value=r.decode(s.value):(o=i.attributes.map["data-mce-innertext"],o&&(i.attr("data-mce-innertext",null),s=new n("#text",3),s.value=o,s.raw=!0,i.append(s)))}))}function R(){function s(e,n){var r=t.createTextRange();try{r.moveToPoint(e,n)}catch(i){r=null}return r}function o(e){var t;e.button?(t=s(e.x,e.y),t&&(t.compareEndPoints("StartToStart",r)>0?t.setEndPoint("StartToStart",r):t.setEndPoint("EndToEnd",r),t.select())):u()}function u(){var t=e.selection.createRange();r&&!t.item&&t.compareEndPoints("StartToEnd",t)===0&&r.select(),l.unbind(e,"mouseup",u),l.unbind(e,"mousemove",o),r=n=0}var e=l.doc,t=e.body,n,r,i;e.documentElement.unselectable=!0,l.bind(e,"mousedown contextmenu",function(t){if(t.target.nodeName==="HTML"){n&&u(),i=e.documentElement;if(i.scrollHeight>i.clientHeight)return;n=1,r=s(t.x,t.y),r&&(l.bind(e,"mouseup",u),l.bind(e,"mousemove",o),l.getRoot().focus(),r.select())}})}function U(){o.on("keyup focusin mouseup",function(t){(t.keyCode!=65||!e.metaKeyPressed(t))&&c.normalize()},!0)}function z(){o.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function W(){o.inline||o.on("keydown",function(){document.activeElement==document.body&&o.getWin().focus()})}function X(){o.inline||(o.contentStyles.push("body {min-height: 150px}"),o.on("click",function(e){e.target.nodeName=="HTML"&&(o.getBody().focus(),o.selection.normalize(),o.nodeChanged())}))}function V(){i.mac&&o.on("keydown",function(t){e.metaKeyPressed(t)&&(t.keyCode==37||t.keyCode==39)&&(t.preventDefault(),o.selection.getSel().modify("move",t.keyCode==37?"backward":"forward","word"))})}function $(){y("AutoUrlDetect",!1)}function J(){o.inline||o.on("focus blur beforegetcontent",function(){var e=o.dom.create("br");o.getBody().appendChild(e),e.parentNode.removeChild(e)},!0)}function K(){o.on("click",function(e){var t=e.target;do if(t.tagName==="A"){e.preventDefault();return}while(t=t.parentNode)}),o.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function Q(){o.on("touchstart",function(e){var t,n,r,i;t=e.target,n=(new Date).getTime(),i=e.changedTouches;if(!i||i.length>1)return;r=i[0],o.once("touchend",function(e){var i=e.changedTouches[0],s;if((new Date).getTime()-n>500)return;if(Math.abs(r.clientX-i.clientX)>5)return;if(Math.abs(r.clientY-i.clientY)>5)return;s={target:t},u("pageX pageY clientX clientY screenX screenY".split(" "),function(e){s[e]=i[e]}),s=o.fire("click",s),s.isDefaultPrevented()||(o.selection.placeCaretAt(i.clientX,i.clientY),o.nodeChanged())})})}function G(){o.on("init",function(){o.dom.bind(o.getBody(),"submit",function(e){e.preventDefault()})})}function Y(){p.addNodeFilter("br",function(e){var t=e.length;while(t--)e[t].attr("class")=="Apple-interchange-newline"&&e[t].remove()})}var u=s.each,a=e.BACKSPACE,f=e.DELETE,l=o.dom,c=o.selection,h=o.settings,p=o.parser,d=o.serializer,v=i.gecko,m=i.ie,g=i.webkit;D(),S(),U(),g&&(E(),T(),k(),B(),G(),O(),Y(),Q(),i.iOS?(W(),X(),K()):x()),m&&i.ie<11&&(N(),A(),M(),_(),F(),I(),q(),R()),i.ie>=11&&(X(),J(),O()),i.ie&&(x(),$()),v&&(N(),C(),L(),P(),H(),j(),z(),V(),O())}}),i("tinymce/util/Observable",["tinymce/util/EventDispatcher"],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,r){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,r)}})),t._eventDispatcher}return{fire:function(e,n,r){var i=this;if(i.removed&&e!=="remove")return n;n=t(i).fire(e,n,r);if(r!==!1&&i.parent){var s=i.parent();while(s&&!n.isPropagationStopped())s.fire(e,n,!1),s=s.parent()}return n},on:function(e,n,r){return t(this).on(e,n,r)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),i("tinymce/EditorObservable",["tinymce/util/Observable","tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t,n){function s(e,t){return t=="selectionchange"?e.getDoc():!e.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=r.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function o(e,t){var n=s(e,t),o;e.delegates||(e.delegates={});if(e.delegates[t])return;if(e.settings.event_root){i||(i={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&i){for(t in i)e.dom.unbind(s(e,t));i=null}}));if(i[t])return;o=function(n){var i=n.target,s=e.editorManager.editors,o=s.length;while(o--){var u=s[o].getBody();if(u===i||r.isChildOf(i,u))s[o].hidden||s[o].fire(t,n)}},i[t]=o,r.bind(n,t,o)}else o=function(n){e.hidden||e.fire(t,n)},r.bind(n,t,o),e.delegates[t]=o}var r=t.DOM,i,u={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){o(e,t)})},toggleNativeEvent:function(e,t){var n=this;if(n.settings.readonly)return;if(e=="focus"||e=="blur")return;t?n.initialized?o(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(s(n,e),e,n.delegates[e]),delete n.delegates[e])},unbindAllNativeEvents:function(){var e=this,t;if(e.delegates){for(t in e.delegates)e.dom.unbind(s(e,t),t,e.delegates[t]);delete e.delegates}e.inline||(e.getBody().onload=null,e.dom.unbind(e.getWin()),e.dom.unbind(e.getDoc())),e.dom.unbind(e.getBody()),e.dom.unbind(e.getContainer())}};return u=n.extend({},e,u),u}),i("tinymce/Shortcuts",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each,r=e.explode,i={f9:120,f10:121,f11:122};return function(s){var o=this,u={};s.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&!e.isDefaultPrevented()&&n(u,function(n){var r=t.mac?e.metaKey:e.ctrlKey;if(n.ctrl!=r||n.alt!=e.altKey||n.shift!=e.shiftKey)return;if(e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode)return e.preventDefault(),e.type=="keydown"&&n.func.call(n.scope),!0})}),o.add=function(t,o,a,f){var l;return l=a,typeof a=="string"?a=function(){s.execCommand(l,!1,null)}:e.isArray(l)&&(a=function(){s.execCommand(l[0],l[1],l[2])}),n(r(t.toLowerCase()),function(e){var t={func:a,scope:f||s,desc:s.translate(o),alt:!1,ctrl:!1,shift:!1};n(r(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=i[e]||e.toUpperCase().charCodeAt(0))}}),u[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}}),i("tinymce/Editor",["tinymce/dom/DOMUtils","tinymce/dom/DomQuery","tinymce/AddOnManager","tinymce/NodeChange","tinymce/html/Node","tinymce/dom/Serializer","tinymce/html/Serializer","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/dom/ScriptLoader","tinymce/dom/EventUtils","tinymce/WindowManager","tinymce/html/Schema","tinymce/html/DomParser","tinymce/util/Quirks","tinymce/Env","tinymce/util/Tools","tinymce/EditorObservable","tinymce/Shortcuts"],function(e,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T){function j(e,t,i){var s=this,o,u;o=s.documentBaseUrl=i.documentBaseURL,u=i.baseURI,s.settings=t=L({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:o,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:s.convertURL,url_converter_scope:s,ie7_compat:!0},t),r.language=t.language||"en",r.languageLoad=t.language_load,r.baseURL=i.baseURL,s.id=t.id=e,s.isNotDirty=!0,s.plugins={},s.documentBaseURI=new d(t.document_base_url||o,{base_uri:u}),s.baseURI=u,s.contentCSS=[],s.contentStyles=[],s.shortcuts=new T(s),s.execCommands={},s.queryStateCommands={},s.queryValueCommands={},s.loadedCSS={},t.target&&(s.targetElm=t.target),s.suffix=i.suffix,s.editorManager=i,s.inline=t.inline,i.fire("SetupEditor",s),s.execCallback("setup",s),s.$=n.overrideDefaults(function(){return{context:s.inline?s.getBody():s.getDoc(),element:s.getBody()}})}var N=e.DOM,C=r.ThemeManager,k=r.PluginManager,L=S.extend,A=S.each,O=S.explode,M=S.inArray,_=S.trim,D=S.resolve,P=m.Event,H=E.gecko,B=E.ie;return j.prototype={render:function(){function i(){N.unbind(window,"ready",i),e.render()}function o(){var n=v.ScriptLoader;t.language&&t.language!="en"&&!t.language_url&&(t.language_url=e.editorManager.baseURL+"/langs/"+t.language+".js"),t.language_url&&n.add(t.language_url);if(t.theme&&typeof t.theme!="function"&&t.theme.charAt(0)!="-"&&!C.urls[t.theme]){var i=t.theme_url;i?i=e.documentBaseURI.toAbsolute(i):i="themes/"+t.theme+"/theme"+r+".js",C.load(t.theme,i)}S.isArray(t.plugins)&&(t.plugins=t.plugins.join(" ")),A(t.external_plugins,function(e,n){k.load(n,e),t.plugins+=" "+n}),A(t.plugins.split(/[ ,]/),function(e){e=_(e);if(e&&!k.urls[e])if(e.charAt(0)=="-"){e=e.substr(1,e.length);var t=k.dependencies(e);A(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"};e=k.createUrl(t,e),k.load(e.resource,e)})}else k.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"})}),n.loadQueue(function(){e.removed||e.init()})}var e=this,t=e.settings,n=e.id,r=e.suffix;if(!P.domLoaded){N.bind(window,"ready",i);return}if(!e.getElement())return;if(!E.contentEditable)return;t.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var s=e.getElement().form||N.getParent(n,"form");s&&(e.formElement=s,t.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&(N.insertAfter(N.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},N.bind(s,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),t.submit_patch&&!s.submit.nodeType&&!s.submit.length&&!s._mceOldSubmit&&(s._mceOldSubmit=s.submit,s.submit=function(){return e.editorManager.triggerSave(),e.isNotDirty=!0,s._mceOldSubmit(s)})),e.windowManager=new g(e),t.encoding=="xml"&&e.on("GetContent",function(e){e.save&&(e.content=N.encode(e.content))}),t.add_form_submit_trigger&&e.on("submit",function(){e.initialized&&e.save()}),t.add_unload_trigger&&(e._beforeUnload=function(){e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),o()},init:function(){function v(t){var n=k.get(t),r,i;r=k.urls[t]||e.documentBaseUrl.replace(/\/$/,""),t=_(t),n&&M(d,t)===-1&&(A(k.dependencies(t),function(e){v(e)}),i=new n(e,r,e.$),e.plugins[t]=i,i.init&&(i.init(e,r),d.push(t)))}var e=this,t=e.settings,n=e.getElement(),r,i,s,o,u,a,f,l,c,h,p,d=[];e.rtl=this.editorManager.i18n.rtl,e.editorManager.add(e),t.aria_label=t.aria_label||N.getAttrib(n,"aria-label",e.getLang("aria.rich_text_area")),t.theme&&(typeof t.theme!="function"?(t.theme=t.theme.replace(/-/,""),a=C.get(t.theme),e.theme=new a(e,C.urls[t.theme]),e.theme.init&&e.theme.init(e,C.urls[t.theme]||e.documentBaseUrl.replace(/\/$/,""),e.$)):e.theme=t.theme),A(t.plugins.replace(/\-/g,"").split(/[ ,]/),v),t.render_ui&&e.theme&&(e.orgDisplay=n.style.display,typeof t.theme!="function"?(r=t.width||n.style.width||n.offsetWidth,i=t.height||n.style.height||n.offsetHeight,s=t.min_height||100,h=/^[0-9\.]+(|px)$/i,h.test(""+r)&&(r=Math.max(parseInt(r,10),100)),h.test(""+i)&&(i=Math.max(parseInt(i,10),s)),u=e.theme.renderUI({targetNode:n,width:r,height:i,deltaWidth:t.delta_width,deltaHeight:t.delta_height}),t.content_editable||(i=(u.iframeHeight||i)+(typeof i=="number"?u.deltaHeight||0:""),i<s&&(i=s))):(u=t.theme(e,n),u.editorContainer.nodeType&&(u.editorContainer=u.editorContainer.id=u.editorContainer.id||e.id+"_parent"),u.iframeContainer.nodeType&&(u.iframeContainer=u.iframeContainer.id=u.iframeContainer.id||e.id+"_iframecontainer"),i=u.iframeHeight||n.offsetHeight),e.editorContainer=u.editorContainer),t.content_css&&A(O(t.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),t.content_style&&e.contentStyles.push(t.content_style);if(t.content_editable)return n=o=u=null,e.initContentBody();e.iframeHTML=t.doctype+"<html><head>",t.document_base_url!=e.documentBaseUrl&&(e.iframeHTML+='<base href="'+e.documentBaseURI.getURI()+'" />'),!E.caretAfter&&t.ie7_compat&&(e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),e.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(p=0;p<e.contentCSS.length;p++){var m=e.contentCSS[p];e.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+m+'" />',e.loadedCSS[m]=!0}l=t.body_id||"tinymce",l.indexOf("=")!=-1&&(l=e.getParam("body_id","","hash"),l=l[e.id]||l),c=t.body_class||"",c.indexOf("=")!=-1&&(c=e.getParam("body_class","","hash"),c=c[e.id]||""),t.content_security_policy&&(e.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+t.content_security_policy+'" />'),e.iframeHTML+='</head><body id="'+l+'" class="mce-content-body '+c+'" data-id="'+e.id+'"><br></body></html>';var g='javascript:(function(){document.open();document.domain="'+document.domain+'";'+'var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);'+"document.close();ed.initContentBody(true);})()";document.domain!=location.hostname&&(f=g);var y=N.create("iframe",{id:e.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:i,display:"block"}});y.onload=function(){y.onload=null,e.fire("load")},N.setAttrib(y,"src",f||'javascript:""'),e.contentAreaContainer=u.iframeContainer,e.iframeElement=y,o=N.add(u.iframeContainer,y);if(B)try{e.getDoc()}catch(b){o.src=f=g}u.editorContainer&&(N.get(u.editorContainer).style.display=e.orgDisplay,e.hidden=N.isHidden(u.editorContainer)),e.getElement().style.display="none",N.setAttrib(e.id,"aria-hidden",!0),f||e.initContentBody(),n=o=u=null},initContentBody:function(t){var n=this,r=n.settings,u=n.getElement(),d=n.getDoc(),v,m;r.inline||(n.getElement().style.visibility=n.orgVisibility),!t&&!r.content_editable&&(d.open(),d.write(n.iframeHTML),d.close()),r.content_editable&&(n.on("remove",function(){var e=this.getBody();N.removeClass(e,"mce-content-body"),N.removeClass(e,"mce-edit-focus"),N.setAttrib(e,"contentEditable",null)}),N.addClass(u,"mce-content-body"),n.contentDocument=d=r.content_document||document,n.contentWindow=r.content_window||window,n.bodyElement=u,r.content_document=r.content_window=null,r.root_name=u.nodeName.toLowerCase()),v=n.getBody(),v.disabled=!0,r.readonly||(n.inline&&N.getStyle(v,"position",true)=="static"&&(v.style.position="relative"),v.contentEditable=n.getParam("content_editable_state",!0)),v.disabled=!1,n.schema=new y(r),n.dom=new e(d,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:!0,root_element:n.inline?n.getBody():null,collect:r.content_editable,schema:n.schema,onSetAttrib:function(e){n.fire("SetAttrib",e)}}),n.parser=new b(r,n.schema),n.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){var r=e.length,i,s=n.dom,o,u;while(r--)i=e[r],o=i.attr(t),u="data-mce-"+t,i.attributes.map[u]||(t==="style"?(o=s.serializeStyle(s.parseStyle(o),i.name),o.length||(o=null),i.attr(u,o),i.attr(t,o)):t==="tabindex"?(i.attr(u,o),i.attr(t,null)):i.attr(u,n.convertURL(o,t,i.name)))}),n.parser.addNodeFilter("script",function(e){var t=e.length,n;while(t--)n=e[t],n.attr("type","mce-"+(n.attr("type")||"no/type"))}),n.parser.addNodeFilter("#cdata",function(e){var t=e.length,n;while(t--)n=e[t],n.type=8,n.name="#comment",n.value="[CDATA["+n.value+"]]"}),n.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){var t=e.length,r,i=n.schema.getNonEmptyElements();while(t--)r=e[t],r.isEmpty(i)&&(r.append(new s("br",1)).shortEnded=!0)}),n.serializer=new o(r,n),n.selection=new a(n.dom,n.getWin(),n.serializer,n),n.formatter=new f(n),n.undoManager=new l(n),n.forceBlocks=new h(n),n.enterKey=new c(n),n.editorCommands=new p(n),n._nodeChangeDispatcher=new i(n),n.fire("PreInit"),!r.browser_spellcheck&&!r.gecko_spellcheck&&(d.body.spellcheck=!1,N.setAttrib(v,"spellcheck","false")),n.fire("PostRender"),n.quirks=new w(n),r.directionality&&(v.dir=r.directionality),r.nowrap&&(v.style.whiteSpace="nowrap"),r.protect&&n.on("BeforeSetContent",function(e){A(r.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),n.on("SetContent",function(){n.addVisual(n.getBody())}),r.padd_empty_editor&&n.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),n.load({initial:!0,format:"html"}),n.startContent=n.getContent({format:"raw"}),n.initialized=!0,n.bindPendingEventDelegates(),n.fire("init"),n.focus(!0),n.nodeChanged({initial:!0}),n.execCallback("init_instance_callback",n),n.contentStyles.length>0&&(m="",A(n.contentStyles,function(e){m+=e+"\r\n"}),n.dom.addStyle(m)),A(n.contentCSS,function(e){n.loadedCSS[e]||(n.dom.loadCSS(e),n.loadedCSS[e]=!0)}),r.auto_focus&&setTimeout(function(){var e;r.auto_focus===!0?e=n:e=n.editorManager.get(r.auto_focus),e.focus()},100),u=d=v=null},focus:function(e){var t=this,n=t.selection,r=t.settings.content_editable,i,s,o=t.getDoc(),u;if(!e){i=n.getRng(),i.item&&(s=i.item(0)),t._refreshContentEditable(),r||(E.opera||t.getBody().focus(),t.getWin().focus());if(H||r){u=t.getBody();if(u.setActive)try{u.setActive()}catch(a){u.focus()}else u.focus();r&&n.normalize()}s&&s.ownerDocument==o&&(i=o.body.createControlRange(),i.addElement(s),i.select())}t.editorManager.setActive(t)},execCallback:function(e){var t=this,n=t.settings[e],r;if(!n)return;return t.callbackLookup&&(r=t.callbackLookup[e])&&(n=r.func,r=r.scope),typeof n=="string"&&(r=n.replace(/\.\w+$/,""),r=r?D(r):0,n=D(n),t.callbackLookup=t.callbackLookup||{},t.callbackLookup[e]={func:n,scope:r}),n.apply(r||t,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"}):""},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var r=e in this.settings?this.settings[e]:t,i;return n==="hash"?(i={},typeof r=="string"?A(r.indexOf("=")>0?r.split(/[;,](?![^=;,]*(?:[;,]|$))/):r.split(","),function(e){e=e.split("="),e.length>1?i[_(e[0])]=_(e[1]):i[_(e[0])]=_(e)}):i=r,i):r},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),!t.text&&!t.icon&&(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){var i=this,s=0,o;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)&&(!r||!r.skip_focus)&&i.focus(),r=L({},r),r=i.fire("BeforeExecCommand",{command:e,ui:t,value:n});if(r.isDefaultPrevented())return!1;if(o=i.execCommands[e])if(o.func.call(o.scope,t,n)!==!0)return i.fire("ExecCommand",{command:e,ui:t,value:n}),!0;A(i.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,n))return i.fire("ExecCommand",{command:e,ui:t,value:n}),s=!0,!1});if(s)return s;if(i.theme&&i.theme.execCommand&&i.theme.execCommand(e,t,n))return i.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(i.editorCommands.execCommand(e,t,n))return i.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{s=i.getDoc().execCommand(e,t,n)}catch(u){}return s?(i.fire("ExecCommand",{command:e,ui:t,value:n}),!0):!1},queryCommandState:function(e){var t=this,n,r;if(t._isHidden())return;if(n=t.queryStateCommands[e]){r=n.func.call(n.scope);if(r===!0||r===!1)return r}r=t.editorCommands.queryCommandState(e);if(r!==-1)return r;try{return t.getDoc().queryCommandState(e)}catch(i){}},queryCommandValue:function(e){var n=this,r,i;if(n._isHidden())return;if(r=n.queryValueCommands[e]){i=r.func.call(r.scope);if(i!==!0)return i}i=n.editorCommands.queryCommandValue(e);if(i!==t)return i;try{return n.getDoc().queryCommandValue(e)}catch(s){}},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(N.show(e.getContainer()),N.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(B&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(N.hide(e.getContainer()),N.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n=this,r=n.getElement(),i;if(r)return e=e||{},e.load=!0,i=n.setContent(r.value!==t?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,i},save:function(e){var t=this,n=t.getElement(),r,i;if(!n||!t.initialized)return;return e=e||{},e.save=!0,e.element=n,r=e.content=t.getContent(e),e.no_events||t.fire("SaveContent",e),r=e.content,/TEXTAREA|INPUT/i.test(n.nodeName)?n.value=r:(t.inline||(n.innerHTML=r),(i=N.getParent(t.id,"form"))&&A(i.elements,function(e){if(e.name==t.id)return e.value=r,!1})),e.element=n=null,e.set_dirty!==!1&&(t.isNotDirty=!0),r},setContent:function(e,t){var n=this,r=n.getBody(),i;return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||n.fire("BeforeSetContent",t),e=t.content,e.length===0||/^\s+$/.test(e)?(i=n.settings.forced_root_block,i&&n.schema.isValidChild(r.nodeName.toLowerCase(),i.toLowerCase())?(e=B&&B<11?"":'<br data-mce-bogus="1">',e=n.dom.createHTML(i,n.settings.forced_root_block_attrs,e)):B||(e='<br data-mce-bogus="1">'),n.dom.setHTML(r,e),n.fire("SetContent",t)):(t.format!=="raw"&&(e=(new u({},n.schema)).serialize(n.parser.parse(e,{isRootContent:!0}))),t.content=_(e),n.dom.setHTML(r,t.content),t.no_events||n.fire("SetContent",t)),t.content},getContent:function(e){var t=this,n,r=t.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||t.fire("BeforeGetContent",e),e.format=="raw"?n=r.innerHTML:e.format=="text"?n=r.innerText||r.textContent:n=t.serializer.serialize(r,e),e.format!="text"?e.content=_(n):e.content=n,e.no_events||t.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=L({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=N.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=N.get(this.id)),this.targetElm},getWin:function(){var e=this,t;return e.contentWindow||(t=e.iframeElement,t&&(e.contentWindow=t.contentWindow)),e.contentWindow},getDoc:function(){var e=this,t;return e.contentDocument||(t=e.getWin(),t&&(e.contentDocument=t.document)),e.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&n.nodeName=="LINK"||e.indexOf("file:")===0||e.length===0?e:i.relative_urls?r.documentBaseURI.toRelative(e):(e=r.documentBaseURI.toAbsolute(e,i.remove_script_host),e)},addVisual:function(e){var n=this,r=n.settings,i=n.dom,s;e=e||n.getBody(),n.hasVisual===t&&(n.hasVisual=r.visual),A(i.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":s=r.visual_table_class||"mce-item-table",t=i.getAttrib(e,"border"),(!t||t=="0")&&n.hasVisual?i.addClass(e,s):i.removeClass(e,s);return;case"A":i.getAttrib(e,"href",!1)||(t=i.getAttrib(e,"name")||e.id,s=r.visual_anchor_class||"mce-item-anchor",t&&n.hasVisual?i.addClass(e,s):i.removeClass(e,s));return}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&N.remove(e.getElement().nextSibling),e.inline||(B&&B<10&&e.getDoc().execCommand("SelectAll",!1,null),N.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),N.remove(e.getContainer()),e.destroy())},destroy:function(e){var t=this,n;if(t.destroyed)return;if(!e&&!t.removed){t.remove();return}e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t.selection.destroy(),t.dom.destroy()),n=t.formElement,n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,n._mceOldSubmit=null),N.unbind(n,"submit reset",t.formEventDelegate)),t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null),t.destroyed=1},_refreshContentEditable:function(){var e=this,t,n;e._isHidden()&&(t=e.getBody(),n=t.parentNode,n.removeChild(t),n.appendChild(t),t.focus())},_isHidden:function(){var e;return H?(e=this.selection.getSel(),!e||!e.rangeCount||e.rangeCount===0):0}},L(j.prototype,x),j}),i("tinymce/util/I18n",[],function(){var e={};return{rtl:!1,add:function(t,n){for(var r in n)e[r]=n[r];this.rtl=this.rtl||e._dir==="rtl"},translate:function(t){if(typeof t=="undefined")return t;if(typeof t!="string"&&t.raw)return t.raw;if(t.push){var n=t.slice(1);t=(e[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(e,t){return n[t]})}return e[t]||t},data:e}}),i("tinymce/FocusManager",["tinymce/dom/DOMUtils","tinymce/Env"],function(e,t){function o(e){function u(){try{return document.activeElement}catch(e){return document.body}}function a(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function f(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function l(e){return!!s.getParent(e,o.isEditorUIElement)}function c(o){var c=o.editor;c.on("init",function(){if(c.inline||t.ie)"onbeforedeactivate"in document&&t.ie<9?c.dom.bind(c.getBody(),"beforedeactivate",function(e){if(e.target!=c.getBody())return;try{c.lastRng=c.selection.getRng()}catch(t){}}):c.on("nodechange mouseup keyup",function(e){var t=u();if(e.type=="nodechange"&&e.selectionChange)return;t&&t.id==c.id+"_ifr"&&(t=c.getBody()),c.dom.isChildOf(t,c.getBody())&&(c.lastRng=c.selection.getRng())}),t.webkit&&!n&&(n=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(c.lastRng=n)}},s.bind(document,"selectionchange",n))}),c.on("setcontent",function(){c.lastRng=null}),c.on("mousedown",function(){c.selection.lastFocusBookmark=null}),c.on("focusin",function(){var t=e.focusedEditor;c.selection.lastFocusBookmark&&(c.selection.setRng(f(c,c.selection.lastFocusBookmark)),c.selection.lastFocusBookmark=null),t!=c&&(t&&t.fire("blur",{focusedEditor:c}),e.setActive(c),e.focusedEditor=c,c.fire("focus",{blurredEditor:t}),c.focus(!0)),c.lastRng=null}),c.on("focusout",function(){window.setTimeout(function(){var t=e.focusedEditor;!l(u())&&t==c&&(c.fire("blur",{focusedEditor:null}),e.focusedEditor=null,c.selection&&(c.selection.lastFocusBookmark=null))},0)}),r||(r=function(t){var n=e.activeEditor;n&&t.target.ownerDocument==document&&(n.selection&&t.target!=n.getBody()&&(n.selection.lastFocusBookmark=a(n.dom,n.lastRng)),t.target!=document.body&&!l(t.target)&&e.focusedEditor==n&&(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},s.bind(document,"focusin",r)),c.inline&&!i&&(i=function(t){var n=e.activeEditor;if(n.inline&&!n.dom.isChildOf(t.target,n.getBody())){var r=n.selection.getRng();r.collapsed||(n.lastRng=r)}},s.bind(document,"mouseup",i))}function h(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(s.unbind(document,"selectionchange",n),s.unbind(document,"focusin",r),s.unbind(document,"mouseup",i),n=r=i=null)}e.on("AddEditor",c),e.on("RemoveEditor",h)}var n,r,i,s=e.DOM;return o.isEditorUIElement=function(e){return e.className.toString().indexOf("mce-")!==-1},o}),i("tinymce/EditorManager",["tinymce/Editor","tinymce/dom/DomQuery","tinymce/dom/DOMUtils","tinymce/util/URI","tinymce/Env","tinymce/util/Tools","tinymce/util/Observable","tinymce/util/I18n","tinymce/FocusManager"],function(e,t,n,r,i,s,o,u,a){function m(e){var t=v.editors,n;delete t[e.id];for(var r=0;r<t.length;r++)if(t[r]==e){t.splice(r,1),n=!0;break}return v.activeEditor==e&&(v.activeEditor=t[0]),v.focusedEditor==e&&(v.focusedEditor=null),n}function g(e){return e&&!(e.getContainer()||e.getBody()).parentNode&&(m(e),e.unbindAllNativeEvents(),e.destroy(!0),e=null),e}var f=n.DOM,l=s.explode,c=s.each,h=s.extend,p=0,d,v;return v={$:t,majorVersion:"4",minorVersion:"1.6",releaseDate:"2014-10-08",editors:[],i18n:u,activeEditor:null,setup:function(){var e=this,t,n,i="",s,o;n=document.location.href,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),s=window.tinymce||window.tinyMCEPreInit;if(s)t=s.base||s.baseURL,i=s.suffix;else{var u=document.getElementsByTagName("script");for(var f=0;f<u.length;f++){o=u[f].src;if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){o.indexOf(".min")!=-1&&(i=".min"),t=o.substring(0,o.lastIndexOf("/"));break}}!t&&document.currentScript&&(o=document.currentScript.src,o.indexOf(".min")!=-1&&(i=".min"),t=o.substring(0,o.lastIndexOf("/")))}e.baseURL=(new r(n)).toAbsolute(t),e.documentBaseURL=n,e.baseURI=new r(e.baseURL),e.suffix=i,e.focusManager=new a(e)},init:function(t){function i(e){var t=e.id;return t||(t=e.name,t&&!f.get(t)?t=e.name:t=f.uniqueId(),e.setAttribute("id",t)),t}function s(t,i,s){if(!g(n.get(t))){var o=new e(t,i,n);o.targetElm=o.targetElm||s,r.push(o),o.render()}}function o(e){var r=t[e];if(!r)return;return r.apply(n,Array.prototype.slice.call(arguments,2))}function u(e,t){return t.constructor===RegExp?t.test(e.className):f.hasClass(e,t)}function a(){var e,n;f.unbind(window,"ready",a),o("onpageload");if(t.types){c(t.types,function(e){c(f.select(e.selector),function(n){s(i(n),h({},t,e),n)})});return}if(t.selector){c(f.select(t.selector),function(e){s(i(e),t,e)});return}t.target&&s(i(t.target),t);switch(t.mode){case"exact":e=t.elements||"",e.length>0&&c(l(e),function(e){var n;(n=f.get(e))?s(e,t,n):c(document.forms,function(n){c(n.elements,function(n){n.name===e&&(e="mce_editor_"+p++,f.setAttrib(n,"id",e),s(e,t,n))})})});break;case"textareas":case"specific_textareas":c(f.select("textarea"),function(e){if(t.editor_deselector&&u(e,t.editor_deselector))return;(!t.editor_selector||u(e,t.editor_selector))&&s(i(e),t,e)})}t.oninit&&(e=n=0,c(r,function(t){n++,t.initialized?e++:t.on("init",function(){e++,e==n&&o("oninit")}),e==n&&o("oninit")}))}var n=this,r=[];n.settings=t,f.bind(window,"ready",a)},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),d||(d=function(){t.fire("BeforeUnload")},f.bind(window,"beforeunload",d)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t=this,n,r=t.editors,i;if(!e){for(n=r.length-1;n>=0;n--)t.remove(r[n]);return}if(typeof e=="string"){e=e.selector||e,c(f.select(e),function(e){i=r[e.id],i&&t.remove(i)});return}return i=e,r[i.id]?(m(i)&&t.fire("RemoveEditor",{editor:i}),r.length||f.unbind(window,"beforeunload",d),i.remove(),i):null},execCommand:function(t,n,r){var i=this,s=i.get(r);switch(t){case"mceAddEditor":return i.get(r)||(new e(r,i.settings,i)).render(),!0;case"mceRemoveEditor":return s&&s.remove(),!0;case"mceToggleEditor":if(!s)return i.execCommand("mceAddEditor",0,r),!0;return s.isHidden()?s.show():s.hide(),!0}return i.activeEditor?i.activeEditor.execCommand(t,n,r):!1},triggerSave:function(){c(this.editors,function(e){e.save()})},addI18n:function(e,t){u.add(e,t)},translate:function(e){return u.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},h(v,o),v.setup(),window.tinymce=window.tinyMCE=v,v}),i("tinymce/LegacyInput",["tinymce/EditorManager","tinymce/util/Tools"],function(e,t){var n=t.each,r=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function u(e,t){n(t,function(t,n){t&&s.setStyle(e,n,t)}),s.rename(e,"span")}function a(r){s=t.dom,o.convert_fonts_to_spans&&n(s.select("font,u,strike",r.node),function(t){e[t.nodeName.toLowerCase()](s,t)})}var e,i,s,o=t.settings;o.inline_styles&&(i=r(o.font_size_legacy_values),e={font:function(e,t){u(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:i[parseInt(t.size,10)-1]})},u:function(e,t){u(t,{textDecoration:"underline"})},strike:function(e,t){u(t,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",a))})})}),i("tinymce/util/XHR",["tinymce/util/Observable","tinymce/util/Tools"],function(e,t){var n={send:function(e){function i(){!e.async||t.readyState==4||r++>1e4?(e.success&&r<1e4&&t.status==200?e.success.call(e.success_scope,""+t.responseText,t,e):e.error&&e.error.call(e.error_scope,r>1e4?"TIMED_OUT":"GENERAL",t,e),t=null):setTimeout(i,10)}var t,r=0;e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",t=new XMLHttpRequest;if(t){t.overrideMimeType&&t.overrideMimeType(e.content_type),t.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(t.withCredentials=!0),e.content_type&&t.setRequestHeader("Content-Type",e.content_type),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t=n.fire("beforeSend",{xhr:t,settings:e}).xhr,t.send(e.data);if(!e.async)return i();setTimeout(i,10)}}};return t.extend(n,e),n}),i("tinymce/util/JSON",[],function(){function e(t,n){var r,i,s,o;n=n||'"';if(t===null)return"null";s=typeof t;if(s=="string")return i="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return n==='"'&&e==="'"?e:(r=i.indexOf(t),r+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if(s=="object"){if(t.hasOwnProperty&&Object.prototype.toString.call(t)==="[object Array]"){for(r=0,i="[";r<t.length;r++)i+=(r>0?",":"")+e(t[r],n);return i+"]"}i="{";for(o in t)t.hasOwnProperty(o)&&(i+=typeof t[o]!="function"?(i.length>1?","+n:n)+o+n+":"+e(t[o],n):"");return i+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),i("tinymce/util/JSONRequest",["tinymce/util/JSON","tinymce/util/XHR","tinymce/util/Tools"],function(e,t,n){function i(e){this.settings=r({},e),this.count=0}var r=n.extend;return i.sendRPC=function(e){return(new i).send(e)},i.prototype={send:function(n){var i=n.error,s=n.success;n=r(this.settings,n),n.success=function(t,r){t=e.parse(t),typeof t=="undefined"&&(t={error:"JSON Parse error."}),t.error?i.call(n.error_scope||n.scope,t.error,r):s.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){i&&i.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},i}),i("tinymce/util/JSONP",["tinymce/dom/DOMUtils"],function(e){return{callbacks:{},count:0,send:function(n){var r=this,i=e.DOM,s=n.count!==t?n.count:r.count,o="tinymce_jsonp_"+s;r.callbacks[s]=function(e){i.remove(o),delete r.callbacks[s],n.callback(e)},i.add(i.doc.body,"script",{id:o,src:n.url,type:"text/javascript"}),r.count++}}}),i("tinymce/util/LocalStorage",[],function(){function a(){i=[];for(var t in r)i.push(t);e.length=i.length}function f(){function l(e){var n,r;return r=e!==t?f+e:i.indexOf(",",f),r===-1||r>i.length?null:(n=i.substring(f,r),f=r+1,n)}var e,i,u,f=0;r={};if(!o)return;n.load(s),i=n.getAttribute(s)||"";do{var c=l();if(c===null)break;e=l(parseInt(c,32)||0);if(e!==null){c=l();if(c===null)break;u=l(parseInt(c,32)||0),e&&(r[e]=u)}}while(e!==null);a()}function l(){var e,t="";if(!o)return;for(var i in r)e=r[i],t+=(t?",":"")+i.length.toString(32)+","+i+","+e.length.toString(32)+","+e;n.setAttribute(s,t);try{n.save(s)}catch(u){}a()}var e,n,r,i,s,o;try{if(window.localStorage)return localStorage}catch(u){}return s="tinymce",n=document.documentElement,o=!!n.addBehavior,o&&n.addBehavior("#default#userData"),e={key:function(e){return i[e]},getItem:function(e){return e in r?r[e]:null},setItem:function(e,t){r[e]=""+t,l()},removeItem:function(e){delete r[e],l()},clear:function(){r={},l()}},f(),e}),i("tinymce/Compat",["tinymce/dom/DOMUtils","tinymce/dom/EventUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/util/Tools","tinymce/Env"],function(e,t,n,r,i,s){var o=window.tinymce;return o.DOM=e.DOM,o.ScriptLoader=n.ScriptLoader,o.PluginManager=r.PluginManager,o.ThemeManager=r.ThemeManager,o.dom=o.dom||{},o.dom.Event=t.Event,i.each(i,function(e,t){o[t]=e}),i.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){o[e]=s[e.substr(2).toLowerCase()]}),{}}),i("tinymce/ui/Layout",["tinymce/util/Class","tinymce/util/Tools"],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t=this,n=t.settings,r,i,s;r=e.items().filter(":visible"),i=n.firstControlClass,s=n.lastControlClass,r.each(function(e){e.removeClass(i).removeClass(s),n.controlClass&&e.addClass(n.controlClass)}),r.eq(0).addClass(i),r.eq(-1).addClass(s)},renderHtml:function(e){var t=this,n=t.settings,r,i="";return r=e.items(),r.eq(0).addClass(n.firstControlClass),r.eq(-1).addClass(n.lastControlClass),r.each(function(e){n.controlClass&&e.addClass(n.controlClass),i+=e.renderHtml()}),i},recalc:function(){},postRender:function(){}})}),i("tinymce/ui/AbsoluteLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),i("tinymce/ui/Tooltip",["tinymce/ui/Control","tinymce/ui/Movable"],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;return typeof e!="undefined"?(t._value=e,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e)),t):t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation">'+'<div class="'+t+'tooltip-arrow"></div>'+'<div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div>"+"</div>"},repaint:function(){var e=this,t,n;t=e.getEl().style,n=e._layoutRect,t.left=n.x+"px",t.top=n.y+"px",t.zIndex=131070}})}),i("tinymce/ui/Widget",["tinymce/ui/Control","tinymce/ui/Tooltip"],function(e,t){var n,r=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&r.tooltips!==!1&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control==t){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.toggleClass("tooltip-n",i=="bc-tc"),r.toggleClass("tooltip-nw",i=="bc-tl"),r.toggleClass("tooltip-ne",i=="bc-tr"),r.moveRel(t.getEl(),i)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},active:function(e){var t=this,n;return e!==n&&(t.aria("pressed",e),t.toggleClass("active",e)),t._super(e)},disabled:function(e){var t=this,n;return e!==n&&(t.aria("disabled",e),t.toggleClass("disabled",e)),t._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),!e.parent()&&(t.width||t.height)&&(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return r}),i("tinymce/ui/Button",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t=this,n;t.on("click mousedown",function(e){e.preventDefault()}),t._super(e),n=e.size,e.subtype&&t.addClass(e.subtype),n&&t.addClass("btn-"+n)},icon:function(e){var t=this,n=t.classPrefix;if(typeof e=="undefined")return t.settings.icon;t.settings.icon=e,e=e?n+"ico "+n+"i-"+t.settings.icon:"";if(t._rendered){var r=t.getEl().firstChild,i=r.getElementsByTagName("i")[0];if(e){if(!i||i!=r.firstChild)i=document.createElement("i"),r.insertBefore(i,r.firstChild);i.className=e}else i&&r.removeChild(i);t.text(t._text)}return t},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},text:function(e){var t=this;if(t._rendered){var n=t.getEl().lastChild.lastChild;n&&(n.data=t.translate(e))}return t._super(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon,i;return i=e.settings.image,i?(r="none",typeof i!="string"&&(i=window.getSelection?i[0]:i[1]),i=" style=\"background-image: url('"+i+"')\""):i="",r=e.settings.icon?n+"ico "+n+"i-"+r:"",'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1" aria-labelledby="'+t+'">'+'<button role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+(e._text?(r?" ":"")+e.encode(e._text):"")+"</button>"+"</div>"}})}),i("tinymce/ui/ButtonGroup",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'">'+'<div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),i("tinymce/ui/Checkbox",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var t=this;return typeof e!="undefined"?(e?t.addClass("checked"):t.removeClass("checked"),t._checked=e,t.aria("checked",e),t):t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1">'+'<i class="'+n+"ico "+n+'i-checkbox"></i>'+'<span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span>"+"</div>"}})}),i("tinymce/ui/ComboBox",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/ui/DomUtils"],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("combobox"),t.subinput=!0,t.ariaTarget="inp",e=t.settings,e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){var r=n.target,i=t.getEl();while(r&&r!=i)r.id&&r.id.indexOf("-open")!=-1&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){e.target.nodeName=="INPUT"&&e.keyCode==13&&t.parents().reverse().each(function(n){e.preventDefault(),t.fire("change");if(n.hasEventListeners("submit")&&n.toJSON)return n.fire("submit",{data:n.toJSON()}),!1})}),e.placeholder&&(t.addClass("placeholder"),t.on("focusin",function(){t._hasOnChange||(n.on(t.getEl("inp"),"change",function(){t.fire("change")}),t._hasOnChange=!0),t.hasClass("placeholder")&&(t.getEl("inp").value="",t.removeClass("placeholder"))}),t.on("focusout",function(){t.value().length===0&&(t.getEl("inp").value=e.placeholder,t.addClass("placeholder"))}))},showMenu:function(){var e=this,n=e.settings,r;e.menu||(r=n.menu||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",e.menu=t.create(r).parent(e).renderTo(e.getContainerElm()),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control===e.menu&&e.focus()}),e.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()==e.value())})}).fire("show"),e.menu.on("select",function(t){e.value(t.control.value())}),e.on("focusin",function(t){t.target.tagName.toUpperCase()=="INPUT"&&e.menu.hide()}),e.aria("expanded",!0)),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(e){var t=this;return typeof e!="undefined"?(t._value=e,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=e),t):t._rendered?(e=t.getEl("inp").value,e!=t.settings.placeholder?e:""):t._value},disabled:function(e){var t=this;return t._rendered&&typeof e!="undefined"&&(t.getEl("inp").disabled=e),t._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e=this,t=e.getEl(),r=e.getEl("open"),i=e.layoutRect(),s,o;r?s=i.w-n.getSize(r).width-10:s=i.w-10;var u=document;return u.all&&(!u.documentMode||u.documentMode<=8)&&(o=e.layoutRect().h-2+"px"),n.css(t.firstChild,{width:s,lineHeight:o}),e._super(),e},postRender:function(){var e=this;return n.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},remove:function(){n.off(this.getEl("inp")),this._super()},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.classPrefix,i=n.value||n.placeholder||"",s,o,u="",a="";"spellcheck"in n&&(a+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(a+=' maxlength="'+n.maxLength+'"'),n.size&&(a+=' size="'+n.size+'"'),n.subtype&&(a+=' type="'+n.subtype+'"'),e.disabled()&&(a+=' disabled="disabled"'),s=n.icon,s&&s!="caret"&&(s=r+"ico "+r+"i-"+n.icon),o=e._text;if(s||o)u='<div id="'+t+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button">'+'<button id="'+t+'-action" type="button" hidefocus="1" tabindex="-1">'+(s!="caret"?'<i class="'+s+'"></i>':'<i class="'+r+'caret"></i>')+(o?(s?" ":"")+o:"")+"</button>"+"</div>",e.addClass("has-open");return'<div id="'+t+'" class="'+e.classes()+'">'+'<input id="'+t+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+i+'" hidefocus="1"'+a+" />"+u+"</div>"}})}),i("tinymce/ui/ColorBox",["tinymce/ui/ComboBox"],function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.addClass("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl().getElementsByTagName("i")[0];if(t)try{t.style.background=e}catch(n){}},value:function(e){var t=this;return typeof e!="undefined"&&t._rendered&&t.repaintColor(e),t._super(e)}})}),i("tinymce/ui/PanelButton",["tinymce/ui/Button","tinymce/ui/FloatPanel"],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;e.active(!0);if(!e.panel){var r=n.panel;r.type&&(r={layout:"grid",items:r}),r.role=r.role||"dialog",r.popover=!0,r.autohide=!0,r.ariaRoot=!0,e.panel=(new t(r)).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}else e.panel.show();e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),i("tinymce/ui/ColorButton",["tinymce/ui/PanelButton","tinymce/dom/DOMUtils"],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1" aria-haspopup="true">'+'<button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(r?" ":"")+e._text:"")+"</button>"+'<button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(r){if(r.aria&&r.aria.key=="down")return;r.control==e&&!n.getParent(r.target,"."+e.classPrefix+"open")&&(r.stopImmediatePropagation(),t.call(e,r))}),delete e.settings.onclick,e._super()}})}),i("tinymce/util/Color",[],function(){function r(r){function a(r,i,s){var o,u,a,f,l,c;return o=0,u=0,a=0,r/=255,i/=255,s/=255,l=e(r,e(i,s)),c=t(r,t(i,s)),l==c?(a=l,{h:0,s:0,v:a*100}):(f=r==l?i-s:s==l?r-i:s-r,o=r==l?3:s==l?1:5,o=60*(o-f/(c-l)),u=(c-l)/c,a=c,{h:n(o),s:n(u*100),v:n(a*100)})}function f(r,i,a){var f,l,c,h;r=(parseInt(r,10)||0)%360,i=parseInt(i,10)/100,a=parseInt(a,10)/100,i=t(0,e(i,1)),a=t(0,e(a,1));if(i===0){s=o=u=n(255*a);return}f=r/60,l=a*i,c=l*(1-Math.abs(f%2-1)),h=a-l;switch(Math.floor(f)){case 0:s=l,o=c,u=0;break;case 1:s=c,o=l,u=0;break;case 2:s=0,o=l,u=c;break;case 3:s=0,o=c,u=l;break;case 4:s=c,o=0,u=l;break;case 5:s=l,o=0,u=c;break;default:s=o=u=0}s=n(255*(s+h)),o=n(255*(o+h)),u=n(255*(u+h))}function l(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(s)+e(o)+e(u)}function c(){return{r:s,g:o,b:u}}function h(){return a(s,o,u)}function p(e){var t;if(typeof e=="object")"r"in e?(s=e.r,o=e.g,u=e.b):"v"in e&&f(e.h,e.s,e.v);else if(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))s=parseInt(t[1],10),o=parseInt(t[2],10),u=parseInt(t[3],10);else if(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))s=parseInt(t[1],16),o=parseInt(t[2],16),u=parseInt(t[3],16);else if(t=/#([0-F])([0-F])([0-F])/gi.exec(e))s=parseInt(t[1]+t[1],16),o=parseInt(t[2]+t[2],16),u=parseInt(t[3]+t[3],16);return s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,u=u<0?0:u>255?255:u,i}var i=this,s=0,o=0,u=0;r&&p(r),i.toRgb=c,i.toHsv=h,i.toHex=l,i.parse=p}var e=Math.min,t=Math.max,n=Math.round;return r}),i("tinymce/ui/ColorPicker",["tinymce/ui/Widget","tinymce/ui/DragHelper","tinymce/ui/DomUtils","tinymce/util/Color"],function(e,t,n,r){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function l(e,t){var r=n.getPos(e),i,s;return i=t.pageX-r.x,s=t.pageY-r.y,i=Math.max(0,Math.min(i/e.clientWidth,1)),s=Math.max(0,Math.min(s/e.clientHeight,1)),{x:i,y:s}}function c(t,i){var s=(360-t.h)/360;n.css(u,{top:s*100+"%"}),i||n.css(f,{left:t.s+"%",top:100-t.v+"%"}),a.style.background=(new r({s:100,v:100,h:t.h})).toHex(),e.color().parse({s:t.s,v:t.v,h:t.h})}function h(t){var n;n=l(a,t),s.s=n.x*100,s.v=(1-n.y)*100,c(s),e.fire("change")}function p(t){var n;n=l(o,t),s=i.toHsv(),s.h=(1-n.y)*360,c(s,!0),e.fire("change")}var e=this,i=e.color(),s,o,u,a,f;o=e.getEl("h"),u=e.getEl("hp"),a=e.getEl("sv"),f=e.getEl("svp"),e._repaint=function(){s=i.toHsv(),c(s)},e._super(),e._svdraghelper=new t(e._id+"-sv",{start:h,drag:h}),e._hdraghelper=new t(e._id+"-h",{start:p,drag:p}),e._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;if(!arguments.length)return t.color().toHex();t.color().parse(e),t._rendered&&t._repaint()},color:function(){return this._color||(this._color=new r),this._color},renderHtml:function(){function s(){var e,t,r="",s,o;s="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",o=i.split(",");for(e=0,t=o.length-1;e<t;e++)r+='<div class="'+n+'colorpicker-h-chunk" style="'+"height:"+100/t+"%;"+s+o[e]+",endColorstr="+o[e+1]+");"+"-ms-"+s+o[e]+",endColorstr="+o[e+1]+")"+'"></div>';return r}var e=this,t=e._id,n=e.classPrefix,r,i="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",o="background: -ms-linear-gradient(top,"+i+");"+"background: linear-gradient(to bottom,"+i+");";return r='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="'+o+'">'+s()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"></div>'+"</div>",'<div id="'+t+'" class="'+e.classes()+'">'+'<div id="'+t+'-sv" class="'+n+'colorpicker-sv">'+'<div class="'+n+'colorpicker-overlay1">'+'<div class="'+n+'colorpicker-overlay2">'+'<div id="'+t+'-svp" class="'+n+'colorpicker-selector1">'+'<div class="'+n+'colorpicker-selector2"></div>'+"</div>"+"</div>"+"</div>"+"</div>"+r+"</div>"}})}),i("tinymce/ui/Path",["tinymce/ui/Widget"],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n,r=e.target;(n=r.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},data:function(e){var t=this;return typeof e!="undefined"?(t._data=e,t.update(),t):t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes()+'">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e=this,t=e._data||[],n,r,i="",s=e.classPrefix;for(n=0,r=t.length;n<r;n++)i+=(n>0?'<div class="'+s+'divider" aria-hidden="true"> '+e.settings.delimiter+" </div>":"")+'<div role="button" class="'+s+"path-item"+(n==r-1?" "+s+"last":"")+'" data-index="'+n+'" tabindex="-1" id="'+e._id+"-"+n+'" aria-level="'+n+'">'+t[n].name+"</div>";return i||(i='<div class="'+s+'path-item"> </div>'),i}})}),i("tinymce/ui/ElementPath",["tinymce/ui/Path","tinymce/EditorManager"],function(e,t){return e.extend({postRender:function(){function r(e){if(e.nodeType===1){if(e.nodeName=="BR"||!!e.getAttribute("data-mce-bogus"))return!0;if(e.getAttribute("data-mce-type")==="bookmark")return!0}return!1}var e=this,n=t.activeEditor;return e.on("select",function(e){n.focus(),n.selection.select(this.data()[e.index].element),n.nodeChanged()}),n.on("nodeChange",function(t){var i=[],s=t.parents,o=s.length;while(o--)if(s[o].nodeType==1&&!r(s[o])){var u=n.fire("ResolveName",{name:s[o].nodeName.toLowerCase(),target:s[o]});u.isDefaultPrevented()||i.push({name:u.name,element:s[o]});if(u.isPropagationStopped())break}e.data(i)}),e._super()}})}),i("tinymce/ui/FormItem",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</div>"}})}),i("tinymce/ui/Form",["tinymce/ui/Container","tinymce/ui/FormItem","tinymce/util/Tools"],function(e,t,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,r=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),r.each(function(r){var i,s=r.settings.label;s&&(i=new t(n.extend({items:{type:"label",id:r._id+"-l",text:s,flex:0,forId:r._id,disabled:r.disabled()}},e.settings.formItemDefaults)),i.type="formitem",r.aria("labelledby",r._id+"-l"),typeof r.settings.flex=="undefined"&&(r.settings.flex=1),e.replace(r,i),i.add(r))})},recalcLabels:function(){var e=this,t=0,n=[],r,i,s;if(e.settings.labelGapCalc===!1)return;e.settings.labelGapCalc=="children"?s=e.find("formitem"):s=e.items(),s.filter("formitem").each(function(e){var r=e.items()[0],i=r.getEl().clientWidth;t=i>t?i:t,n.push(r)}),i=e.settings.labelGap||0,r=n.length;while(r--)n[r].settings.minWidth=t+i},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),i("tinymce/ui/FieldSet",["tinymce/ui/Form"],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div>"+"</fieldset>"}})}),i("tinymce/ui/FilePicker",["tinymce/ui/ComboBox","tinymce/util/Tools"],function(e,t){return e.extend({init:function(e){var n=this,r=tinymce.activeEditor,i=r.settings,s,o,u;e.spellcheck=!1,u=i.file_picker_types||i.file_browser_callback_types,u&&(u=t.makeMap(u,/[, ]/));if(!u||u[e.filetype])o=i.file_picker_callback,o&&(!u||u[e.filetype])?s=function(){var i=n.fire("beforecall").meta;i=t.extend({filetype:e.filetype},i),o.call(r,function(e,t){n.value(e).fire("change",{meta:t})},n.value(),i)}:(o=i.file_browser_callback,o&&(!u||u[e.filetype])&&(s=function(){o(n.getEl("inp").id,n.value(),e.filetype,window)}));s&&(e.icon="browse",e.onaction=s),n._super(e)}})}),i("tinymce/ui/FitLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),i("tinymce/ui/FlexLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g=[],y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=Math.max,R=Math.min;r=e.items().filter(":visible"),i=e.layoutRect(),s=e._paddingBox,o=e.settings,h=e.isRtl()?o.direction||"row-reversed":o.direction,u=o.align,a=e.isRtl()?o.pack||"end":o.pack,f=o.spacing||0;if(h=="row-reversed"||h=="column-reverse")r=r.set(r.toArray().reverse()),h=h.split("-")[0];h=="column"?(C="y",T="h",N="minH",k="maxH",A="innerH",L="top",O="deltaH",M="contentH",B="left",P="w",_="x",D="innerW",H="minW",j="right",F="deltaW",I="contentW"):(C="x",T="w",N="minW",k="maxW",A="innerW",L="left",O="deltaW",M="contentW",B="top",P="h",_="y",D="innerH",H="minH",j="bottom",F="deltaH",I="contentH"),c=i[A]-s[L]-s[L],x=l=0;for(t=0,n=r.length;t<n;t++)p=r[t],d=p.layoutRect(),v=p.settings,m=v.flex,c-=t<n-1?f:0,m>0&&(l+=m,d[k]&&g.push(p),d.flex=m),c-=d[N],y=s[B]+d[H]+s[j],y>x&&(x=y);E={},c<0?E[N]=i[N]-c+i[O]:E[N]=i[A]-c+i[O],E[H]=x+i[F],E[M]=i[A]-c,E[I]=x,E.minW=R(E.minW,i.maxW),E.minH=R(E.minH,i.maxH),E.minW=q(E.minW,i.startMinWidth),E.minH=q(E.minH,i.startMinHeight);if(!(!i.autoResize||E.minW==i.minW&&E.minH==i.minH)){E.w=E.minW,E.h=E.minH,e.layoutRect(E),this.recalc(e);if(e._lastRect===null){var U=e.parent();U&&(U._lastRect=null,U.recalc())}return}w=c/l;for(t=0,n=g.length;t<n;t++)p=g[t],d=p.layoutRect(),b=d[k],y=d[N]+d.flex*w,y>b?(c-=d[k]-d[N],l-=d.flex,d.flex=0,d.maxFlexSize=b):d.maxFlexSize=0;w=c/l,S=s[L],E={},l===0&&(a=="end"?S=c+s[L]:a=="center"?(S=Math.round(i[A]/2-(i[A]-c)/2)+s[L],S<0&&(S=s[L])):a=="justify"&&(S=s[L],f=Math.floor(c/(r.length-1)))),E[_]=s[B];for(t=0,n=r.length;t<n;t++)p=r[t],d=p.layoutRect(),y=d.maxFlexSize||d[N],u==="center"?E[_]=Math.round(i[D]/2-d[P]/2):u==="stretch"?(E[P]=q(d[H]||0,i[D]-s[B]-s[j]),E[_]=s[B]):u==="end"&&(E[_]=i[D]-d[P]-s.top),d.flex>0&&(y+=d.flex*w),E[T]=y,E[C]=S,p.layoutRect(E),p.recalc&&p.recalc(),S+=y+f}})}),i("tinymce/ui/FlowLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),i("tinymce/ui/FormatControls",["tinymce/ui/Control","tinymce/ui/Widget","tinymce/ui/FloatPanel","tinymce/util/Tools","tinymce/EditorManager","tinymce/Env"],function(e,t,n,r,i,s){function u(e){function r(t,n){return function(){var r=this;e.on("nodeChange",function(i){var s=e.formatter,u=null;o(i.parents,function(e){o(t,function(t){n?s.matchNode(e,n,{value:t.value})&&(u=t.value):s.matchNode(e,t.value)&&(u=t.value);if(u)return!1});if(u)return!1}),r.value(u)})}}function i(e){e=e.replace(/;$/,"").split(";");var t=e.length;while(t--)e[t]=e[t].split("=");return e}function s(){function i(e){var r=[];if(!e)return;return o(e,function(e){var s={text:e.title,icon:e.icon};if(e.items)s.menu=i(e.items);else{var o=e.format||"custom"+t++;e.format||(e.name=o,n.push(e)),s.format=o,s.cmd=e.cmd}r.push(s)}),r}function s(){var t;return e.settings.style_formats_merge?e.settings.style_formats?t=i(r.concat(e.settings.style_formats)):t=i(r):t=i(e.settings.style_formats||r),t}var t=0,n=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){o(n,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:s(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return e.formatter.getCssText(this.settings.format)},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,r;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),r=t.settings.cmd,r&&t.active(e.queryCommandState(r))})},onclick:function(){this.settings.format&&f(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function u(t){return function(){function r(){return e.undoManager?e.undoManager[t]():!1}var n=this;t=t=="redo"?"hasRedo":"hasUndo",n.disabled(!r()),e.on("Undo Redo AddUndo TypingUndo ClearUndos",function(){n.disabled(!r())})}}function a(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function f(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}var t;t=s(),o({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})},onclick:function(){f(n)}})}),o({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),o({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})}})}),e.addButton("undo",{tooltip:"Undo",onPostRender:u("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:u("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:u("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:u("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:a,cmd:"mceToggleVisualAid"}),o({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:t}),e.addButton("formatselect",function(){var t=[],n=i(e.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6");return o(n,function(n){t.push({text:n[0],value:n[1],textStyle:function(){return e.formatter.getCssText(n[1])}})}),{type:"listbox",text:n[0][0],values:t,fixedWidth:!0,onselect:f,onPostRender:r(t)}}),e.addButton("fontselect",function(){var t="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",n=[],s=i(e.settings.font_formats||t);return o(s,function(e){n.push({text:{raw:e[0]},value:e[1],textStyle:e[1].indexOf("dings")==-1?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:n,fixedWidth:!0,onPostRender:r(n,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var t=[],n="8pt 10pt 12pt 14pt 18pt 24pt 36pt",i=e.settings.fontsize_formats||n;return o(i.split(" "),function(e){var n=e,r=e,i=e.split("=");i.length>1&&(n=i[0],r=i[1]),t.push({text:n,value:r})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:r(t,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:t})}var o=r.each;i.on("AddEditor",function(t){t.editor.rtl&&(e.rtl=!0),u(t.editor)}),e.translate=function(e){return i.translate(e)},t.tooltips=!s.iOS}),i("tinymce/ui/GridLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t=e.settings,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T=[],N=[],C,k,L,A,O,M;t=e.settings,i=e.items().filter(":visible"),s=e.layoutRect(),r=t.columns||Math.ceil(Math.sqrt(i.length)),n=Math.ceil(i.length/r),y=t.spacingH||t.spacing||0,b=t.spacingV||t.spacing||0,w=t.alignH||t.align,E=t.alignV||t.align,m=e._paddingBox,O="reverseRows"in t?t.reverseRows:e.isRtl(),w&&typeof w=="string"&&(w=[w]),E&&typeof E=="string"&&(E=[E]);for(c=0;c<r;c++)T.push(0);for(h=0;h<n;h++)N.push(0);for(h=0;h<n;h++)for(c=0;c<r;c++){l=i[h*r+c];if(!l)break;f=l.layoutRect(),C=f.minW,k=f.minH,T[c]=C>T[c]?C:T[c],N[h]=k>N[h]?k:N[h]}L=s.innerW-m.left-m.right;for(S=0,c=0;c<r;c++)S+=T[c]+(c>0?y:0),L-=(c>0?y:0)+T[c];A=s.innerH-m.top-m.bottom;for(x=0,h=0;h<n;h++)x+=N[h]+(h>0?b:0),A-=(h>0?b:0)+N[h];S+=m.left+m.right,x+=m.top+m.bottom,a={},a.minW=S+(s.w-s.innerW),a.minH=x+(s.h-s.innerH),a.contentW=a.minW-s.deltaW,a.contentH=a.minH-s.deltaH,a.minW=Math.min(a.minW,s.maxW),a.minH=Math.min(a.minH,s.maxH),a.minW=Math.max(a.minW,s.startMinWidth),a.minH=Math.max(a.minH,s.startMinHeight);if(!(!s.autoResize||a.minW==s.minW&&a.minH==s.minH)){a.w=a.minW,a.h=a.minH,e.layoutRect(a),this.recalc(e);if(e._lastRect===null){var _=e.parent();_&&(_._lastRect=null,_.recalc())}return}s.autoResize&&(a=e.layoutRect(a),a.contentW=a.minW-s.deltaW,a.contentH=a.minH-s.deltaH);var D;t.packV=="start"?D=0:D=A>0?Math.floor(A/n):0;var P=0,H=t.flexWidths;if(H)for(c=0;c<H.length;c++)P+=H[c];else P=r;var B=L/P;for(c=0;c<r;c++)T[c]+=H?H[c]*B:B;d=m.top;for(h=0;h<n;h++){p=m.left,u=N[h]+D;for(c=0;c<r;c++){O?M=h*r+r-1-c:M=h*r+c,l=i[M];if(!l)break;v=l.settings,f=l.layoutRect(),o=Math.max(T[c],f.startMinWidth),f.x=p,f.y=d,g=v.alignH||(w?w[c]||w[0]:null),g=="center"?f.x=p+o/2-f.w/2:g=="right"?f.x=p+o-f.w:g=="stretch"&&(f.w=o),g=v.alignV||(E?E[c]||E[0]:null),g=="center"?f.y=d+u/2-f.h/2:g=="bottom"?f.y=d+u-f.h:g=="stretch"&&(f.h=u),l.layoutRect(f),p+=o+y,l.recalc&&l.recalc()}d+=u+b}}})}),i("tinymce/ui/Iframe",["tinymce/ui/Widget"],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):setTimeout(function(){n.html(e)},0),this}})}),i("tinymce/ui/Label",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){var r=t.getSize(e.getEl());r.width>n.maxW&&(n.minW=n.maxW,e.addClass("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&this.innerHtml(t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t+'"':"")+">"+e.encode(e._text)+"</label>"}})}),i("tinymce/ui/Toolbar",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e._super()}})}),i("tinymce/ui/MenuBar",["tinymce/ui/Toolbar"],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),i("tinymce/ui/MenuButton",["tinymce/ui/Button","tinymce/ui/Factory","tinymce/ui/MenuBar"],function(e,t,n){function r(e,t){while(e){if(t===e)return!0;e=e.parentNode}return!1}var i=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),e.fixedWidth&&t.addClass("fixed-width"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e=this,n=e.settings,r;if(e.menu&&e.menu.visible())return e.hideMenu();e.menu||(r=n.menu||[],r.length?r={type:"menu",items:r}:r.type=r.type||"menu",e.menu=t.create(r).parent(e).renderTo(),e.fire("createmenu"),e.menu.reflow(),e.menu.on("cancel",function(t){t.control.parent()===e.menu&&(t.stopPropagation(),e.focus(),e.hideMenu())}),e.menu.on("select",function(){e.focus()}),e.menu.on("show hide",function(t){t.control==e.menu&&e.activeMenu(t.type=="show"),e.aria("expanded",t.type=="show")}).fire("show")),e.menu.show(),e.menu.layoutRect({w:e.layoutRect().w}),e.menu.moveRel(e.getEl(),e.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e=this,t=e._id,r=e.classPrefix,i=e.settings.icon,s;return s=e.settings.image,s?(i="none",typeof s!="string"&&(s=window.getSelection?s[0]:s[1]),s=" style=\"background-image: url('"+s+"')\""):s="",i=e.settings.icon?r+"ico "+r+"i-"+i:"",e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1" aria-labelledby="'+t+'">'+'<button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+s+"></i>":"")+"<span>"+(e._text?(i?" ":"")+e.encode(e._text):"")+"</span>"+' <i class="'+r+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&r(t.target,e.getEl())&&(e.showMenu(),t.aria&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n=t.control,r=e.parent(),s;n&&r&&n instanceof i&&n.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=n&&(e.menu&&e.menu.visible()&&(s=!0),e.hideMenu())}),s&&(n.focus(),n.showMenu()))}),e._super()},text:function(e){var t=this,n,r;if(t._rendered){r=t.getEl("open").getElementsByTagName("span");for(n=0;n<r.length;n++)r[n].innerHTML=(t.settings.icon&&e?" ":"")+t.encode(e)}return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),i("tinymce/ui/ListBox",["tinymce/ui/MenuButton"],function(e){return e.extend({init:function(e){function o(n){for(var s=0;s<n.length;s++){r=n[s].selected||e.value===n[s].value;if(r){i=i||n[s].text,t._value=n[s].value;break}n[s].menu&&o(n[s].menu)}}var t=this,n,r,i,s;t._values=n=e.values,n&&(typeof e.value!="undefined"&&o(n),!r&&n.length>0&&(i=n[0].text,t._value=n[0].value),e.menu=n),e.text=e.text||i||n[0].text,t._super(e),t.addClass("listbox"),t.on("select",function(n){var r=n.control;s&&(n.lastControl=s),e.multiple?r.active(!r.active()):t.value(n.control.settings.value),s=r})},value:function(e){function s(e,t){e.items().each(function(e){n=e.value()===t,n&&(r=r||e.text()),e.active(n),e.menu&&s(e.menu,t)})}function o(t){for(var i=0;i<t.length;i++)n=t[i].value==e,n&&(r=r||t[i].text),t[i].active=n,t[i].menu&&o(t[i].menu)}var t=this,n,r,i;return typeof e!="undefined"&&(t.menu?s(t.menu,e):(i=t.settings.menu,o(i)),t.text(r||this.settings.text)),t._super(e)}})}),i("tinymce/ui/MenuItem",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/Env"],function(e,t,n){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),e.preview&&t.addClass("menu-item-preview");if(t._text==="-"||t._text==="|")t.addClass("menu-item-sep"),t.aria("role","separator"),t._text="-";e.selectable&&(t.aria("role","menuitemcheckbox"),t.addClass("menu-item-checkbox"),e.icon="selected"),!e.preview&&!e.selectable&&t.addClass("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e=this,n=e.settings,r,i=e.parent();i.items().each(function(t){t!==e&&t.hideMenu()});if(n.menu){r=e.menu,r?r.show():(r=n.menu,r.length?r={type:"menu",items:r}:r.type=r.type||"menu",i.settings.itemDefaults&&(r.itemDefaults=i.settings.itemDefaults),r=e.menu=t.create(r).parent(e).renderTo(),r.reflow(),r.on("cancel",function(t){t.stopPropagation(),e.focus(),r.hide()}),r.on("show hide",function(e){e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),r.on("hide",function(t){t.control===r&&e.removeClass("selected")}),r.submenu=!0),r._parentMenu=i,r.addClass("menu-sub");var s=r.testMoveRel(e.getEl(),e.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);r.moveRel(e.getEl(),s),r.rel=s,s="menu-sub-"+s,r.removeClass(r._lastRel),r.addClass(s),r._lastRel=s,e.addClass("selected"),e.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,r=e.settings,i=e.classPrefix,s=e.encode(e._text),o=e.settings.icon,u="",a=r.shortcut;return o&&e.parent().addClass("menu-has-icons"),r.image&&(o="none",u=" style=\"background-image: url('"+r.image+"')\""),a&&n.mac&&(a=a.replace(/ctrl\+alt\+/i,"&#x2325;&#x2318;"),a=a.replace(/ctrl\+/i,"&#x2318;"),a=a.replace(/alt\+/i,"&#x2325;"),a=a.replace(/shift\+/i,"&#x21E7;")),o=i+"ico "+i+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+(s!=="-"?'<i class="'+o+'"'+u+"></i> ":"")+(s!=="-"?'<span id="'+t+'-text" class="'+i+'text">'+s+"</span>":"")+(a?'<div id="'+t+'-shortcut" class="'+i+'menu-shortcut">'+a+"</div>":"")+(r.menu?'<div class="'+i+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;typeof n=="function"&&(n=n.call(this));if(n){var r=e.getEl("text");r&&r.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(!t.menu&&n.type==="click"?(e.fire("select"),e.parent().hideAll()):(e.showMenu(),n.aria&&e.menu.focus(!0)))}),e._super(),e},active:function(e){return typeof e!="undefined"&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),i("tinymce/ui/Menu",["tinymce/ui/FloatPanel","tinymce/ui/MenuItem","tinymce/util/Tools"],function(e,t,n){var r=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;e.autohide=!0,e.constrainToViewport=!0;if(e.itemDefaults){var r=e.items,i=r.length;while(i--)r[i]=n.extend({},e.itemDefaults,r[i])}t._super(e),t.addClass("menu")},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;if(n.icon||n.selectable)return e._hasIcons=!0,!1}),e._super()}});return r}),i("tinymce/ui/Radio",["tinymce/ui/Checkbox"],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),i("tinymce/ui/ResizeHandle",["tinymce/ui/Widget","tinymce/ui/DragHelper"],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),e.settings.direction=="both"&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'">'+'<i class="'+t+"ico "+t+'i-resize"></i>'+"</div>"},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){e.settings.direction!="both"&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),i("tinymce/ui/Spacer",["tinymce/ui/Widget"],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),i("tinymce/ui/SplitButton",["tinymce/ui/MenuButton","tinymce/ui/DomUtils"],function(e,t){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e=this,n=e.getEl(),r=e.layoutRect(),i,s;return e._super(),i=n.firstChild,s=n.lastChild,t.css(i,{width:r.w-t.getSize(s).width,height:r.h-2}),t.css(s,{height:r.h-2}),e},activeMenu:function(e){var n=this;t.toggleClass(n.getEl().lastChild,n.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r,i=e.settings.icon;return r=e.settings.image,r?(i="none",typeof r!="string"&&(r=window.getSelection?r[0]:r[1]),r=" style=\"background-image: url('"+r+"')\""):r="",i=e.settings.icon?n+"ico "+n+"i-"+i:"",'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1">'+'<button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+r+"></i>":"")+(e._text?(i?" ":"")+e._text:"")+"</button>"+'<button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(i?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i>'+"</button>"+"</div>"},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)while(n){if(e.aria&&e.aria.key!="down"||n.nodeName=="BUTTON"&&n.className.indexOf("open")==-1){e.stopImmediatePropagation(),t.call(this,e);return}n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),i("tinymce/ui/StackLayout",["tinymce/ui/FlowLayout"],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),i("tinymce/ui/TabPanel",["tinymce/ui/Panel","tinymce/ui/DomUtils"],function(e,t){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t.removeClass(n,this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t.addClass(n,this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){var s=e._id+"-t"+i;t.aria("role","tabpanel"),t.aria("labelledby",s),n+='<div id="'+s+'" class="'+r+'tab" '+'unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+'<div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+"</div>"+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>"+"</div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head"){var r=n.childNodes.length;while(r--)n.childNodes[r]==t.target&&e.activateTab(r)}})},initLayoutRect:function(){var e=this,n,r,i;r=t.getSize(e.getEl("head")).width,r=r<0?0:r,i=0,e.items().each(function(e){r=Math.max(r,e.layoutRect().minW),i=Math.max(i,e.layoutRect().minH)}),e.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=r,e.settings.h=i,e.layoutRect({x:0,y:0,w:r,h:i})});var s=t.getSize(e.getEl("head")).height;return e.settings.minWidth=r,e.settings.minHeight=i+s,n=e._super(),n.deltaH+=s,n.innerH=n.h-n.deltaH,n}})}),i("tinymce/ui/TextBox",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t._value=e.value||"",t.addClass("textbox"),e.multiline?t.addClass("multiline"):t.on("keydown",function(e){e.keyCode==13&&t.parents().reverse().each(function(t){e.preventDefault();if(t.hasEventListeners("submit")&&t.toJSON)return t.fire("submit",{data:t.toJSON()}),!1})})},disabled:function(e){var t=this;return t._rendered&&typeof e!="undefined"&&(t.getEl().disabled=e),t._super(e)},value:function(e){var t=this;return typeof e!="undefined"?(t._value=e,t._rendered&&(t.getEl().value=e),t):t._rendered?t.getEl().value:t._value},repaint:function(){var e=this,t,n,r,i=0,s=0,o;t=e.getEl().style,n=e._layoutRect,o=e._lastRepaintRect||{};var u=document;return!e.settings.multiline&&u.all&&(!u.documentMode||u.documentMode<=8)&&(t.lineHeight=n.h-s+"px"),r=e._borderBox,i=r.left+r.right+8,s=r.top+r.bottom+(e.settings.multiline?8:0),n.x!==o.x&&(t.left=n.x+"px",o.x=n.x),n.y!==o.y&&(t.top=n.y+"px",o.y=n.y),n.w!==o.w&&(t.width=n.w-i+"px",o.w=n.w),n.h!==o.h&&(t.height=n.h-s+"px",o.h=n.h),e._lastRepaintRect=o,e.fire("repaint",{},!1),e},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.encode(e._value,!1),i="";return"spellcheck"in n&&(i+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(i+=' maxlength="'+n.maxLength+'"'),n.size&&(i+=' size="'+n.size+'"'),n.subtype&&(i+=' type="'+n.subtype+'"'),e.disabled()&&(i+=' disabled="disabled"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="1"'+i+">"+r+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+r+'" hidefocus="1"'+i+" />"},postRender:function(){var e=this;return t.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()},remove:function(){t.off(this.getEl()),this._super()}})}),i("tinymce/ui/Throbber",["tinymce/ui/DomUtils","tinymce/ui/Control"],function(e,t){return function(n,r){var i=this,s,o=t.classPrefix;i.show=function(t){return i.hide(),s=!0,window.setTimeout(function(){s&&n.appendChild(e.createFragment('<div class="'+o+"throbber"+(r?" "+o+"throbber-inline":"")+'"></div>'))},t||0),i},i.hide=function(){var e=n.lastChild;return e&&e.className.indexOf("throbber")!=-1&&e.parentNode.removeChild(e),s=!1,i}}}),u(["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/Env","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/dom/DOMUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/html/DomParser","tinymce/html/Writer","tinymce/html/Serializer","tinymce/dom/Serializer","tinymce/dom/TridentSelection","tinymce/util/VK","tinymce/dom/ControlSelection","tinymce/dom/BookmarkManager","tinymce/dom/Selection","tinymce/dom/ElementUtils","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/util/Class","tinymce/util/EventDispatcher","tinymce/ui/Selector","tinymce/ui/Collection","tinymce/ui/DomUtils","tinymce/ui/Control","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/ui/Container","tinymce/ui/DragHelper","tinymce/ui/Scrollable","tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/FloatPanel","tinymce/ui/Window","tinymce/ui/MessageBox","tinymce/WindowManager","tinymce/util/Quirks","tinymce/util/Observable","tinymce/EditorObservable","tinymce/Shortcuts","tinymce/Editor","tinymce/util/I18n","tinymce/FocusManager","tinymce/EditorManager","tinymce/LegacyInput","tinymce/util/XHR","tinymce/util/JSON","tinymce/util/JSONRequest","tinymce/util/JSONP","tinymce/util/LocalStorage","tinymce/Compat","tinymce/ui/Layout","tinymce/ui/AbsoluteLayout","tinymce/ui/Tooltip","tinymce/ui/Widget","tinymce/ui/Button","tinymce/ui/ButtonGroup","tinymce/ui/Checkbox","tinymce/ui/ComboBox","tinymce/ui/ColorBox","tinymce/ui/PanelButton","tinymce/ui/ColorButton","tinymce/util/Color","tinymce/ui/ColorPicker","tinymce/ui/Path","tinymce/ui/ElementPath","tinymce/ui/FormItem","tinymce/ui/Form","tinymce/ui/FieldSet","tinymce/ui/FilePicker","tinymce/ui/FitLayout","tinymce/ui/FlexLayout","tinymce/ui/FlowLayout","tinymce/ui/FormatControls","tinymce/ui/GridLayout","tinymce/ui/Iframe","tinymce/ui/Label","tinymce/ui/Toolbar","tinymce/ui/MenuBar","tinymce/ui/MenuButton","tinymce/ui/ListBox","tinymce/ui/MenuItem","tinymce/ui/Menu","tinymce/ui/Radio","tinymce/ui/ResizeHandle","tinymce/ui/Spacer","tinymce/ui/SplitButton","tinymce/ui/StackLayout","tinymce/ui/TabPanel","tinymce/ui/TextBox","tinymce/ui/Throbber"])}(this),function(){return this.tinyMCE.DOM.events.domLoaded=!0,this.tinyMCE}.apply(this,arguments)||window.tinyMCE}.apply(e,arguments)})}(this),define("mockup-patterns-autotoc",["jquery","mockup-patterns-base"],function(e,t){var n=t.extend({name:"autotoc",defaults:{section:"section",levels:"h1,h2,h3",IDPrefix:"autotoc-item-",classTOCName:"autotoc-nav",classSectionName:"autotoc-section",classLevelPrefixName:"autotoc-level-",classActiveName:"active",scrollDuration:"slow",scrollEasing:"swing"},init:function(){var t=this;t.$toc=e("<nav/>").addClass(t.options.classTOCName),t.options.prependTo?t.$toc.prependTo(t.options.prependTo):t.options.appendTo?t.$toc.appendTo(t.options.appendTo):t.$toc.prependTo(t.$el),t.options.className&&t.$el.addClass(t.options.className),e(t.options.section,t.$el).addClass(t.options.classSectionName);var n=t.$el.hasClass("autotabs");e(t.options.levels,t.$el).each(function(r){var i=e(this),s=i.prop("id")?"#"+i.prop("id"):i.parents(t.options.section).prop("id");s||(s=t.options.IDPrefix+t.name+"-"+r,i.prop("id",s)),e("<a/>").appendTo(t.$toc).text(i.text()).prop("href",s).addClass(t.options.classLevelPrefixName+t.getLevel(i)).on("click",function(r,s){r.stopPropagation(),r.preventDefault(),t.$toc.children("."+t.options.classActiveName).removeClass(t.options.classActiveName),t.$el.children("."+t.options.classActiveName).removeClass(t.options.classActiveName),e(r.target).addClass(t.options.classActiveName),i.parents(t.options.section).addClass(t.options.classActiveName),s!==!1&&t.options.scrollDuration&&i&&!n&&e("body,html").animate({scrollTop:i.offset().top},t.options.scrollDuration,t.options.scrollEasing),t.$el.parents(".modal").size()!==0&&t.$el.trigger("resize.modal.patterns"),e(this).trigger("clicked")})}),t.$toc.find("a").first().trigger("click",!1)},getLevel:function(t){var n=0;return e.each(this.options.levels.split(","),function(e,r){if(t.filter(r).size()===1)return n=e+1,!1}),n}});return n}),define("text",["module"],function(e){var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.10",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}d.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("﻿")===0&&(i=i.substring(1)),t(i)}catch(s){r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!js/patterns/tinymce/templates/result.xml",[],function(){return'<div class="pattern-relateditems-result pattern-relateditems-type-<%= Type %> <% if (selected) { %>pattern-active<% } %>">\n  <a href="#" class="pattern-relateditems-result-select <% if (selectable) { %>selectable<% } %>">\n    <% if (!folderish) { %>\n    <span class="pattern-relateditems-result-image">\n      <img src="<%= generateImageUrl(_item, \'thumb\') %>" />\n    </span>\n    <% } %>\n    <span class="pattern-relateditems-result-title"><%= Title %></span>\n    <span class="pattern-relateditems-result-path"><%= path %></span>\n  </a>\n  <span class="pattern-relateditems-buttons">\n    <% if (folderish) { %>\n      <a class="pattern-relateditems-result-browse" href="#" data-path="<%= path %>"></a>\n    <% } %>\n  </span>\n</div>\n'}),define("text!js/patterns/tinymce/templates/selection.xml",[],function(){return'<span class="pattern-relateditems-item pattern-relateditems-type-<%= Type %>">\n <span class="pattern-relateditems-result-image">\n   <img src="<%= generateImageUrl(_item, \'thumb\') %>" />\n </span>\n <span class="pattern-relateditems-item-title"><%= Title %></span>\n <span class="pattern-relateditems-item-path"><%= path %></span>\n</span>\'\n'}),function(e){typeof define=="function"&&define.amd?define("dropzone",["jquery"],e):e(jQuery)}(function(e){function n(e){if(e)return r(e)}function r(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}var t={exports:{}};return t.exports=n,n.prototype.on=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},n.prototype.once=function(e,t){function r(){n.off(e,r),t.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},t._off=r,this.on(e,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=function(e,t){this._callbacks=this._callbacks||{};var n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;var r=n.indexOf(t._off||t);return~r&&n.splice(r,1),this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length},function(){var r,i,s,o,u,a,f,l,c={}.hasOwnProperty,h=function(e,t){function r(){this.constructor=e}for(var n in t)c.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},p=[].slice;i=typeof n!="undefined"&&n!==null?n:require("emitter"),f=function(){},r=function(e){function n(e,r){var i,s,o;this.element=e,this.version=n.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],typeof this.element=="string"&&(this.element=document.querySelector(this.element));if(!this.element||this.element.nodeType==null)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");n.instances.push(this),this.element.dropzone=this,i=(o=n.optionsForElement(this.element))!=null?o:{},this.options=t({},this.defaultOptions,i,r!=null?r:{});if(this.options.forceFallback||!n.isBrowserSupported())return this.options.fallback.call(this);this.options.url==null&&(this.options.url=this.element.getAttribute("action"));if(!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(s=this.getExistingFallback())&&s.parentNode&&s.parentNode.removeChild(s),this.options.previewsContainer?this.previewsContainer=n.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element,this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=n.getElements(this.options.clickable,"clickable")),this.init()}var t;return h(n,e),n.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached"],n.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:100,thumbnailHeight:100,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,addRemoveLinks:!1,previewsContainer:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(e,t){return t()},init:function(){return f},forceFallback:!1,fallback:function(){var e,t,r,i,s,o;this.element.className=""+this.element.className+" dz-browser-not-supported",o=this.element.getElementsByTagName("div");for(i=0,s=o.length;i<s;i++){e=o[i];if(/(^| )dz-message($| )/.test(e.className)){t=e,e.className="dz-message";continue}}return t||(t=n.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(t)),r=t.getElementsByTagName("span")[0],r&&(r.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(e){var t,n,r;return t={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},n=e.width/e.height,r=this.options.thumbnailWidth/this.options.thumbnailHeight,e.height<this.options.thumbnailHeight||e.width<this.options.thumbnailWidth?(t.trgHeight=t.srcHeight,t.trgWidth=t.srcWidth):n>r?(t.srcHeight=e.height,t.srcWidth=t.srcHeight*r):(t.srcWidth=e.width,t.srcHeight=t.srcWidth/r),t.srcX=(e.width-t.srcWidth)/2,t.srcY=(e.height-t.srcHeight)/2,t},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:f,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:f,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t,r,i,s,o,u,a,f,l,c,h,p,d,v=this;this.element===this.previewsContainer&&this.element.classList.add("dz-started"),e.previewElement=n.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement),c=e.previewElement.querySelectorAll("[data-dz-name]");for(s=0,a=c.length;s<a;s++)t=c[s],t.textContent=e.name;h=e.previewElement.querySelectorAll("[data-dz-size]");for(o=0,f=h.length;o<f;o++)t=h[o],t.innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=n.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink)),r=function(t){return t.preventDefault(),t.stopPropagation(),e.status===n.UPLOADING?n.confirm(v.options.dictCancelUploadConfirmation,function(){return v.removeFile(e)}):v.options.dictRemoveFileConfirmation?n.confirm(v.options.dictRemoveFileConfirmation,function(){return v.removeFile(e)}):v.removeFile(e)},p=e.previewElement.querySelectorAll("[data-dz-remove]"),d=[];for(u=0,l=p.length;u<l;u++)i=p[u],d.push(i.addEventListener("click",r));return d},removedfile:function(e){var t;return(t=e.previewElement)!=null&&t.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){var n,r,i,s,o;e.previewElement.classList.remove("dz-file-preview"),e.previewElement.classList.add("dz-image-preview"),s=e.previewElement.querySelectorAll("[data-dz-thumbnail]"),o=[];for(r=0,i=s.length;r<i;r++)n=s[r],n.alt=e.name,o.push(n.src=t);return o},error:function(e,t){var n,r,i,s,o;e.previewElement.classList.add("dz-error"),typeof t!="String"&&t.error&&(t=t.error),s=e.previewElement.querySelectorAll("[data-dz-errormessage]"),o=[];for(r=0,i=s.length;r<i;r++)n=s[r],o.push(n.textContent=t);return o},errormultiple:f,processing:function(e){e.previewElement.classList.add("dz-processing");if(e._removeLink)return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:f,uploadprogress:function(e,t,n){var r,i,s,o,u;o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]"),u=[];for(i=0,s=o.length;i<s;i++)r=o[i],u.push(r.style.width=""+t+"%");return u},totaluploadprogress:f,sending:f,sendingmultiple:f,success:function(e){return e.previewElement.classList.add("dz-success")},successmultiple:f,canceled:function(e){return this.emit("error",e,"Upload canceled.")},canceledmultiple:f,complete:function(e){if(e._removeLink)return e._removeLink.textContent=this.options.dictRemoveFile},completemultiple:f,maxfilesexceeded:f,maxfilesreached:f,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-details">\n    <div class="dz-filename"><span data-dz-name></span></div>\n    <div class="dz-size" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-success-mark"><span>✔</span></div>\n  <div class="dz-error-mark"><span>✘</span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'},t=function(){var e,t,n,r,i,s,o;r=arguments[0],n=2<=arguments.length?p.call(arguments,1):[];for(s=0,o=n.length;s<o;s++){t=n[s];for(e in t)i=t[e],r[e]=i}return r},n.prototype.getAcceptedFiles=function(){var e,t,n,r,i;r=this.files,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],e.accepted&&i.push(e);return i},n.prototype.getRejectedFiles=function(){var e,t,n,r,i;r=this.files,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],e.accepted||i.push(e);return i},n.prototype.getQueuedFiles=function(){var e,t,r,i,s;i=this.files,s=[];for(t=0,r=i.length;t<r;t++)e=i[t],e.status===n.QUEUED&&s.push(e);return s},n.prototype.getUploadingFiles=function(){var e,t,r,i,s;i=this.files,s=[];for(t=0,r=i.length;t<r;t++)e=i[t],e.status===n.UPLOADING&&s.push(e);return s},n.prototype.init=function(){var e,t,r,i,s,o,u,a=this;this.element.tagName==="form"&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(n.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(r=function(){return a.hiddenFileInput&&document.body.removeChild(a.hiddenFileInput),a.hiddenFileInput=document.createElement("input"),a.hiddenFileInput.setAttribute("type","file"),(a.options.maxFiles==null||a.options.maxFiles>1)&&a.hiddenFileInput.setAttribute("multiple","multiple"),a.options.acceptedFiles!=null&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles),a.hiddenFileInput.style.visibility="hidden",a.hiddenFileInput.style.position="absolute",a.hiddenFileInput.style.top="0",a.hiddenFileInput.style.left="0",a.hiddenFileInput.style.height="0",a.hiddenFileInput.style.width="0",document.body.appendChild(a.hiddenFileInput),a.hiddenFileInput.addEventListener("change",function(){var e,t,n,i;t=a.hiddenFileInput.files;if(t.length)for(n=0,i=t.length;n<i;n++)e=t[n],a.addFile(e);return r()})},r()),this.URL=(o=window.URL)!=null?o:window.webkitURL,u=this.events;for(i=0,s=u.length;i<s;i++)e=u[i],this.on(e,this.options[e]);return this.on("uploadprogress",function(){return a.updateTotalUploadProgress()}),this.on("removedfile",function(){return a.updateTotalUploadProgress()}),this.on("canceled",function(e){return a.emit("complete",e)}),this.on("complete",function(e){if(a.getUploadingFiles().length===0&&a.getQueuedFiles().length===0)return setTimeout(function(){return a.emit("queuecomplete")},0)}),t=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(e){return a.emit("dragstart",e)},dragenter:function(e){return t(e),a.emit("dragenter",e)},dragover:function(e){var n;try{n=e.dataTransfer.effectAllowed}catch(r){}return e.dataTransfer.dropEffect="move"===n||"linkMove"===n?"move":"copy",t(e),a.emit("dragover",e)},dragleave:function(e){return a.emit("dragleave",e)},drop:function(e){return t(e),a.drop(e)},dragend:function(e){return a.emit("dragend",e)}}}],this.clickableElements.forEach(function(e){return a.listeners.push({element:e,events:{click:function(t){if(e!==a.element||t.target===a.element||n.elementInside(t.target,a.element.querySelector(".dz-message")))return a.hiddenFileInput.click()}}})}),this.enable(),this.options.init.call(this)},n.prototype.destroy=function(){var e;this.disable(),this.removeAllFiles(!0);if((e=this.hiddenFileInput)!=null?e.parentNode:void 0)this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null;return delete this.element.dropzone,n.instances.splice(n.instances.indexOf(this),1)},n.prototype.updateTotalUploadProgress=function(){var e,t,n,r,i,s,o,u;r=0,n=0,e=this.getAcceptedFiles();if(e.length){u=this.getAcceptedFiles();for(s=0,o=u.length;s<o;s++)t=u[s],r+=t.upload.bytesSent,n+=t.upload.total;i=100*r/n}else i=100;return this.emit("totaluploadprogress",i,n,r)},n.prototype.getFallbackForm=function(){var e,t,r,i;return(e=this.getExistingFallback())?e:(r='<div class="dz-fallback">',this.options.dictFallbackText&&(r+="<p>"+this.options.dictFallbackText+"</p>"),r+='<input type="file" name="'+this.options.paramName+(this.options.uploadMultiple?"[]":"")+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',t=n.createElement(r),this.element.tagName!=="FORM"?(i=n.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),i.appendChild(t)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),i!=null?i:t)},n.prototype.getExistingFallback=function(){var e,t,n,r,i,s;t=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++){t=e[n];if(/(^| )fallback($| )/.test(t.className))return t}},s=["div","form"];for(r=0,i=s.length;r<i;r++){n=s[r];if(e=t(this.element.getElementsByTagName(n)))return e}},n.prototype.setupEventListeners=function(){var e,t,n,r,i,s,o;s=this.listeners,o=[];for(r=0,i=s.length;r<i;r++)e=s[r],o.push(function(){var r,i;r=e.events,i=[];for(t in r)n=r[t],i.push(e.element.addEventListener(t,n,!1));return i}());return o},n.prototype.removeEventListeners=function(){var e,t,n,r,i,s,o;s=this.listeners,o=[];for(r=0,i=s.length;r<i;r++)e=s[r],o.push(function(){var r,i;r=e.events,i=[];for(t in r)n=r[t],i.push(e.element.removeEventListener(t,n,!1));return i}());return o},n.prototype.disable=function(){var e,t,n,r,i;this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),r=this.files,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(this.cancelUpload(e));return i},n.prototype.enable=function(){return this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()},n.prototype.filesize=function(e){var t;return e>=109951162777.6?(e/=109951162777.6,t="TiB"):e>=107374182.4?(e/=107374182.4,t="GiB"):e>=104857.6?(e/=104857.6,t="MiB"):e>=102.4?(e/=102.4,t="KiB"):(e*=10,t="b"),"<strong>"+Math.round(e)/10+"</strong> "+t},n.prototype._updateMaxFilesReachedClass=function(){return this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},n.prototype.drop=function(e){var t,n;if(!e.dataTransfer)return;this.emit("drop",e),t=e.dataTransfer.files,t.length&&(n=e.dataTransfer.items,n&&n.length&&n[0].webkitGetAsEntry!=null?this._addFilesFromItems(n):this.handleFiles(t))},n.prototype.paste=function(e){var t,n;if((e!=null?(n=e.clipboardData)!=null?n.items:void 0:void 0)==null)return;this.emit("paste",e),t=e.clipboardData.items;if(t.length)return this._addFilesFromItems(t)},n.prototype.handleFiles=function(e){var t,n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(this.addFile(t));return i},n.prototype._addFilesFromItems=function(e){var t,n,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)n=e[r],n.webkitGetAsEntry!=null&&(t=n.webkitGetAsEntry())?t.isFile?s.push(this.addFile(n.getAsFile())):t.isDirectory?s.push(this._addFilesFromDirectory(t,t.name)):s.push(void 0):n.getAsFile!=null?n.kind==null||n.kind==="file"?s.push(this.addFile(n.getAsFile())):s.push(void 0):s.push(void 0);return s},n.prototype._addFilesFromDirectory=function(e,t){var n,r,i=this;return n=e.createReader(),r=function(e){var n,r,s;for(r=0,s=e.length;r<s;r++)n=e[r],n.isFile?n.file(function(e){if(i.options.ignoreHiddenFiles&&e.name.substring(0,1)===".")return;return e.fullPath=""+t+"/"+e.name,i.addFile(e)}):n.isDirectory&&i._addFilesFromDirectory(n,""+t+"/"+n.name)},n.readEntries(r,function(e){return typeof console!="undefined"&&console!==null?typeof console.log=="function"?console.log(e):void 0:void 0})},n.prototype.accept=function(e,t){return e.size>this.options.maxFilesize*1024*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):n.isValidFile(e,this.options.acceptedFiles)?this.options.maxFiles!=null&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)},n.prototype.addFile=function(e){var t=this;return e.upload={progress:0,total:e.size,bytesSent:0},this.files.push(e),e.status=n.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(n){return n?(e.accepted=!1,t._errorProcessing([e],n)):t.enqueueFile(e),t._updateMaxFilesReachedClass()})},n.prototype.enqueueFiles=function(e){var t,n,r;for(n=0,r=e.length;n<r;n++)t=e[n],this.enqueueFile(t);return null},n.prototype.enqueueFile=function(e){var t=this;e.accepted=!0;if(e.status!==n.ADDED)throw new Error("This file can't be queued because it has already been processed or was rejected.");e.status=n.QUEUED;if(this.options.autoProcessQueue)return setTimeout(function(){return t.processQueue()},0)},n.prototype._thumbnailQueue=[],n.prototype._processingThumbnail=!1,n.prototype._enqueueThumbnail=function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=this.options.maxThumbnailFilesize*1024*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)},n.prototype._processThumbnailQueue=function(){var e=this;if(this._processingThumbnail||this._thumbnailQueue.length===0)return;return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(){return e._processingThumbnail=!1,e._processThumbnailQueue()})},n.prototype.removeFile=function(e){e.status===n.UPLOADING&&this.cancelUpload(e),this.files=l(this.files,e),this.emit("removedfile",e);if(this.files.length===0)return this.emit("reset")},n.prototype.removeAllFiles=function(e){var t,r,i,s;e==null&&(e=!1),s=this.files.slice();for(r=0,i=s.length;r<i;r++)t=s[r],(t.status!==n.UPLOADING||e)&&this.removeFile(t);return null},n.prototype.createThumbnail=function(e,t){var n,r=this;return n=new FileReader,n.onload=function(){var i;return i=document.createElement("img"),i.onload=function(){var n,s,o,u,f,l,c,h;e.width=i.width,e.height=i.height,o=r.options.resize.call(r,e),o.trgWidth==null&&(o.trgWidth=r.options.thumbnailWidth),o.trgHeight==null&&(o.trgHeight=r.options.thumbnailHeight),n=document.createElement("canvas"),s=n.getContext("2d"),n.width=o.trgWidth,n.height=o.trgHeight,a(s,i,(f=o.srcX)!=null?f:0,(l=o.srcY)!=null?l:0,o.srcWidth,o.srcHeight,(c=o.trgX)!=null?c:0,(h=o.trgY)!=null?h:0,o.trgWidth,o.trgHeight),u=n.toDataURL("image/png"),r.emit("thumbnail",e,u);if(t!=null)return t()},i.src=n.result},n.readAsDataURL(e)},n.prototype.processQueue=function(){var e,t,n,r;t=this.options.parallelUploads,n=this.getUploadingFiles().length,e=n;if(n>=t)return;r=this.getQueuedFiles();if(!(r.length>0))return;if(this.options.uploadMultiple)return this.processFiles(r.slice(0,t-n));while(e<t){if(!r.length)return;this.processFile(r.shift()),e++}},n.prototype.processFile=function(e){return this.processFiles([e])},n.prototype.processFiles=function(e){var t,r,i;for(r=0,i=e.length;r<i;r++)t=e[r],t.processing=!0,t.status=n.UPLOADING,this.emit("processing",t);return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)},n.prototype._getFilesWithXhr=function(e){var t,n;return n=function(){var n,r,i,s;i=this.files,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],t.xhr===e&&s.push(t);return s}.call(this)},n.prototype.cancelUpload=function(e){var t,r,i,s,o,u,a;if(e.status===n.UPLOADING){r=this._getFilesWithXhr(e.xhr);for(i=0,o=r.length;i<o;i++)t=r[i],t.status=n.CANCELED;e.xhr.abort();for(s=0,u=r.length;s<u;s++)t=r[s],this.emit("canceled",t);this.options.uploadMultiple&&this.emit("canceledmultiple",r)}else if((a=e.status)===n.ADDED||a===n.QUEUED)e.status=n.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]);if(this.options.autoProcessQueue)return this.processQueue()},n.prototype.uploadFile=function(e){return this.uploadFiles([e])},n.prototype.uploadFiles=function(e){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P=this;y=new XMLHttpRequest;for(b=0,x=e.length;b<x;b++)r=e[b],r.xhr=y;y.open(this.options.method,this.options.url,!0),y.withCredentials=!!this.options.withCredentials,v=null,s=function(){var t,n,i;i=[];for(t=0,n=e.length;t<n;t++)r=e[t],i.push(P._errorProcessing(e,v||P.options.dictResponseError.replace("{{statusCode}}",y.status),y));return i},m=function(t){var n,i,s,o,u,a,f,l,c;if(t!=null){i=100*t.loaded/t.total;for(s=0,a=e.length;s<a;s++)r=e[s],r.upload={progress:i,total:t.total,bytesSent:t.loaded}}else{n=!0,i=100;for(o=0,f=e.length;o<f;o++){r=e[o];if(r.upload.progress!==100||r.upload.bytesSent!==r.upload.total)n=!1;r.upload.progress=i,r.upload.bytesSent=r.upload.total}if(n)return}c=[];for(u=0,l=e.length;u<l;u++)r=e[u],c.push(P.emit("uploadprogress",r,i,r.upload.bytesSent));return c},y.onload=function(t){var r;if(e[0].status===n.CANCELED)return;if(y.readyState!==4)return;v=y.responseText;if(y.getResponseHeader("content-type")&&~y.getResponseHeader("content-type").indexOf("application/json"))try{v=JSON.parse(v)}catch(i){t=i,v="Invalid JSON response from server."}return m(),200<=(r=y.status)&&r<300?P._finished(e,v,t):s()},y.onerror=function(){if(e[0].status===n.CANCELED)return;return s()},d=(A=y.upload)!=null?A:y,d.onprogress=m,a={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&t(a,this.options.headers);for(o in a)u=a[o],y.setRequestHeader(o,u);i=new FormData;if(this.options.params){O=this.options.params;for(h in O)g=O[h],i.append(h,g)}for(w=0,T=e.length;w<T;w++)r=e[w],this.emit("sending",r,y,i);this.options.uploadMultiple&&this.emit("sendingmultiple",e,y,i);if(this.element.tagName==="FORM"){M=this.element.querySelectorAll("input, textarea, select, button");for(E=0,N=M.length;E<N;E++){f=M[E],l=f.getAttribute("name"),c=f.getAttribute("type");if(f.tagName==="SELECT"&&f.hasAttribute("multiple")){_=f.options;for(S=0,C=_.length;S<C;S++)p=_[S],p.selected&&i.append(l,p.value)}else(!c||(D=c.toLowerCase())!=="checkbox"&&D!=="radio"||f.checked)&&i.append(l,f.value)}}for(L=0,k=e.length;L<k;L++)r=e[L],i.append(""+this.options.paramName+(this.options.uploadMultiple?"[]":""),r,r.name);return y.send(i)},n.prototype._finished=function(e,t,r){var i,s,o;for(s=0,o=e.length;s<o;s++)i=e[s],i.status=n.SUCCESS,this.emit("success",i,t,r),this.emit("complete",i);this.options.uploadMultiple&&(this.emit("successmultiple",e,t,r),this.emit("completemultiple",e));if(this.options.autoProcessQueue)return this.processQueue()},n.prototype._errorProcessing=function(e,t,r){var i,s,o;for(s=0,o=e.length;s<o;s++)i=e[s],i.status=n.ERROR,this.emit("error",i,t,r),this.emit("complete",i);this.options.uploadMultiple&&(this.emit("errormultiple",e,t,r),this.emit("completemultiple",e));if(this.options.autoProcessQueue)return this.processQueue()},n}(i),r.version="3.8.4",r.options={},r.optionsForElement=function(e){return e.getAttribute("id")?r.options[s(e.getAttribute("id"))]:void 0},r.instances=[],r.forElement=function(e){typeof e=="string"&&(e=document.querySelector(e));if((e!=null?e.dropzone:void 0)==null)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},r.autoDiscover=!0,r.discover=function(){var e,t,n,i,s,o;document.querySelectorAll?n=document.querySelectorAll(".dropzone"):(n=[],e=function(e){var t,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)t=e[r],/(^| )dropzone($| )/.test(t.className)?s.push(n.push(t)):s.push(void 0);return s},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),o=[];for(i=0,s=n.length;i<s;i++)t=n[i],r.optionsForElement(t)!==!1?o.push(new r(t)):o.push(void 0);return o},r.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],r.isBrowserSupported=function(){var e,t,n,i,s;e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){s=r.blacklistedBrowsers;for(n=0,i=s.length;n<i;n++){t=s[n];if(t.test(navigator.userAgent)){e=!1;continue}}}else e=!1;else e=!1;return e},l=function(e,t){var n,r,i,s;s=[];for(r=0,i=e.length;r<i;r++)n=e[r],n!==t&&s.push(n);return s},s=function(e){return e.replace(/[\-_](\w)/g,function(e){return e[1].toUpperCase()})},r.createElement=function(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.childNodes[0]},r.elementInside=function(e,t){if(e===t)return!0;while(e=e.parentNode)if(e===t)return!0;return!1},r.getElement=function(e,t){var n;typeof e=="string"?n=document.querySelector(e):e.nodeType!=null&&(n=e);if(n==null)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},r.getElements=function(e,t){var n,r,i,s,o,u,a,f;if(e instanceof Array){i=[];try{for(s=0,u=e.length;s<u;s++)r=e[s],i.push(this.getElement(r,t))}catch(l){n=l,i=null}}else if(typeof e=="string"){i=[],f=document.querySelectorAll(e);for(o=0,a=f.length;o<a;o++)r=f[o],i.push(r)}else e.nodeType!=null&&(i=[e]);if(i==null||!i.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return i},r.confirm=function(e,t,n){if(window.confirm(e))return t();if(n!=null)return n()},r.isValidFile=function(e,t){var n,r,i,s,o;if(!t)return!0;t=t.split(","),r=e.type,n=r.replace(/\/.*$/,"");for(s=0,o=t.length;s<o;s++){i=t[s],i=i.trim();if(i.charAt(0)==="."){if(e.name.toLowerCase().indexOf(i.toLowerCase(),e.name.length-i.length)!==-1)return!0}else if(/\/\*$/.test(i)){if(n===i.replace(/\/.*$/,""))return!0}else if(r===i)return!0}return!1},typeof e!="undefined"&&e!==null&&(e.fn.dropzone=function(e){return this.each(function(){return new r(this,e)})}),typeof t!="undefined"&&t!==null?t.exports=r:window.Dropzone=r,r.ADDED="added",r.QUEUED="queued",r.ACCEPTED=r.QUEUED,r.UPLOADING="uploading",r.PROCESSING=r.UPLOADING,r.CANCELED="canceled",r.ERROR="error",r.SUCCESS="success",u=function(e){var t,n,r,i,s,o,u,a,f,l;u=e.naturalWidth,o=e.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=o,r=n.getContext("2d"),r.drawImage(e,0,0),i=r.getImageData(0,0,1,o).data,l=0,s=o,a=o;while(a>l)t=i[(a-1)*4+3],t===0?s=a:l=a,a=s+l>>1;return f=a/o,f===0?1:f},a=function(e,t,n,r,i,s,o,a,f,l){var c;return c=u(t),e.drawImage(t,n,r,i,s,o,a,f,l/c)},o=function(e,t){var n,r,i,s,o,u,a,f,l;i=!1,l=!0,r=e.document,f=r.documentElement,n=r.addEventListener?"addEventListener":"attachEvent",a=r.addEventListener?"removeEventListener":"detachEvent",u=r.addEventListener?"":"on",s=function(n){if(n.type==="readystatechange"&&r.readyState!=="complete")return;(n.type==="load"?e:r)[a](u+n.type,s,!1);if(!i&&(i=!0))return t.call(e,n.type||n)},o=function(){var e;try{f.doScroll("left")}catch(t){e=t,setTimeout(o,50);return}return s("poll")};if(r.readyState!=="complete"){if(r.createEventObject&&f.doScroll){try{l=!e.frameElement}catch(c){}l&&o()}return r[n](u+"DOMContentLoaded",s,!1),r[n](u+"readystatechange",s,!1),e[n](u+"load",s,!1)}},r._autoDiscoverFunction=function(){if(r.autoDiscover)return r.discover()},o(window,r._autoDiscoverFunction)}.call(this),t.exports}),define("text!js/patterns/upload/templates/upload.xml",[],function(){return'<div class="upload-container upload-multiple">\n    <h2 class="title">Upload stuff here</h2>\n    <p class="help">\n        Just drag N drop stuff on the area below\n        or press "upload" button.\n    </p>\n    <div class="upload-area">\n        <div class="fallback">\n            <input name="file" type="file" multiple />\n        </div>\n        <div class="dz-message"><p>Drop files here...</p></div>\n        <div class="row">\n            <div class="col-md-9">\n                <input\n                    id="fakeUploadFile"\n                    placeholder="Choose File"\n                    disabled="disabled"\n                    />\n            </div>\n            <div class="col-md-3">\n                <button\n                    type="button"\n                    class="btn btn-primary browse">\n                    Browse\n                </button>\n            </div>\n        </div>\n        <div class="upload-queue">\n            <div class="previews">\n            </div>\n            <div class="controls">\n                <div class="path">\n                    <label>Upload to...</label>\n                    <p class="form-help">\n                        If nothing selected files we be added to current context.\n                    </p>\n                    <input\n                        type="text"\n                        name="location"\n                        />\n                </div>\n                <div class="actions row">\n                    <div class="col-md-9">\n                        <div class="progress progress-striped active">\n                            <div class="progress-bar progress-bar-success"\n                                 role="progressbar"\n                                 aria-valuenow="0"\n                                 aria-valuemin="0"\n                                 aria-valuemax="100"\n                                 style="width: 0%">\n                                <span class="sr-only">40% Complete (success)</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-3 align-right">\n                        <button\n                            type="button"\n                            class="btn btn-primary upload-all">\n                            Upload\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!js/patterns/upload/templates/preview.xml",[],function(){return'<div class="row item form-inline">\n    <div class="col-md-1 action">\n        <button\n            type="button"\n            class="btn btn-danger btn-xs remove-item"\n            data-dz-remove=""\n            href="javascript:undefined;">\n            <span class="glyphicon glyphicon-remove"></span>\n        </button>\n    </div>\n    <div class="col-md-8 title">\n        <div class="dz-preview">\n          <div class="dz-details">\n            <div class="dz-filename"><span data-dz-name></span></div>\n          </div>\n          <div class="dz-error-message"><span data-dz-errormessage></span></div>\n        </div>\n        <div class="dz-progress">\n            <span class="dz-upload" data-dz-uploadprogress></span>\n        </div>\n    </div>\n    <div class="col-md-3 info">\n        <div class="dz-size" data-dz-size></div>\n        <img data-dz-thumbnail />\n    </div>\n</div>\n'}),define("mockup-patterns-upload",["jquery","underscore","mockup-patterns-base","mockup-patterns-relateditems","dropzone","text!js/patterns/upload/templates/upload.xml","text!js/patterns/upload/templates/preview.xml"],function(e,t,n,r,i,s,o){i.autoDiscover=!1;var u=n.extend({name:"upload",defaults:{showTitle:!0,url:null,className:"upload",wrap:!1,wrapperTemplate:'<div class="upload-wrapper"/>',fileaddedClassName:"dropping",useTus:!1,container:"",ajaxUpload:!0,paramName:"file",clickable:!0,addRemoveLinks:!1,autoCleanResults:!0,previewsContainer:".previews",previewTemplate:null,maxFiles:null,maxFilesize:99999999,relatedItems:{attributes:["UID","Title","Description","getURL","Type","path","ModificationDate"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,placeholder:"Search for item on site..."}},init:function(){var n=this,r=s;n.currentPath=n.options.currentPath,n.numFiles=0,n.currentFile=0,r=t.template(r),n.$el.addClass(n.options.className),n.$el.append(r),n.$progress=e(".progress-bar-success",n.$el),n.options.showTitle||n.$el.find("h2.title").hide(),n.options.ajaxUpload||(e(".fallback",this.$el).remove(),this.$el.hasClass(".upload-container")?this.$el.addClass("no-ajax-upload"):this.$el.closest(".upload-container").addClass("no-ajax-upload")),n.options.wrap&&(n.$el.wrap(n.options.wrapperTemplate),n.$el=n.$el.parent()),n.options.baseUrl&&n.options.relativePath?(n.$pathInput=e('input[name="location"]',n.$el),n.relatedItems=n.setupRelatedItems(n.$pathInput)):(e('input[name="location"]',n.$el).remove(),n.relatedItems=null);var o=e(".upload-area",n.$el);e("button.browse",n.$el).click(function(e){e.preventDefault(),e.stopPropagation(),n.dropzone.hiddenFileInput.click()});var u=this.getDzoneOptions();try{n.dropzone=new i(o[0],u)}catch(a){throw window.DEBUG&&console.log(a),a}n.dropzone.on("addedfile",function(e){n.showControls()}),n.dropzone.on("removedfile",function(){n.dropzone.files.length<1&&n.hideControls()}),n.options.autoCleanResults&&n.dropzone.on("complete",function(t){setTimeout(function(){e(t.previewElement).fadeOut()},3e3)}),n.dropzone.on("complete",function(e){n.dropzone.files.length<1&&n.hideControls()}),n.dropzone.on("totaluploadprogress",function(e){e=((n.currentFile-1)*100+e)/(n.numFiles*100)*100,n.$progress.attr("aria-valuenow",e).css("width",e+"%")}),e(".upload-all",n.$el).click(function(e){e.preventDefault(),e.stopPropagation(),n.processUpload({finished:function(){n.$progress.attr("aria-valuenow",0).css("width","0%")}})})},showControls:function(){var t=this;e(".controls",t.$el).fadeIn("slow")},hideControls:function(){var t=this;e(".controls",t.$el).fadeOut("slow")},pathJoin:function(){var e=[];return t.each(arguments,function(t){if(!t)return;t[0]==="/"&&(t=t.substring(1)),t[t.length-1]==="/"&&(t=t.substring(0,t.length-1)),e.push(t)}),e.join("/")},getUrl:function(){var e=this,t=e.options.url;if(!t)if(e.options.baseUrl&&e.options.relativePath)t=e.options.baseUrl,t[t.length-1]!=="/"&&(t+="/"),t+=e.pathJoin(e.currentPath,e.options.relativePath);else{var n=e.$el.parents("form");n.length>0?t=n.attr("action"):t=window.location.href}return t},getDzoneOptions:function(){var t=this;typeof t.options.clickable=="string"&&(t.options.clickable==="true"?t.options.clickable=!0:t.options.clickable=!1);var n=e.extend({},t.options);n.url=t.getUrl(),n.uploadMultiple=!1,delete n.wrap,delete n.wrapperTemplate,delete n.resultTemplate,delete n.autoCleanResults,delete n.fileaddedClassName,delete n.useTus;if(t.options.previewsContainer){var r=t.$el.find(t.options.previewsContainer);r.length>0&&(n.previewsContainer=r[0])}return n.autoProcessQueue=!1,n.previewTemplate=o,n},processUpload:function(t){function f(){r=!0;if(n.dropzone.files.length===0){r=!1,n.$el.removeClass(o),u!==undefined&&typeof u=="function"&&u();return}var e=n.dropzone.files[0];[i.SUCCESS,i.ERROR,i.CANCELED].indexOf(e.status)!==-1?(n.dropzone.removeFile(e),f()):e.status!==i.UPLOADING?(s&&window.tus?n.handleTusUpload(e):(n.currentFile+=1,n.dropzone.processFile(e)),setTimeout(f,100)):setTimeout(f,100)}t||(t={});var n=this,r=!1,s=n.options.useTus,o=n.options.fileaddedClassName,u=t.finished;n.numFiles=n.dropzone.files.length,n.currentFile=0;if(n.$pathInput.val()){var a=n.pathJoin(n.options.baseUrl,"@@getFolderUrl");e.ajax({url:a,data:{uuid:n.$pathInput.val()},async:!1,success:function(e,t,r){n.dropzone.options.url=n.pathJoin(JSON.parse(e),n.options.relativePath)}})}f()},handleTusUpload:function(t){var n=this,r=e(t.previewElement),s=5242880;t.status=i.UPLOADING,window.tus.upload(t,{endpoint:n.dropzone.options.url,headers:{FILENAME:t.name},chunkSize:s}).fail(function(){console.alert("Error uploading with TUS resumable uploads"),t.status=i.ERROR}).progress(function(e,t,r){var i=t/r*100;n.$progress.attr("aria-valuenow",i).css("width",i+"%"),n.$progress.html("uploading...<br />"+n.formatBytes(t)+" / "+n.formatBytes(r))}).done(function(e,t){t.status=i.SUCCESS,n.dropzone.emit("success",t),n.dropzone.emit("complete",t)})},formatBytes:function(e){var t=Math.round(e/1024);if(t<1024)return t+" KiB";var n=Math.round(t/1024);return n<1024?n+" MB":Math.round(n/1024)+" GB"},setupRelatedItems:function(t){var n=this,i=n.options.relatedItems;n.options.initialFolder&&t.attr("value",n.options.initialFolder);var s=new r(t,i);return s.$el.on("change",function(){var t=e(this).select2("data");t.length>0?n.currentPath=t[0].path:n.currentPath=null,n.options.url=n.dropzone.options.url=n.getUrl()}),s}});return u}),define("text!js/patterns/tinymce/templates/link.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <h1><%- insertHeading %></h1>\n    <p class="info">Drag and drop files from your desktop onto dialog to upload</p>\n\n    <div class="linkTypes pat-autotoc autotabs"\n         data-pat-autotoc="section:fieldset;levels:legend;">\n\n      <fieldset class="linkType internal" data-linkType="internal">\n        <legend>Internal</legend>\n        <div>\n          <div class="form-group main">\n            <!-- this gives the name to the "linkType" -->\n            <input type="text" name="internal" />\n          </div>\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType upload" data-linkType="upload">\n        <legend>Upload</legend>\n        <div class="uploadify-me"></div>\n      </fieldset>\n\n      <fieldset class="linkType external" data-linkType="external">\n        <legend>External</legend>\n        <div class="form-group main">\n          <label for="external"><%- externalText %></label>\n          <input type="text" name="external" />\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType email" data-linkType="email">\n        <legend>Email</legend>\n        <div class="form-inline">\n          <div class="form-group main">\n            <label><%- emailText %></label>\n            <input type="text" name="email" />\n          </div>\n          <div class="form-group">\n            <label><%- subjectText %></label>\n            <input type="text" name="subject" />\n          </div>\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType anchor" data-linkType="anchor">\n        <legend>Anchor</legend>\n        <div>\n          <div class="form-group main">\n            <label>Select an anchor</label>\n            <div class="input-wrapper">\n              <select name="anchor" class="pat-select2" data-pat-select2="width:500px" />\n            </div>\n          </div>\n        </div>\n      </fieldset>\n\n    </div><!-- / tabs -->\n\n    <div class="common-controls">\n      <div class="form-group">\n        <label>Target</label>\n        <select name="target">\n          <% _.each(targetList, function(target){ %>\n            <option value="<%- target.value %>"><%- target.text %></option>\n          <% }); %>\n        </select>\n      </div>\n      <div class="form-group">\n        <label><%- titleText %></label>\n        <input type="text" name="title" />\n      </div>\n    </div>\n\n    <input type="submit" class="btn" name="cancel" value="<%- cancelBtn %>" />\n    <input type="submit" class="btn btn-primary" name="insert" value="<%- insertBtn %>" />\n  </div>\n</div>\n'}),define("text!js/patterns/tinymce/templates/image.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <h1><%- insertHeading %></h1>\n    <p class="info">Drag and drop files from your desktop onto dialog to upload</p>\n\n    <div class="linkTypes pat-autotoc autotabs"\n         data-pat-autotoc="section:fieldset;levels:legend;">\n\n      <fieldset class="linkType image" data-linkType="image">\n        <legend>Image</legend>\n        <div class="form-inline">\n          <div class="form-group main">\n            <input type="text" name="image" />\n          </div>\n          <div class="form-group scale">\n            <label><%- scaleText %></label>\n            <select name="scale">\n              <option value="">Original</option>\n                <% _.each(scales.split(\',\'), function(scale){ %>\n                  <% var scale = scale.split(\':\'); %>\n                  <option value="<%- scale[1] %>">\n                    <%- scale[0] %>\n                  </option>\n                <% }); %>\n            </select>\n          </div>\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType uploadImage" data-linkType="uploadImage">\n        <legend>Upload</legend>\n        <div class="uploadify-me"></div>\n      </fieldset>\n\n      <fieldset class="linkType externalImage" data-linkType="externalImage">\n        <legend>External image</legend>\n        <div>\n          <div class="form-group main">\n            <label><%- externalImageText %></label>\n            <input type="text" name="externalImage" />\n          </div>\n        </div>\n      </fieldset>\n\n    </div><!-- / tabs -->\n\n    <div class="common-controls">\n      <div class="form-group title">\n        <label><%- titleText %></label>\n        <input type="text" name="title" />\n      </div>\n      <div class="form-group text">\n        <label><%- altText %></label>\n        <input type="text" name="alt" />\n      </div>\n      <div class="form-group align">\n        <label><%- imageAlignText %></label>\n        <select name="align">\n          <% _.each([\'inline\', \'right\', \'left\'], function(align){ %>\n              <option value="<%- align %>">\n              <%- align.charAt(0).toUpperCase() + align.slice(1) %>\n              </option>\n          <% }); %>\n        <select>\n      </div>\n    </div>\n\n    <input type="submit" class="btn" name="cancel" value="<%- cancelBtn %>" />\n    <input type="submit" class="btn btn-primary" name="insert" value="<%- insertBtn %>" />\n\n  </div>\n</div>\n'}),define("js/patterns/tinymce/links",["jquery","underscore","mockup-patterns-base","mockup-patterns-relateditems","mockup-patterns-modal","tinymce","mockup-patterns-upload","text!js/patterns/tinymce/templates/link.xml","text!js/patterns/tinymce/templates/image.xml"],function(e,t,n,r,i,s,o,u,a){var f=n.extend({defaults:{linkModal:null},init:function(){this.linkModal=this.options.linkModal,this.tinypattern=this.options.tinypattern,this.tiny=this.tinypattern.tiny,this.dom=this.tiny.dom,this.$input=this.$el.find("input")},value:function(){return this.$input.val()},toUrl:function(){return this.value()},load:function(e){this.$input.attr("value",this.tiny.dom.getAttrib(e,"data-val"))},set:function(e){this.$input.attr("value",e)},attributes:function(){return{"data-val":this.value()}}}),l=f.extend({init:function(){var e=this;f.prototype.init.call(e),e.$input.addClass("pat-relateditems"),e.createRelatedItems()},createRelatedItems:function(){this.relatedItems=new r(this.$input,this.linkModal.options.relatedItems)},value:function(){var e=this,t=e.$input.select2("data");return t&&typeof t=="object"&&(t=t[0]),t},toUrl:function(){var e=this.value();return e?this.tinypattern.generateUrl(e):null},load:function(e){var t=this.tiny.dom.getAttrib(e,"data-val");t&&this.set(t)},set:function(e){this.$input.select2("destroy"),this.$input.attr("data-relateditems",undefined),this.$input.parent().replaceWith(this.$input),this.$input.attr("value",e),this.createRelatedItems()},attributes:function(){var e=this.value();return e?{"data-val":e.UID}:{}}}),c=l.extend({toUrl:function(){var t=e(".pat-upload").data("filename"),n=e(".pat-upload").data("path"),r=[n,t];return n&&r.unshift(""),r.join("/")}}),h=l.extend({toUrl:function(){var e=this.value();return this.tinypattern.generateImageUrl(e,this.linkModal.$scale.val())}}),p=f.extend({toUrl:function(){var e=this,t=e.value();if(t){var n=e.getSubject(),r="mailto:"+t;return n&&(r+="?subject="+n),r}return null},load:function(e){f.prototype.load.apply(this,[e]),this.linkModal.$subject.val(this.tiny.dom.getAttrib(e,"data-subject"))},getSubject:function(){return this.linkModal.$subject.val()},attributes:function(){var e=f.prototype.attributes.call(this);return e["data-subject"]=this.getSubject(),e}}),d=f.extend({init:function(){var e=this;f.prototype.init.call(e),e.$select=e.$el.find("select"),e.anchorNodes=[],e.anchorData=[],e.populate()},value:function(){var e=this,t=e.$select.select2("data");return t&&typeof t=="object"&&(t=t.id),t},populate:function(){var t=this;t.$select.find("option").remove(),t.anchorNodes=[],t.anchorData=[];var n,r,i,s,o,u=t.tiny.dom.select("a.mceItemAnchor,img.mceItemAnchor,a.mce-item-anchor,img.mce-item-anchor");for(r=0;r<u.length;r+=1)n=u[r],s=t.tiny.dom.getAttrib(n,"name"),s||(s=t.tiny.dom.getAttrib(n,"id")),s!==""&&(t.anchorNodes.push(n),t.anchorData.push({name:s,title:s}));u=t.tiny.dom.select(t.linkModal.options.anchorSelector);if(u.length>0)for(r=0;r<u.length;r+=1){n=u[r],o=e(n).text().replace(/^\s+|\s+$/g,"");if(o==="")continue;s=o.toLowerCase().substring(0,1024),s=s.replace(/[^a-z0-9]/g,"-");var a=!1;for(i=0;i<t.anchorNodes.length;i+=1){var f=t.anchorData[i];if(f.name===s){a=!0,f.title=o;break}}a||(t.anchorData.push({name:s,title:o,newAnchor:!0}),t.anchorNodes.push(n))}if(t.anchorNodes.length>0)for(r=0;r<t.anchorData.length;r+=1){var l=t.anchorData[r];t.$select.append('<option value="'+r+'">'+l.title+"</option>")}else t.$select.append("<option>No anchors found..</option>")},getIndex:function(e){var t=this;for(var n=0;n<t.anchorData.length;n+=1){var r=t.anchorData[n];if(r.name===e)return n}return 0},toUrl:function(){var e=this,t=e.value();if(t){var n=parseInt(t,10),r=e.anchorNodes[n],i=e.anchorData[n];return i.newAnchor&&(r.innerHTML='<a name="'+i.name+'" class="mce-item-anchor"></a>'+r.innerHTML),"#"+i.name}return null},set:function(e){var t=this.getIndex(e);this.$select.select2("data",""+t)}});s.PluginManager.add("ploneimage",function(e){e.addButton("ploneimage",{icon:"image",tooltip:"Insert/edit image",onclick:e.settings.addImageClicked,stateSelector:"img:not([data-mce-object])"}),e.addMenuItem("ploneimage",{icon:"image",text:"Insert image",onclick:e.settings.addImageClicked,context:"insert",prependToContext:!0})}),s.PluginManager.add("plonelink",function(e){e.addButton("plonelink",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:e.settings.addLinkClicked,stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link(s)",cmd:"unlink",stateSelector:"a[href]"}),e.addShortcut("Ctrl+K","",e.settings.addLinkClicked),e.addMenuItem("plonelink",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:e.settings.addLinkClicked,stateSelector:"a[href]",context:"insert",prependToContext:!0})});var v=n.extend({name:"linkmodal",defaults:{anchorSelector:"h1,h2,h3",linkTypes:[],initialLinkType:"internal",text:{insertHeading:"Insert Link"},linkTypeClassMapping:{internal:l,upload:c,external:f,email:p,anchor:d,image:h,uploadImage:c,externalImage:f}},linkTypeTemplateMapping:{internal:u,upload:u,external:u,email:u,anchor:u,image:a,uploadImage:a,externalImage:a},template:function(e){return t.template(this.linkTypeTemplateMapping[this.linkType])(e)},init:function(){var e=this;e.tinypattern=e.options.tinypattern,e.tinypattern.options.anchorSelector&&(e.options.anchorSelector=e.tinypattern.options.anchorSelector),e.tiny=e.tinypattern.tiny,e.dom=e.tiny.dom,e.linkType=e.options.initialLinkType,e.linkTypes={},e.modal=new i(e.$el,{html:e.generateModalHtml(),content:null,buttons:".btn"}),e.modal.on("shown",function(t){e.modalShown.apply(e,[t])})},generateModalHtml:function(){var e=this;return e.template({text:e.options.text,insertHeading:e.options.text.insertHeading,linkTypes:e.options.linkTypes,externalText:e.options.text.external,emailText:e.options.text.email,subjectText:e.options.text.subject,targetList:e.options.targetList,titleText:e.options.text.title,externalImageText:e.options.text.externalImage,altText:e.options.text.alt,imageAlignText:e.options.text.imageAlign,scaleText:e.options.text.scale,scales:e.options.scales,cancelBtn:e.options.text.cancelBtn,insertBtn:e.options.text.insertBtn})},isImageMode:function(){return["image","uploadImage","externalImage"].indexOf(this.linkType)!==-1},initElements:function(){var n=this;n.$target=e('select[name="target"]',n.modal.$modal),n.$button=e('.modal-footer input[name="insert"]',n.modal.$modal),n.$title=e('input[name="title"]',n.modal.$modal),n.$subject=e('input[name="subject"]',n.modal.$modal),n.$alt=e('input[name="alt"]',n.modal.$modal),n.$align=e('select[name="align"]',n.modal.$modal),n.$scale=e('select[name="scale"]',n.modal.$modal),t.each(n.options.linkTypes,function(t){var r=e(".linkType."+t+" .main",n.modal.$modal);n.linkTypes[t]=new n.options.linkTypeClassMapping[t](r,{linkModal:n,tinypattern:n.tinypattern})}),e(".autotoc-nav a",n.modal.$modal).click(function(){var r=e("fieldset.linkType",n.modal.$modal).eq(e(this).index()),i=r[0].className.split(/\s+/);t.each(i,function(e){t.indexOf(n.options.linkTypes,e)!==-1&&(n.linkType=e)})})},getLinkUrl:function(){var e=this;return e.linkTypes[e.linkType].toUrl()},getValue:function(){return this.linkTypes[this.linkType].value()},updateAnchor:function(t){var n=this,r=n.$target.val(),i=n.$title.val(),s=e.extend(!0,{},{title:i?i:null,target:r?r:null,"data-linkType":n.linkType,href:t},n.linkTypes[n.linkType].attributes());n.tiny.execCommand("mceInsertLink",!1,s)},focusElement:function(e){var t=this;t.tiny.focus(),t.tiny.selection.select(e),t.tiny.nodeChanged()},updateImage:function(t){function i(e){e.onload=e.onerror=function(){e.onload=e.onerror=null,n.focusElement(e)}}var n=this,r=e.extend(!0,{},{src:t,alt:n.$alt.val(),"class":"image-"+n.$align.val(),"data-linkType":n.linkType,"data-scale":n.$scale.val()},n.linkTypes[n.linkType].attributes());n.imgElm&&!n.imgElm.getAttribute("data-mce-object")?(r.width=n.dom.getAttrib(n.imgElm,"width"),r.height=n.dom.getAttrib(n.imgElm,"height")):n.imgElm=null,n.imgElm?n.dom.setAttribs(n.imgElm,r):(r.id="__mcenew",n.tiny.insertContent(n.dom.createHTML("img",r)),n.imgElm=n.dom.get("__mcenew"),n.dom.setAttrib(n.imgElm,"id",null)),i(n.imgElm),n.imgElm.complete&&n.focusElement(n.imgElm)},modalShown:function(t){var n=this;n.initElements(),n.initData(),n.$upload=e(".uploadify-me",n.modal.$modal);var r=e.extend(!0,{},n.options.relatedItems);r.selectableTypes=["Folder"],n.options.upload.relatedItems=r,n.$upload.addClass("pat-upload").patternUpload(n.options.upload),n.$upload.on("uploadAllCompleted",function(e,t){n.$upload.attr({"data-filename":t.files?t.files[0].name:"","data-path":t.path})}),n.$button.off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),n.linkType=n.modal.$modal.find("fieldset.active").data("linktype");var t=n.getLinkUrl();if(!t)return;n.isImageMode()?n.updateImage(t):n.updateAnchor(t),n.hide()}),e('.modal-footer input[name="cancel"]',n.modal.$modal).click(function(e){e.preventDefault(),n.hide()})},show:function(){this.modal.show()},hide:function(){this.modal.hide()},initData:function(){var e=this;e.selection=e.tiny.selection,e.tiny.focus();var t=e.imgElm=e.selection.getNode();e.anchorElm=e.dom.getParent(t,"a[href]");var n;if(e.isImageMode()){if(e.imgElm.nodeName!=="IMG"&&e.anchorElm){var r=e.anchorElm.getElementsByTagName("img");r.length>0&&(e.imgElm=r[0],e.focusElement(e.imgElm))}e.imgElm.nodeName!=="IMG"&&(e.imgElm=null);if(e.imgElm){var i=e.dom.getAttrib(e.imgElm,"src");e.$alt.val(e.dom.getAttrib(e.imgElm,"alt")),n=e.dom.getAttrib(e.imgElm,"data-linktype");if(n){e.linkType=n,e.linkTypes[e.linkType].load(e.imgElm);var s=e.dom.getAttrib(e.imgElm,"data-scale");e.$scale.val(s)}else i&&e.guessImageLink(i);var o=e.dom.getAttrib(e.imgElm,"class"),u=o.split(" ");for(var a=0;a<u.length;a+=1){var f=u[a];f.indexOf("image-")!==-1&&e.$align.val(f.replace("image-",""))}}}else if(e.anchorElm){e.focusElement(e.anchorElm);var l="";l=e.dom.getAttrib(e.anchorElm,"href"),e.$target.val(e.dom.getAttrib(e.anchorElm,"target")),e.$title.val(e.dom.getAttrib(e.anchorElm,"title")),n=e.dom.getAttrib(e.anchorElm,"data-linktype"),n?(e.linkType=n,e.linkTypes[e.linkType].load(e.anchorElm)):l&&e.guessAnchorLink(l)}},guessImageLink:function(e){var t=this;e.indexOf(t.options.prependToScalePart)!==-1?(t.linkType="image",t.$scale.val(t.tinypattern.getScaleFromUrl(e)),t.linkTypes.image.set(t.tinypattern.stripGeneratedUrl(e))):(t.linkType="externalImage",t.linkTypes.externalImage.set(e))},guessAnchorLink:function(e){var t=this;if(t.options.prependToUrl&&e.indexOf(t.options.prependToUrl)!==-1)t.linkType="internal",t.linkTypes.internal.set(t.tinypattern.stripGeneratedUrl(e));else if(e.indexOf("mailto:")!==-1){t.linkType="email";var n=e.substring("mailto:".length,e.length),r=n.split("?subject=");t.linkTypes.email.set(r[0]),r.length>1&&t.$subject.val(decodeURIComponent(r[1]))}else e[0]==="#"?(t.linkType="anchor",t.linkTypes.anchor.setRaw(e.substring(1))):(t.linkType="external",t.linkTypes.external.setRaw(e))},setSelectElement:function(e,t){e.find("option:selected").attr("selected",""),t&&e.find('option[value="'+t+'"]').attr("selected","true")},reinitialize:function(){var e=this;e.modal.options.html=e.generateModalHtml()}});return v}),function(e){define("tinymce-modern-theme",["tinymce"],function(){return function(){tinymce.ThemeManager.add("modern",function(e){function a(){function s(s){var o=[],u;if(!s)return;return i(s.split(/[ ,]/),function(t){function s(){var n=e.selection;i=="bullist"&&n.selectorChanged("ul > li",function(e,n){var r,i=n.parents.length;while(i--){r=n.parents[i].nodeName;if(r=="OL"||r=="UL")break}t.active(e&&r=="UL")}),i=="numlist"&&n.selectorChanged("ol > li",function(e,n){var r,i=n.parents.length;while(i--){r=n.parents[i].nodeName;if(r=="OL"||r=="UL")break}t.active(e&&r=="OL")}),t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var i;t=="|"?u=null:r.has(t)?(t={type:t},n.toolbar_items_size&&(t.size=n.toolbar_items_size),o.push(t),u=null):(u||(u={type:"buttongroup",items:[]},o.push(u)),e.buttons[t]&&(i=t,t=e.buttons[i],typeof t=="function"&&(t=t()),t.type=t.type||"button",n.toolbar_items_size&&(t.size=n.toolbar_items_size),t=r.create(t),u.items.push(t),e.initialized?s():e.on("init",s)))}),t.push({type:"toolbar",layout:"flow",items:o}),!0}var t=[];if(tinymce.isArray(n.toolbar)){if(n.toolbar.length===0)return;tinymce.each(n.toolbar,function(e,t){n["toolbar"+(t+1)]=e}),delete n.toolbar}for(var o=1;o<10;o++)if(!s(n["toolbar"+o]))break;!t.length&&n.toolbar!==!1&&s(n.toolbar||u);if(t.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:t}}function f(){function s(t){var n;return t=="|"?{text:"|"}:(n=e.menuItems[t],n)}function u(t){var r,u,a,f,l;l=tinymce.makeMap((n.removed_menuitems||"").split(/[ ,]/)),n.menu?(u=n.menu[t],f=!0):u=o[t];if(u){r={text:u.title},a=[],i((u.items||"").split(/[ ,]/),function(e){var t=s(e);t&&!l[e]&&a.push(s(e))}),f||i(e.menuItems,function(e){e.context==t&&(e.separator=="before"&&a.push({text:"|"}),e.prependToContext?a.unshift(e):a.push(e),e.separator=="after"&&a.push({text:"|"}))});for(var c=0;c<a.length;c++)a[c].text=="|"&&(c===0||c==a.length-1)&&a.splice(c,1);r.menu=a;if(!r.menu.length)return null}return r}var t,r=[],a=[];if(n.menu)for(t in n.menu)a.push(t);else for(t in o)a.push(t);var f=typeof n.menubar=="string"?n.menubar.split(/[ ,]/):a;for(var l=0;l<f.length;l++){var c=f[l];c=u(c),c&&r.push(c)}return r}function l(t){function n(e){var n=t.find(e)[0];n&&n.focus(!0)}e.shortcuts.add("Alt+F9","",function(){n("menubar")}),e.shortcuts.add("Alt+F10","",function(){n("toolbar")}),e.shortcuts.add("Alt+F11","",function(){n("elementpath")}),t.on("cancel",function(){e.focus()})}function c(t,r){function f(e){return{width:e.clientWidth,height:e.clientHeight}}var i,o,u,a;i=e.getContainer(),o=e.getContentAreaContainer().firstChild,u=f(i),a=f(o),t!==null&&(t=Math.max(n.min_width||100,t),t=Math.min(n.max_width||65535,t),s.setStyle(i,"width",t+(u.width-a.width)),s.setStyle(o,"width",t)),r=Math.max(n.min_height||100,r),r=Math.min(n.max_height||65535,r),s.setStyle(o,"height",r),e.fire("ResizeEditor")}function h(n,r){var i=e.getContentAreaContainer();t.resizeTo(i.clientWidth+n,i.clientHeight+r)}function p(i){function c(){if(o&&o.moveRel&&o.visible()&&!o._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),r=0,i=0;if(t){var u=s.getPos(n),a=s.getPos(t);r=Math.max(0,a.x-u.x),i=Math.max(0,a.y-u.y)}o.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,i)}}function h(){o&&(o.show(),c(),s.addClass(e.getBody(),"mce-edit-focus"))}function p(){o&&(o.hide(),s.removeClass(e.getBody(),"mce-edit-focus"))}function d(){if(o){o.visible()||h();return}o=t.panel=r.create({type:u?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!u,border:1,items:[n.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:f()},a()]}),e.fire("BeforeRenderUI"),o.renderTo(u||document.body).reflow(),l(o),h(),e.on("nodeChange",c),e.on("activate",h),e.on("deactivate",p),e.nodeChanged()}var o,u;return n.fixed_toolbar_container&&(u=s.select(n.fixed_toolbar_container)[0]),n.content_editable=!0,e.on("focus",function(){i.skinUiCss?tinymce.DOM.styleSheetLoader.load(i.skinUiCss,d,d):d()}),e.on("blur hide",p),e.on("remove",function(){o&&(o.remove(),o=null)}),i.skinUiCss&&tinymce.DOM.styleSheetLoader.load(i.skinUiCss),{}}function d(i){var s,o,u;return i.skinUiCss&&tinymce.DOM.loadCSS(i.skinUiCss),s=t.panel=r.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[n.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:f()},a(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),n.resize!==!1&&(o={type:"resizehandle",direction:n.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;u={width:t.clientWidth,height:t.clientHeight}},onResize:function(e){n.resize=="both"?c(u.width+e.deltaX,u.height+e.deltaY):c(null,u.height+e.deltaY)}}),n.statusbar!==!1&&s.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},o]}),n.readonly&&s.find("*").disabled(!0),e.fire("BeforeRenderUI"),s.renderBefore(i.targetNode).reflow(),n.width&&tinymce.DOM.setStyle(s.getEl(),"width",n.width),e.on("remove",function(){s.remove(),s=null}),l(s),{iframeContainer:s.find("#iframe")[0].getEl(),editorContainer:s.getEl()}}var t=this,n=e.settings,r=tinymce.ui.Factory,i=tinymce.each,s=tinymce.DOM,o={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},u="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";t.renderUI=function(r){var i=n.skin!==!1?n.skin||"lightgray":!1;if(i){var s=n.skin_url;s?s=e.documentBaseURI.toAbsolute(s):s=tinymce.baseURL+"/skins/"+i,tinymce.Env.documentMode<=7?r.skinUiCss=s+"/skin.ie7.min.css":r.skinUiCss=s+"/skin.min.css",e.contentCSS.push(s+"/content"+(e.inline?".inline":"")+".min.css")}return e.on("ProgressState",function(e){t.throbber=t.throbber||new tinymce.ui.Throbber(t.panel.getEl("body")),e.state?t.throbber.show(e.time):t.throbber.hide()}),n.inline?p(r):d(r)},t.resizeTo=c,t.resizeBy=h})}.apply(e,arguments)})}(this),function(e){define("tinymce-advlist",["tinymce"],function(){return function(){tinymce.PluginManager.add("advlist",function(e){function i(e,t){var n=[];return tinymce.each(t.split(/[ ,]/),function(e){n.push({text:e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}),data:e=="default"?"":e})}),n}function s(t,n){var i,s=e.dom,o=e.selection;i=s.getParent(o.getNode(),"ol,ul"),(!i||i.nodeName!=t||n===!1)&&e.execCommand(t=="UL"?"InsertUnorderedList":"InsertOrderedList"),n=n===!1?r[t]:n,r[t]=n,i=s.getParent(o.getNode(),"ol,ul"),i&&(s.setStyle(i,"listStyleType",n?n:null),i.removeAttribute("data-mce-style")),e.focus()}function o(t){var n=e.dom.getStyle(e.dom.getParent(e.selection.getNode(),"ol,ul"),"listStyleType")||"";t.control.items().each(function(e){e.active(e.settings.data===n)})}var t,n,r={};t=i("OL",e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),n=i("UL",e.getParam("advlist_bullet_styles","default,circle,disc,square")),e.addButton("numlist",{type:"splitbutton",tooltip:"Numbered list",menu:t,onshow:o,onselect:function(e){s("OL",e.control.settings.data)},onclick:function(){s("OL",!1)}}),e.addButton("bullist",{type:"splitbutton",tooltip:"Bullet list",menu:n,onshow:o,onselect:function(e){s("UL",e.control.settings.data)},onclick:function(){s("UL",!1)}})})}.apply(e,arguments)})}(this),function(e){define("tinymce-anchor",["tinymce"],function(){return function(){tinymce.PluginManager.add("anchor",function(e){function t(){var t=e.selection.getNode(),n="";t.tagName=="A"&&(n=t.name||t.id||""),e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"name",size:40,label:"Name",value:n},onsubmit:function(t){e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t.data.name}))}})}e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:t,stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:t})})}.apply(e,arguments)})}(this),function(e){define("tinymce-autolink",["tinymce"],function(){return function(){tinymce.PluginManager.add("autolink",function(e){function n(e){s(e,-1,"(",!0)}function r(e){s(e,0,"",!0)}function i(e){s(e,-1,"",!1)}function s(e,t,n){function p(e,t){t<0&&(t=0);if(e.nodeType==3){var n=e.data.length;t>n&&(t=n)}return t}function d(e,t){r.setStart(e,p(e,t))}function v(e,t){r.setEnd(e,p(e,t))}var r,i,s,o,u,a,f,l,c,h;r=e.selection.getRng(!0).cloneRange();if(r.startOffset<5){l=r.endContainer.previousSibling;if(!l){if(!r.endContainer.firstChild||!r.endContainer.firstChild.nextSibling)return;l=r.endContainer.firstChild.nextSibling}c=l.length,d(l,c),v(l,c);if(r.endOffset<5)return;i=r.endOffset,o=l}else{o=r.endContainer;if(o.nodeType!=3&&o.firstChild){while(o.nodeType!=3&&o.firstChild)o=o.firstChild;o.nodeType==3&&(d(o,0),v(o,o.nodeValue.length))}r.endOffset==1?i=2:i=r.endOffset-1-t}s=i;do d(o,i>=2?i-2:0),v(o,i>=1?i-1:0),i-=1,h=r.toString();while(h!=" "&&h!==""&&h.charCodeAt(0)!=160&&i-2>=0&&h!=n);r.toString()==n||r.toString().charCodeAt(0)==160?(d(o,i),v(o,s),i+=1):r.startOffset===0?(d(o,0),v(o,s)):(d(o,i),v(o,s)),a=r.toString(),a.charAt(a.length-1)=="."&&v(o,s-1),a=r.toString(),f=a.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i),f&&(f[1]=="www."?f[1]="http://www.":/@$/.test(f[1])&&!/^mailto:/.test(f[1])&&(f[1]="mailto:"+f[1]),u=e.selection.getBookmark(),e.selection.setRng(r),e.execCommand("createlink",!1,f[1]+f[2]),e.selection.moveToBookmark(u),e.nodeChanged())}var t;e.on("keydown",function(t){if(t.keyCode==13)return i(e)});if(tinymce.Env.ie){e.on("focus",function(){if(!t){t=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(n){}}});return}e.on("keypress",function(t){if(t.keyCode==41)return n(e)}),e.on("keyup",function(t){if(t.keyCode==32)return r(e)})})}.apply(e,arguments)})}(this),function(e){define("tinymce-autoresize",["tinymce"],function(){return function(){tinymce.PluginManager.add("autoresize",function(e){function r(){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}function i(s){var o,u,a,f,l=tinymce.DOM,c,h,p,d,v,m,g,y;u=e.getDoc();if(!u)return;a=u.body,f=u.documentElement,c=t.autoresize_min_height;if(!a||s&&s.type==="setcontent"&&s.initial||r()){a&&f&&(a.style.overflowY="auto",f.style.overflowY="auto");return}p=e.dom.getStyle(a,"margin-top",!0),d=e.dom.getStyle(a,"margin-bottom",!0),v=e.dom.getStyle(a,"padding-top",!0),m=e.dom.getStyle(a,"padding-bottom",!0),g=e.dom.getStyle(a,"border-top-width",!0),y=e.dom.getStyle(a,"border-bottom-width",!0),h=a.offsetHeight+parseInt(p,10)+parseInt(d,10)+parseInt(v,10)+parseInt(m,10)+parseInt(g,10)+parseInt(y,10);if(isNaN(h)||h<=0)h=tinymce.Env.ie?a.scrollHeight:tinymce.Env.webkit&&a.clientHeight===0?0:a.offsetHeight;h>t.autoresize_min_height&&(c=h),t.autoresize_max_height&&h>t.autoresize_max_height?(c=t.autoresize_max_height,a.style.overflowY="auto",f.style.overflowY="auto"):(a.style.overflowY="hidden",f.style.overflowY="hidden",a.scrollTop=0),c!==n&&(o=c-n,l.setStyle(e.iframeElement,"height",c+"px"),n=c,tinymce.isWebKit&&o<0&&i(s))}function s(e,t,n){setTimeout(function(){i({}),e--?s(e,t,n):n&&n()},t)}var t=e.settings,n=0;if(e.settings.inline)return;t.autoresize_min_height=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10),t.autoresize_max_height=parseInt(e.getParam("autoresize_max_height",0),10),e.on("init",function(){var t=e.getParam("autoresize_overflow_padding",1);e.dom.setStyles(e.getBody(),{paddingBottom:e.getParam("autoresize_bottom_margin",50),paddingLeft:t,paddingRight:t})}),e.on("nodechange setcontent keyup FullscreenStateChanged",i),e.getParam("autoresize_on_init",!0)&&e.on("init",function(){s(20,100,function(){s(5,1e3)})}),e.addCommand("mceAutoResize",i)})}.apply(e,arguments)})}(this),function(e){define("tinymce-autosave",["tinymce"],function(){return function(){tinymce._beforeUnloadHandler=function(){var e;return tinymce.each(tinymce.editors,function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft(),!e&&t.isDirty()&&t.getParam("autosave_ask_before_unload",!0)&&(e=t.translate("You have unsaved changes are you sure you want to navigate away?"))}),e},tinymce.PluginManager.add("autosave",function(e){function s(e,t){var n={s:1e3,m:6e4};return e=/^(\d+)([ms]?)$/.exec(""+(e||t)),(e[2]?n[e[2]]:1)*parseInt(e,10)}function o(){var e=parseInt(n.getItem(r+"time"),10)||0;return(new Date).getTime()-e>t.autosave_retention?(u(!1),!1):!0}function u(t){n.removeItem(r+"draft"),n.removeItem(r+"time"),t!==!1&&e.fire("RemoveDraft")}function a(){!p()&&e.isDirty()&&(n.setItem(r+"draft",e.getContent({format:"raw",no_events:!0})),n.setItem(r+"time",(new Date).getTime()),e.fire("StoreDraft"))}function f(){o()&&(e.setContent(n.getItem(r+"draft"),{format:"raw"}),e.fire("RestoreDraft"))}function l(){i||(setInterval(function(){e.removed||a()},t.autosave_interval),i=!0)}function c(){var t=this;t.disabled(!o()),e.on("StoreDraft RestoreDraft RemoveDraft",function(){t.disabled(!o())}),l()}function h(){e.undoManager.beforeChange(),f(),u(),e.undoManager.add()}function p(t){var n=e.settings.forced_root_block;return t=tinymce.trim(typeof t=="undefined"?e.getBody().innerHTML:t),t===""||(new RegExp("^<"+n+"[^>]*>(( |&nbsp;|[ 	]|<br[^>]*>)+?|)</"+n+">|<br>$","i")).test(t)}var t=e.settings,n=tinymce.util.LocalStorage,r,i;r=t.autosave_prefix||"tinymce-autosave-{path}{query}-{id}-",r=r.replace(/\{path\}/g,document.location.pathname),r=r.replace(/\{query\}/g,document.location.search),r=r.replace(/\{id\}/g,e.id),t.autosave_interval=s(t.autosave_interval,"30s"),t.autosave_retention=s(t.autosave_retention,"20m"),e.addButton("restoredraft",{title:"Restore last draft",onclick:h,onPostRender:c}),e.addMenuItem("restoredraft",{text:"Restore last draft",onclick:h,onPostRender:c,context:"file"}),e.settings.autosave_restore_when_empty!==!1&&(e.on("init",function(){o()&&p()&&f()}),e.on("saveContent",function(){u()})),window.onbeforeunload=tinymce._beforeUnloadHandler,this.hasDraft=o,this.storeDraft=a,this.restoreDraft=f,this.removeDraft=u,this.isEmpty=p})}.apply(e,arguments)})}(this),function(e){define("tinymce-bbcode",["tinymce"],function(){return function(){(function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(e){var t=this,n=e.getParam("bbcode_dialect","punbb").toLowerCase();e.on("beforeSetContent",function(e){e.content=t["_"+n+"_bbcode2html"](e.content)}),e.on("postProcess",function(e){e.set&&(e.content=t["_"+n+"_bbcode2html"](e.content)),e.get&&(e.content=t["_"+n+"_html2bbcode"](e.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Moxiecode Systems AB",authorurl:"http://www.tinymce.com",infourl:"http://www.tinymce.com/wiki.php/Plugin:bbcode"}},_punbb_html2bbcode:function(e){function t(t,n){e=e.replace(t,n)}return e=tinymce.trim(e),t(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),t(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),t(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),t(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),t(/<font>(.*?)<\/font>/gi,"$1"),t(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),t(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),t(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),t(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),t(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),t(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),t(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),t(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),t(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),t(/<\/(strong|b)>/gi,"[/b]"),t(/<(strong|b)>/gi,"[b]"),t(/<\/(em|i)>/gi,"[/i]"),t(/<(em|i)>/gi,"[i]"),t(/<\/u>/gi,"[/u]"),t(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),t(/<u>/gi,"[u]"),t(/<blockquote[^>]*>/gi,"[quote]"),t(/<\/blockquote>/gi,"[/quote]"),t(/<br \/>/gi,"\n"),t(/<br\/>/gi,"\n"),t(/<br>/gi,"\n"),t(/<p>/gi,""),t(/<\/p>/gi,"\n"),t(/&nbsp;|\u00a0/gi," "),t(/&quot;/gi,'"'),t(/&lt;/gi,"<"),t(/&gt;/gi,">"),t(/&amp;/gi,"&"),e},_punbb_bbcode2html:function(e){function t(t,n){e=e.replace(t,n)}return e=tinymce.trim(e),t(/\n/gi,"<br />"),t(/\[b\]/gi,"<strong>"),t(/\[\/b\]/gi,"</strong>"),t(/\[i\]/gi,"<em>"),t(/\[\/i\]/gi,"</em>"),t(/\[u\]/gi,"<u>"),t(/\[\/u\]/gi,"</u>"),t(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),t(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),t(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),t(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),t(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),t(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),e}}),tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin)})()}.apply(e,arguments)})}(this),function(e){define("tinymce-charmap",["tinymce"],function(){return function(){tinymce.PluginManager.add("charmap",function(e){function n(){function o(e){while(e){if(e.nodeName=="TD")return e;e=e.parentNode}}var n,r,i,s;n='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>';var u=25;for(i=0;i<10;i++){n+="<tr>";for(r=0;r<u;r++){var a=t[i*u+r];n+='<td title="'+a[1]+'"><div tabindex="-1" title="'+a[1]+'" role="button">'+(a?String.fromCharCode(parseInt(a[0],10)):"&nbsp;")+"</div></td>"}n+="</tr>"}n+="</tbody></table>";var f={type:"container",html:n,onclick:function(t){var n=t.target;n.tagName=="TD"&&(n=n.firstChild),n.tagName=="DIV"&&(e.execCommand("mceInsertContent",!1,n.firstChild.data),t.ctrlKey||s.close())},onmouseover:function(e){var t=o(e.target);t&&s.find("#preview").text(t.firstChild.firstChild.data)}};s=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[f,{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:100,minHeight:80}],buttons:[{text:"Close",onclick:function(){s.close()}}]})}var t=[["160","no-break space"],["38","ampersand"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["221","Y - acute"],["376","Y - diaeresis"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"],["173","soft hyphen"]];e.addButton("charmap",{icon:"charmap",tooltip:"Special character",onclick:n}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",onclick:n,context:"insert"})})}.apply(e,arguments)})}(this),function(e){define("tinymce-code",["tinymce"],function(){return function(){tinymce.PluginManager.add("code",function(e){function t(){var t=e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:e.getParam("code_dialog_width",600),minHeight:e.getParam("code_dialog_height",Math.min(tinymce.DOM.getViewPort().h-200,500)),spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){e.focus(),e.undoManager.transact(function(){e.setContent(t.data.code)}),e.selection.setCursorLocation(),e.nodeChanged()}});t.find("#code").value(e.getContent({source_view:!0}))}e.addCommand("mceCodeEditor",t),e.addButton("code",{icon:"code",tooltip:"Source code",onclick:t}),e.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:t})})}.apply(e,arguments)})}(this),function(e){define("tinymce-colorpicker",["tinymce"],function(){return function(){tinymce.PluginManager.add("colorpicker",function(e){function t(t,n){function r(e){var t=new tinymce.util.Color(e),n=t.toRgb();s.fromJSON({r:n.r,g:n.g,b:n.b,hex:t.toHex().substr(1)}),i(t.toHex())}function i(e){s.find("#preview")[0].getEl().style.background=e}var s=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:n,onchange:function(){var e=this.rgb();s&&(s.find("#r").value(e.r),s.find("#g").value(e.g),s.find("#b").value(e.b),s.find("#hex").value(this.value().substr(1)),i(this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e=s.find("colorpicker")[0],t,n;t=this.name(),n=this.value();if(t=="hex"){n="#"+n,r(n),e.value(n);return}n={r:s.find("#r").value(),g:s.find("#g").value(),b:s.find("#b").value()},e.value(n),r(n)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+this.toJSON().hex)}});r(n)}e.settings.color_picker_callback||(e.settings.color_picker_callback=t)})}.apply(e,arguments)})}(this),function(e){define("tinymce-contextmenu",["tinymce"],function(){return function(){tinymce.PluginManager.add("contextmenu",function(e){var t,n=e.settings.contextmenu_never_use_native;e.on("contextmenu",function(r){var i,s=e.getDoc();if(r.ctrlKey&&!n)return;r.preventDefault(),tinymce.Env.mac&&tinymce.Env.webkit&&r.button==2&&s.caretRangeFromPoint&&e.selection.setRng(s.caretRangeFromPoint(r.x,r.y)),i=e.settings.contextmenu||"link image inserttable | cell row column deletetable";if(!t){var o=[];tinymce.each(i.split(/[ ,]/),function(t){var n=e.menuItems[t];t=="|"&&(n={text:t}),n&&(n.shortcut="",o.push(n))});for(var u=0;u<o.length;u++)o[u].text=="|"&&(u===0||u==o.length-1)&&o.splice(u,1);t=(new tinymce.ui.Menu({items:o,context:"contextmenu"})).addClass("contextmenu").renderTo(),e.on("remove",function(){t.remove(),t=null})}else t.show();var a={x:r.pageX,y:r.pageY};e.inline||(a=tinymce.DOM.getPos(e.getContentAreaContainer()),a.x+=r.clientX,a.y+=r.clientY),t.moveTo(a.x,a.y)})})}.apply(e,arguments)})}(this),function(e){define("tinymce-directionality",["tinymce"],function(){return function(){tinymce.PluginManager.add("directionality",function(e){function t(t){var n=e.dom,r,i=e.selection.getSelectedBlocks();i.length&&(r=n.getAttrib(i[0],"dir"),tinymce.each(i,function(e){n.getParent(e.parentNode,"*[dir='"+t+"']",n.getRoot())||(r!=t?n.setAttrib(e,"dir",t):n.setAttrib(e,"dir",null))}),e.nodeChanged())}function n(e){var t=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(n){t.push(n+"[dir="+e+"]")}),t.join(",")}e.addCommand("mceDirectionLTR",function(){t("ltr")}),e.addCommand("mceDirectionRTL",function(){t("rtl")}),e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:n("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:n("rtl")})})}.apply(e,arguments)})}(this),function(e){define("tinymce-emoticons",["tinymce"],function(){return function(){tinymce.PluginManager.add("emoticons",function(e,t){function r(){var e;return e='<table role="list" class="mce-grid">',tinymce.each(n,function(n){e+="<tr>",tinymce.each(n,function(n){var r=t+"/img/smiley-"+n+".gif";e+='<td><a href="#" data-mce-url="'+r+'" data-mce-alt="'+n+'" tabindex="-1" '+'role="option" aria-label="'+n+'"><img src="'+r+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),e+="</tr>"}),e+="</table>",e}var n=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];e.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:r,onclick:function(t){var n=e.dom.getParent(t.target,"a");n&&(e.insertContent('<img src="'+n.getAttribute("data-mce-url")+'" alt="'+n.getAttribute("data-mce-alt")+'" />'),this.hide())}},tooltip:"Emoticons"})})}.apply(e,arguments)})}(this),function(e){define("tinymce-fullpage",["tinymce"],function(){return function(){tinymce.PluginManager.add("fullpage",function(e){function s(){var t=o();e.windowManager.open({title:"Document properties",data:t,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(e){u(tinymce.extend(t,e.data))}})}function o(){function o(e,t){var n=e.attr(t);return n||""}var n=a(),r={},i,s;return r.fontface=e.getParam("fullpage_default_fontface",""),r.fontsize=e.getParam("fullpage_default_fontsize",""),i=n.firstChild,i.type==7&&(r.xml_pi=!0,s=/encoding="([^"]+)"/.exec(i.value),s&&(r.docencoding=s[1])),i=n.getAll("#doctype")[0],i&&(r.doctype="<!DOCTYPE"+i.value+">"),i=n.getAll("title")[0],i&&i.firstChild&&(r.title=i.firstChild.value),t(n.getAll("meta"),function(e){var t=e.attr("name"),n=e.attr("http-equiv"),i;t?r[t.toLowerCase()]=e.attr("content"):n=="Content-Type"&&(i=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")),i&&(r.docencoding=i[1]))}),i=n.getAll("html")[0],i&&(r.langcode=o(i,"lang")||o(i,"xml:lang")),r.stylesheets=[],tinymce.each(n.getAll("link"),function(e){e.attr("rel")=="stylesheet"&&r.stylesheets.push(e.attr("href"))}),i=n.getAll("body")[0],i&&(r.langdir=o(i,"dir"),r.style=o(i,"style"),r.visited_color=o(i,"vlink"),r.link_color=o(i,"link"),r.active_color=o(i,"alink")),r}function u(i){function h(e,t,n){e.attr(t,n?n:undefined)}function p(e){o.firstChild?o.insert(e,o.firstChild):o.append(e)}var s,o,u,f,l,c=e.dom;s=a(),o=s.getAll("head")[0],o||(f=s.getAll("html")[0],o=new n("head",1),f.firstChild?f.insert(o,f.firstChild,!0):f.append(o)),f=s.firstChild,i.xml_pi?(l='version="1.0"',i.docencoding&&(l+=' encoding="'+i.docencoding+'"'),f.type!=7&&(f=new n("xml",7),s.insert(f,s.firstChild,!0)),f.value=l):f&&f.type==7&&f.remove(),f=s.getAll("#doctype")[0],i.doctype?(f||(f=new n("#doctype",10),i.xml_pi?s.insert(f,s.firstChild):p(f)),f.value=i.doctype.substring(9,i.doctype.length-1)):f&&f.remove(),f=null,t(s.getAll("meta"),function(e){e.attr("http-equiv")=="Content-Type"&&(f=e)}),i.docencoding?(f||(f=new n("meta",1),f.attr("http-equiv","Content-Type"),f.shortEnded=!0,p(f)),f.attr("content","text/html; charset="+i.docencoding)):f&&f.remove(),f=s.getAll("title")[0],i.title?(f?f.empty():(f=new n("title",1),p(f)),f.append(new n("#text",3)).value=i.title):f&&f.remove(),t("keywords,description,author,copyright,robots".split(","),function(e){var t=s.getAll("meta"),r,o,u=i[e];for(r=0;r<t.length;r++){o=t[r];if(o.attr("name")==e){u?o.attr("content",u):o.remove();return}}u&&(f=new n("meta",1),f.attr("name",e),f.attr("content",u),f.shortEnded=!0,p(f))});var d={};tinymce.each(s.getAll("link"),function(e){e.attr("rel")=="stylesheet"&&(d[e.attr("href")]=e)}),tinymce.each(i.stylesheets,function(e){d[e]||(f=new n("link",1),f.attr({rel:"stylesheet",text:"text/css",href:e}),f.shortEnded=!0,p(f)),delete d[e]}),tinymce.each(d,function(e){e.remove()}),f=s.getAll("body")[0],f&&(h(f,"dir",i.langdir),h(f,"style",i.style),h(f,"vlink",i.visited_color),h(f,"link",i.link_color),h(f,"alink",i.active_color),c.setAttribs(e.getBody(),{style:i.style,dir:i.dir,vLink:i.visited_color,link:i.link_color,aLink:i.active_color})),f=s.getAll("html")[0],f&&(h(f,"lang",i.langcode),h(f,"xml:lang",i.langcode)),o.firstChild||o.remove(),u=(new tinymce.html.Serializer({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"})).serialize(s),r=u.substring(0,u.indexOf("</body>"))}function a(){return(new tinymce.html.DomParser({validate:!1,root_name:"#document"})).parse(r)}function f(n){function d(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})}var s,o,u=n.content,f,c="",h=e.dom,p;if(n.selection)return;if(n.format=="raw"&&r)return;if(n.source_view&&e.getParam("fullpage_hide_in_source_view"))return;u.length===0&&!n.source_view&&(u=tinymce.trim(r)+"\n"+tinymce.trim(u)+"\n"+tinymce.trim(i)),u=u.replace(/<(\/?)BODY/gi,"<$1body"),s=u.indexOf("<body"),s!=-1?(s=u.indexOf(">",s),r=d(u.substring(0,s+1)),o=u.indexOf("</body",s),o==-1&&(o=u.length),n.content=u.substring(s+1,o),i=d(u.substring(o))):(r=l(),i="\n</body>\n</html>"),f=a(),t(f.getAll("style"),function(e){e.firstChild&&(c+=e.firstChild.value)}),p=f.getAll("body")[0],p&&h.setAttribs(e.getBody(),{style:p.attr("style")||"",dir:p.attr("dir")||"",vLink:p.attr("vlink")||"",link:p.attr("link")||"",aLink:p.attr("alink")||""}),h.remove("fullpage_styles");var v=e.getDoc().getElementsByTagName("head")[0];c&&(h.add(v,"style",{id:"fullpage_styles"},c),p=h.get("fullpage_styles"),p.styleSheet&&(p.styleSheet.cssText=c));var m={};tinymce.each(v.getElementsByTagName("link"),function(e){e.rel=="stylesheet"&&e.getAttribute("data-mce-fullpage")&&(m[e.href]=e)}),tinymce.each(f.getAll("link"),function(e){var t=e.attr("href");!m[t]&&e.attr("rel")=="stylesheet"&&h.add(v,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),delete m[t]}),tinymce.each(m,function(e){e.parentNode.removeChild(e)})}function l(){var t="",n,r="";e.getParam("fullpage_default_xml_pi")&&(t+='<?xml version="1.0" encoding="'+e.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'),t+=e.getParam("fullpage_default_doctype","<!DOCTYPE html>"),t+="\n<html>\n<head>\n";if(n=e.getParam("fullpage_default_title"))t+="<title>"+n+"</title>\n";if(n=e.getParam("fullpage_default_encoding"))t+='<meta http-equiv="Content-Type" content="text/html; charset='+n+'" />\n';if(n=e.getParam("fullpage_default_font_family"))r+="font-family: "+n+";";if(n=e.getParam("fullpage_default_font_size"))r+="font-size: "+n+";";if(n=e.getParam("fullpage_default_text_color"))r+="color: "+n+";";return t+="</head>\n<body"+(r?' style="'+r+'"':"")+">\n",t}function c(t){!t.selection&&(!t.source_view||!e.getParam("fullpage_hide_in_source_view"))&&(t.content=tinymce.trim(r)+"\n"+tinymce.trim(t.content)+"\n"+tinymce.trim(i))}var t=tinymce.each,n=tinymce.html.Node,r,i;e.addCommand("mceFullPageProperties",s),e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"}),e.on("BeforeSetContent",f),e.on("GetContent",c)})}.apply(e,arguments)})}(this),function(e){define("tinymce-fullscreen",["tinymce"],function(){return function(){tinymce.PluginManager.add("fullscreen",function(e){function a(){var e,t,n=window,r=document,i=r.body;return i.offsetWidth&&(e=i.offsetWidth,t=i.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}}function f(){function v(){n.setStyle(p,"height",a().h-(h.clientHeight-p.clientHeight))}var f=document.body,l=document.documentElement,c,h,p,d;t=!t,h=e.getContainer(),c=h.style,p=e.getContentAreaContainer().firstChild,d=p.style,t?(r=d.width,i=d.height,d.width=d.height="100%",o=c.width,u=c.height,c.width=c.height="",n.addClass(f,"mce-fullscreen"),n.addClass(l,"mce-fullscreen"),n.addClass(h,"mce-fullscreen"),n.bind(window,"resize",v),v(),s=v):(d.width=r,d.height=i,o&&(c.width=o),u&&(c.height=u),n.removeClass(f,"mce-fullscreen"),n.removeClass(l,"mce-fullscreen"),n.removeClass(h,"mce-fullscreen"),n.unbind(window,"resize",s)),e.fire("FullscreenStateChanged",{state:t})}var t=!1,n=tinymce.DOM,r,i,s,o,u;if(e.settings.inline)return;return e.on("init",function(){e.addShortcut("Ctrl+Alt+F","",f)}),e.on("remove",function(){s&&n.unbind(window,"resize",s)}),e.addCommand("mceFullScreen",f),e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Alt+F",selectable:!0,onClick:f,onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})},context:"view"}),e.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Alt+F",onClick:f,onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})}}),{isFullscreen:function(){return t}}})}.apply(e,arguments)})}(this),function(e){define("tinymce-hr",["tinymce"],function(){return function(){tinymce.PluginManager.add("hr",function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")}),e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})})}.apply(e,arguments)})}(this),function(e){define("tinymce-image",["tinymce"],function(){return function(){tinymce.PluginManager.add("image",function(e){function t(e,t){function r(e,r){n.parentNode&&n.parentNode.removeChild(n),t({width:e,height:r})}var n=document.createElement("img");n.onload=function(){r(n.clientWidth,n.clientHeight)},n.onerror=function(){r()};var i=n.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left=0,i.width=i.height="auto",document.body.appendChild(n),n.src=e}function n(e,t,n){function r(e,n){return n=n||[],tinymce.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t(i)),n.push(i)}),n}return r(e,n||[])}function r(t){return function(){var n=e.settings.image_list;typeof n=="string"?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):typeof n=="function"?n(t):t(n)}}function i(r){function p(){var e,t,n,r;e=i.find("#width")[0],t=i.find("#height")[0];if(!e||!t)return;n=e.value(),r=t.value(),i.find("#constrain")[0].checked()&&a&&f&&n&&r&&(a!=n?(r=Math.round(n/a*r),t.value(r)):(n=Math.round(r/f*n),e.value(n))),a=n,f=r}function d(){function t(t){function n(){t.onload=t.onerror=null,e.selection&&(e.selection.select(t),e.nodeChanged())}t.onload=function(){!s.width&&!s.height&&h&&o.setAttribs(t,{width:t.clientWidth,height:t.clientHeight}),n()},t.onerror=n}y(),p(),s=tinymce.extend(s,i.toJSON()),s.alt||(s.alt=""),s.width===""&&(s.width=null),s.height===""&&(s.height=null),s.style||(s.style=null),s={src:s.src,alt:s.alt,width:s.width,height:s.height,style:s.style,"class":s["class"]},e.undoManager.transact(function(){if(!s.src){u&&(o.remove(u),e.focus(),e.nodeChanged());return}u?o.setAttribs(u,s):(s.id="__mcenew",e.focus(),e.selection.setContent(o.createHTML("img",s)),u=o.get("__mcenew"),o.setAttrib(u,"id",null)),t(u)})}function v(e){return e&&(e=e.replace(/px$/,"")),e}function m(n){var r=n.meta||{};l&&l.value(e.convertURL(this.value(),"src")),tinymce.each(r,function(e,t){i.find("#"+t).value(e)}),!r.width&&!r.height&&t(this.value(),function(e){e.width&&e.height&&h&&(a=e.width,f=e.height,i.find("#width").value(a),i.find("#height").value(f))})}function y(){function t(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e}if(!e.settings.image_advtab)return;var n=i.toJSON(),r=o.parseStyle(n.style);delete r.margin,r["margin-top"]=r["margin-bottom"]=t(n.vspace),r["margin-left"]=r["margin-right"]=t(n.hspace),r["border-width"]=t(n.border),i.find("#style").value(o.serializeStyle(o.parseStyle(o.serializeStyle(r))))}var i,s={},o=e.dom,u=e.selection.getNode(),a,f,l,c,h=e.settings.image_dimensions!==!1;a=o.getAttrib(u,"width"),f=o.getAttrib(u,"height"),u.nodeName=="IMG"&&!u.getAttribute("data-mce-object")&&!u.getAttribute("data-mce-placeholder")?s={src:o.getAttrib(u,"src"),alt:o.getAttrib(u,"alt"),"class":o.getAttrib(u,"class"),width:a,height:f}:u=null,r&&(l={type:"listbox",label:"Image list",values:n(r,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:s.src&&e.convertURL(s.src,"src"),onselect:function(e){var t=i.find("#alt");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),i.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){l=this}}),e.settings.image_class_list&&(c={name:"class",type:"listbox",label:"Class",values:n(e.settings.image_class_list,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})})});var g=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:m},l];e.settings.image_description!==!1&&g.push({name:"alt",type:"textbox",label:"Image description"}),h&&g.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:p,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:p,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),g.push(c),e.settings.image_advtab?(u&&(s.hspace=v(u.style.marginLeft||u.style.marginRight),s.vspace=v(u.style.marginTop||u.style.marginBottom),s.border=v(u.style.borderWidth),s.style=e.dom.serializeStyle(e.dom.parseStyle(e.dom.getAttrib(u,"style")))),i=e.windowManager.open({title:"Insert/edit image",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",items:g},{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox"},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:y},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}],onSubmit:d})):i=e.windowManager.open({title:"Insert/edit image",data:s,body:g,onSubmit:d})}e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:r(i),stateSelector:"img:not([data-mce-object],[data-mce-placeholder])"}),e.addMenuItem("image",{icon:"image",text:"Insert image",onclick:r(i),context:"insert",prependToContext:!0}),e.addCommand("mceImage",r(i))})}.apply(e,arguments)})}(this),function(e){define("tinymce-importcss",["tinymce"],function(){return function(){tinymce.PluginManager.add("importcss",function(e){function r(e){return typeof e=="string"?function(t){return t.indexOf(e)!==-1}:e instanceof RegExp?function(t){return e.test(t)}:e}function i(t,r){function o(e,t){var s=e.href,u;if(!s||!r(s,t))return;n(e.imports,function(e){o(e,!0)});try{u=e.cssRules||e.rules}catch(a){}n(u,function(e){e.styleSheet?o(e.styleSheet,!0):e.selectorText&&n(e.selectorText.split(","),function(e){i.push(tinymce.trim(e))})})}var i=[],s={};n(e.contentCSS,function(e){s[e]=!0}),r||(r=function(e,t){return t||s[e]});try{n(t.styleSheets,function(e){o(e)})}catch(u){}return i}function s(t){var n,r=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(!r)return;var i=r[1],s=r[2].substr(1).split(".").join(" "),o=tinymce.makeMap("a,img");return r[1]?(n={title:t},e.schema.getTextBlockElements()[i]?n.block=i:e.schema.getBlockElements()[i]||o[i.toLowerCase()]?n.selector=i:n.inline=i):r[2]&&(n={inline:"span",title:t.substr(1),classes:s}),e.settings.importcss_merge_classes!==!1?n.classes=s:n.attributes={"class":s},n}var t=this,n=tinymce.each;e.on("renderFormatsMenu",function(o){var u=e.settings,a={},f=u.importcss_selector_converter||s,l=r(u.importcss_selector_filter),c=o.control;e.settings.importcss_append||c.items().remove();var h=[];tinymce.each(u.importcss_groups,function(e){e=tinymce.extend({},e),e.filter=r(e.filter),h.push(e)}),n(i(o.doc||e.getDoc(),r(u.importcss_file_filter)),function(n){if(n.indexOf(".mce-")===-1&&!a[n]&&(!l||l(n))){var r=f.call(t,n),i;if(r){var s=r.name||tinymce.DOM.uniqueId();if(h)for(var o=0;o<h.length;o++)if(!h[o].filter||h[o].filter(n)){h[o].item||(h[o].item={text:h[o].title,menu:[]}),i=h[o].item.menu;break}e.formatter.register(s,r);var u=tinymce.extend({},c.settings.itemDefaults,{text:r.title,format:s});i?i.push(u):c.add(u)}a[n]=!0}}),n(h,function(e){c.add(e.item)}),o.control.renderNew()}),t.convertSelectorToFormat=s})}.apply(e,arguments)})}(this),function(e){define("tinymce-insertdatetime",["tinymce"],function(){return function(){tinymce.PluginManager.add("insertdatetime",function(e){function a(s,o){function u(e,t){e=""+e;if(e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}return o=o||new Date,s=s.replace("%D","%m/%d/%Y"),s=s.replace("%r","%I:%M:%S %p"),s=s.replace("%Y",""+o.getFullYear()),s=s.replace("%y",""+o.getYear()),s=s.replace("%m",u(o.getMonth()+1,2)),s=s.replace("%d",u(o.getDate(),2)),s=s.replace("%H",""+u(o.getHours(),2)),s=s.replace("%M",""+u(o.getMinutes(),2)),s=s.replace("%S",""+u(o.getSeconds(),2)),s=s.replace("%I",""+((o.getHours()+11)%12+1)),s=s.replace("%p",""+(o.getHours()<12?"AM":"PM")),s=s.replace("%B",""+e.translate(i[o.getMonth()])),s=s.replace("%b",""+e.translate(r[o.getMonth()])),s=s.replace("%A",""+e.translate(n[o.getDay()])),s=s.replace("%a",""+e.translate(t[o.getDay()])),s=s.replace("%%","%"),s}function f(t){var n=a(t);if(e.settings.insertdatetime_element){var r;/%[HMSIp]/.test(t)?r=a("%Y-%m-%dT%H:%M"):r=a("%Y-%m-%d"),n='<time datetime="'+r+'">'+n+"</time>";var i=e.dom.getParent(e.selection.getStart(),"time");if(i){e.dom.setOuterHTML(i,n);return}}e.insertContent(n)}var t="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),n="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),r="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),i="January February March April May June July August September October November December".split(" "),s=[],o,u;e.addCommand("mceInsertDate",function(){f(e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d")))}),e.addCommand("mceInsertTime",function(){f(e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S")))}),e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",onclick:function(){f(o||u)},menu:s}),tinymce.each(e.settings.insertdatetime_formats||["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"],function(e){u||(u=e),s.push({text:a(e),onclick:function(){o=e,f(e)}})}),e.addMenuItem("insertdatetime",{icon:"date",text:"Insert date/time",menu:s,context:"insert"})})}.apply(e,arguments)})}(this),function(e){define("tinymce-layer",["tinymce"],function(){return function(){tinymce.PluginManager.add("layer",function(e){function t(e){do if(e.className&&e.className.indexOf("mceItemLayer")!=-1)return e;while(e=e.parentNode)}function n(t){var n=e.dom;tinymce.each(n.select("div,p",t),function(e){/^(absolute|relative|fixed)$/i.test(e.style.position)&&(e.hasVisual?n.addClass(e,"mceItemVisualAid"):n.removeClass(e,"mceItemVisualAid"),n.addClass(e,"mceItemLayer"))})}function r(n){var r,i=[],s=t(e.selection.getNode()),o=-1,u=-1,a;a=[],tinymce.walk(e.getBody(),function(e){e.nodeType==1&&/^(absolute|relative|static)$/i.test(e.style.position)&&a.push(e)},"childNodes");for(r=0;r<a.length;r++)i[r]=a[r].style.zIndex?parseInt(a[r].style.zIndex,10):0,o<0&&a[r]==s&&(o=r);if(n<0){for(r=0;r<i.length;r++)if(i[r]<i[o]){u=r;break}u>-1?(a[o].style.zIndex=i[u],a[u].style.zIndex=i[o]):i[o]>0&&(a[o].style.zIndex=i[o]-1)}else{for(r=0;r<i.length;r++)if(i[r]>i[o]){u=r;break}u>-1?(a[o].style.zIndex=i[u],a[u].style.zIndex=i[o]):a[o].style.zIndex=i[o]+1}e.execCommand("mceRepaint")}function i(){var t=e.dom,n=t.getPos(t.getParent(e.selection.getNode(),"*")),r=e.getBody();e.dom.add(r,"div",{style:{position:"absolute",left:n.x,top:n.y>20?n.y:20,width:100,height:100},"class":"mceItemVisualAid mceItemLayer"},e.selection.getContent()||e.getLang("layer.content")),tinymce.Env.ie&&t.setHTML(r,r.innerHTML)}function s(){var n=t(e.selection.getNode());n||(n=e.dom.getParent(e.selection.getNode(),"DIV,P,IMG")),n&&(n.style.position.toLowerCase()=="absolute"?(e.dom.setStyles(n,{position:"",left:"",top:"",width:"",height:""}),e.dom.removeClass(n,"mceItemVisualAid"),e.dom.removeClass(n,"mceItemLayer")):(n.style.left||(n.style.left="20px"),n.style.top||(n.style.top="20px"),n.style.width||(n.style.width=n.width?n.width+"px":"100px"),n.style.height||(n.style.height=n.height?n.height+"px":"100px"),n.style.position="absolute",e.dom.setAttrib(n,"data-mce-style",""),e.addVisual(e.getBody())),e.execCommand("mceRepaint"),e.nodeChanged())}e.addCommand("mceInsertLayer",i),e.addCommand("mceMoveForward",function(){r(1)}),e.addCommand("mceMoveBackward",function(){r(-1)}),e.addCommand("mceMakeAbsolute",function(){s()}),e.addButton("moveforward",{title:"layer.forward_desc",cmd:"mceMoveForward"}),e.addButton("movebackward",{title:"layer.backward_desc",cmd:"mceMoveBackward"}),e.addButton("absolute",{title:"layer.absolute_desc",cmd:"mceMakeAbsolute"}),e.addButton("insertlayer",{title:"layer.insertlayer_desc",cmd:"mceInsertLayer"}),e.on("init",function(){tinymce.Env.ie&&e.getDoc().execCommand("2D-Position",!1,!0)}),e.on("mouseup",function(n){var r=t(n.target);r&&e.dom.setAttrib(r,"data-mce-style","")}),e.on("mousedown",function(n){var r=n.target,i=e.getDoc(),s;tinymce.Env.gecko&&(t(r)?i.designMode!=="on"&&(i.designMode="on",r=i.body,s=r.parentNode,s.removeChild(r),s.appendChild(r)):i.designMode=="on"&&(i.designMode="off"))}),e.on("NodeChange",n)})}.apply(e,arguments)})}(this),function(e){define("tinymce-legacyoutput",["tinymce"],function(){return function(){(function(e){e.on("AddEditor",function(e){e.editor.settings.inline_styles=!1}),e.PluginManager.add("legacyoutput",function(t,n,r){t.on("init",function(){var n="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",r=e.explode(t.settings.font_size_style_values),i=t.schema;t.formatter.register({alignleft:{selector:n,attributes:{align:"left"}},aligncenter:{selector:n,attributes:{align:"center"}},alignright:{selector:n,attributes:{align:"right"}},alignjustify:{selector:n,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return e.inArray(r,t.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),e.each("b,i,u,strike".split(","),function(e){i.addValidElements(e+"[*]")}),i.getElementRule("font")||i.addValidElements("font[face|size|color|style]"),e.each(n.split(","),function(e){var t=i.getElementRule(e);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})}),t.addButton("fontsizeselect",function(){var e=[],n="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7",r=t.settings.fontsize_formats||n;return t.$.each(r.split(" "),function(t,n){var r=n,i=n,s=n.split("=");s.length>1&&(r=s[0],i=s[1]),e.push({text:r,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:function(){var e=this;t.on("NodeChange",function(){var n;n=t.dom.getParent(t.selection.getNode(),"font"),n?e.value(n.size):e.value("")})},onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}}),t.addButton("fontselect",function(){function e(e){e=e.replace(/;$/,"").split(";");var t=e.length;while(t--)e[t]=e[t].split("=");return e}var n="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",i=[],s=e(t.settings.font_formats||n);return r.each(s,function(e,t){i.push({text:{raw:t[0]},value:t[1],textStyle:t[1].indexOf("dings")==-1?"font-family:"+t[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:i,fixedWidth:!0,onPostRender:function(){var e=this;t.on("NodeChange",function(){var n;n=t.dom.getParent(t.selection.getNode(),"font"),n?e.value(n.face):e.value("")})},onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})})})(tinymce)}.apply(e,arguments)})}(this),function(e){define("tinymce-link",["tinymce"],function(){return function(){tinymce.PluginManager.add("link",function(e){function t(t){return function(){var n=e.settings.link_list;typeof n=="string"?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):typeof n=="function"?n(t):t(n)}}function n(e,t,n){function r(e,n){return n=n||[],tinymce.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t&&t(i)),n.push(i)}),n}return r(e,n||[])}function r(t){function y(e){var t=f.find("#text");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),f.find("#href").value(e.control.value())}function b(t){var n=[];tinymce.each(e.dom.select("a:not([href])"),function(e){var r=e.name||e.id;r&&n.push({text:r,value:"#"+r,selected:t.indexOf("#"+r)!=-1})});if(n.length)return n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:y}}function w(){!a&&r.text.length===0&&l&&this.parent().parent().find("#text")[0].value(this.value())}function E(t){var n=t.meta||{};h&&h.value(e.convertURL(this.value(),"href")),tinymce.each(t.meta,function(e,t){f.find("#"+t).value(e)}),n.text||w.call(this)}function S(e){var t=i.getContent();if(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||t.indexOf("href=")==-1))return!1;if(e){var n=e.childNodes,r;if(n.length===0)return!1;for(r=n.length-1;r>=0;r--)if(n[r].nodeType!=3)return!1}return!0}var r={},i=e.selection,s=e.dom,o,u,a,f,l,c,h,p,d,v,m,g;o=i.getNode(),u=s.getParent(o,"a[href]"),l=S(),r.text=a=u?u.innerText||u.textContent:i.getContent({format:"text"}),r.href=u?s.getAttrib(u,"href"):"",(g=s.getAttrib(u,"target"))?r.target=g:e.settings.default_link_target&&(r.target=e.settings.default_link_target);if(g=s.getAttrib(u,"rel"))r.rel=g;if(g=s.getAttrib(u,"class"))r["class"]=g;if(g=s.getAttrib(u,"title"))r.title=g;l&&(c={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){r.text=this.value()}}),t&&(h={type:"listbox",label:"Link list",values:n(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:y,value:e.convertURL(r.href,"href"),onPostRender:function(){h=this}}),e.settings.target_list!==!1&&(e.settings.target_list||(e.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),d={name:"target",type:"listbox",label:"Target",values:n(e.settings.target_list)}),e.settings.rel_list&&(p={name:"rel",type:"listbox",label:"Rel",values:n(e.settings.rel_list)}),e.settings.link_class_list&&(v={name:"class",type:"listbox",label:"Class",values:n(e.settings.link_class_list,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),e.settings.link_title!==!1&&(m={name:"title",type:"textbox",label:"Title",value:r.title}),f=e.windowManager.open({title:"Insert link",data:r,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:E,onkeyup:w},c,m,b(r.href),h,p,d,v],onSubmit:function(t){function o(t,n){var r=e.selection.getRng();window.setTimeout(function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r),n(t)})},0)}function f(){var t={href:n,target:r.target?r.target:null,rel:r.rel?r.rel:null,"class":r["class"]?r["class"]:null,title:r.title?r.title:null};u?(e.focus(),l&&r.text!=a&&("innerText"in u?u.innerText=r.text:u.textContent=r.text),s.setAttribs(u,t),i.select(u),e.undoManager.add()):l?e.insertContent(s.createHTML("a",t,s.encode(r.text))):e.execCommand("mceInsertLink",!1,t)}var n;r=tinymce.extend(r,t.data),n=r.href;if(!n){e.execCommand("unlink");return}if(n.indexOf("@")>0&&n.indexOf("//")==-1&&n.indexOf("mailto:")==-1){o("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(n="mailto:"+n),f()});return}if(/^\s*www\./i.test(n)){o("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(n="http://"+n),f()});return}f()}})}e.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:t(r),stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),e.addShortcut("Ctrl+K","",t(r)),e.addCommand("mceLink",t(r)),this.showDialog=r,e.addMenuItem("link",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:t(r),stateSelector:"a[href]",context:"insert",prependToContext:!0})})}.apply(e,arguments)})}(this),function(e){define("tinymce-lists",["tinymce"],function(){return function(){tinymce.PluginManager.add("lists",function(e){function n(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)}function r(e){return e.parentNode.firstChild==e}function i(e){return e.parentNode.lastChild==e}function s(t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]}var t=this;e.on("init",function(){function a(e){function n(n){var r,i,s;i=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"],i.nodeType==1&&(r=o.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(s=Math.min(s,i.childNodes.length-1),n?i.insertBefore(r,i.childNodes[s]):o.insertAfter(r,i.childNodes[s])):i.appendChild(r),i=r,s=0),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=s}var t={};return n(!0),e.collapsed||n(),t}function f(e){function t(t){function s(e){var t=e.parentNode.firstChild,n=0;while(t){if(t==e)return n;(t.nodeType!=1||t.getAttribute("data-mce-type")!="bookmark")&&n++,t=t.nextSibling}return-1}var n,r,i;n=i=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"];if(!n)return;n.nodeType==1&&(r=s(n),n=n.parentNode,o.remove(i)),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r}t(!0),t();var n=o.createRng();n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),u.setRng(n)}function l(t,n){var r,i,s=o.createFragment(),u,a=e.schema.getBlockElements();e.settings.forced_root_block&&(n=n||e.settings.forced_root_block),n&&(i=o.create(n),i.tagName===e.settings.forced_root_block&&o.setAttribs(i,e.settings.forced_root_block_attrs),s.appendChild(i));if(t)while(r=t.firstChild){var f=r.nodeName;!u&&(f!="SPAN"||r.getAttribute("data-mce-type")!="bookmark")&&(u=!0),a[f]?(s.appendChild(r),i=null):n?(i||(i=o.create(n),s.appendChild(i)),i.appendChild(r)):s.appendChild(r)}return e.settings.forced_root_block?!u&&(!tinymce.Env.ie||tinymce.Env.ie>10)&&i.appendChild(o.create("br",{"data-mce-bogus":"1"})):s.appendChild(o.create("br")),s}function c(){return tinymce.grep(u.getSelectedBlocks(),function(e){return/^(LI|DT|DD)$/.test(e.nodeName)})}function h(e,t,n){var r,i,s=o.select('span[data-mce-type="bookmark"]',e);n=n||l(t),r=o.createRng(),r.setStartAfter(t),r.setEndAfter(e),i=r.extractContents(),o.isEmpty(i)||o.insertAfter(i,e),o.insertAfter(n,e),o.isEmpty(t.parentNode)&&(tinymce.each(s,function(e){t.parentNode.parentNode.insertBefore(e,t.parentNode)}),o.remove(t.parentNode)),o.remove(t)}function p(e){var t,r;t=e.nextSibling;if(t&&n(t)&&t.nodeName==e.nodeName){while(r=t.firstChild)e.appendChild(r);o.remove(t)}t=e.previousSibling;if(t&&n(t)&&t.nodeName==e.nodeName){while(r=t.firstChild)e.insertBefore(r,e.firstChild);o.remove(t)}}function d(e){tinymce.each(tinymce.grep(o.select("ol,ul",e)),function(e){var t,r=e.parentNode;r.nodeName=="LI"&&r.firstChild==e&&(t=r.previousSibling,t&&t.nodeName=="LI"&&(t.appendChild(e),o.isEmpty(r)&&o.remove(r))),n(r)&&(t=r.previousSibling,t&&t.nodeName=="LI"&&t.appendChild(e))})}function v(e){function a(e){o.isEmpty(e)&&o.remove(e)}var t=e.parentNode,s=t.parentNode,u;return e.nodeName=="DD"?(o.rename(e,"DT"),!0):r(e)&&i(e)?(s.nodeName=="LI"?(o.insertAfter(e,s),a(s),o.remove(t)):n(s)?o.remove(t,!0):(s.insertBefore(l(e),t),o.remove(t)),!0):r(e)?(s.nodeName=="LI"?(o.insertAfter(e,s),e.appendChild(t),a(s)):n(s)?s.insertBefore(e,t):(s.insertBefore(l(e),t),o.remove(e)),!0):i(e)?(s.nodeName=="LI"?o.insertAfter(e,s):n(s)?o.insertAfter(e,t):(o.insertAfter(l(e),t),o.remove(e)),!0):(s.nodeName=="LI"?(t=s,u=l(e,"LI")):n(s)?u=l(e,"LI"):u=l(e),h(t,e,u),d(t.parentNode),!0)}function m(e){function i(t,r){var i;if(n(t)){while(i=e.lastChild.firstChild)r.appendChild(i);o.remove(t)}}var t,r;return e.nodeName=="DT"?(o.rename(e,"DD"),!0):(t=e.previousSibling,t&&n(t)?(t.appendChild(e),!0):t&&t.nodeName=="LI"&&n(t.lastChild)?(t.lastChild.appendChild(e),i(e.lastChild,t.lastChild),!0):(t=e.nextSibling,t&&n(t)?(t.insertBefore(e,t.firstChild),!0):t&&t.nodeName=="LI"&&n(e.lastChild)?!1:(t=e.previousSibling,t&&t.nodeName=="LI"?(r=o.create(e.parentNode.nodeName),t.appendChild(r),r.appendChild(e),i(e.lastChild,r),!0):!1)))}function g(){var t=c();if(t.length){var n=a(u.getRng(!0));for(var r=0;r<t.length;r++)if(!m(t[r])&&r===0)break;return f(n),e.nodeChanged(),!0}}function y(){var t=c();if(t.length){var n=a(u.getRng(!0)),r,i,s=e.getBody();r=t.length;while(r--){var o=t[r].parentNode;while(o&&o!=s){i=t.length;while(i--)if(t[i]===o){t.splice(r,1);break}o=o.parentNode}}for(r=0;r<t.length;r++)if(!v(t[r])&&r===0)break;return f(n),e.nodeChanged(),!0}}function b(t){function c(){function i(e){var t,i;t=r[e?"startContainer":"endContainer"],i=r[e?"startOffset":"endOffset"],t.nodeType==1&&(t=t.childNodes[Math.min(i,t.childNodes.length-1)]||t);while(t.parentNode!=n){if(s(t))return t;if(/^(TD|TH)$/.test(t.parentNode.nodeName))return t;t=t.parentNode}return t}var t=[],n=e.getBody(),u=i(!0),a=i(),f,l=[];for(var c=u;c;c=c.nextSibling){l.push(c);if(c==a)break}return tinymce.each(l,function(e){if(s(e)){t.push(e),f=null;return}if(o.isBlock(e)||e.nodeName=="BR"){e.nodeName=="BR"&&o.remove(e),f=null;return}var r=e.nextSibling;if(tinymce.dom.BookmarkManager.isBookmarkNode(e))if(s(r)||!r&&e.parentNode==n){f=null;return}f||(f=o.create("p"),e.parentNode.insertBefore(f,e),t.push(f)),f.appendChild(e)}),t}var r=u.getRng(!0),i=a(r),l="LI";t=t.toUpperCase(),t=="DL"&&(l="DT"),tinymce.each(c(),function(e){var r,i;i=e.previousSibling,i&&n(i)&&i.nodeName==t?(r=i,e=o.rename(e,l),i.appendChild(e)):(r=o.create(t),e.parentNode.insertBefore(r,e),r.appendChild(e),e=o.rename(e,l)),p(r)}),f(i)}function w(){var t=a(u.getRng(!0)),r=e.getBody();tinymce.each(c(),function(e){var t,i;if(o.isEmpty(e)){v(e);return}for(t=e;t&&t!=r;t=t.parentNode)n(t)&&(i=t);h(i,e)}),f(t)}function E(e){var t=o.getParent(u.getStart(),"OL,UL,DL");if(t)if(t.nodeName==e)w(e);else{var n=a(u.getRng(!0));p(o.rename(t,e)),f(n)}else b(e)}function S(t){return function(){var n=o.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName==t}}var o=e.dom,u=e.selection;t.backspaceDelete=function(t){function r(t,n){var r=t.startContainer,i=t.startOffset,s,o;if(r.nodeType==3&&(n?i<r.data.length:i>0))return r;s=e.schema.getNonEmptyElements(),o=new tinymce.dom.TreeWalker(t.startContainer);while(r=o[n?"next":"prev"]()){if(r.nodeName=="LI"&&!r.hasChildNodes())return r;if(s[r.nodeName])return r;if(r.nodeType==3&&r.data.length>0)return r}}function i(e,t){var r,i,s=e.parentNode;n(t.lastChild)&&(i=t.lastChild),r=t.lastChild,r&&r.nodeName=="BR"&&e.hasChildNodes()&&o.remove(r),o.isEmpty(t)&&o.$(t).empty();if(!o.isEmpty(e))while(r=e.firstChild)t.appendChild(r);i&&t.appendChild(i),o.remove(e),o.isEmpty(s)&&o.remove(s)}if(u.isCollapsed()){var s=o.getParent(u.getStart(),"LI");if(s){var l=u.getRng(!0),c=o.getParent(r(l,t),"LI");if(c&&c!=s){var h=a(l);return t?i(c,s):i(s,c),f(h),!0}if(!c&&!t&&w(s.parentNode.nodeName))return!0}}},e.addCommand("Indent",function(){if(!g())return!0}),e.addCommand("Outdent",function(){if(!y())return!0}),e.addCommand("InsertUnorderedList",function(){E("UL")}),e.addCommand("InsertOrderedList",function(){E("OL")}),e.addCommand("InsertDefinitionList",function(){E("DL")}),e.addQueryStateHandler("InsertUnorderedList",S("UL")),e.addQueryStateHandler("InsertOrderedList",S("OL")),e.addQueryStateHandler("InsertDefinitionList",S("DL")),e.on("keydown",function(t){if(t.keyCode!=9||tinymce.util.VK.metaKeyPressed(t))return;e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?y():g())})}),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(){var t=this;e.on("nodechange",function(){var n=e.selection.getSelectedBlocks(),i=!1;for(var s=0,o=n.length;!i&&s<o;s++){var u=n[s].nodeName;i=u=="LI"&&r(n[s])||u=="UL"||u=="OL"||u=="DD"}t.disabled(i)})}}),e.on("keydown",function(e){e.keyCode==tinymce.util.VK.BACKSPACE?t.backspaceDelete()&&e.preventDefault():e.keyCode==tinymce.util.VK.DELETE&&t.backspaceDelete(!0)&&e.preventDefault()})})}.apply(e,arguments)})}(this),function(e){define("tinymce-media",["tinymce"],function(){return function(){tinymce.PluginManager.add("media",function(e,t){function i(e){return e.indexOf(".mp3")!=-1?"audio/mpeg":e.indexOf(".wav")!=-1?"audio/wav":e.indexOf(".mp4")!=-1?"video/mp4":e.indexOf(".webm")!=-1?"video/webm":e.indexOf(".ogg")!=-1?"video/ogg":e.indexOf(".swf")!=-1?"application/x-shockwave-flash":""}function s(t){var n=e.settings.media_scripts;if(n)for(var r=0;r<n.length;r++)if(t.indexOf(n[r].filter)!==-1)return n[r]}function o(){function c(e){var r,s,o,u;r=t.find("#width")[0],s=t.find("#height")[0],o=r.value(),u=s.value(),t.find("#constrain")[0].checked()&&n&&i&&o&&u&&(e.control==r?(u=Math.round(o/n*u),s.value(u)):(o=Math.round(u/i*o),r.value(o))),n=o,i=u}function p(){s=f(this.value()),this.parent().parent().fromJSON(s)}var t,n,i,s,o=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onchange:function(e){tinymce.each(e.meta,function(e,n){t.find("#"+n).value(e)})}}];e.settings.media_alt_source!==!1&&o.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),e.settings.media_poster!==!1&&o.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),e.settings.media_dimensions!==!1&&o.push({type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:3,size:3,onchange:c},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:3,size:3,onchange:c},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),s=l(e.selection.getNode()),n=s.width,i=s.height;var h={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:u(),multiline:!0,label:"Source"};h[r]=p,t=e.windowManager.open({title:"Insert/edit video",data:s,bodyType:"tabpanel",body:[{title:"General",type:"form",onShowTab:function(){s=f(this.next().find("#embed").value()),this.fromJSON(s)},items:o},{title:"Embed",type:"panel",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,onShowTab:function(){this.find("#embed").value(a(this.parent().toJSON()))},items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},h]}],onSubmit:function(){var t,n,r,i;t=e.dom.select("img[data-mce-object]"),e.insertContent(a(this.toJSON())),n=e.dom.select("img[data-mce-object]");for(r=0;r<t.length;r++)for(i=n.length-1;i>=0;i--)t[r]==n[i]&&n.splice(i,1);e.selection.select(n[0]),e.nodeChanged()}})}function u(){var t=e.selection.getNode();if(t.getAttribute("data-mce-object"))return e.selection.getContent()}function a(r){var o="";if(!r.source1){tinymce.extend(r,f(r.embed));if(!r.source1)return""}r.source2||(r.source2=""),r.poster||(r.poster=""),r.source1=e.convertURL(r.source1,"source"),r.source2=e.convertURL(r.source2,"source"),r.source1mime=i(r.source1),r.source2mime=i(r.source2),r.poster=e.convertURL(r.poster,"poster"),r.flashPlayerUrl=e.convertURL(t+"/moxieplayer.swf","movie"),tinymce.each(n,function(e){var t,n,i;if(t=e.regex.exec(r.source1)){i=e.url;for(n=0;t[n];n++)i=i.replace("$"+n,function(){return t[n]});r.source1=i,r.type=e.type,r.width=r.width||e.w,r.height=r.height||e.h}});if(r.embed)o=h(r.embed,r,!0);else{var u=s(r.source1);u&&(r.type="script",r.width=u.width,r.height=u.height),r.width=r.width||300,r.height=r.height||150,tinymce.each(r,function(t,n){r[n]=e.dom.encode(t)}),r.type=="iframe"?o+='<iframe src="'+r.source1+'" width="'+r.width+'" height="'+r.height+'"></iframe>':r.source1mime=="application/x-shockwave-flash"?(o+='<object data="'+r.source1+'" width="'+r.width+'" height="'+r.height+'" type="application/x-shockwave-flash">',r.poster&&(o+='<img src="'+r.poster+'" width="'+r.width+'" height="'+r.height+'" />'),o+="</object>"):r.source1mime.indexOf("audio")!=-1?e.settings.audio_template_callback?o=e.settings.audio_template_callback(r):o+='<audio controls="controls" src="'+r.source1+'">'+(r.source2?'\n<source src="'+r.source2+'"'+(r.source2mime?' type="'+r.source2mime+'"':"")+" />\n":"")+"</audio>":r.type=="script"?o+='<script src="'+r.source1+'"></script>':e.settings.video_template_callback?o=e.settings.video_template_callback(r):o='<video width="'+r.width+'" height="'+r.height+'"'+(r.poster?' poster="'+r.poster+'"':"")+' controls="controls">\n'+'<source src="'+r.source1+'"'+(r.source1mime?' type="'+r.source1mime+'"':"")+" />\n"+(r.source2?'<source src="'+r.source2+'"'+(r.source2mime?' type="'+r.source2mime+'"':"")+" />\n":"")+"</video>"}return o}function f(e){var t={};return(new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(e,n){!t.source1&&e=="param"&&(t.source1=n.map.movie);if(e=="iframe"||e=="object"||e=="embed"||e=="video"||e=="audio")t.type||(t.type=e),t=tinymce.extend(n.map,t);if(e=="script"){var r=s(n.map.src);if(!r)return;t={type:"script",source1:n.map.src,width:r.width,height:r.height}}e=="source"&&(t.source1?t.source2||(t.source2=n.map.src):t.source1=n.map.src),e=="img"&&!t.poster&&(t.poster=n.map.src)}})).parse(e),t.source1=t.source1||t.src||t.data,t.source2=t.source2||"",t.poster=t.poster||"",t}function l(t){return t.getAttribute("data-mce-object")?f(e.serializer.serialize(t,{selection:!0})):{}}function c(t){if(e.settings.media_filter_html===!1)return t;var n=new tinymce.html.Writer;return(new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){n.comment(e)},cdata:function(e){n.cdata(e)},text:function(e,t){n.text(e,t)},start:function(e,t,r){if(e=="script"||e=="noscript")return;for(var i=0;i<t.length;i++)if(t[i].name.indexOf("on")===0)return;n.start(e,t,r)},end:function(e){if(e=="script"||e=="noscript")return;n.end(e)}},new tinymce.html.Schema({}))).parse(t),n.getContent()}function h(e,t,n){function o(e,t){var n,r,i,s;for(n in t){i=""+t[n];if(e.map[n]){r=e.length;while(r--)s=e[r],s.name==n&&(i?(e.map[n]=i,s.value=i):(delete e.map[n],e.splice(r,1)))}else i&&(e.push({name:n,value:i}),e.map[n]=i)}}var r=new tinymce.html.Writer,i=0,s;return(new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){r.comment(e)},cdata:function(e){r.cdata(e)},text:function(e,t){r.text(e,t)},start:function(e,u,a){switch(e){case"video":case"object":case"embed":case"img":case"iframe":o(u,{width:t.width,height:t.height})}if(n)switch(e){case"video":o(u,{poster:t.poster,src:""}),t.source2&&o(u,{src:""});break;case"iframe":o(u,{src:t.source1});break;case"source":i++;if(i<=2){o(u,{src:t["source"+i],type:t["source"+i+"mime"]});if(!t["source"+i])return}break;case"img":if(!t.poster)return;s=!0}r.start(e,u,a)},end:function(e){if(e=="video"&&n)for(var u=1;u<=2;u++)if(t["source"+u]){var a=[];a.map={},i<u&&(o(a,{src:t["source"+u],type:t["source"+u+"mime"]}),r.start("source",a,!0))}if(t.poster&&e=="object"&&n&&!s){var f=[];f.map={},o(f,{src:t.poster,width:t.width,height:t.height}),r.start("img",f,!0)}r.end(e)}},new tinymce.html.Schema({}))).parse(e),r.getContent()}var n=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$1"},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$2"},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc"},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0"},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"'}],r=tinymce.Env.ie&&tinymce.Env.ie<=8?"onChange":"onInput";e.on("ResolveName",function(e){var t;e.target.nodeType==1&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),e.on("preInit",function(){var t=e.schema.getSpecialElements();tinymce.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var n=e.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(t,n){var r=t.length,i,o,u,a,f,l,c,h;while(r--){o=t[r];if(!o.parent)continue;if(o.name=="script"){h=s(o.attr("src"));if(!h)continue}u=new tinymce.html.Node("img",1),u.shortEnded=!0,h&&(h.width&&o.attr("width",h.width.toString()),h.height&&o.attr("height",h.height.toString())),l=o.attributes,i=l.length;while(i--){a=l[i].name,f=l[i].value;if(a!=="width"&&a!=="height"&&a!=="style"){if(a=="data"||a=="src")f=e.convertURL(f,a);u.attr("data-mce-p-"+a,f)}}c=o.firstChild&&o.firstChild.value,c&&(u.attr("data-mce-html",escape(c)),u.firstChild=null),u.attr({width:o.attr("width")||"300",height:o.attr("height")||(n=="audio"?"30":"150"),style:o.attr("style"),src:tinymce.Env.transparentSrc,"data-mce-object":n,"class":"mce-object mce-object-"+n}),o.replace(u)}}),e.serializer.addAttributeFilter("data-mce-object",function(e,t){var n=e.length,r,i,s,o,u,a,f;while(n--){r=e[n];if(!r.parent)continue;f=r.attr(t),i=new tinymce.html.Node(f,1),f!="audio"&&f!="script"&&i.attr({width:r.attr("width"),height:r.attr("height")}),i.attr({style:r.attr("style")}),o=r.attributes,s=o.length;while(s--){var l=o[s].name;l.indexOf("data-mce-p-")===0&&i.attr(l.substr(11),o[s].value)}f=="script"&&i.attr("type","text/javascript"),u=r.attr("data-mce-html"),u&&(a=new tinymce.html.Node("#text",3),a.raw=!0,a.value=c(unescape(u)),i.append(a)),r.replace(i)}})}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");(t=="audio"||t=="script")&&e.preventDefault()}),e.on("objectResized",function(e){var t=e.target,n;t.getAttribute("data-mce-object")&&(n=t.getAttribute("data-mce-html"),n&&(n=unescape(n),t.setAttribute("data-mce-html",escape(h(n,{width:e.width,height:e.height})))))}),e.addButton("media",{tooltip:"Insert/edit video",onclick:o,stateSelector:["img[data-mce-object=video]","img[data-mce-object=iframe]"]}),e.addMenuItem("media",{icon:"media",text:"Insert video",onclick:o,context:"insert",prependToContext:!0})})}.apply(e,arguments)})}(this),function(e){define("tinymce-nonbreaking",["tinymce"],function(){return function(){tinymce.PluginManager.add("nonbreaking",function(e){var t=e.getParam("nonbreaking_force_tab");e.addCommand("mceNonBreaking",function(){e.insertContent(e.plugins.visualchars&&e.plugins.visualchars.state?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;"),e.dom.setAttrib(e.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}),e.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"});if(t){var n=+t>1?+t:3;e.on("keydown",function(t){if(t.keyCode==9){if(t.shiftKey)return;t.preventDefault();for(var r=0;r<n;r++)e.execCommand("mceNonBreaking")}})}})}.apply(e,arguments)})}(this),function(e){define("tinymce-noneditable",["tinymce"],function(){return function(){tinymce.PluginManager.add("noneditable",function(e){function s(e){var t;if(e.nodeType===1){t=e.getAttribute(r);if(t&&t!=="inherit")return t;t=e.contentEditable;if(t!=="inherit")return t}return null}function o(e){var t;while(e){t=s(e);if(t)return t==="false"?e:null;e=e.parentNode}}function u(){function f(e){while(e){if(e.id===u)return e;e=e.parentNode}}function l(e){var n;if(e){n=new t(e,e);for(e=n.current();e;e=n.next())if(e.nodeType===3)return e}}function c(t,i){var o,f;if(s(t)==="false"&&n.isBlock(t)){r.select(t);return}return f=n.createRng(),s(t)==="true"&&(t.firstChild||t.appendChild(e.getDoc().createTextNode(" ")),t=t.firstChild,i=!0),o=n.create("span",{id:u,"data-mce-bogus":!0},a),i?t.parentNode.insertBefore(o,t):n.insertAfter(o,t),f.setStart(o.firstChild,1),f.collapse(!0),r.setRng(f),o}function h(e){var t,i,s,o;if(e)t=r.getRng(!0),t.setStartBefore(e),t.setEndBefore(e),i=l(e),i&&i.nodeValue.charAt(0)==a&&(i=i.deleteData(0,1)),n.remove(e,!0),r.setRng(t);else{s=f(r.getStart());while((e=n.get(u))&&e!==o)s!==e&&(i=l(e),i&&i.nodeValue.charAt(0)==a&&(i=i.deleteData(0,1)),n.remove(e,!0)),o=e}}function p(){function f(e,n){var r,i,o,a,f;r=u.startContainer,i=u.startOffset;if(r.nodeType==3){f=r.nodeValue.length;if(i>0&&i<f||(n?i==f:i===0))return}else{if(!(i<r.childNodes.length))return n?null:e;var l=!n&&i>0?i-1:i;r=r.childNodes[l],r.hasChildNodes()&&(r=r.firstChild)}o=new t(r,e);while(a=o[n?"prev":"next"]()){if(a.nodeType===3&&a.nodeValue.length>0)return;if(s(a)==="true")return a}return e}var e,n,i,u,a;h(),i=r.isCollapsed(),e=o(r.getStart()),n=o(r.getEnd());if(e||n)u=r.getRng(!0),i?(e=e||n,(a=f(e,!0))?c(a,!0):(a=f(e,!1))?c(a,!1):r.select(e)):(u=r.getRng(!0),e&&u.setStartBefore(e),n&&u.setEndAfter(n),r.setRng(u))}function d(u){function m(e,t){while(e=e[t?"previousSibling":"nextSibling"])if(e.nodeType!==3||e.nodeValue.length>0)return e}function g(e,t){r.select(e),r.collapse(t)}function y(t){function c(e){var t=u;while(t){if(t===e)return;t=t.parentNode}n.remove(e),p()}function h(){var n,r,i=e.schema.getNonEmptyElements();r=new tinymce.dom.TreeWalker(u,e.getBody());while(n=t?r.prev():r.next()){if(i[n.nodeName.toLowerCase()])break;if(n.nodeType===3&&tinymce.trim(n.nodeValue).length>0)break;if(s(n)==="false")return c(n),!0}return o(n)?!0:!1}var i,u,a,l;if(r.isCollapsed()){i=r.getRng(!0),u=i.startContainer,a=i.startOffset,u=f(u)||u;if(l=o(u))return c(l),!1;if(u.nodeType==3&&(t?a>0:a<u.nodeValue.length))return!0;u.nodeType==1&&(u=u.childNodes[a]||u);if(h())return!1}return!0}var a=u.keyCode,l,c,d,v;d=r.getStart(),v=r.getEnd(),l=o(d)||o(v);if(l&&(a<112||a>124)&&a!=i.DELETE&&a!=i.BACKSPACE){if((tinymce.isMac?u.metaKey:u.ctrlKey)&&(a==67||a==88||a==86))return;u.preventDefault();if(a==i.LEFT||a==i.RIGHT){var b=a==i.LEFT;if(e.dom.isBlock(l)){var w=b?l.previousSibling:l.nextSibling,E=new t(w,w),S=b?E.prev():E.next();g(S,!b)}else g(l,b)}}else if(a==i.LEFT||a==i.RIGHT||a==i.BACKSPACE||a==i.DELETE){c=f(d);if(c){if(a==i.LEFT||a==i.BACKSPACE){l=m(c,!0);if(l&&s(l)==="false"){u.preventDefault();if(a!=i.LEFT){n.remove(l);return}g(l,!0)}else h(c)}if(a==i.RIGHT||a==i.DELETE){l=m(c);if(l&&s(l)==="false"){u.preventDefault();if(a!=i.RIGHT){n.remove(l);return}g(l,!1)}else h(c)}}if((a==i.BACKSPACE||a==i.DELETE)&&!y(a==i.BACKSPACE))return u.preventDefault(),!1}}var n=e.dom,r=e.selection,u="mce_noneditablecaret",a="﻿";e.on("mousedown",function(t){var n=e.selection.getNode();s(n)==="false"&&n==t.target&&p()}),e.on("mouseup keyup",p),e.on("keydown",d)}function c(t){var n=l.length,r=t.content,i=tinymce.trim(f);if(t.format=="raw")return;while(n--)r=r.replace(l[n],function(t){var n=arguments,s=n[n.length-2];return s>0&&r.charAt(s-1)=='"'?t:'<span class="'+i+'" data-mce-content="'+e.dom.encode(n[0])+'">'+e.dom.encode(typeof n[1]=="string"?n[1]:n[0])+"</span>"});t.content=r}var t=tinymce.dom.TreeWalker,n="contenteditable",r="data-mce-"+n,i=tinymce.util.VK,a,f,l;a=" "+tinymce.trim(e.getParam("noneditable_editable_class","mceEditable"))+" ",f=" "+tinymce.trim(e.getParam("noneditable_noneditable_class","mceNonEditable"))+" ",l=e.getParam("noneditable_regexp"),l&&!l.length&&(l=[l]),e.on("PreInit",function(){u(),l&&e.on("BeforeSetContent",c),e.parser.addAttributeFilter("class",function(e){var t=e.length,n,i;while(t--)i=e[t],n=" "+i.attr("class")+" ",n.indexOf(a)!==-1?i.attr(r,"true"):n.indexOf(f)!==-1&&i.attr(r,"false")}),e.serializer.addAttributeFilter(r,function(e){var t=e.length,i;while(t--)i=e[t],l&&i.attr("data-mce-content")?(i.name="#text",i.type=3,i.raw=!0,i.value=i.attr("data-mce-content")):(i.attr(n,null),i.attr(r,null))}),e.parser.addAttributeFilter(n,function(e){var t=e.length,i;while(t--)i=e[t],i.attr(r,i.attr(n)),i.attr(n,null)})}),e.on("drop",function(e){o(e.target)&&e.preventDefault()})})}.apply(e,arguments)})}(this),function(e){define("tinymce-pagebreak",["tinymce"],function(){return function(){tinymce.PluginManager.add("pagebreak",function(e){var t="mce-pagebreak",n=e.getParam("pagebreak_separator","<!-- pagebreak -->"),r=new RegExp(n.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi"),i='<img src="'+tinymce.Env.transparentSrc+'" class="'+t+'" data-mce-resize="false" />';e.addCommand("mcePageBreak",function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+i+"</p>"):e.insertContent(i)}),e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"}),e.on("ResolveName",function(n){n.target.nodeName=="IMG"&&e.dom.hasClass(n.target,t)&&(n.name="pagebreak")}),e.on("click",function(n){n=n.target,n.nodeName==="IMG"&&e.dom.hasClass(n,t)&&e.selection.select(n)}),e.on("BeforeSetContent",function(e){e.content=e.content.replace(r,i)}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(t){var r=t.length,i,s;while(r--){i=t[r],s=i.attr("class");if(s&&s.indexOf("mce-pagebreak")!==-1){var o=i.parent;if(e.schema.getBlockElements()[o.name]&&e.settings.pagebreak_split_block){o.type=3,o.value=n,o.raw=!0,i.remove();continue}i.type=3,i.value=n,i.raw=!0}}})})})}.apply(e,arguments)})}(this),function(e){define("tinymce-paste",["tinymce"],function(){return function(){(function(e,t){function r(e,t){var r,i=[];for(var s=0;s<e.length;++s){r=n[e[s]]||o(e[s]);if(!r)throw"module definition dependecy not found: "+e[s];i.push(r)}t.apply(null,i)}function i(e,i,s){if(typeof e!="string")throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(s===t)throw"invalid module definition, definition function must be specified";r(i,function(){n[e]=s.apply(null,arguments)})}function s(e){return!!n[e]}function o(t){var n=e,r=t.split(/[.\/]/);for(var i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function u(r){for(var i=0;i<r.length;i++){var s=e,o=r[i],u=o.split(/[.\/]/);for(var a=0;a<u.length-1;++a)s[u[a]]===t&&(s[u[a]]={}),s=s[u[a]];s[u[u.length-1]]=n[o]}}var n={};i("tinymce/pasteplugin/Utils",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema"],function(e,t,n){function r(t,n){return e.each(n,function(e){e.constructor==RegExp?t=t.replace(e,""):t=t.replace(e[0],e[1])}),t}function i(i){function c(e){var t=e.name,n=e;if(t==="br"){u+="\n";return}a[t]&&(u+=" ");if(f[t]){u+=" ";return}e.type==3&&(u+=e.value);if(!e.shortEnded)if(e=e.firstChild)do c(e);while(e=e.next);l[t]&&n.next&&(u+="\n",t=="p"&&(u+="\n"))}var s=new n,o=new t({},s),u="",a=s.getShortEndedElements(),f=e.makeMap("script noscript style textarea video audio iframe object"," "),l=s.getBlockElements();return i=r(i,[/<!\[[^\]]+\]>/g]),c(o.parse(i)),u}function s(e){function t(e,t,n){return!t&&!n?" ":" "}return e=r(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br>$/i]),e}return{filter:r,innerText:i,trimHtml:s}}),i("tinymce/pasteplugin/Clipboard",["tinymce/Env","tinymce/util/VK","tinymce/pasteplugin/Utils"],function(e,t,n){return function(r){function c(e){var t,n=r.dom;t=r.fire("BeforePastePreProcess",{content:e}),t=r.fire("PastePreProcess",t),e=t.content;if(!t.isDefaultPrevented()){if(r.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()){var i=n.add(r.getBody(),"div",{style:"display:none"},e);t=r.fire("PastePostProcess",{node:i}),n.remove(i),e=t.node.innerHTML}t.isDefaultPrevented()||r.insertContent(e,{merge:r.settings.paste_merge_formats!==!1})}}function h(e){e=r.dom.encode(e).replace(/\r\n/g,"\n");var t=r.dom.getParent(r.selection.getStart(),r.dom.isBlock),i=r.settings.forced_root_block,s;i&&(s=r.dom.createHTML(i,r.settings.forced_root_block_attrs),s=s.substr(0,s.length-3)+">"),t&&/^(PRE|DIV)$/.test(t.nodeName)||!i?e=n.filter(e,[[/\n/g,"<br>"]]):(e=n.filter(e,[[/\n\n/g,"</p>"+s],[/^(.*<\/p>)(<p>)$/,s+"$1"],[/\n/g,"<br />"]]),e.indexOf("<p>")!=-1&&(e=s+e)),c(e)}function p(){function c(e){var n,r,i,s=e.startContainer;n=e.getClientRects();if(n.length)return n[0];if(!e.collapsed||s.nodeType!=1)return;i=s.childNodes[o.startOffset];while(i&&i.nodeType==3&&!i.data.length)i=i.nextSibling;if(!i)return;i.tagName=="BR"&&(r=t.doc.createTextNode("﻿"),i.parentNode.insertBefore(r,i),e=t.createRng(),e.setStartBefore(r),e.setEndAfter(r),n=e.getClientRects(),t.remove(r));if(n.length)return n[0]}var t=r.dom,n=r.getBody(),i=r.dom.getViewPort(r.getWin()),u=i.y,a=20,l;o=r.selection.getRng(),r.inline&&(l=r.selection.getScrollContainer(),l&&l.scrollTop>0&&(u=l.scrollTop));if(o.getClientRects){var h=c(o);if(h)a=u+(h.top-t.getPos(n).y);else{a=u;var p=o.startContainer;p&&(p.nodeType==3&&p.parentNode!=n&&(p=p.parentNode),p.nodeType==1&&(a=t.getPos(p,l||n).y))}}s=t.add(r.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+a+"px;"+"width: 10px; height: 10px; overflow: hidden; opacity: 0"},f),(e.ie||e.gecko)&&t.setStyle(s,"left",t.getStyle(n,"direction",true)=="rtl"?65535:-65535),t.bind(s,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),s.focus(),r.selection.select(s,!0)}function d(){if(s){var e;while(e=r.dom.get("mcepastebin"))r.dom.remove(e),r.dom.unbind(e);o&&r.selection.setRng(o)}s=o=null}function v(){var e="",t,n,i,s;t=r.dom.select("div[id=mcepastebin]");for(n=0;n<t.length;n++)i=t[n],i.firstChild&&i.firstChild.id=="mcepastebin"&&(i=i.firstChild),s=i.innerHTML,e!=f&&(e+=s);return e}function m(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var i=e.types[r];t[i]=e.getData(i)}}return t}function g(e){return m(e.clipboardData||r.getDoc().dataTransfer)}function y(e,t){function i(n){function u(){t&&(r.selection.setRng(t),t=null),c('<img src="'+o.result+'">')}var i,s,o;if(n)for(i=0;i<n.length;i++){s=n[i];if(/^image\/(jpeg|png|gif)$/.test(s.type))return o=new FileReader,o.onload=u,o.readAsDataURL(s.getAsFile?s.getAsFile():s),e.preventDefault(),!0}}var n=e.clipboardData||e.dataTransfer;if(r.settings.paste_data_images&&n)return i(n.items)||i(n.files)}function b(e){var t=e.clipboardData;return navigator.userAgent.indexOf("Android")!=-1&&t&&t.items&&t.items.length===0}function w(e){var t=r.getDoc(),n,i;if(t.caretPositionFromPoint)i=t.caretPositionFromPoint(e.clientX,e.clientY),n=t.createRange(),n.setStart(i.offsetNode,i.offset),n.collapse(!0);else if(t.caretRangeFromPoint)n=t.caretRangeFromPoint(e.clientX,e.clientY);else if(t.body.createTextRange){n=t.body.createTextRange();try{n.moveToPoint(e.clientX,e.clientY),n.collapse(!0)}catch(s){n.collapse(e.clientY<t.body.clientHeight)}}return n}function E(e,t){return t in e&&e[t].length>0}function S(e){return t.metaKeyPressed(e)&&e.keyCode==86||e.shiftKey&&e.keyCode==45}function x(){r.on("keydown",function(t){function n(e){S(e)&&!e.isDefaultPrevented()&&d()}if(S(t)&&!t.isDefaultPrevented()){l=t.shiftKey&&t.keyCode==86;if(l&&e.webkit&&navigator.userAgent.indexOf("Version/")!=-1)return;t.stopImmediatePropagation(),u=(new Date).getTime();if(e.ie&&l){t.preventDefault(),r.fire("paste",{ieFake:!0});return}d(),p(),r.once("keyup",n),r.once("paste",function(){r.off("keyup",n)})}}),r.on("paste",function(t){var o=(new Date).getTime(),a=g(t),m=(new Date).getTime()-o,w=(new Date).getTime()-u-m<1e3,S=i.pasteFormat=="text"||l;l=!1;if(t.isDefaultPrevented()||b(t)){d();return}if(y(t)){d();return}w||t.preventDefault(),e.ie&&(!w||t.ieFake)&&(p(),r.dom.bind(s,"paste",function(e){e.stopPropagation()}),r.getDoc().execCommand("Paste",!1,null),a["text/html"]=v()),setTimeout(function(){var e;E(a,"text/html")?e=a["text/html"]:(e=v(),e==f&&(S=!0)),e=n.trimHtml(e),s&&s.firstChild&&s.firstChild.id==="mcepastebin"&&(S=!0),d(),e.length||(S=!0),S&&(E(a,"text/plain")&&e.indexOf("</p>")==-1?e=a["text/plain"]:e=n.innerText(e));if(e==f){w||r.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.");return}S?h(e):c(e)},0)}),r.on("dragstart dragend",function(e){a=e.type=="dragstart"}),r.on("drop",function(e){var t=w(e);if(e.isDefaultPrevented()||a)return;if(y(e,t))return;if(t&&r.settings.paste_filter_drop!==!1){var i=m(e.dataTransfer),s=i["mce-internal"]||i["text/html"]||i["text/plain"];s&&(e.preventDefault(),r.undoManager.transact(function(){i["mce-internal"]&&r.execCommand("Delete"),r.selection.setRng(t),s=n.trimHtml(s),i["text/html"]?c(s):h(s)}))}}),r.on("dragover dragend",function(e){var t,n=e.dataTransfer;if(r.settings.paste_data_images&&n)for(t=0;t<n.types.length;t++)if(n.types[t]=="Files")return e.preventDefault(),!1})}var i=this,s,o,u=0,a=!1,f="%MCEPASTEBIN%",l;i.pasteHtml=c,i.pasteText=h,r.on("preInit",function(){x(),r.parser.addNodeFilter("img",function(t){if(!r.settings.paste_data_images){var n=t.length;while(n--){var i=t[n].attributes.map.src;i&&/^(data:image|webkit\-fake\-url)/.test(i)&&!t[n].attr("data-mce-object")&&i!==e.transparentSrc&&t[n].remove()}}})})}}),i("tinymce/pasteplugin/WordFilter",["tinymce/util/Tools","tinymce/html/DomParser","tinymce/html/Schema","tinymce/html/Serializer","tinymce/html/Node","tinymce/pasteplugin/Utils"],function(e,t,n,r,i,s){function o(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function u(t){var n,r;return r=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],t=t.replace(/^[\u00a0 ]+/,""),e.each(r,function(e){if(e.test(t))return n=!0,!1}),n}function a(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u00d8\u25CF]\s*/.test(e)}function f(f){var l=f.settings;f.on("BeforePastePreProcess",function(c){function v(e){function s(e){var t="";if(e.type===3)return e.value;if(e=e.firstChild)do t+=s(e);while(e=e.next);return t}function o(e,t){if(e.type===3&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do if(!o(e,t))return!1;while(e=e.next);return!0}function f(e){if(e._listIgnore){e.remove();return}if(e=e.firstChild)do f(e);while(e=e.next)}function l(e,s,u){var a=e._listLevel||r;a!=r&&(a<r?t&&(t=t.parent.parent):(n=t,t=null)),!t||t.name!=s?(n=n||t,t=new i(s,1),u>1&&t.attr("start",""+u),e.wrap(t)):t.append(e),e.name="li",a>r&&n&&n.lastChild.append(t),r=a,f(e),o(e,/^\u00a0+/),o(e,/^\s*([\u2022\u00b7\u00a7\u00d8\u25CF]|\w+\.)/),o(e,/^\u00a0+/)}var t,n,r=1,c=[],h=e.firstChild;while(typeof h!="undefined"&&h!==null){c.push(h),h=h.walk();if(h!==null)while(typeof h!="undefined"&&h.parent!==e)h=h.walk()}for(var p=0;p<c.length;p++){e=c[p];if(e.name=="p"&&e.firstChild){var d=s(e);if(a(d)){l(e,"ul");continue}if(u(d)){var v=/([0-9]+)\./.exec(d),m=1;v&&(m=parseInt(v[1],10)),l(e,"ol",m);continue}if(e._listLevel){l(e,"ul",1);continue}t=null}else n=t,t=null}}function m(t,n){var r={},s,o=f.dom.parseStyle(n);return e.each(o,function(e,i){switch(i){case"mso-list":s=/\w+ \w+([0-9]+)/i.exec(n),s&&(t._listLevel=parseInt(s[1],10)),/Ignore/i.test(e)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":i="text-align";break;case"vert-align":i="vertical-align";break;case"font-color":case"mso-foreground":i="color";break;case"mso-background":case"mso-highlight":i="background";break;case"font-weight":case"font-style":e!="normal"&&(r[i]=e);return;case"mso-element":if(/^(comment|comment-list)$/i.test(e)){t.remove();return}}if(i.indexOf("mso-comment")===0){t.remove();return}if(i.indexOf("mso-")===0)return;if(p=="all"||d&&d[i])r[i]=e}),/(bold)/i.test(r["font-weight"])&&(delete r["font-weight"],t.wrap(new i("b",1))),/(italic)/i.test(r["font-style"])&&(delete r["font-style"],t.wrap(new i("i",1))),r=f.dom.serializeStyle(r,t.name),r?r:null}var h=c.content,p,d;p=l.paste_retain_style_properties,p&&(d=e.makeMap(p.split(/[, ]/)));if(l.paste_enable_default_filters===!1)return;if(o(c.content)){c.wordContent=!0,h=s.filter(h,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var g=l.paste_word_valid_elements;g||(g="-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody");var y=new n({valid_elements:g,valid_children:"-li[p]"});e.each(y.elements,function(e){e.attributes["class"]||(e.attributes["class"]={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var b=new t({},y);b.addAttributeFilter("style",function(e){var t=e.length,n;while(t--)n=e[t],n.attr("style",m(n,n.attr("style"))),n.name=="span"&&n.parent&&!n.attributes.length&&n.unwrap()}),b.addAttributeFilter("class",function(e){var t=e.length,n,r;while(t--)n=e[t],r=n.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel|MsoCaption)$/i.test(r)&&n.remove(),n.attr("class",null)}),b.addNodeFilter("del",function(e){var t=e.length;while(t--)e[t].remove()}),b.addNodeFilter("a",function(e){var t=e.length,n,r,i;while(t--){n=e[t],r=n.attr("href"),i=n.attr("name");if(r&&r.indexOf("#_msocom_")!=-1){n.remove();continue}r&&r.indexOf("file://")===0&&(r=r.split("#")[1],r&&(r="#"+r));if(!r&&!i)n.unwrap();else{if(i&&!/^_?(?:toc|edn|ftn)/i.test(i)){n.unwrap();continue}n.attr({href:r,name:i})}}});var w=b.parse(h);v(w),c.content=(new r({},y)).serialize(w)}})}return f.isWordContent=o,f}),i("tinymce/pasteplugin/Quirks",["tinymce/Env","tinymce/util/Tools","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Utils"],function(e,t,n,r){return function(i){function s(e){i.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}function o(e){if(!n.isWordContent(e))return e;var s=[];t.each(i.schema.getBlockElements(),function(e,t){s.push(t)});var o=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+s.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=r.filter(e,[[o,"$1"]]),e=r.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]),e}function u(e){if(n.isWordContent(e))return e;var t=i.settings.paste_webkit_styles;if(i.settings.paste_remove_styles_if_webkit===!1||t=="all")return e;t&&(t=t.split(/[, ]/));if(t){var r=i.dom,s=i.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,n,i,o){var u=r.parseStyle(i,"span"),a={};if(t==="none")return n+o;for(var f=0;f<t.length;f++){var l=u[t[f]],c=r.getStyle(s,t[f],!0);/color/.test(t[f])&&(l=r.toHex(l),c=r.toHex(c)),c!=l&&(a[t[f]]=l)}return a=r.serializeStyle(a,"span"),a?n+' style="'+a+'"'+o:n+o})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r}),e}e.webkit&&s(u),e.ie&&s(o)}}),i("tinymce/pasteplugin/Plugin",["tinymce/PluginManager","tinymce/pasteplugin/Clipboard","tinymce/pasteplugin/WordFilter","tinymce/pasteplugin/Quirks"],function(e,t,n,r){var i;e.add("paste",function(e){function a(){o.pasteFormat=="text"?(this.active(!1),o.pasteFormat="html"):(o.pasteFormat="text",this.active(!0),i||(e.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),i=!0))}var s=this,o,u=e.settings;s.clipboard=o=new t(e),s.quirks=new r(e),s.wordFilter=new n(e),e.settings.paste_as_text&&(s.clipboard.pasteFormat="text"),u.paste_preprocess&&e.on("PastePreProcess",function(e){u.paste_preprocess.call(s,s,e)}),u.paste_postprocess&&e.on("PastePostProcess",function(e){u.paste_postprocess.call(s,s,e)}),e.addCommand("mceInsertClipboardContent",function(e,t){t.content&&s.clipboard.pasteHtml(t.content),t.text&&s.clipboard.pasteText(t.text)}),e.paste_block_drop&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),e.settings.paste_data_images||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:a,active:s.clipboard.pasteFormat=="text"}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:o.pasteFormat,onclick:a})})}),u(["tinymce/pasteplugin/Utils","tinymce/pasteplugin/WordFilter"])})(this)}.apply(e,arguments)})}(this),function(e){define("tinymce-preview",["tinymce"],function(){return function(){tinymce.PluginManager.add("preview",function(e){var t=e.settings,n=!tinymce.Env.ie;e.addCommand("mcePreview",function(){e.windowManager.open({title:"Preview",width:parseInt(e.getParam("plugin_preview_width","650"),10),height:parseInt(e.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"'+(n?' sandbox="allow-scripts"':"")+"></iframe>",buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var r,i="";i+='<base href="'+e.documentBaseURI.getURI()+'">',tinymce.each(e.contentCSS,function(t){i+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'});var s=t.body_id||"tinymce";s.indexOf("=")!=-1&&(s=e.getParam("body_id","","hash"),s=s[e.id]||s);var o=t.body_class||"";o.indexOf("=")!=-1&&(o=e.getParam("body_class","","hash"),o=o[e.id]||"");var u=e.settings.directionality?' dir="'+e.settings.directionality+'"':"";r="<!DOCTYPE html><html><head>"+i+"</head>"+'<body id="'+s+'" class="mce-content-body '+o+'"'+u+">"+e.getContent()+"</body>"+"</html>";if(!n){var a=this.getEl("body").firstChild.contentWindow.document;a.open(),a.write(r),a.close()}else this.getEl("body").firstChild.src="data:text/html;charset=utf-8,"+encodeURIComponent(r)}})}),e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})})}.apply(e,arguments)})}(this),function(e){define("tinymce-print",["tinymce"],function(){return function(){tinymce.PluginManager.add("print",function(e){e.addCommand("mcePrint",function(){e.getWin().print()}),e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addShortcut("Ctrl+P","","mcePrint"),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print",shortcut:"Ctrl+P",context:"file"})})}.apply(e,arguments)})}(this),function(e){define("tinymce-save",["tinymce"],function(){return function(){tinymce.PluginManager.add("save",function(e){function t(){var t;t=tinymce.DOM.getParent(e.id,"form");if(e.getParam("save_enablewhendirty",!0)&&!e.isDirty())return;tinymce.triggerSave();if(e.getParam("save_onsavecallback")){e.execCallback("save_onsavecallback",e)&&(e.startContent=tinymce.trim(e.getContent({format:"raw"})),e.nodeChanged());return}if(t){e.isNotDirty=!0;if(!t.onsubmit||t.onsubmit())typeof t.submit=="function"?t.submit():e.windowManager.alert("Error: Form submit field collision.");e.nodeChanged()}else e.windowManager.alert("Error: No form element found.")}function n(){var t=tinymce.trim(e.startContent);if(e.getParam("save_oncancelcallback")){e.execCallback("save_oncancelcallback",e);return}e.setContent(t),e.undoManager.clear(),e.nodeChanged()}function r(){var t=this;e.on("nodeChange",function(){t.disabled(e.getParam("save_enablewhendirty",!0)&&!e.isDirty())})}e.addCommand("mceSave",t),e.addCommand("mceCancel",n),e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:r}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:r}),e.addShortcut("ctrl+s","","mceSave")})}.apply(e,arguments)})}(this),function(e){define("tinymce-searchreplace",["tinymce"],function(){return function(){(function(){function e(e,t,n,r,i){function p(e,t){t=t||0;if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n=e.index;if(t>0){var r=e[t];if(!r)throw"Invalid capture group";n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}function d(e){var t;if(e.nodeType===3)return e.data;if(c[e.nodeName]&&!l[e.nodeName])return"";t="";if(l[e.nodeName]||h[e.nodeName])t+="\n";if(e=e.firstChild)do t+=d(e);while(e=e.nextSibling);return t}function v(e,t,n){var r,i,s,o,u=[],a=0,f=e,p=t.shift(),d=0;e:for(;;){(l[f.nodeName]||h[f.nodeName])&&a++,f.nodeType===3&&(!i&&f.length+a>=p[1]?(i=f,o=p[1]-a):r&&u.push(f),!r&&f.length+a>p[0]&&(r=f,s=p[0]-a),a+=f.length);if(r&&i){f=n({startNode:r,startNodeIndex:s,endNode:i,endNodeIndex:o,innerNodes:u,match:p[2],matchIndex:d}),a-=i.length-o,r=null,i=null,u=[],p=t.shift(),d++;if(!p)break}else{if((!c[f.nodeName]||l[f.nodeName])&&f.firstChild){f=f.firstChild;continue}if(f.nextSibling){f=f.nextSibling;continue}}for(;;){if(f.nextSibling){f=f.nextSibling;break}if(f.parentNode===e)break e;f=f.parentNode}}}function m(e){var t;if(typeof e!="function"){var n=e.nodeType?e:f.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(f.createTextNode(e)),r}}else t=e;return function(e){var n,r,i,s=e.startNode,o=e.endNode,u=e.matchIndex;if(s===o){var a=s;i=a.parentNode,e.startNodeIndex>0&&(n=f.createTextNode(a.data.substring(0,e.startNodeIndex)),i.insertBefore(n,a));var l=t(e.match[0],u);return i.insertBefore(l,a),e.endNodeIndex<a.length&&(r=f.createTextNode(a.data.substring(e.endNodeIndex)),i.insertBefore(r,a)),a.parentNode.removeChild(a),l}n=f.createTextNode(s.data.substring(0,e.startNodeIndex)),r=f.createTextNode(o.data.substring(e.endNodeIndex));var c=t(s.data.substring(e.startNodeIndex),u),h=[];for(var p=0,d=e.innerNodes.length;p<d;++p){var v=e.innerNodes[p],m=t(v.data,u);v.parentNode.replaceChild(m,v),h.push(m)}var g=t(o.data.substring(0,e.endNodeIndex),u);return i=s.parentNode,i.insertBefore(n,s),i.insertBefore(c,s),i.removeChild(s),i=o.parentNode,i.insertBefore(g,o),i.insertBefore(r,o),i.removeChild(o),g}}var s,o=[],u,a=0,f,l,c,h;f=t.ownerDocument,l=i.getBlockElements(),c=i.getWhiteSpaceElements(),h=i.getShortEndedElements(),u=d(t);if(!u)return;if(e.global)while(s=e.exec(u))o.push(p(s,r));else s=u.match(e),o.push(p(s,r));return o.length&&(a=o.length,v(t,o,m(n))),a}function t(t){function i(){function i(){o.statusbar.find("#next").disabled(!a(r+1).length),o.statusbar.find("#prev").disabled(!a(r-1).length)}function s(){tinymce.ui.MessageBox.alert("Could not find the specified string.",function(){o.find("#find")[0].focus()})}var e={},o=tinymce.ui.Factory.create({type:"window",layout:"flex",pack:"center",align:"center",onClose:function(){t.focus(),n.done()},onSubmit:function(t){var u,f,l,c;t.preventDefault(),f=o.find("#case").checked(),c=o.find("#words").checked(),l=o.find("#find").value();if(!l.length){n.done(!1),o.statusbar.items().slice(1).disabled(!0);return}if(e.text==l&&e.caseState==f&&e.wholeWord==c){if(a(r+1).length===0){s();return}n.next(),i();return}u=n.find(l,f,c),u||s(),o.statusbar.items().slice(1).disabled(u===0),i(),e={text:l,caseState:f,wholeWord:c}},buttons:[{text:"Find",onclick:function(){o.submit()}},{text:"Replace",disabled:!0,onclick:function(){n.replace(o.find("#replace").value())||(o.statusbar.items().slice(1).disabled(!0),r=-1,e={})}},{text:"Replace all",disabled:!0,onclick:function(){n.replace(o.find("#replace").value(),!0,!0),o.statusbar.items().slice(1).disabled(!0),e={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){n.prev(),i()}},{text:"Next",name:"next",disabled:!0,onclick:function(){n.next(),i()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:t.selection.getNode().src},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}}).renderTo().reflow()}function s(e){var t=e.getAttribute("data-mce-index");return typeof t=="number"?""+t:t}function o(r){var i,s;return s=t.dom.create("span",{"data-mce-bogus":1}),s.className="mce-match-marker",i=t.getBody(),n.done(!1),e(r,i,s,!1,t.schema)}function u(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function a(e){var n,r=[];n=tinymce.toArray(t.getBody().getElementsByTagName("span"));if(n.length)for(var i=0;i<n.length;i++){var o=s(n[i]);if(o===null||!o.length)continue;o===e.toString()&&r.push(n[i])}return r}function f(e){var n=r,i=t.dom;e=e!==!1,e?n++:n--,i.removeClass(a(r),"mce-match-marker-selected");var s=a(n);return s.length?(i.addClass(a(n),"mce-match-marker-selected"),t.selection.scrollIntoView(s[0]),n):-1}function l(e){e.parentNode.removeChild(e)}var n=this,r=-1;n.init=function(e){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Ctrl+F",onclick:i,separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Ctrl+F",onclick:i}),e.addCommand("SearchReplace",i),e.shortcuts.add("Ctrl+F","",i)},n.find=function(e,t,n){e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e=n?"\\b"+e+"\\b":e;var i=o(new RegExp(e,t?"g":"gi"));return i&&(r=-1,r=f(!0)),i},n.next=function(){var e=f(!0);e!==-1&&(r=e)},n.prev=function(){var e=f(!1);e!==-1&&(r=e)},n.replace=function(e,i,o){var f,c,h,p,d,v=r,m;i=i!==!1,h=t.getBody(),c=tinymce.toArray(h.getElementsByTagName("span"));for(f=0;f<c.length;f++){var g=s(c[f]);if(g===null||!g.length)continue;p=d=parseInt(g,10);if(o||p===r){e.length?(c[f].firstChild.nodeValue=e,u(c[f])):l(c[f]);while(c[++f]){p=s(c[f]);if(g===null||!g.length)continue;if(p!==d){f--;break}l(c[f])}i&&v--}else d>r&&c[f].setAttribute("data-mce-index",d-1)}return t.undoManager.add(),r=v,i?(m=a(v+1).length>0,n.next()):(m=a(v-1).length>0,n.prev()),!o&&m},n.done=function(e){var n,i,o,a;i=tinymce.toArray(t.getBody().getElementsByTagName("span"));for(n=0;n<i.length;n++){var f=s(i[n]);f!==null&&f.length&&(f===r.toString()&&(o||(o=i[n].firstChild),a=i[n].firstChild),u(i[n]))}if(o&&a){var l=t.dom.createRng();return l.setStart(o,0),l.setEnd(a,a.data.length),e!==!1&&t.selection.setRng(l),l}}}tinymce.PluginManager.add("searchreplace",t)})()}.apply(e,arguments)})}(this),function(e){define("tinymce-spellchecker",["tinymce"],function(){return function(){(function(e,t){function r(e,t){var r,i=[];for(var s=0;s<e.length;++s){r=n[e[s]]||o(e[s]);if(!r)throw"module definition dependecy not found: "+e[s];i.push(r)}t.apply(null,i)}function i(e,i,s){if(typeof e!="string")throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(s===t)throw"invalid module definition, definition function must be specified";r(i,function(){n[e]=s.apply(null,arguments)})}function s(e){return!!n[e]}function o(t){var n=e,r=t.split(/[.\/]/);for(var i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function u(r){for(var i=0;i<r.length;i++){var s=e,o=r[i],u=o.split(/[.\/]/);for(var a=0;a<u.length-1;++a)s[u[a]]===t&&(s[u[a]]={}),s=s[u[a]];s[u[u.length-1]]=n[o]}}var n={};i("tinymce/spellcheckerplugin/DomTextMatcher",[],function(){return function(e,t){function f(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:e.index,end:e.index+e[0].length,text:e[0],data:t}}function l(e){var t;if(e.nodeType===3)return e.data;if(u[e.nodeName]&&!o[e.nodeName])return"";t="";if(o[e.nodeName]||a[e.nodeName])t+="\n";if(e=e.firstChild)do t+=l(e);while(e=e.nextSibling);return t}function c(e,t,n){var r,i,s,f,l=[],c=0,h=e,p,d=0;t=t.slice(0),t.sort(function(e,t){return e.start-t.start}),p=t.shift();e:for(;;){(o[h.nodeName]||a[h.nodeName])&&c++,h.nodeType===3&&(!i&&h.length+c>=p.end?(i=h,f=p.end-c):r&&l.push(h),!r&&h.length+c>p.start&&(r=h,s=p.start-c),c+=h.length);if(r&&i){h=n({startNode:r,startNodeIndex:s,endNode:i,endNodeIndex:f,innerNodes:l,match:p.text,matchIndex:d}),c-=i.length-f,r=null,i=null,l=[],p=t.shift(),d++;if(!p)break}else{if((!u[h.nodeName]||o[h.nodeName])&&h.firstChild){h=h.firstChild;continue}if(h.nextSibling){h=h.nextSibling;continue}}for(;;){if(h.nextSibling){h=h.nextSibling;break}if(h.parentNode===e)break e;h=h.parentNode}}}function h(e){function t(t,n){var i=r[n];i.stencil||(i.stencil=e(i));var o=i.stencil.cloneNode(!1);return o.setAttribute("data-mce-index",n),t&&o.appendChild(s.doc.createTextNode(t)),o}return function(e){var n,r,i,o=e.startNode,u=e.endNode,a=e.matchIndex,f=s.doc;if(o===u){var l=o;i=l.parentNode,e.startNodeIndex>0&&(n=f.createTextNode(l.data.substring(0,e.startNodeIndex)),i.insertBefore(n,l));var c=t(e.match,a);return i.insertBefore(c,l),e.endNodeIndex<l.length&&(r=f.createTextNode(l.data.substring(e.endNodeIndex)),i.insertBefore(r,l)),l.parentNode.removeChild(l),c}n=f.createTextNode(o.data.substring(0,e.startNodeIndex)),r=f.createTextNode(u.data.substring(e.endNodeIndex));var h=t(o.data.substring(e.startNodeIndex),a),p=[];for(var d=0,v=e.innerNodes.length;d<v;++d){var m=e.innerNodes[d],g=t(m.data,a);m.parentNode.replaceChild(g,m),p.push(g)}var y=t(u.data.substring(0,e.endNodeIndex),a);return i=o.parentNode,i.insertBefore(n,o),i.insertBefore(h,o),i.removeChild(o),i=u.parentNode,i.insertBefore(y,u),i.insertBefore(r,u),i.removeChild(u),y}}function p(e){var t=e.parentNode;t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function d(t){var n=e.getElementsByTagName("*"),r=[];t=typeof t=="number"?""+t:null;for(var i=0;i<n.length;i++){var s=n[i],o=s.getAttribute("data-mce-index");o!==null&&o.length&&(o===t||t===null)&&r.push(s)}return r}function v(e){var t=r.length;while(t--)if(r[t]===e)return t;return-1}function m(e){var t=[];return g(function(n,r){e(n,r)&&t.push(n)}),r=t,this}function g(e){for(var t=0,n=r.length;t<n;t++)if(e(r[t],t)===!1)break;return this}function y(t){return r.length&&c(e,r,h(t)),this}function b(e,t){if(i&&e.global)while(n=e.exec(i))r.push(f(n,t));return this}function w(e){var t,n=d(e?v(e):null);t=n.length;while(t--)p(n[t]);return this}function E(e){return r[e.getAttribute("data-mce-index")]}function S(e){return d(v(e))[0]}function x(e,t,n){return r.push({start:e,end:e+t,text:i.substr(e,t),data:n}),this}function T(e){var n=d(v(e)),r=t.dom.createRng();return r.setStartBefore(n[0]),r.setEndAfter(n[n.length-1]),r}function N(e,n){var r=T(e);return r.deleteContents(),n.length>0&&r.insertNode(t.dom.doc.createTextNode(n)),r}function C(){return r.splice(0,r.length),w(),this}var n,r=[],i,s=t.dom,o,u,a;return o=t.schema.getBlockElements(),u=t.schema.getWhiteSpaceElements(),a=t.schema.getShortEndedElements(),i=l(e),{text:i,matches:r,each:g,filter:m,reset:C,matchFromElement:E,elementFromMatch:S,find:b,add:x,wrap:y,unwrap:w,replace:N,rangeFromMatch:T,indexOf:v}}}),i("tinymce/spellcheckerplugin/Plugin",["tinymce/spellcheckerplugin/DomTextMatcher","tinymce/PluginManager","tinymce/util/Tools","tinymce/ui/Menu","tinymce/dom/DOMUtils","tinymce/util/XHR","tinymce/util/URI","tinymce/util/JSON"],function(e,t,n,r,i,s,o,u){t.add("spellchecker",function(t,a){function m(){return l.textMatcher||(l.textMatcher=new e(t.getBody(),t)),l.textMatcher}function g(e,t){var r=[];return n.each(t,function(e){r.push({selectable:!0,text:e.name,data:e.value})}),r}function b(e){for(var t in e)return!1;return!0}function w(e,s){var o=[],u=c[e];n.each(u,function(e){o.push({text:e,onclick:function(){t.insertContent(t.dom.encode(e)),t.dom.remove(s),N()}})}),o.push({text:"-"}),v&&o.push({text:"Add to Dictionary",onclick:function(){C(e,s)}}),o.push.apply(o,[{text:"Ignore",onclick:function(){k(e,s)}},{text:"Ignore all",onclick:function(){k(e,s,!0)}}]),p=new r({items:o,context:"contextmenu",onautohide:function(e){e.target.className.indexOf("spellchecker")!=-1&&e.preventDefault()},onhide:function(){p.remove(),p=null}}),p.renderTo(document.body);var a=i.DOM.getPos(t.getContentAreaContainer()),f=t.dom.getPos(s[0]),l=t.dom.getRoot();l.nodeName=="BODY"?(f.x-=l.ownerDocument.documentElement.scrollLeft||l.scrollLeft,f.y-=l.ownerDocument.documentElement.scrollTop||l.scrollTop):(f.x-=l.scrollLeft,f.y-=l.scrollTop),a.x+=f.x,a.y+=f.y,p.moveTo(a.x,a.y+s[0].offsetHeight)}function E(){return t.getParam("spellchecker_wordchar_pattern")||new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„    ]+',"g")}function S(e,t,r,i){var f={method:e},l="";e=="spellcheck"&&(f.text=t,f.lang=d.spellchecker_language),e=="addToDictionary"&&(f.word=t),n.each(f,function(e,t){l&&(l+="&"),l+=t+"="+encodeURIComponent(e)}),s.send({url:(new o(a)).toAbsolute(d.spellchecker_rpc_url),type:"post",content_type:"application/x-www-form-urlencoded",data:l,success:function(e){e=u.parse(e),e?e.error?i(e.error):r(e):i("Sever response wasn't proper JSON.")},error:function(e,t){i("Spellchecker request error: "+t.status)}})}function x(e,t,n,r){var i=d.spellchecker_callback||S;i.call(l,e,t,n,r)}function T(){function e(e){t.windowManager.alert(e),t.setProgressState(!1),L()}if(h){L();return}L(),t.setProgressState(!0),x("spellcheck",m().text,_,e),t.focus()}function N(){t.dom.select("span.mce-spellchecker-word").length||L()}function C(e,n){t.setProgressState(!0),x("addToDictionary",e,function(){t.setProgressState(!1),t.dom.remove(n,!0),N()},function(e){t.windowManager.alert(e),t.setProgressState(!1)})}function k(e,r,i){t.selection.collapse(),i?n.each(t.dom.select("span.mce-spellchecker-word"),function(n){n.getAttribute("data-mce-word")==e&&t.dom.remove(n,!0)}):t.dom.remove(r,!0),N()}function L(){m().reset(),l.textMatcher=null,h&&(h=!1,t.fire("SpellcheckEnd"))}function A(e){var t=e.getAttribute("data-mce-index");return typeof t=="number"?""+t:t}function O(e){var r,i=[];r=n.toArray(t.getBody().getElementsByTagName("span"));if(r.length)for(var s=0;s<r.length;s++){var o=A(r[s]);if(o===null||!o.length)continue;o===e.toString()&&i.push(r[s])}return i}function M(e){var t=d.spellchecker_language;e.control.items().each(function(e){e.active(e.settings.data===t)})}function _(e){var n;e.words?(v=!!e.dictionary,n=e.words):n=e,t.setProgressState(!1);if(b(n)){t.windowManager.alert("No misspellings found"),h=!1;return}c=n,m().find(E()).filter(function(e){return!!n[e.text]}).wrap(function(e){return t.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":e.text})}),h=!0,t.fire("SpellcheckStart")}var f,l=this,c,h,p,d=t.settings,v,y=d.spellchecker_languages||"English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv";f=g("Language",n.map(y.split(","),function(e){return e=e.split("="),{name:e[0],value:e[1]}})),t.on("click",function(e){var n=e.target;if(n.className=="mce-spellchecker-word"){e.preventDefault();var r=O(A(n));if(r.length>0){var i=t.dom.createRng();i.setStartBefore(r[0]),i.setEndAfter(r[r.length-1]),t.selection.setRng(i),w(n.getAttribute("data-mce-word"),r)}}}),t.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:T,selectable:!0,onPostRender:function(){var e=this;e.active(h),t.on("SpellcheckStart SpellcheckEnd",function(){e.active(h)})}});var D={tooltip:"Spellcheck",onclick:T,onPostRender:function(){var e=this;t.on("SpellcheckStart SpellcheckEnd",function(){e.active(h)})}};f.length>1&&(D.type="splitbutton",D.menu=f,D.onshow=M,D.onselect=function(e){d.spellchecker_language=e.control.settings.data}),t.addButton("spellchecker",D),t.addCommand("mceSpellCheck",T),t.on("remove",function(){p&&(p.remove(),p=null)}),t.on("change",N),this.getTextMatcher=m,this.getWordCharPattern=E,this.markErrors=_,this.getLanguage=function(){return d.spellchecker_language},d.spellchecker_language=d.spellchecker_language||d.language||"en"})}),u(["tinymce/spellcheckerplugin/DomTextMatcher"])})(this)}.apply(e,arguments)})}(this),function(e){define("tinymce-tabfocus",["tinymce"],function(){return function(){tinymce.PluginManager.add("tabfocus",function(e){function i(e){e.keyCode===9&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.preventDefault()}function s(i){function f(r){function u(e){return e.nodeName==="BODY"||e.type!="hidden"&&e.style.display!="none"&&e.style.visibility!="hidden"&&u(e.parentNode)}function f(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&tinymce.get(i.id)&&e.tabIndex!=-1&&u(e)}o=t.select(":input:enabled,*[tabindex]:not(iframe)"),n(o,function(t,n){if(t.id==e.id)return s=n,!1});if(r>0){for(a=s+1;a<o.length;a++)if(f(o[a]))return o[a]}else for(a=s-1;a>=0;a--)if(f(o[a]))return o[a];return null}var s,o,u,a;if(i.keyCode!==9||i.ctrlKey||i.altKey||i.metaKey||i.isDefaultPrevented())return;u=r(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),u.length==1&&(u[1]=u[0],u[0]=":prev"),i.shiftKey?u[0]==":prev"?o=f(-1):o=t.get(u[0]):u[1]==":next"?o=f(1):o=t.get(u[1]);if(o){var l=tinymce.get(o.id||o.name);o.id&&l?l.focus():window.setTimeout(function(){tinymce.Env.webkit||window.focus(),o.focus()},10),i.preventDefault()}}var t=tinymce.DOM,n=tinymce.each,r=tinymce.explode;e.on("init",function(){e.inline&&tinymce.DOM.setAttrib(e.getBody(),"tabIndex",null),e.on("keyup",i),tinymce.Env.gecko?e.on("keypress keydown",s):e.on("keydown",s)})})}.apply(e,arguments)})}(this),function(e){define("tinymce-table",["tinymce"],function(){return function(){(function(e,t){function r(e,t){var r,i=[];for(var s=0;s<e.length;++s){r=n[e[s]]||o(e[s]);if(!r)throw"module definition dependecy not found: "+e[s];i.push(r)}t.apply(null,i)}function i(e,i,s){if(typeof e!="string")throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(s===t)throw"invalid module definition, definition function must be specified";r(i,function(){n[e]=s.apply(null,arguments)})}function s(e){return!!n[e]}function o(t){var n=e,r=t.split(/[.\/]/);for(var i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function u(r){for(var i=0;i<r.length;i++){var s=e,o=r[i],u=o.split(/[.\/]/);for(var a=0;a<u.length-1;++a)s[u[a]]===t&&(s[u[a]]={}),s=s[u[a]];s[u[u.length-1]]=n[o]}}var n={};i("tinymce/tableplugin/TableGrid",["tinymce/util/Tools","tinymce/Env"],function(e,n){function i(e,t){return parseInt(e.getAttribute(t)||1,10)}var r=e.each;return function(s,o){function d(){var e=0;u=[],a=0,r(["thead","tbody","tfoot"],function(t){var n=p.select("> "+t+" tr",o);r(n,function(n,s){s+=e,r(p.select("> td, > th",n),function(e,n){var r,o,f,l;if(u[s])while(u[s][n])n++;f=i(e,"rowspan"),l=i(e,"colspan");for(o=s;o<s+f;o++){u[o]||(u[o]=[]);for(r=n;r<n+l;r++)u[o][r]={part:t,real:o==s&&r==n,elm:e,rowspan:f,colspan:l}}a=Math.max(a,n+1)})}),e+=n.length})}function v(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function m(e,t){var n;n=u[t];if(n)return n[e]}function g(e,t,n){e&&(n=parseInt(n,10),n===1?e.removeAttribute(t,1):e.setAttribute(t,n,1))}function y(e){return e&&(p.hasClass(e.elm,"mce-item-selected")||e==c)}function b(){var e=[];return r(o.rows,function(t){r(t.cells,function(n){if(p.hasClass(n,"mce-item-selected")||c&&n==c.elm)return e.push(t),!1})}),e}function w(){var e=p.createRng();e.setStartAfter(o),e.setEndAfter(o),h.setRng(e),p.remove(o)}function E(t){var i,o={};s.settings.table_clone_elements!==!1&&(o=e.makeMap((s.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(t,function(e){var s;if(e.nodeType==3)return r(p.getParents(e.parentNode,null,t).reverse(),function(e){if(!o[e.nodeName])return;e=v(e,!1),i?s&&s.appendChild(e):i=s=e,s=e}),s&&(s.innerHTML=n.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes"),t=v(t,!1),g(t,"rowSpan",1),g(t,"colSpan",1);if(i)t.appendChild(i);else if(!n.ie||n.ie>10)t.innerHTML='<br data-mce-bogus="1" />';return t}function S(){var e=p.createRng(),t;r(p.select("tr",o),function(e){e.cells.length===0&&p.remove(e)});if(p.select("tr",o).length===0){e.setStartBefore(o),e.setEndBefore(o),h.setRng(e),p.remove(o);return}r(p.select("thead,tbody,tfoot",o),function(e){e.rows.length===0&&p.remove(e)}),d(),f&&(t=u[Math.min(u.length-1,f.y)],t&&(h.select(t[Math.min(t.length-1,f.x)].elm,!0),h.collapse(!0)))}function x(e,t,n,r){var i,s,o,a,f;i=u[t][e].elm.parentNode;for(o=1;o<=n;o++){i=p.getNext(i,"tr");if(i){for(s=e;s>=0;s--){f=u[t+o][s].elm;if(f.parentNode==i){for(a=1;a<=r;a++)p.insertAfter(E(f),f);break}}if(s==-1)for(a=1;a<=r;a++)i.insertBefore(E(i.cells[0]),i.cells[0])}}}function T(){r(u,function(e,t){r(e,function(e,n){var r,s,o;if(y(e)){e=e.elm,r=i(e,"colspan"),s=i(e,"rowspan");if(r>1||s>1){g(e,"rowSpan",1),g(e,"colSpan",1);for(o=0;o<r-1;o++)p.insertAfter(E(e),e);x(n,t,s-1,r)}}})})}function N(t,n,i){var s,o,a,c,h,v,b,w,E,x,N;t?(s=D(t),o=s.x,a=s.y,c=o+(n-1),h=a+(i-1)):(f=l=null,r(u,function(e,t){r(e,function(e,n){y(e)&&(f||(f={x:n,y:t}),l={x:n,y:t})})}),f&&(o=f.x,a=f.y,c=l.x,h=l.y)),w=m(o,a),E=m(c,h);if(w&&E&&w.part==E.part){T(),d(),w=m(o,a).elm,g(w,"colSpan",c-o+1),g(w,"rowSpan",h-a+1);for(b=a;b<=h;b++)for(v=o;v<=c;v++){if(!u[b]||!u[b][v])continue;t=u[b][v].elm,t!=w&&(x=e.grep(t.childNodes),r(x,function(e){w.appendChild(e)}),x.length&&(x=e.grep(w.childNodes),N=0,r(x,function(e){e.nodeName=="BR"&&p.getAttrib(e,"data-mce-bogus")&&N++<x.length-1&&w.removeChild(e)})),p.remove(t))}S()}}function C(e){var n,s,o,a,f,l,c,h,d;r(u,function(t,i){r(t,function(t){if(y(t)){t=t.elm,f=t.parentNode,l=v(f,!1),n=i;if(e)return!1}});if(e)return!n});if(n===t)return;for(a=0;a<u[0].length;a++){if(!u[n][a])continue;s=u[n][a].elm;if(s!=o){if(!e){d=i(s,"rowspan");if(d>1){g(s,"rowSpan",d+1);continue}}else if(n>0&&u[n-1][a]){h=u[n-1][a].elm,d=i(h,"rowSpan");if(d>1){g(h,"rowSpan",d+1);continue}}c=E(s),g(c,"colSpan",s.colSpan),l.appendChild(c),o=s}}l.hasChildNodes()&&(e?f.parentNode.insertBefore(l,f):p.insertAfter(l,f))}function k(e){var t,n;r(u,function(n){r(n,function(n,r){if(y(n)){t=r;if(e)return!1}});if(e)return!t}),r(u,function(r,s){var o,u,a;if(!r[t])return;o=r[t].elm,o!=n&&(a=i(o,"colspan"),u=i(o,"rowspan"),a==1?e?(o.parentNode.insertBefore(E(o),o),x(t,s,u-1,a)):(p.insertAfter(E(o),o),x(t,s,u-1,a)):g(o,"colSpan",o.colSpan+1),n=o)})}function L(){var t=[];r(u,function(n){r(n,function(n,s){y(n)&&e.inArray(t,s)===-1&&(r(u,function(e){var t=e[s].elm,n;n=i(t,"colSpan"),n>1?g(t,"colSpan",n-1):p.remove(t)}),t.push(s))})}),S()}function A(){function t(e){var t,n;r(e.cells,function(e){var n=i(e,"rowSpan");n>1&&(g(e,"rowSpan",n-1),t=D(e),x(t.x,t.y,1,1))}),t=D(e.cells[0]),r(u[t.y],function(e){var t;e=e.elm,e!=n&&(t=i(e,"rowSpan"),t<=1?p.remove(e):g(e,"rowSpan",t-1),n=e)})}var e;e=b(),r(e.reverse(),function(e){t(e)}),S()}function O(){var e=b();return p.remove(e),S(),e}function M(){var e=b();return r(e,function(t,n){e[n]=v(t,!0)}),e}function _(e,t){var n=b(),i=n[t?0:n.length-1],s=i.cells.length;if(!e)return;r(u,function(e){var t;s=0,r(e,function(e){e.real&&(s+=e.colspan),e.elm.parentNode==i&&(t=1)});if(t)return!1}),t||e.reverse(),r(e,function(e){var n,r=e.cells.length,o;for(n=0;n<r;n++)o=e.cells[n],g(o,"colSpan",1),g(o,"rowSpan",1);for(n=r;n<s;n++)e.appendChild(E(e.cells[r-1]));for(n=s;n<r;n++)p.remove(e.cells[n]);t?i.parentNode.insertBefore(e,i):p.insertAfter(e,i)}),p.removeClass(p.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected")}function D(e){var t;return r(u,function(n,i){return r(n,function(n,r){if(n.elm==e)return t={x:r,y:i},!1}),!t}),t}function P(e){f=D(e)}function H(){var e,t;return e=t=0,r(u,function(n,i){r(n,function(n,r){var s,o;y(n)&&(n=u[i][r],r>e&&(e=r),i>t&&(t=i),n.real&&(s=n.colspan-1,o=n.rowspan-1,s&&r+s>e&&(e=r+s),o&&i+o>t&&(t=i+o)))})}),{x:e,y:t}}function B(e){var t,n,r,i,s,o,a,c,h,d;l=D(e);if(f&&l){t=Math.min(f.x,l.x),n=Math.min(f.y,l.y),r=Math.max(f.x,l.x),i=Math.max(f.y,l.y),s=r,o=i;for(d=n;d<=o;d++)e=u[d][t],e.real||t-(e.colspan-1)<t&&(t-=e.colspan-1);for(h=t;h<=s;h++)e=u[n][h],e.real||n-(e.rowspan-1)<n&&(n-=e.rowspan-1);for(d=n;d<=i;d++)for(h=t;h<=r;h++)e=u[d][h],e.real&&(a=e.colspan-1,c=e.rowspan-1,a&&h+a>s&&(s=h+a),c&&d+c>o&&(o=d+c));p.removeClass(p.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected");for(d=n;d<=o;d++)for(h=t;h<=s;h++)u[d][h]&&p.addClass(u[d][h].elm,"mce-item-selected")}}function j(e,t){var n,r,i;n=D(e),r=n.y*a+n.x;do{r+=t,i=m(r%a,Math.floor(r/a));if(!i)break;if(i.elm!=e)return h.select(i.elm,!0),p.isEmpty(i.elm)&&h.collapse(!0),!0}while(i.elm==e);return!1}var u,a,f,l,c,h=s.selection,p=h.dom;o=o||p.getParent(h.getStart(),"table"),d(),c=p.getParent(h.getStart(),"th,td"),c&&(f=D(c),l=H(),c=m(f.x,f.y)),e.extend(this,{deleteTable:w,split:T,merge:N,insertRow:C,insertCol:k,deleteCols:L,deleteRows:A,cutRows:O,copyRows:M,pasteRows:_,getPos:D,setStartCell:P,setEndCell:B,moveRelIdx:j,refresh:d})}}),i("tinymce/tableplugin/Quirks",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools"],function(e,t,n){function i(e,t){return parseInt(e.getAttribute(t)||1,10)}var r=n.each;return function(n){function s(){function t(t){function o(e,r){var i=e?"previousSibling":"nextSibling",s=n.dom.getParent(r,"tr"),o=s[i];if(o)return g(n,r,o,e),t.preventDefault(),!0;var a=n.dom.getParent(s,"table"),c=s.parentNode,h=c.nodeName.toLowerCase();if(h==="tbody"||h===(e?"tfoot":"thead")){var p=u(e,a,c,"tbody");if(p!==null)return f(e,p,r)}return l(e,s,i,a)}function u(e,t,r,i){var s=n.dom.select(">"+i,t),o=s.indexOf(r);if(e&&o===0||!e&&o===s.length-1)return a(e,t);if(o===-1){var u=r.tagName.toLowerCase()==="thead"?0:s.length-1;return s[u]}return s[o+(e?-1:1)]}function a(e,t){var r=e?"thead":"tfoot",i=n.dom.select(">"+r,t);return i.length!==0?i[0]:null}function f(e,r,i){var s=c(r,e);return s&&g(n,i,s,e),t.preventDefault(),!0}function l(e,r,i,s){var u=s[i];if(u)return h(u),!0;var a=n.dom.getParent(s,"td,th");if(a)return o(e,a,t);var f=c(r,!e);return h(f),t.preventDefault(),!1}function c(e,t){var r=e&&e[t?"lastChild":"firstChild"];return r&&r.nodeName==="BR"?n.dom.getParent(r,"td,th"):r}function h(e){n.selection.setCursorLocation(e,0)}function p(){return s==e.UP||s==e.DOWN}function d(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"tr");return n!==null}function v(e){var t=0,n=e;while(n.previousSibling)n=n.previousSibling,t+=i(n,"colspan");return t}function m(e,t){var n=0,s=0;return r(e.children,function(e,r){n+=i(e,"colspan"),s=r;if(n>t)return!1}),s}function g(e,t,r,i){var s=v(n.dom.getParent(t,"td,th")),o=m(r,s),u=r.childNodes[o],a=c(u,i);h(a||u)}function y(e){var t=n.selection.getNode(),r=n.dom.getParent(t,"td,th"),i=n.dom.getParent(e,"td,th");return r&&r!==i&&b(r,i)}function b(e,t){return n.dom.getParent(e,"TABLE")===n.dom.getParent(t,"TABLE")}var s=t.keyCode;if(p()&&d(n)){var w=n.selection.getNode();setTimeout(function(){y(w)&&o(!t.shiftKey&&s===e.UP,w,t)},0)}}n.on("KeyDown",function(e){t(e)})}function o(){function e(e,t){var n=t.ownerDocument,r=n.createRange(),i;return r.setStartBefore(t),r.setEnd(e.endContainer,e.endOffset),i=n.createElement("body"),i.appendChild(r.cloneContents()),i.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length===0}n.on("KeyDown",function(t){var r,i,s=n.dom;if(t.keyCode==37||t.keyCode==38)r=n.selection.getRng(),i=s.getParent(r.startContainer,"table"),i&&n.getBody().firstChild==i&&e(r,i)&&(r=s.createRng(),r.setStartBefore(i),r.setEndBefore(i),n.selection.setRng(r),t.preventDefault())})}function u(){n.on("KeyDown SetContent VisualAid",function(){var e;for(e=n.getBody().lastChild;e;e=e.previousSibling)if(e.nodeType==3){if(e.nodeValue.length>0)break}else if(e.nodeType==1&&(e.tagName=="BR"||!e.getAttribute("data-mce-bogus")))break;e&&e.nodeName=="TABLE"&&(n.settings.forced_root_block?n.dom.add(n.getBody(),n.settings.forced_root_block,n.settings.forced_root_block_attrs,t.ie&&t.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):n.dom.add(n.getBody(),"br",{"data-mce-bogus":"1"}))}),n.on("PreProcess",function(e){var t=e.node.lastChild;t&&(t.nodeName=="BR"||t.childNodes.length==1&&(t.firstChild.nodeName=="BR"||t.firstChild.nodeValue==" "))&&t.previousSibling&&t.previousSibling.nodeName=="TABLE"&&n.dom.remove(t)})}function a(){function e(e,t,n,r){var i=3,s=e.dom.getParent(t.startContainer,"TABLE"),o,u,a;return s&&(o=s.parentNode),u=t.startContainer.nodeType==i&&t.startOffset===0&&t.endOffset===0&&r&&(n.nodeName=="TR"||n==o),a=(n.nodeName=="TD"||n.nodeName=="TH")&&!r,u||a}function t(){var t=n.selection.getRng(),r=n.selection.getNode(),i=n.dom.getParent(t.startContainer,"TD,TH");if(!e(n,t,r,i))return;i||(i=r);var s=i.lastChild;while(s.lastChild)s=s.lastChild;s.nodeType==3&&(t.setEnd(s,s.data.length),n.selection.setRng(t))}n.on("KeyDown",function(){t()}),n.on("MouseDown",function(e){e.button!=2&&t()})}function f(){n.on("keydown",function(t){if((t.keyCode==e.DELETE||t.keyCode==e.BACKSPACE)&&!t.isDefaultPrevented()){var r=n.dom.getParent(n.selection.getStart(),"table");if(r){var i=n.dom.select("td,th",r),s=i.length;while(s--)if(!n.dom.hasClass(i[s],"mce-item-selected"))return;t.preventDefault(),n.execCommand("mceTableDelete")}}})}f(),t.webkit&&(s(),a()),t.gecko&&(o(),u()),t.ie>10&&(o(),u())}}),i("tinymce/tableplugin/CellSelection",["tinymce/tableplugin/TableGrid","tinymce/dom/TreeWalker","tinymce/util/Tools"],function(e,t,n){return function(r){function l(e){r.getBody().style.webkitUserSelect="";if(e||a)r.dom.removeClass(r.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),a=!1}function c(t){var n,l,c=t.target;if(f)return;if(o&&(s||c!=o)&&(c.nodeName=="TD"||c.nodeName=="TH")){l=i.getParent(c,"table"),l==u&&(s||(s=new e(r,l),s.setStartCell(o),r.getBody().style.webkitUserSelect="none"),s.setEndCell(c),a=!0),n=r.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(h){}t.preventDefault()}}var i=r.dom,s,o,u,a=!0,f;return r.on("MouseDown",function(e){e.button!=2&&!f&&(l(),o=i.getParent(e.target,"td,th"),u=i.getParent(o,"table"))}),r.on("mouseover",c),r.on("remove",function(){i.unbind(r.getDoc(),"mouseover",c)}),r.on("MouseUp",function(){function p(r,i){var s=new t(r,r);do{if(r.nodeType==3&&n.trim(r.nodeValue).length!==0){i?e.setStart(r,0):e.setEnd(r,r.nodeValue.length);return}if(r.nodeName=="BR"){i?e.setStartBefore(r):e.setEndBefore(r);return}}while(r=i?s.next():s.prev())}var e,a=r.selection,f,l,c,h;if(o){s&&(r.getBody().style.webkitUserSelect=""),f=i.select("td.mce-item-selected,th.mce-item-selected");if(f.length>0){e=i.createRng(),c=f[0],e.setStartBefore(c),e.setEndAfter(c),p(c,1),l=new t(c,i.getParent(f[0],"table"));do if(c.nodeName=="TD"||c.nodeName=="TH"){if(!i.hasClass(c,"mce-item-selected"))break;h=c}while(c=l.next());p(h),a.setRng(e)}r.nodeChanged(),o=s=u=null}}),r.on("KeyUp Drop SetContent",function(e){l(e.type=="setcontent"),o=s=u=null,f=!1}),r.on("ObjectResizeStart ObjectResized",function(e){f=e.type!="objectresized"}),{clear:l}}}),i("tinymce/tableplugin/Dialogs",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each;return function(r){function s(){var e=r.settings.color_picker_callback;if(e)return function(){var t=this;e.call(r,function(e){t.value(e).fire("change")},t.value())}}function o(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){h(e,this.parents().reverse()[0],this.name()=="style")}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:s()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:s()}]}]}}function u(e){return e?e.replace(/px$/,""):""}function a(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function f(e){n("left center right".split(" "),function(t){r.formatter.remove("align"+t,{},e)})}function l(e){n("top middle bottom".split(" "),function(t){r.formatter.remove("valign"+t,{},e)})}function c(t,n,r){function i(t,r){return r=r||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=i(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r}return i(t,r||[])}function h(e,t,n){var r=t.toJSON(),i=e.parseStyle(r.style);n?(t.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change")):(i["border-color"]=r.borderColor,i["background-color"]=r.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(i))))}function p(e,t,n){var r=e.parseStyle(e.getAttrib(n,"style"));r["border-color"]&&(t.borderColor=r["border-color"]),r["background-color"]&&(t.backgroundColor=r["background-color"]),t.style=e.serializeStyle(r)}var i=this;i.tableProps=function(){i.table(!0)},i.table=function(i){function b(){var n;h(s,this),g=e.extend(g,this.toJSON()),e.each("backgroundColor borderColor".split(" "),function(e){delete g[e]}),g["class"]===!1&&delete g["class"],r.undoManager.transact(function(){l||(l=r.plugins.table.insertTable(g.cols||1,g.rows||1)),r.dom.setAttribs(l,{cellspacing:g.cellspacing,cellpadding:g.cellpadding,border:g.border,style:g.style,"class":g["class"]}),s.getAttrib(l,"width")?s.setAttrib(l,"width",u(g.width)):s.setStyle(l,"width",a(g.width)),s.setStyle(l,"height",a(g.height)),n=s.select("caption",l)[0],n&&!g.caption&&s.remove(n),!n&&g.caption&&(n=s.create("caption"),n.innerHTML=t.ie?" ":'<br data-mce-bogus="1"/>',l.insertBefore(n,l.firstChild)),f(l),g.align&&r.formatter.apply("align"+g.align,{},l),r.focus(),r.addVisual()})}var s=r.dom,l,d,v,m,g={},y;i===!0?(l=s.getParent(r.selection.getStart(),"table"),l&&(g={width:u(s.getStyle(l,"width")||s.getAttrib(l,"width")),height:u(s.getStyle(l,"height")||s.getAttrib(l,"height")),cellspacing:l?s.getAttrib(l,"cellspacing"):"",cellpadding:l?s.getAttrib(l,"cellpadding"):"",border:l?s.getAttrib(l,"border"):"",caption:!!s.select("caption",l)[0],"class":s.getAttrib(l,"class")},n("left center right".split(" "),function(e){r.formatter.matchNode(l,"align"+e)&&(g.align=e)}))):(d={label:"Cols",name:"cols"},v={label:"Rows",name:"rows"}),r.settings.table_class_list&&(g["class"]&&(g["class"]=g["class"].replace(/\s*mce\-item\-table\s*/g,"")),m={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"table",classes:[e.value]})})})}),y={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[d,v,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},m]},r.settings.table_advtab!==!1?(p(s,g,l),r.windowManager.open({title:"Table properties",data:g,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},o(s)],onsubmit:b})):r.windowManager.open({title:"Table properties",data:g,body:y,onsubmit:b})},i.merge=function(e,t){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();r.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},i.cell=function(){function m(){h(t,this),s=e.extend(s,this.toJSON()),r.undoManager.transact(function(){n(v,function(e){r.dom.setAttribs(e,{scope:s.scope,style:s.style,"class":s["class"]}),r.dom.setStyles(e,{width:a(s.width),height:a(s.height)}),s.type&&e.nodeName.toLowerCase()!=s.type&&(e=t.rename(e,s.type)),f(e),s.align&&r.formatter.apply("align"+s.align,{},e),l(e),s.valign&&r.formatter.apply("valign"+s.valign,{},e)}),r.focus()})}var t=r.dom,i,s,d,v=[];v=r.dom.select("td.mce-item-selected,th.mce-item-selected"),i=r.dom.getParent(r.selection.getStart(),"td,th"),!v.length&&i&&v.push(i),i=i||v[0];if(!i)return;s={width:u(t.getStyle(i,"width")||t.getAttrib(i,"width")),height:u(t.getStyle(i,"height")||t.getAttrib(i,"height")),scope:t.getAttrib(i,"scope"),"class":t.getAttrib(i,"class")},s.type=i.nodeName.toLowerCase(),n("left center right".split(" "),function(e){r.formatter.matchNode(i,"align"+e)&&(s.align=e)}),n("top middle bottom".split(" "),function(e){r.formatter.matchNode(i,"valign"+e)&&(s.valign=e)}),r.settings.table_cell_class_list&&(d={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"td",classes:[e.value]})})})});var g={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},d]};r.settings.table_cell_advtab!==!1?(p(t,s,i),r.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:s,body:[{title:"General",type:"form",items:g},o(t)],onsubmit:m})):r.windowManager.open({title:"Cell properties",data:s,body:g,onsubmit:m})},i.row=function(){function y(){var i,s,o;h(t,this),v=e.extend(v,this.toJSON()),r.undoManager.transact(function(){var e=v.type;n(m,function(n){r.dom.setAttribs(n,{scope:v.scope,style:v.style,"class":v["class"]}),r.dom.setStyles(n,{height:a(v.height)}),e!=n.parentNode.nodeName.toLowerCase()&&(i=t.getParent(n,"table"),s=n.parentNode,o=t.select(e,i)[0],o||(o=t.create(e),i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o)),o.appendChild(n),s.hasChildNodes()||t.remove(s)),f(n),v.align&&r.formatter.apply("align"+v.align,{},n)}),r.focus()})}var t=r.dom,i,s,l,d,v,m=[],g;i=r.dom.getParent(r.selection.getStart(),"table"),s=r.dom.getParent(r.selection.getStart(),"td,th"),n(i.rows,function(e){n(e.cells,function(n){if(t.hasClass(n,"mce-item-selected")||n==s)return m.push(e),!1})}),l=m[0];if(!l)return;v={height:u(t.getStyle(l,"height")||t.getAttrib(l,"height")),scope:t.getAttrib(l,"scope"),"class":t.getAttrib(l,"class")},v.type=l.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){r.formatter.matchNode(l,"align"+e)&&(v.align=e)}),r.settings.table_row_class_list&&(d={name:"class",type:"listbox",label:"Class",values:c(r.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"tr",classes:[e.value]})})})}),g={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},d]},r.settings.table_row_advtab!==!1?(p(t,v,l),r.windowManager.open({title:"Row properties",data:v,bodyType:"tabpanel",body:[{title:"General",type:"form",items:g},o(t)],onsubmit:y})):r.windowManager.open({title:"Row properties",data:v,body:g,onsubmit:y})}}}),i("tinymce/tableplugin/Plugin",["tinymce/tableplugin/TableGrid","tinymce/tableplugin/Quirks","tinymce/tableplugin/CellSelection","tinymce/tableplugin/Dialogs","tinymce/util/Tools","tinymce/dom/TreeWalker","tinymce/Env","tinymce/PluginManager"],function(e,t,n,r,i,s,o,u){function f(i){function l(e){return function(){i.execCommand(e)}}function c(e,t){var n,r,s,u;s='<table id="__mce"><tbody>';for(n=0;n<t;n++){s+="<tr>";for(r=0;r<e;r++)s+="<td>"+(o.ie?" ":"<br>")+"</td>";s+="</tr>"}return s+="</tbody></table>",i.undoManager.transact(function(){i.insertContent(s),u=i.dom.get("__mce"),i.dom.setAttrib(u,"id",null),i.dom.setAttribs(u,i.settings.table_default_attributes||{}),i.dom.setStyles(u,i.settings.table_default_styles||{})}),u}function h(e,t){function n(){e.disabled(!i.dom.getParent(i.selection.getStart(),t)),i.selection.selectorChanged(t,function(t){e.disabled(!t)})}i.initialized?n():i.on("init",n)}function p(){h(this,"table")}function d(){h(this,"td,th")}function v(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(t*10+n)+'" href="#" '+'data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>',e}function m(e,t,n){var r=n.getEl().getElementsByTagName("table")[0],s,o,u,a,f,l=n.isRtl()||n.parent().rel=="tl-tr";r.nextSibling.innerHTML=e+1+" x "+(t+1),l&&(e=9-e);for(o=0;o<10;o++)for(s=0;s<10;s++)a=r.rows[o].childNodes[s].firstChild,f=(l?s>=e:s<=e)&&o<=t,i.dom.toggleClass(a,"mce-active",f),f&&(u=a);return u.parentNode}var s,u=this,f=new r(i);i.settings.table_grid===!1?i.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:f.table}):i.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),f.table())},onshow:function(){m(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");i.dom.removeClass(e,"mce-active"),i.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:v(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t=e.target,n,r;if(t.tagName.toUpperCase()=="A"){n=parseInt(t.getAttribute("data-mce-x"),10),r=parseInt(t.getAttribute("data-mce-y"),10);if(this.isRtl()||this.parent().rel=="tl-tr")n=9-n;if(n!==this.lastX||r!==this.lastY)m(n,r,e.control),this.lastX=n,this.lastY=r}},onclick:function(e){var t=this;e.target.tagName.toUpperCase()=="A"&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),i.undoManager.transact(function(){c(t.lastX+1,t.lastY+1)}),i.addVisual())}}]}),i.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:p,onclick:f.tableProps}),i.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:p,cmd:"mceTableDelete"}),i.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:l("mceTableCellProps"),onPostRender:d},{text:"Merge cells",onclick:l("mceTableMergeCells"),onPostRender:d},{text:"Split cell",onclick:l("mceTableSplitCells"),onPostRender:d}]}),i.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:l("mceTableInsertRowBefore"),onPostRender:d},{text:"Insert row after",onclick:l("mceTableInsertRowAfter"),onPostRender:d},{text:"Delete row",onclick:l("mceTableDeleteRow"),onPostRender:d},{text:"Row properties",onclick:l("mceTableRowProps"),onPostRender:d},{text:"-"},{text:"Cut row",onclick:l("mceTableCutRow"),onPostRender:d},{text:"Copy row",onclick:l("mceTableCopyRow"),onPostRender:d},{text:"Paste row before",onclick:l("mceTablePasteRowBefore"),onPostRender:d},{text:"Paste row after",onclick:l("mceTablePasteRowAfter"),onPostRender:d}]}),i.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:l("mceTableInsertColBefore"),onPostRender:d},{text:"Insert column after",onclick:l("mceTableInsertColAfter"),onPostRender:d},{text:"Delete column",onclick:l("mceTableDeleteCol"),onPostRender:d}]});var g=[];a("inserttable tableprops deletetable | cell row column".split(" "),function(e){e=="|"?g.push({text:"-"}):g.push(i.menuItems[e])}),i.addButton("table",{type:"menubutton",title:"Table",menu:g}),o.isIE||i.on("click",function(e){e=e.target,e.nodeName==="TABLE"&&(i.selection.select(e),i.nodeChanged())}),u.quirks=new t(i),i.on("Init",function(){u.cellSelection=new n(i)}),a({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t;t=i.dom.getParent(i.selection.getStart(),"th,td"),i.dom.select("td.mce-item-selected,th.mce-item-selected").length?e.merge():f.merge(e,t)},mceTableInsertRowBefore:function(e){e.insertRow(!0)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(!0)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){s=e.cutRows()},mceTableCopyRow:function(e){s=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(s,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(s)},mceTableDelete:function(e){e.deleteTable()}},function(t,n){i.addCommand(n,function(){var n=new e(i);n&&(t(n),i.execCommand("mceRepaint"),u.cellSelection.clear())})}),a({mceInsertTable:f.table,mceTableProps:function(){f.table(!0)},mceTableRowProps:f.row,mceTableCellProps:f.cell},function(e,t){i.addCommand(t,function(t,n){e(n)})}),i.settings.table_tab_navigation!==!1&&i.on("keydown",function(t){var n,r,s;t.keyCode==9&&(n=i.dom.getParent(i.selection.getStart(),"th,td"),n&&(t.preventDefault(),r=new e(i),s=t.shiftKey?-1:1,i.undoManager.transact(function(){!r.moveRelIdx(n,s)&&s>0&&(r.insertRow(),r.refresh(),r.moveRelIdx(n,s))})))}),u.insertTable=c}var a=i.each;u.add("table",f)})})(this)}.apply(e,arguments)})}(this),function(e){define("tinymce-template",["tinymce"],function(){return function(){tinymce.PluginManager.add("template",function(e){function n(t){return function(){var n=e.settings.templates;typeof n=="string"?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):t(n)}}function r(t){function s(t){function s(t){if(t.indexOf("<html>")==-1){var r="";tinymce.each(e.contentCSS,function(t){r+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'}),t="<!DOCTYPE html><html><head>"+r+"</head>"+"<body>"+t+"</body>"+"</html>"}t=o(t,"template_preview_replace_values");var i=n.find("iframe")[0].getEl().contentWindow.document;i.open(),i.write(t),i.close()}var r=t.control.value();r.url?tinymce.util.XHR.send({url:r.url,success:function(e){i=e,s(i)}}):(i=r.content,s(i)),n.find("#description")[0].text(t.control.value().description)}var n,r=[],i;if(!t||t.length===0){e.windowManager.alert("No templates defined");return}tinymce.each(t,function(e){r.push({selected:!r.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})}),n=e.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:r,onselect:s}}]},{type:"label",name:"description",label:"Description",text:" "},{type:"iframe",flex:1,border:1}],onsubmit:function(){u(!1,i)},width:e.getParam("template_popup_width",600),height:e.getParam("template_popup_height",500)}),n.find("listbox")[0].fire("select")}function i(t,n){function u(e,t){e=""+e;if(e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),i="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),s="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),o="January February March April May June July August September October November December".split(" ");return n=n||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+n.getFullYear()),t=t.replace("%y",""+n.getYear()),t=t.replace("%m",u(n.getMonth()+1,2)),t=t.replace("%d",u(n.getDate(),2)),t=t.replace("%H",""+u(n.getHours(),2)),t=t.replace("%M",""+u(n.getMinutes(),2)),t=t.replace("%S",""+u(n.getSeconds(),2)),t=t.replace("%I",""+((n.getHours()+11)%12+1)),t=t.replace("%p",""+(n.getHours()<12?"AM":"PM")),t=t.replace("%B",""+e.translate(o[n.getMonth()])),t=t.replace("%b",""+e.translate(s[n.getMonth()])),t=t.replace("%A",""+e.translate(i[n.getDay()])),t=t.replace("%a",""+e.translate(r[n.getDay()])),t=t.replace("%%","%"),t}function s(n){var r=e.dom,i=e.getParam("template_replace_values");t(r.select("*",n),function(e){t(i,function(t,n){r.hasClass(e,n)&&typeof i[n]=="function"&&i[n](e)})})}function o(n,r){return t(e.getParam(r),function(e,t){typeof e!="function"&&(n=n.replace(new RegExp("\\{\\$"+t+"\\}","g"),e))}),n}function u(n,r){function c(e,t){return(new RegExp("\\b"+t+"\\b","g")).test(e.className)}var u,a,f=e.dom,l=e.selection.getContent();r=o(r,"template_replace_values"),u=f.create("div",null,r),a=f.select(".mceTmpl",u),a&&a.length>0&&(u=f.create("div",null),u.appendChild(a[0].cloneNode(!0))),t(f.select("*",u),function(t){c(t,e.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(t.innerHTML=i(e.getParam("template_cdate_format",e.getLang("template.cdate_format")))),c(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=i(e.getParam("template_mdate_format",e.getLang("template.mdate_format")))),c(t,e.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(t.innerHTML=l)}),s(u),e.execCommand("mceInsertContent",!1,u.innerHTML),e.addVisual()}var t=tinymce.each;e.addCommand("mceInsertTemplate",u),e.addButton("template",{title:"Insert template",onclick:n(r)}),e.addMenuItem("template",{text:"Insert template",onclick:n(r),context:"insert"}),e.on("PreProcess",function(n){var r=e.dom;t(r.select("div",n.node),function(n){r.hasClass(n,"mceTmpl")&&(t(r.select("*",n),function(t){r.hasClass(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=i(e.getParam("template_mdate_format",e.getLang("template.mdate_format"))))}),s(n))})})})}.apply(e,arguments)})}(this),function(e){define("tinymce-textcolor",["tinymce"],function(){return function(){tinymce.PluginManager.add("textcolor",function(e){function r(t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;if(r=e.style[t=="forecolor"?"color":"background-color"])n=r}),n}function i(){var t,n=[],r;r=e.settings.textcolor_map||["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"];for(t=0;t<r.length;t+=2)n.push({text:r[t+1],color:"#"+r[t]});return n}function s(){function d(e,t){var n=e=="transparent";return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'">'+'<div id="'+h+"-"+p++ +'"'+' data-mce-color="'+(e?e:"")+'"'+' role="option"'+' tabIndex="-1"'+' style="'+(e?"background-color: "+e:"")+'"'+' title="'+tinymce.translate(t)+'">'+(n?"&#215;":"")+"</div>"+"</td>"}var r=this,s,o,u,a,f,l,c,h=r._id,p=0;s=i(),s.push({text:tinymce.translate("No color"),color:"transparent"}),u='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=s.length-1;for(l=0;l<n;l++){u+="<tr>";for(f=0;f<t;f++)c=l*t+f,c>a?u+="<td></td>":(o=s[c],u+=d(o.color,o.text));u+="</tr>"}if(e.settings.color_picker_callback){u+='<tr><td colspan="'+t+'" class="mce-custom-color-btn">'+'<div id="'+h+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" '+'role="button" tabindex="-1" aria-labelledby="'+h+'-c" style="width: 100%">'+'<button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"</button>"+"</div>"+"</td>"+"</tr>",u+="<tr>";for(f=0;f<t;f++)u+=d("","Custom color");u+="</tr>"}return u+="</tbody></table>",u}function o(t,n){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()}function u(t){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()}function a(n){function a(e){i.hidePanel(),i.color(e),o(i.settings.format,e)}function f(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)}var i=this.parent(),s;tinymce.DOM.getParent(n.target,".mce-custom-color-btn")&&(i.hidePanel(),e.settings.color_picker_callback.call(e,function(e){var n=i.panel.getEl().getElementsByTagName("table")[0],r,s,o;r=tinymce.map(n.rows[n.rows.length-1].childNodes,function(e){return e.firstChild});for(o=0;o<r.length;o++){s=r[o];if(!s.getAttribute("data-mce-color"))break}if(o==t)for(o=0;o<t-1;o++)f(r[o],r[o+1].getAttribute("data-mce-color"));f(s,e),a(e)},r(i.settings.format))),s=n.target.getAttribute("data-mce-color");if(s){this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),n.target.setAttribute("aria-selected",!0),this.lastId=n.target.id;if(s=="transparent"){u(i.settings.format),i.hidePanel();return}a(s)}else s!==null&&i.hidePanel()}function f(){var e=this;e._color&&o(e.settings.format,e._color)}var t,n;n=e.settings.textcolor_rows||5,t=e.settings.textcolor_cols||8,e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:s,onclick:a},onclick:f}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:s,onclick:a},onclick:f})})}.apply(e,arguments)})}(this),function(e){define("tinymce-textpattern",["tinymce"],function(){return function(){tinymce.PluginManager.add("textpattern",function(e){function r(){return t&&(n.sort(function(e,t){return e.start.length>t.start.length?-1:e.start.length<t.start.length?1:0}),t=!1),n}function i(e){var t=r();for(var n=0;n<t.length;n++){if(e.indexOf(t[n].start)!==0)continue;if(t[n].end&&e.lastIndexOf(t[n].end)!=e.length-t[n].end.length)continue;return t[n]}}function s(e,t,n){var i,s,o;i=r();for(o=0;o<i.length;o++){s=i[o];if(s.end&&e.substr(t-s.end.length-n,s.end.length)==s.end)return s}}function o(t){function v(){u=u.splitText(f),u.splitText(a-f-p),u.deleteData(0,h.start.length),u.deleteData(u.data.length-h.end.length,h.end.length)}var n,r,o,u,a,f,l,c,h,p,d;n=e.selection,r=e.dom;if(!n.isCollapsed())return;o=n.getRng(!0),u=o.startContainer,a=o.startOffset,l=u.data,p=t?1:0;if(u.nodeType!=3)return;h=s(l,a,p);if(!h)return;f=Math.max(0,a-p),f=l.lastIndexOf(h.start,f-h.end.length-1);if(f===-1)return;c=r.createRng(),c.setStart(u,f),c.setEnd(u,a-p),h=i(c.toString());if(!h||!h.end)return;if(u.data.length<=h.start.length+h.end.length)return;d=e.formatter.get(h.format);if(d&&d[0].inline)return v(),e.formatter.apply(h.format,{},u),u}function u(){var t,n,r,s,o,u,a,f,l,c,h;t=e.selection,n=e.dom;if(!t.isCollapsed())return;a=n.getParent(t.getStart(),"p");if(a){l=new tinymce.dom.TreeWalker(a,a);while(o=l.next())if(o.nodeType==3){s=o;break}if(s){f=i(s.data);if(!f)return;c=t.getRng(!0),r=c.startContainer,h=c.startOffset,s==r&&(h=Math.max(0,h-f.start.length));if(tinymce.trim(s.data).length==f.start.length)return;f.format&&(u=e.formatter.get(f.format),u&&u[0].block&&(s.deleteData(0,f.start.length),e.formatter.apply(f.format,{},s),c.setStart(r,h),c.collapse(!0),t.setRng(c))),f.cmd&&e.undoManager.transact(function(){s.deleteData(0,f.start.length),e.execCommand(f.cmd)})}}}function a(){var t,n;n=o(),n&&(t=e.dom.createRng(),t.setStart(n,n.data.length),t.setEnd(n,n.data.length),e.selection.setRng(t)),u()}function f(){var t,n,r,i,s;t=o(!0),t&&(s=e.dom,n=t.data.slice(-1),/[\u00a0 ]/.test(n)&&(t.deleteData(t.data.length-1,1),r=s.doc.createTextNode(n),t.nextSibling?s.insertAfter(r,t.nextSibling):t.parentNode.appendChild(r),i=s.createRng(),i.setStart(r,1),i.setEnd(r,1),e.selection.setRng(i)))}var t=!0,n;n=e.settings.textpattern_patterns||[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],e.on("keydown",function(e){e.keyCode==13&&!tinymce.util.VK.modifierPressed(e)&&a()},!0),e.on("keyup",function(e){e.keyCode==32&&!tinymce.util.VK.modifierPressed(e)&&f()}),this.getPatterns=r,this.setPatterns=function(e){n=e,t=!0}})}.apply(e,arguments)})}(this),function(e){define("tinymce-visualblocks",["tinymce"],function(){return function(){tinymce.PluginManager.add("visualblocks",function(e,t){function s(){var t=this;t.active(i),e.on("VisualBlocks",function(){t.active(e.dom.hasClass(e.getBody(),"mce-visualblocks"))})}var n,r,i;if(!window.NodeList)return;e.addCommand("mceVisualBlocks",function(){var s=e.dom,o;n||(n=s.uniqueId(),o=s.create("link",{id:n,rel:"stylesheet",href:t+"/css/visualblocks.css"}),e.getDoc().getElementsByTagName("head")[0].appendChild(o)),e.on("PreviewFormats AfterPreviewFormats",function(t){i&&s.toggleClass(e.getBody(),"mce-visualblocks",t.type=="afterpreviewformats")}),s.toggleClass(e.getBody(),"mce-visualblocks"),i=e.dom.hasClass(e.getBody(),"mce-visualblocks"),r&&r.active(s.hasClass(e.getBody(),"mce-visualblocks")),e.fire("VisualBlocks")}),e.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:s}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:s,selectable:!0,context:"view",prependToContext:!0}),e.on("init",function(){e.settings.visualblocks_default_state&&e.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),e.on("remove",function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")})})}.apply(e,arguments)})}(this),function(e){define("tinymce-visualchars",["tinymce"],function(){return function(){tinymce.PluginManager.add("visualchars",function(e){function r(r){var i,s,o,u=e.getBody(),a,f=e.selection,l,c;n=!n,t.state=n,e.fire("VisualChars",{state:n}),r&&(c=f.getBookmark());if(n){s=[],tinymce.walk(u,function(e){e.nodeType==3&&e.nodeValue&&e.nodeValue.indexOf(" ")!=-1&&s.push(e)},"childNodes");for(o=0;o<s.length;o++){a=s[o].nodeValue,a=a.replace(/(\u00a0)/g,'<span data-mce-bogus="1" class="mce-nbsp">$1</span>'),l=e.dom.create("div",null,a);while(i=l.lastChild)e.dom.insertAfter(i,s[o]);e.dom.remove(s[o])}}else{s=e.dom.select("span.mce-nbsp",u);for(o=s.length-1;o>=0;o--)e.dom.remove(s[o],1)}f.moveToBookmark(c)}function i(){var t=this;e.on("VisualChars",function(e){t.active(e.state)})}var t=this,n;e.addCommand("mceVisualChars",r),e.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:i}),e.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:i,selectable:!0,context:"view",prependToContext:!0}),e.on("beforegetcontent",function(e){n&&e.format!="raw"&&!e.draft&&(n=!0,r(!1))})})}.apply(e,arguments)})}(this),function(e){define("tinymce-wordcount",["tinymce"],function(){return function(){tinymce.PluginManager.add("wordcount",function(e){function i(){e.theme.panel.find("#wordcount").text(["Words: {0}",t.getCount()])}var t=this,n,r;n=e.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g),r=e.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g),e.on("init",function(){var n=e.theme.panel&&e.theme.panel.find("#statusbar")[0];n&&window.setTimeout(function(){n.insert({type:"label",name:"wordcount",text:["Words: {0}",t.getCount()],classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo",i),e.on("keyup",function(e){e.keyCode==32&&i()})},0)}),t.getCount=function(){var t=e.getContent({format:"raw"}),i=0;if(t){t=t.replace(/\.\.\./g," "),t=t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),t=t.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," "),t=t.replace(r,"");var s=t.match(n);s&&(i=s.length)}return i}})}.apply(e,arguments)})}(this),define("mockup-patterns-tinymce",["jquery","underscore","mockup-patterns-base","mockup-patterns-relateditems","mockup-patterns-modal","tinymce","mockup-patterns-autotoc","text!js/patterns/tinymce/templates/result.xml","text!js/patterns/tinymce/templates/selection.xml","mockup-utils","js/patterns/tinymce/links","tinymce-modern-theme","tinymce-advlist","tinymce-anchor","tinymce-autolink","tinymce-autoresize","tinymce-autosave","tinymce-bbcode","tinymce-charmap","tinymce-code","tinymce-colorpicker","tinymce-contextmenu","tinymce-directionality","tinymce-emoticons","tinymce-fullpage","tinymce-fullscreen","tinymce-hr","tinymce-image","tinymce-importcss","tinymce-insertdatetime","tinymce-layer","tinymce-legacyoutput","tinymce-link","tinymce-lists","tinymce-media","tinymce-nonbreaking","tinymce-noneditable","tinymce-pagebreak","tinymce-paste","tinymce-preview","tinymce-print","tinymce-save","tinymce-searchreplace","tinymce-spellchecker","tinymce-tabfocus","tinymce-table","tinymce-template","tinymce-textcolor","tinymce-textpattern","tinymce-visualblocks","tinymce-visualchars","tinymce-wordcount"],function(e,t,n,r,i,s,o,u,a,f,l){var c=n.extend({name:"tinymce",defaults:{upload:{uploadMultiple:!1,maxFiles:1,showTitle:!1},relatedItems:{attributes:["UID","Title","Description","getURL","Type","path","ModificationDate"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,placeholder:"Search for item on site..."},text:{insertBtn:"Insert",cancelBtn:"Cancel",insertHeading:"Insert link",title:"Title",internal:"Internal",external:"External",email:"Email",anchor:"Anchor",subject:"Subject",image:"Image",imageAlign:"Align",scale:"Size",alt:"Alternative Text",externalImage:"External Image URI"},prependToUrl:"",appendToUrl:"",linkAttribute:"path",prependToScalePart:"/imagescale/",appendToScalePart:"",scales:"Listing (16x16):listing,Icon (32x32):icon,Tile (64x64):tile,Thumb (128x128):thumb,Mini (200x200):mini,Preview (400x400):preview,Large (768x768):large",targetList:[{text:"Open in this window / frame",value:""},{text:"Open in new window",value:"_blank"},{text:"Open in parent window / frame",value:"_parent"},{text:"Open in top frame (replaces all frames)",value:"_top"}],imageTypes:"Image",folderTypes:"Folder,Plone Site",linkableTypes:"Document,Event,File,Folder,Image,News Item,Topic",tiny:{content_css:"++resource++plone-tinymce-content.css",plugins:["advlist autolink lists charmap print preview anchor","searchreplace visualblocks code fullscreen autoresize","insertdatetime media table contextmenu paste plonelink ploneimage"],menubar:"edit table format tools view insert",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | unlink plonelink ploneimage",autoresize_max_height:1500}},addLinkClicked:function(){var t=this;if(t.linkModal===null){var n=e("<div/>").insertAfter(t.$el);t.linkModal=new l(n,e.extend(!0,{},t.options,{tinypattern:t,linkTypes:["internal","upload","external","email","anchor"]})),t.linkModal.show()}else t.linkModal.reinitialize(),t.linkModal.show()},addImageClicked:function(){var t=this;if(t.imageModal===null){var n=e.extend(!0,{},t.options,{tinypattern:t,linkTypes:["image","uploadImage","externalImage"],initialLinkType:"image",text:{insertHeading:"Insert Image"},relatedItems:{baseCriteria:[{i:"Type",o:"plone.app.querystring.operation.list.contains",v:t.options.imageTypes.split(",").concat(t.options.folderTypes.split(","))}],selectableTypes:t.options.imageTypes.split(","),resultTemplate:u,selectionTemplate:a}}),r=e("<div/>").insertAfter(t.$el);t.imageModal=new l(r,n),t.imageModal.show()}else t.imageModal.reinitialize(),t.imageModal.show()},generateUrl:function(e){var t=this,n=e[t.options.linkAttribute];return t.options.prependToUrl+n+t.options.appendToUrl},generateImageUrl:function(e,t){var n=this,r=n.generateUrl(e);return t!==""&&(r=r+n.options.prependToScalePart+t+n.options.appendToScalePart),r},stripGeneratedUrl:function(e){var t=this;e=e.split(t.options.prependToScalePart,2)[0];if(t.options.prependToUrl){var n=e.split(t.options.prependToUrl,2);n.length===2&&(e=n[1])}return t.options.appendToUrl&&(e=e.split(t.options.appendToUrl)[0]),e},getScaleFromUrl:function(e){var t=this,n=e.split(t.options.prependToScalePart),r=n[0];return n.length!==2?null:(t.options.appendToScalePart?e=n[1].split(t.options.appendToScalePart)[0]:e=n[1],e.indexOf("/image_")!==-1&&(e=e.split("/image_")[1]),e)},init:function(){var e=this;e.linkModal=e.imageModal=e.uploadModal=null;var t=f.setId(e.$el),n=e.options.tiny;n.selector="#"+t,n.addLinkClicked=function(){e.addLinkClicked.apply(e,[])},n.addImageClicked=function(){e.addImageClicked.apply(e,[])},n.skin=!1,n.init_instance_callback=function(t){if(e.tiny===undefined||e.tiny===null)e.tiny=t},e.options.relatedItems.generateImageUrl=function(t,n){return e.generateImageUrl.apply(e,[t,n])},s.init(n),e.tiny=s.get(t);var r=e.$el.parents("form");r.on("submit",function(){e.tiny.save()})}});return c}),define("mockup-bundles-widgets",["jquery","mockup-registry","mockup-patterns-base","mockup-patterns-select2","mockup-patterns-pickadate","mockup-patterns-relateditems","mockup-patterns-querystring","mockup-patterns-tinymce"],function(e,t,n){var r=n.extend({name:"plone-widgets",init:function(){var e=this}});return window.parent===window&&e(document).ready(function(){e("body").addClass("pat-plone-widgets"),t.scan(e("body"))}),r}),require(["mockup-bundles-widgets"]);